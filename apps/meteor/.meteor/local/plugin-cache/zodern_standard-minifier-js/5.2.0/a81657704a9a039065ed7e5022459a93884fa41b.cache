{"code":"function module(t,r,e){\"use strict\";var i=t(\"../utils\"),d=t(\"bn.js\"),s=t(\"inherits\"),u=t(\"./base\"),h=i.assert;function n(t){this.twisted=(0|t.a)!=1,this.mOneA=this.twisted&&(0|t.a)==-1,this.extended=this.mOneA,u.call(this,\"edwards\",t),this.a=new d(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new d(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new d(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),h(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=(0|t.c)==1}function o(t,r,e,i,s){u.BasePoint.call(this,t,\"projective\"),null===r&&null===e&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new d(r,16),this.y=new d(e,16),this.z=i?new d(i,16):this.curve.one,this.t=s&&new d(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,!this.curve.extended||this.t||(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}s(n,u),e.exports=n,n.prototype._mulA=function t(t){return this.mOneA?t.redNeg():this.a.redMul(t)},n.prototype._mulC=function t(t){return this.oneC?t:this.c.redMul(t)},n.prototype.jpoint=function t(t,r,e,i){return this.point(t,r,e,i)},n.prototype.pointFromX=function t(t,r){(t=new d(t,16)).red||(t=t.toRed(this.red));var e=t.redSqr(),i=this.c2.redSub(this.a.redMul(e)),s=this.one.redSub(this.c2.redMul(this.d).redMul(e)),u=i.redMul(s.redInvm()),h=u.redSqrt();if(0!==h.redSqr().redSub(u).cmp(this.zero))throw Error(\"invalid point\");var n=h.fromRed().isOdd();return(r&&!n||!r&&n)&&(h=h.redNeg()),this.point(t,h)},n.prototype.pointFromY=function t(t,r){(t=new d(t,16)).red||(t=t.toRed(this.red));var e=t.redSqr(),i=e.redSub(this.c2),s=e.redMul(this.d).redMul(this.c2).redSub(this.a),u=i.redMul(s.redInvm());if(0===u.cmp(this.zero)){if(!r)return this.point(this.zero,t);throw Error(\"invalid point\")}var h=u.redSqrt();if(0!==h.redSqr().redSub(u).cmp(this.zero))throw Error(\"invalid point\");return h.fromRed().isOdd()!==r&&(h=h.redNeg()),this.point(h,t)},n.prototype.validate=function t(t){if(t.isInfinity())return!0;t.normalize();var r=t.x.redSqr(),e=t.y.redSqr(),i=r.redMul(this.a).redAdd(e),d=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(e)));return 0===i.cmp(d)},s(o,u.BasePoint),n.prototype.pointFromJSON=function t(t){return o.fromJSON(this,t)},n.prototype.point=function t(t,r,e,i){return new o(this,t,r,e,i)},o.fromJSON=function t(t,r){return new o(t,r[0],r[1],r[2])},o.prototype.inspect=function t(){return this.isInfinity()?\"<EC Point Infinity>\":\"<EC Point x: \"+this.x.fromRed().toString(16,2)+\" y: \"+this.y.fromRed().toString(16,2)+\" z: \"+this.z.fromRed().toString(16,2)+\">\"},o.prototype.isInfinity=function t(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},o.prototype._extDbl=function t(){var t=this.x.redSqr(),r=this.y.redSqr(),e=this.z.redSqr();e=e.redIAdd(e);var i=this.curve._mulA(t),d=this.x.redAdd(this.y).redSqr().redISub(t).redISub(r),s=i.redAdd(r),u=s.redSub(e),h=i.redSub(r),n=d.redMul(u),o=s.redMul(h),c=d.redMul(h),l=u.redMul(s);return this.curve.point(n,o,l,c)},o.prototype._projDbl=function t(){var t,r,e,i,d,s,u=this.x.redAdd(this.y).redSqr(),h=this.x.redSqr(),n=this.y.redSqr();if(this.curve.twisted){var o=(i=this.curve._mulA(h)).redAdd(n);this.zOne?(t=u.redSub(h).redSub(n).redMul(o.redSub(this.curve.two)),r=o.redMul(i.redSub(n)),e=o.redSqr().redSub(o).redSub(o)):(d=this.z.redSqr(),s=o.redSub(d).redISub(d),t=u.redSub(h).redISub(n).redMul(s),r=o.redMul(i.redSub(n)),e=o.redMul(s))}else i=h.redAdd(n),d=this.curve._mulC(this.z).redSqr(),s=i.redSub(d).redSub(d),t=this.curve._mulC(u.redISub(i)).redMul(s),r=this.curve._mulC(i).redMul(h.redISub(n)),e=i.redMul(s);return this.curve.point(t,r,e)},o.prototype.dbl=function t(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},o.prototype._extAdd=function t(t){var r=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),e=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),i=this.t.redMul(this.curve.dd).redMul(t.t),d=this.z.redMul(t.z.redAdd(t.z)),s=e.redSub(r),u=d.redSub(i),h=d.redAdd(i),n=e.redAdd(r),o=s.redMul(u),c=h.redMul(n),l=s.redMul(n),p=u.redMul(h);return this.curve.point(o,c,p,l)},o.prototype._projAdd=function t(t){var r,e,i=this.z.redMul(t.z),d=i.redSqr(),s=this.x.redMul(t.x),u=this.y.redMul(t.y),h=this.curve.d.redMul(s).redMul(u),n=d.redSub(h),o=d.redAdd(h),c=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(s).redISub(u),l=i.redMul(n).redMul(c);return this.curve.twisted?(r=i.redMul(o).redMul(u.redSub(this.curve._mulA(s))),e=n.redMul(o)):(r=i.redMul(o).redMul(u.redSub(s)),e=this.curve._mulC(n).redMul(o)),this.curve.point(l,r,e)},o.prototype.add=function t(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},o.prototype.mul=function t(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},o.prototype.mulAdd=function t(t,r,e){return this.curve._wnafMulAdd(1,[this,r],[t,e],2,!1)},o.prototype.jmulAdd=function t(t,r,e){return this.curve._wnafMulAdd(1,[this,r],[t,e],2,!0)},o.prototype.normalize=function t(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},o.prototype.neg=function t(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},o.prototype.getX=function t(){return this.normalize(),this.x.fromRed()},o.prototype.getY=function t(){return this.normalize(),this.y.fromRed()},o.prototype.eq=function t(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},o.prototype.eqXToP=function t(t){var r=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(r))return!0;for(var e=t.clone(),i=this.curve.redN.redMul(this.z);;){if(e.iadd(this.curve.n),e.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},o.prototype.toP=o.prototype.normalize,o.prototype.mixedAdd=o.prototype.add}","map":"{\"version\":3,\"sources\":[\"<anon>\"],\"names\":[],\"mappings\":\"\"}"}