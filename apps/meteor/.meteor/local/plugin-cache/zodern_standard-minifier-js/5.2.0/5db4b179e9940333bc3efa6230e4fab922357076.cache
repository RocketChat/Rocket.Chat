{"code":"function module(t,e,n){\"use strict\";var r=t(\"bn.js\"),i=t(\"../utils\"),o=i.getNAF,s=i.getJSF,p=i.assert;function h(t,e){this.type=t,this.p=new r(e.p,16),this.red=e.prime?r.red(e.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=e.n&&new r(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=[,,,,],this._wnafT2=[,,,,],this._wnafT3=[,,,,],this._wnafT4=[,,,,],this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function d(t,e){this.curve=t,this.type=e,this.precomputed=null}n.exports=h,h.prototype.point=function t(){throw Error(\"Not implemented\")},h.prototype.validate=function t(){throw Error(\"Not implemented\")},h.prototype._fixedNafMul=function t(t,e){p(t.precomputed);var n,r,i=t._getDoubles(),s=o(e,1,this._bitLength),h=(1<<i.step+1)-(i.step%2==0?2:1);h/=3;var d=[];for(n=0;n<s.length;n+=i.step){r=0;for(var u=n+i.step-1;u>=n;u--)r=(r<<1)+s[u];d.push(r)}for(var l=this.jpoint(null,null,null),a=this.jpoint(null,null,null),f=h;f>0;f--){for(n=0;n<d.length;n++)(r=d[n])===f?a=a.mixedAdd(i.points[n]):r===-f&&(a=a.mixedAdd(i.points[n].neg()));l=l.add(a)}return l.toP()},h.prototype._wnafMul=function t(t,e){var n=4,r=t._getNAFPoints(n);n=r.wnd;for(var i=r.points,s=o(e,n,this._bitLength),h=this.jpoint(null,null,null),d=s.length-1;d>=0;d--){for(var u=0;d>=0&&0===s[d];d--)u++;if(d>=0&&u++,h=h.dblp(u),d<0)break;var l=s[d];p(0!==l),h=\"affine\"===t.type?l>0?h.mixedAdd(i[l-1>>1]):h.mixedAdd(i[-l-1>>1].neg()):l>0?h.add(i[l-1>>1]):h.add(i[-l-1>>1].neg())}return\"affine\"===t.type?h.toP():h},h.prototype._wnafMulAdd=function t(t,e,n,r,i){var p,h,d,u=this._wnafT1,l=this._wnafT2,a=this._wnafT3,f=0;for(p=0;p<r;p++){var c=(d=e[p])._getNAFPoints(t);u[p]=c.wnd,l[p]=c.points}for(p=r-1;p>=1;p-=2){var g=p-1,m=p;if(1!==u[g]||1!==u[m]){a[g]=o(n[g],u[g],this._bitLength),a[m]=o(n[m],u[m],this._bitLength),f=Math.max(a[g].length,f),f=Math.max(a[m].length,f);continue}var v=[e[g],null,null,e[m]];0===e[g].y.cmp(e[m].y)?(v[1]=e[g].add(e[m]),v[2]=e[g].toJ().mixedAdd(e[m].neg())):0===e[g].y.cmp(e[m].y.redNeg())?(v[1]=e[g].toJ().mixedAdd(e[m]),v[2]=e[g].add(e[m].neg())):(v[1]=e[g].toJ().mixedAdd(e[m]),v[2]=e[g].toJ().mixedAdd(e[m].neg()));var y=[-3,-1,-5,-7,0,7,5,1,3],b=s(n[g],n[m]);for(h=0,f=Math.max(b[0].length,f),a[g]=Array(f),a[m]=Array(f);h<f;h++){var _=0|b[0][h],w=0|b[1][h];a[g][h]=y[(_+1)*3+(w+1)],a[m][h]=0,l[g]=v}}var A=this.jpoint(null,null,null),x=this._wnafT4;for(p=f;p>=0;p--){for(var N=0;p>=0;){var L=!0;for(h=0;h<r;h++)x[h]=0|a[h][p],0!==x[h]&&(L=!1);if(!L)break;N++,p--}if(p>=0&&N++,A=A.dblp(N),p<0)break;for(h=0;h<r;h++){var P=x[h];0!==P&&(P>0?d=l[h][P-1>>1]:P<0&&(d=l[h][-P-1>>1].neg()),A=\"affine\"===d.type?A.mixedAdd(d):A.add(d))}}for(p=0;p<r;p++)l[p]=null;return i?A:A.toP()},h.BasePoint=d,d.prototype.eq=function t(){throw Error(\"Not implemented\")},d.prototype.validate=function t(){return this.curve.validate(this)},h.prototype.decodePoint=function t(t,e){t=i.toArray(t,e);var n=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*n)return 6===t[0]?p(t[t.length-1]%2==0):7===t[0]&&p(t[t.length-1]%2==1),this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));if((2===t[0]||3===t[0])&&t.length-1===n)return this.pointFromX(t.slice(1,1+n),3===t[0]);throw Error(\"Unknown point format\")},d.prototype.encodeCompressed=function t(t){return this.encode(t,!0)},d.prototype._encode=function t(t){var e=this.curve.p.byteLength(),n=this.getX().toArray(\"be\",e);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray(\"be\",e))},d.prototype.encode=function t(t,e){return i.encode(this._encode(e),t)},d.prototype.precompute=function t(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},d.prototype._hasDoubles=function t(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},d.prototype._getDoubles=function t(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)r=r.dbl();n.push(r)}return{step:t,points:n}},d.prototype._getNAFPoints=function t(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],n=(1<<t)-1,r=1===n?null:this.dbl(),i=1;i<n;i++)e[i]=e[i-1].add(r);return{wnd:t,points:e}},d.prototype._getBeta=function t(){return null},d.prototype.dblp=function t(t){for(var e=this,n=0;n<t;n++)e=e.dbl();return e}}","map":"{\"version\":3,\"sources\":[\"<anon>\"],\"names\":[],\"mappings\":\"\"}"}