{"code":"function module(t,e,i){var n;n=function(t){\"use strict\";function e(t,e){function i(t){clearTimeout(n.doRedraw),n.doRedraw=setTimeout(function(){n.redraw()},t)}this.cm=t,this.options=e,this.buttonHeight=e.scrollButtonHeight||t.getOption(\"scrollButtonHeight\"),this.annotations=[],this.doRedraw=this.doUpdate=null,this.div=t.getWrapperElement().appendChild(document.createElement(\"div\")),this.div.style.cssText=\"position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none\",this.computeScale();var n=this;t.on(\"refresh\",this.resizeHandler=function(){clearTimeout(n.doUpdate),n.doUpdate=setTimeout(function(){n.computeScale()&&i(20)},100)}),t.on(\"markerAdded\",this.resizeHandler),t.on(\"markerCleared\",this.resizeHandler),!1!==e.listenForChanges&&t.on(\"changes\",this.changeHandler=function(){i(250)})}t.defineExtension(\"annotateScrollbar\",function(t){return\"string\"==typeof t&&(t={className:t}),new e(this,t)}),t.defineOption(\"scrollButtonHeight\",0),e.prototype.computeScale=function(){var t=this.cm,e=(t.getWrapperElement().clientHeight-t.display.barHeight-2*this.buttonHeight)/t.getScrollerElement().scrollHeight;if(e!=this.hScale)return this.hScale=e,!0},e.prototype.update=function(t){this.annotations=t,this.redraw()},e.prototype.redraw=function(t){!1!==t&&this.computeScale();var e=this.cm,i=this.hScale,n=document.createDocumentFragment(),o=this.annotations,r=e.getOption(\"lineWrapping\"),a=r&&1.5*e.defaultTextHeight(),s=null,h=null;function l(t,i){if(s!=t.line){s=t.line,h=e.getLineHandle(t.line);var n=e.getLineHandleVisualStart(h);n!=h&&(s=e.getLineNumber(n),h=n)}return h.widgets&&h.widgets.length||r&&h.height>a?e.charCoords(t,\"local\")[i?\"top\":\"bottom\"]:e.heightAtLine(h,\"local\")+(i?0:h.height)}var d=e.lastLine();if(e.display.barWidth)for(var c,p=0;p<o.length;p++){var u=o[p];if(!(u.to.line>d)){for(var f=c||l(u.from,!0)*i,m=l(u.to,!1)*i;p<o.length-1&&!(o[p+1].to.line>d||(c=l(o[p+1].from,!0)*i)>m+.9);)m=l((u=o[++p]).to,!1)*i;if(m!=f){var g=Math.max(m-f,3),H=n.appendChild(document.createElement(\"div\"));H.style.cssText=\"position: absolute; right: 0px; width: \"+Math.max(e.display.barWidth-1,2)+\"px; top: \"+(f+this.buttonHeight)+\"px; height: \"+g+\"px\",H.className=this.options.className,u.id&&H.setAttribute(\"annotation-id\",u.id)}}}this.div.textContent=\"\",this.div.appendChild(n)},e.prototype.clear=function(){this.cm.off(\"refresh\",this.resizeHandler),this.cm.off(\"markerAdded\",this.resizeHandler),this.cm.off(\"markerCleared\",this.resizeHandler),this.changeHandler&&this.cm.off(\"changes\",this.changeHandler),this.div.parentNode.removeChild(this.div)}},\"object\"==typeof e&&\"object\"==typeof i?n(t(\"../../lib/codemirror\")):\"function\"==typeof define&&define.amd?define([\"../../lib/codemirror\"],n):n(CodeMirror)}","map":"{\"version\":3,\"sources\":[\"<anon>\"],\"names\":[],\"mappings\":\"\"}"}