{"code":"function module(e,r,n){let t;n.export({ChromeScreenShare:()=>i}),n.link(\"../../../client/lib/utils/fireGlobalEvent\",{fireGlobalEvent(e){t=e}},0);let i={callbacks:{},installed:!1,init(){this.callbacks[\"get-RocketChatScreenSharingExtensionVersion\"]=e=>{e&&(this.installed=!0)},window.postMessage(\"get-RocketChatScreenSharingExtensionVersion\",\"*\")},getSourceId(e,r){if(null==r)throw Error('\"callback\" parameter is mandatory.');return(this.callbacks.getSourceId=r,\"electron\"===e)?t(\"get-sourceId\",\"*\"):window.postMessage(\"get-sourceId\",\"*\")}};i.init(),window.addEventListener(\"message\",e=>{if(e.origin===window.location.origin){if(\"PermissionDeniedError\"===e.data){if(null!=i.callbacks.getSourceId)return i.callbacks.getSourceId(\"PermissionDeniedError\");throw Error(\"PermissionDeniedError\")}if(null!=e.data.version)i.callbacks[\"get-RocketChatScreenSharingExtensionVersion\"]&&i.callbacks[\"get-RocketChatScreenSharingExtensionVersion\"](e.data.version);else if(null!=e.data.sourceId)return\"function\"==typeof i.callbacks.getSourceId&&i.callbacks.getSourceId(e.data.sourceId)}})}","map":"{\"version\":3,\"sources\":[\"app/webrtc/client/screenShare.js\",\"<anon>\"],\"sourcesContent\":[\"import { fireGlobalEvent } from '../../../client/lib/utils/fireGlobalEvent';\\n\\nexport const ChromeScreenShare = {\\n\\tcallbacks: {},\\n\\tinstalled: false,\\n\\tinit() {\\n\\t\\tthis.callbacks['get-RocketChatScreenSharingExtensionVersion'] = (version) => {\\n\\t\\t\\tif (version) {\\n\\t\\t\\t\\tthis.installed = true;\\n\\t\\t\\t}\\n\\t\\t};\\n\\t\\twindow.postMessage('get-RocketChatScreenSharingExtensionVersion', '*');\\n\\t},\\n\\tgetSourceId(navigator, callback) {\\n\\t\\tif (callback == null) {\\n\\t\\t\\tthrow new Error('\\\"callback\\\" parameter is mandatory.');\\n\\t\\t}\\n\\t\\tthis.callbacks.getSourceId = callback;\\n\\t\\tif (navigator === 'electron') {\\n\\t\\t\\treturn fireGlobalEvent('get-sourceId', '*');\\n\\t\\t}\\n\\t\\treturn window.postMessage('get-sourceId', '*');\\n\\t},\\n};\\n\\nChromeScreenShare.init();\\n\\nwindow.addEventListener('message', (e) => {\\n\\tif (e.origin !== window.location.origin) {\\n\\t\\treturn;\\n\\t}\\n\\tif (e.data === 'PermissionDeniedError') {\\n\\t\\tif (ChromeScreenShare.callbacks.getSourceId != null) {\\n\\t\\t\\treturn ChromeScreenShare.callbacks.getSourceId('PermissionDeniedError');\\n\\t\\t}\\n\\t\\tthrow new Error('PermissionDeniedError');\\n\\t}\\n\\tif (e.data.version != null) {\\n\\t\\tChromeScreenShare.callbacks['get-RocketChatScreenSharingExtensionVersion'] &&\\n\\t\\t\\tChromeScreenShare.callbacks['get-RocketChatScreenSharingExtensionVersion'](e.data.version);\\n\\t} else if (e.data.sourceId != null) {\\n\\t\\treturn typeof ChromeScreenShare.callbacks.getSourceId === 'function' && ChromeScreenShare.callbacks.getSourceId(e.data.sourceId);\\n\\t}\\n});\\n\",null],\"names\":[\"fireGlobalEvent\",\"module\",\"export\",\"ChromeScreenShare\",\"link\",\"v\",\"callbacks\",\"installed\",\"init\",\"version\",\"window\",\"postMessage\",\"getSourceId\",\"navigator\",\"callback\",\"Error\",\"addEventListener\",\"e\",\"origin\",\"location\",\"data\",\"sourceId\"],\"mappings\":\"2BAA6DA,EAA7DC,EAAOC,MAAM,CAAC,CAACC,kBAAkBA,IAAIA,CAAiB,GAAuBF,EAAOG,IAAI,CAAC,4CAA4C,CAACJ,gBAAgBK,CAAC,EAAEL,EAAgBK,CAAC,CAAC,EAAE,GAEtK,IAAMF,EAAoB,CAChCG,UAAW,CAAC,EACZC,UAAW,CAAA,EACXC,OACC,IAAI,CAACF,SAAS,CAAC,8CAA8C,CAAIG,IAC5DA,GACH,CAAA,IAAI,CAACF,SAAS,CAAG,CAAA,CAAA,CAEnB,EACAG,OAAOC,WAAW,CAAC,8CAA+C,IACnE,EACAC,YAAYC,CAAS,CAAEC,CAAQ,EAC9B,GAAIA,AAAY,MAAZA,EACH,MAAM,AAAIC,MAAM,4CAGjB,CADA,IAAI,CAACT,SAAS,CAACM,WAAW,CAAGE,EACzBD,AAAc,aAAdA,GACIb,EAAgB,eAAgB,KAEjCU,OAAOC,WAAW,CAAC,eAAgB,IAC3C,CACD,EAEAR,EAAkBK,IAAI,GAEtBE,OAAOM,gBAAgB,CAAC,UAAYC,IACnC,GAAIA,EAAEC,MAAM,GAAKR,OAAOS,QAAQ,CAACD,MAAM,EAGvC,GAAID,AAAW,0BAAXA,EAAEG,IAAI,CAA8B,CACvC,GAAIjB,AAA2C,MAA3CA,EAAkBG,SAAS,CAACM,WAAW,CAC1C,OAAOT,EAAkBG,SAAS,CAACM,WAAW,CAAC,wBAEhD,OAAM,AAAIG,MAAM,wBACjB,CACA,GAAIE,AAAkB,MAAlBA,EAAEG,IAAI,CAACX,OAAO,CACjBN,EAAkBG,SAAS,CAAC,8CAA8C,EACzEH,EAAkBG,SAAS,CAAC,8CAA8C,CAACW,EAAEG,IAAI,CAACX,OAAO,OACpF,GAAIQ,AAAmB,MAAnBA,EAAEG,IAAI,CAACC,QAAQ,CACzB,MAAO,AAAmD,YAAnD,OAAOlB,EAAkBG,SAAS,CAACM,WAAW,EAAmBT,EAAkBG,SAAS,CAACM,WAAW,CAACK,EAAEG,IAAI,CAACC,QAAQ,EAEjI\"}"}