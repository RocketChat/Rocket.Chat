{"code":"function module(t,e,i){var s,r;i.export({Subscription:function(){return a}}),i.link(\"./emitter\",{EmitterImpl:function(t){s=t}},0),i.link(\"./subscription-state\",{SubscriptionState:function(t){r=t}},1);class a{constructor(t,e={}){this._disposed=!1,this._state=r.Initial,this._logger=t.getLogger(\"sip.Subscription\"),this._stateEventEmitter=new s,this._userAgent=t,this.delegate=e.delegate}dispose(){return this._disposed||(this._disposed=!0,this._stateEventEmitter.removeAllListeners()),Promise.resolve()}get dialog(){return this._dialog}get disposed(){return this._disposed}get state(){return this._state}get stateChange(){return this._stateEventEmitter}stateTransition(t){let e=()=>{throw Error(`Invalid state transition from ${this._state} to ${t}`)};switch(this._state){case r.Initial:t!==r.NotifyWait&&t!==r.Terminated&&e();break;case r.NotifyWait:t!==r.Subscribed&&t!==r.Terminated&&e();break;case r.Subscribed:t!==r.Terminated&&e();break;case r.Terminated:e();break;default:throw Error(\"Unrecognized state.\")}this._state!==t&&(this._state=t,this._logger.log(`Subscription ${this._dialog?this._dialog.id:void 0} transitioned to ${this._state}`),this._stateEventEmitter.emit(this._state),t===r.Terminated&&this.dispose())}}}","map":"{\"version\":3,\"sources\":[\"<anon>\"],\"names\":[],\"mappings\":\"\"}"}