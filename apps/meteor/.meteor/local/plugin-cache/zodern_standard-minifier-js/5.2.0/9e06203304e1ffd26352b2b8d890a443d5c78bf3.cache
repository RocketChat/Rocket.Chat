{"code":"function module(t,e,n){let a,o,i;function s(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}n.link(\"./utils.js\",{defaults(t){a=t},makePromise(t){o=t}},0),n.link(\"./request.js\",{default(t){i=t}},1);var r=function(){var t,e;function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw TypeError(\"Cannot call a class as a function\")}(this,n),this.services=t,this.options=e,this.allOptions=a,this.type=\"backend\",this.init(t,e,a)}return t=[{key:\"init\",value:function t(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=t,this.options=a(n,this.options||{},{loadPath:\"/locales/{{lng}}/{{ns}}.json\",addPath:\"/locales/add/{{lng}}/{{ns}}\",allowMultiLoading:!1,parse:function t(t){return JSON.parse(t)},stringify:JSON.stringify,parsePayload:function t(t,e,n){var a,o;return a={},o=n||\"\",e in a?Object.defineProperty(a,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[e]=o,a},request:i,reloadInterval:\"undefined\"==typeof window&&36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:\"cors\",credentials:\"same-origin\",cache:\"default\"}}),this.allOptions=o,this.services&&this.options.reloadInterval&&setInterval(function(){return e.reload()},this.options.reloadInterval)}},{key:\"readMulti\",value:function t(t,e,n){this._readAny(t,t,e,e,n)}},{key:\"read\",value:function t(t,e,n){this._readAny([t],t,[e],e,n)}},{key:\"_readAny\",value:function t(t,e,n,a,i){var s=this,r=this.options.loadPath;\"function\"==typeof this.options.loadPath&&(r=this.options.loadPath(t,n)),(r=o(r)).then(function(o){if(!o)return i(null,{});var r=s.services.interpolator.interpolate(o,{lng:t.join(\"+\"),ns:n.join(\"+\")});s.loadUrl(r,i,e,a)})}},{key:\"loadUrl\",value:function t(t,e,n,a){var o=this;this.options.request(this.options,t,void 0,function(i,s){var r,l;if(s&&(s.status>=500&&s.status<600||!s.status))return e(\"failed loading \"+t+\"; status code: \"+s.status,!0);if(s&&s.status>=400&&s.status<500)return e(\"failed loading \"+t+\"; status code: \"+s.status,!1);if(!s&&i&&i.message&&i.message.indexOf(\"Failed to fetch\")>-1)return e(\"failed loading \"+t+\": \"+i.message,!0);if(i)return e(i,!1);try{r=\"string\"==typeof s.data?o.options.parse(s.data,n,a):s.data}catch(e){l=\"failed parsing \"+t+\" to json\"}if(l)return e(l,!1);e(null,r)})}},{key:\"create\",value:function t(t,e,n,a,o){var i=this;if(this.options.addPath){\"string\"==typeof t&&(t=[t]);var s=this.options.parsePayload(e,n,a),r=0,l=[],u=[];t.forEach(function(n){var a=i.options.addPath;\"function\"==typeof i.options.addPath&&(a=i.options.addPath(n,e));var c=i.services.interpolator.interpolate(a,{lng:n,ns:e});i.options.request(i.options,c,s,function(e,n){r+=1,l.push(e),u.push(n),r===t.length&&o&&o(l,u)})})}}},{key:\"reload\",value:function t(){var t=this,e=this.services,n=e.backendConnector,a=e.languageUtils,o=e.logger,i=n.language;if(!i||\"cimode\"!==i.toLowerCase()){var s=[],r=function t(t){a.toResolveHierarchy(t).forEach(function(t){0>s.indexOf(t)&&s.push(t)})};r(i),this.allOptions.preload&&this.allOptions.preload.forEach(function(t){return r(t)}),s.forEach(function(e){t.allOptions.ns.forEach(function(t){n.read(e,t,\"read\",null,null,function(a,i){a&&o.warn(\"loading namespace \".concat(t,\" for language \").concat(e,\" failed\"),a),!a&&i&&o.log(\"loaded namespace \".concat(t,\" for language \").concat(e),i),n.loaded(\"\".concat(e,\"|\").concat(t),a,i)})})})}}}],s(n.prototype,t),e&&s(n,e),Object.defineProperty(n,\"prototype\",{writable:!1}),n}();r.type=\"backend\",n.exportDefault(r)}","map":"{\"version\":3,\"sources\":[\"<anon>\"],\"names\":[],\"mappings\":\"\"}"}