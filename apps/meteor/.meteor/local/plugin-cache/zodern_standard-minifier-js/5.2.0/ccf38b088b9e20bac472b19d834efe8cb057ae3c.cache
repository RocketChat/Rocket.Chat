{"code":"function module(e,n,t){t.link(\"@babel/runtime/regenerator\",{default:function(e){i=e}},0),t.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){a=e}},1),t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){o=e}},2),t.export({KonchatNotification:function(){return h}}),t.link(\"@rocket.chat/random\",{Random:function(e){r=e}},0),t.link(\"meteor/meteor\",{Meteor:function(e){u=e}},1),t.link(\"meteor/reactive-var\",{ReactiveVar:function(e){s=e}},2),t.link(\"../../../../client/lib/RoomManager\",{RoomManager:function(e){c=e}},3),t.link(\"../../../../client/lib/onClientMessageReceived\",{onClientMessageReceived:function(e){l=e}},4),t.link(\"../../../../client/lib/utils/getAvatarAsPng\",{getAvatarAsPng:function(e){d=e}},5),t.link(\"../../../../client/providers/RouterProvider\",{router:function(e){f=e}},6),t.link(\"../../../../lib/utils/stringUtils\",{stripTags:function(e){p=e}},7),t.link(\"../../../custom-sounds/client/lib/CustomSounds\",{CustomSounds:function(e){m=e}},8),t.link(\"../../../e2e/client\",{e2e:function(e){v=e}},9),t.link(\"../../../models/client\",{ChatSubscription:function(e){b=e}},10),t.link(\"../../../utils/client\",{getUserPreference:function(e){y=e}},11),t.link(\"../../../utils/client/getUserAvatarURL\",{getUserAvatarURL:function(e){g=e}},12),t.link(\"../../../utils/client/lib/SDKClient\",{sdk:function(e){k=e}},13);var i,a,o,r,u,s,c,l,d,f,p,m,v,b,y,g,k,h=new(function(){function e(){this.notificationStatus=new s(void 0)}var n=e.prototype;return n.getDesktopPermission=function(){var e=this;if(window.Notification&&\"granted\"!==Notification.permission)return Notification.requestPermission(function(n){e.notificationStatus.set(n)})},n.notify=function(e){var n,t,a,s,c,d,m;return i.async(function(v){for(;;)switch(v.prev=v.next){case 0:if(!(void 0===window.Notification||\"granted\"!==Notification.permission)){v.next=2;break}return v.abrupt(\"return\");case 2:if(e.payload){v.next=4;break}return v.abrupt(\"return\");case 4:if(a=e.payload.rid){v.next=7;break}return v.abrupt(\"return\");case 7:return v.next=9,i.awrap(l({rid:a,msg:e.text,notification:!0}));case 9:s=v.sent,c=y(u.userId(),\"desktopNotificationRequireInteraction\"),d=new Notification(e.title,{icon:e.icon||g(null===(n=e.payload.sender)||void 0===n?void 0:n.username),body:p(s.msg),tag:e.payload._id,canReply:!0,silent:!0,requireInteraction:c}),(m=c?-1:(null!==(t=e.duration)&&void 0!==t?t:0)-0||10)>0&&setTimeout(function(){return d.close()},1e3*m),d.addEventListener&&d.addEventListener(\"reply\",function(e){var n=e.response;k.call(\"sendMessage\",{_id:r.id(),rid:a,msg:n})}),d.onclick=function(){var n;if(this.close(),window.focus(),e.payload._id&&e.payload.rid&&e.payload.name)switch(null===(n=e.payload)||void 0===n?void 0:n.type){case\"d\":return f.navigate({pattern:\"/direct/:rid/:tab?/:context?\",params:o({rid:e.payload.rid},e.payload.tmid&&{tab:\"thread\",context:e.payload.tmid}),search:o(o({},f.getSearchParameters()),{},{jump:e.payload._id})});case\"c\":return f.navigate({pattern:\"/channel/:name/:tab?/:context?\",params:o({name:e.payload.name},e.payload.tmid&&{tab:\"thread\",context:e.payload.tmid}),search:o(o({},f.getSearchParameters()),{},{jump:e.payload._id})});case\"p\":return f.navigate({pattern:\"/group/:name/:tab?/:context?\",params:o({name:e.payload.name},e.payload.tmid&&{tab:\"thread\",context:e.payload.tmid}),search:o(o({},f.getSearchParameters()),{},{jump:e.payload._id})});case\"l\":return f.navigate({pattern:\"/live/:id/:tab?/:context?\",params:{id:e.payload.rid,tab:\"room-info\"},search:o(o({},f.getSearchParameters()),{},{jump:e.payload._id})})}};case 16:case\"end\":return v.stop()}},null,null,null,Promise)},n.showDesktop=function(e){var n,t,a,o,r,s,l,f=this;return i.async(function(p){for(;;)switch(p.prev=p.next){case 0:if(e.payload.rid){p.next=2;break}return p.abrupt(\"return\");case 2:if(!((null===(t=e.payload)||void 0===t?void 0:t.rid)===c.opened&&(\"function\"==typeof window.document.hasFocus?window.document.hasFocus():void 0))){p.next=4;break}return p.abrupt(\"return\");case 4:if((null===(a=u.user())||void 0===a?void 0:a.status)!==\"busy\"){p.next=6;break}return p.abrupt(\"return\");case 6:if((null===(o=e.payload)||void 0===o?void 0:null===(r=o.message)||void 0===r?void 0:r.t)!==\"e2e\"){p.next=14;break}return p.next=9,i.awrap(v.getInstanceByRoomId(e.payload.rid));case 9:if(!(n=p.sent)){p.next=14;break}return p.next=13,i.awrap(n.decrypt(e.payload.message.msg));case 13:e.text=p.sent.text;case 14:return p.abrupt(\"return\",d(null===(s=e.payload)||void 0===s?void 0:null===(l=s.sender)||void 0===l?void 0:l.username,function(n){return e.icon=n,f.notify(e)}));case 15:case\"end\":return p.stop()}},null,null,null,Promise)},n.newMessage=function(e){var n,t,a,o,r;return i.async(function(i){for(;;)switch(i.prev=i.next){case 0:if((null===(n=u.user())||void 0===n?void 0:n.status)!==\"busy\"){i.next=2;break}return i.abrupt(\"return\");case 2:if(t=u.userId(),a=y(t,\"newMessageNotification\"),o=y(t,\"notificationsSoundVolume\",100),e){i.next=7;break}return i.abrupt(\"return\");case 7:if(!(!(r=b.findOne({rid:e},{fields:{audioNotificationValue:1}}))||\"none\"===r.audioNotificationValue)){i.next=10;break}return i.abrupt(\"return\");case 10:if(i.prev=10,!(r.audioNotificationValue&&\"0\"!==r.audioNotificationValue)){i.next=14;break}return m.play(r.audioNotificationValue,{volume:Number((o/100).toPrecision(2))}),i.abrupt(\"return\");case 14:a&&\"none\"!==a&&m.play(a,{volume:Number((o/100).toPrecision(2))}),i.next=19;break;case 17:i.prev=17,i.t0=i.catch(10);case 19:case\"end\":return i.stop()}},null,null,[[10,17]],Promise)},n.newRoom=function(e){Tracker.nonreactive(function(){var n=Session.get(\"newRoomSound\");return n=n?[].concat(a(n),[e]):[e],Session.set(\"newRoomSound\",n)})},n.removeRoomNotification=function(e){var n,t=null!==(n=Session.get(\"newRoomSound\"))&&void 0!==n?n:[];t=t.filter(function(n){return n!==e}),Tracker.nonreactive(function(){return Session.set(\"newRoomSound\",t)});var i=document.querySelector(\".link-room-\"+e);null==i||i.classList.remove(\"new-room-highlight\")},e}())}","map":"{\"version\":3,\"sources\":[\"app/ui/client/lib/KonchatNotification.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { INotificationDesktop, IRoom, IUser } from '@rocket.chat/core-typings';\\nimport { Random } from '@rocket.chat/random';\\nimport { Meteor } from 'meteor/meteor';\\nimport { ReactiveVar } from 'meteor/reactive-var';\\n\\nimport { RoomManager } from '../../../../client/lib/RoomManager';\\nimport { onClientMessageReceived } from '../../../../client/lib/onClientMessageReceived';\\nimport { getAvatarAsPng } from '../../../../client/lib/utils/getAvatarAsPng';\\nimport { router } from '../../../../client/providers/RouterProvider';\\nimport { stripTags } from '../../../../lib/utils/stringUtils';\\nimport { CustomSounds } from '../../../custom-sounds/client/lib/CustomSounds';\\nimport { e2e } from '../../../e2e/client';\\nimport { ChatSubscription } from '../../../models/client';\\nimport { getUserPreference } from '../../../utils/client';\\nimport { getUserAvatarURL } from '../../../utils/client/getUserAvatarURL';\\nimport { sdk } from '../../../utils/client/lib/SDKClient';\\n\\ndeclare global {\\n\\t// eslint-disable-next-line @typescript-eslint/naming-convention\\n\\tinterface NotificationEventMap {\\n\\t\\treply: { response: string };\\n\\t}\\n}\\n\\nclass KonchatNotification {\\n\\tpublic notificationStatus = new ReactiveVar<NotificationPermission | undefined>(undefined);\\n\\n\\tpublic getDesktopPermission() {\\n\\t\\tif (window.Notification && Notification.permission !== 'granted') {\\n\\t\\t\\treturn Notification.requestPermission((status) => {\\n\\t\\t\\t\\tthis.notificationStatus.set(status);\\n\\t\\t\\t});\\n\\t\\t}\\n\\t}\\n\\n\\tpublic async notify(notification: INotificationDesktop) {\\n\\t\\tif (typeof window.Notification === 'undefined' || Notification.permission !== 'granted') {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (!notification.payload) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst { rid } = notification.payload;\\n\\n\\t\\tif (!rid) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tconst message = await onClientMessageReceived({\\n\\t\\t\\trid,\\n\\t\\t\\tmsg: notification.text,\\n\\t\\t\\tnotification: true,\\n\\t\\t} as any);\\n\\n\\t\\tconst requireInteraction = getUserPreference<boolean>(Meteor.userId(), 'desktopNotificationRequireInteraction');\\n\\t\\tconst n = new Notification(notification.title, {\\n\\t\\t\\ticon: notification.icon || getUserAvatarURL(notification.payload.sender?.username as string),\\n\\t\\t\\tbody: stripTags(message.msg),\\n\\t\\t\\ttag: notification.payload._id,\\n\\t\\t\\tcanReply: true,\\n\\t\\t\\tsilent: true,\\n\\t\\t\\trequireInteraction,\\n\\t\\t} as NotificationOptions & {\\n\\t\\t\\tcanReply?: boolean; // TODO is this still needed for the desktop app?\\n\\t\\t});\\n\\n\\t\\tconst notificationDuration = !requireInteraction ? (notification.duration ?? 0) - 0 || 10 : -1;\\n\\t\\tif (notificationDuration > 0) {\\n\\t\\t\\tsetTimeout(() => n.close(), notificationDuration * 1000);\\n\\t\\t}\\n\\n\\t\\tif (n.addEventListener) {\\n\\t\\t\\tn.addEventListener(\\n\\t\\t\\t\\t'reply',\\n\\t\\t\\t\\t({ response }) =>\\n\\t\\t\\t\\t\\tvoid sdk.call('sendMessage', {\\n\\t\\t\\t\\t\\t\\t_id: Random.id(),\\n\\t\\t\\t\\t\\t\\trid,\\n\\t\\t\\t\\t\\t\\tmsg: response,\\n\\t\\t\\t\\t\\t}),\\n\\t\\t\\t);\\n\\t\\t}\\n\\n\\t\\tn.onclick = function () {\\n\\t\\t\\tthis.close();\\n\\t\\t\\twindow.focus();\\n\\n\\t\\t\\tif (!notification.payload._id || !notification.payload.rid || !notification.payload.name) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tswitch (notification.payload?.type) {\\n\\t\\t\\t\\tcase 'd':\\n\\t\\t\\t\\t\\treturn router.navigate({\\n\\t\\t\\t\\t\\t\\tpattern: '/direct/:rid/:tab?/:context?',\\n\\t\\t\\t\\t\\t\\tparams: {\\n\\t\\t\\t\\t\\t\\t\\trid: notification.payload.rid,\\n\\t\\t\\t\\t\\t\\t\\t...(notification.payload.tmid && {\\n\\t\\t\\t\\t\\t\\t\\t\\ttab: 'thread',\\n\\t\\t\\t\\t\\t\\t\\t\\tcontext: notification.payload.tmid,\\n\\t\\t\\t\\t\\t\\t\\t}),\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\tsearch: { ...router.getSearchParameters(), jump: notification.payload._id },\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\tcase 'c':\\n\\t\\t\\t\\t\\treturn router.navigate({\\n\\t\\t\\t\\t\\t\\tpattern: '/channel/:name/:tab?/:context?',\\n\\t\\t\\t\\t\\t\\tparams: {\\n\\t\\t\\t\\t\\t\\t\\tname: notification.payload.name,\\n\\t\\t\\t\\t\\t\\t\\t...(notification.payload.tmid && {\\n\\t\\t\\t\\t\\t\\t\\t\\ttab: 'thread',\\n\\t\\t\\t\\t\\t\\t\\t\\tcontext: notification.payload.tmid,\\n\\t\\t\\t\\t\\t\\t\\t}),\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\tsearch: { ...router.getSearchParameters(), jump: notification.payload._id },\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\tcase 'p':\\n\\t\\t\\t\\t\\treturn router.navigate({\\n\\t\\t\\t\\t\\t\\tpattern: '/group/:name/:tab?/:context?',\\n\\t\\t\\t\\t\\t\\tparams: {\\n\\t\\t\\t\\t\\t\\t\\tname: notification.payload.name,\\n\\t\\t\\t\\t\\t\\t\\t...(notification.payload.tmid && {\\n\\t\\t\\t\\t\\t\\t\\t\\ttab: 'thread',\\n\\t\\t\\t\\t\\t\\t\\t\\tcontext: notification.payload.tmid,\\n\\t\\t\\t\\t\\t\\t\\t}),\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\tsearch: { ...router.getSearchParameters(), jump: notification.payload._id },\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\tcase 'l':\\n\\t\\t\\t\\t\\treturn router.navigate({\\n\\t\\t\\t\\t\\t\\tpattern: '/live/:id/:tab?/:context?',\\n\\t\\t\\t\\t\\t\\tparams: {\\n\\t\\t\\t\\t\\t\\t\\tid: notification.payload.rid,\\n\\t\\t\\t\\t\\t\\t\\ttab: 'room-info',\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\tsearch: { ...router.getSearchParameters(), jump: notification.payload._id },\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t}\\n\\t\\t};\\n\\t}\\n\\n\\tpublic async showDesktop(notification: INotificationDesktop) {\\n\\t\\tif (!notification.payload.rid) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (\\n\\t\\t\\tnotification.payload?.rid === RoomManager.opened &&\\n\\t\\t\\t(typeof window.document.hasFocus === 'function' ? window.document.hasFocus() : undefined)\\n\\t\\t) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif ((Meteor.user() as IUser | null)?.status === 'busy') {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (notification.payload?.message?.t === 'e2e') {\\n\\t\\t\\tconst e2eRoom = await e2e.getInstanceByRoomId(notification.payload.rid);\\n\\t\\t\\tif (e2eRoom) {\\n\\t\\t\\t\\tnotification.text = (await e2eRoom.decrypt(notification.payload.message.msg)).text;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\treturn getAvatarAsPng(notification.payload?.sender?.username, (avatarAsPng) => {\\n\\t\\t\\tnotification.icon = avatarAsPng;\\n\\t\\t\\treturn this.notify(notification);\\n\\t\\t});\\n\\t}\\n\\n\\tpublic async newMessage(rid: IRoom['_id'] | undefined) {\\n\\t\\tif ((Meteor.user() as IUser | null)?.status === 'busy') {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst userId = Meteor.userId();\\n\\t\\tconst newMessageNotification = getUserPreference<string>(userId, 'newMessageNotification');\\n\\t\\tconst audioVolume = getUserPreference(userId, 'notificationsSoundVolume', 100);\\n\\n\\t\\tif (!rid) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst sub = ChatSubscription.findOne({ rid }, { fields: { audioNotificationValue: 1 } });\\n\\n\\t\\tif (!sub || sub.audioNotificationValue === 'none') {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\ttry {\\n\\t\\t\\tif (sub.audioNotificationValue && sub.audioNotificationValue !== '0') {\\n\\t\\t\\t\\tvoid CustomSounds.play(sub.audioNotificationValue, {\\n\\t\\t\\t\\t\\tvolume: Number((audioVolume / 100).toPrecision(2)),\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (newMessageNotification && newMessageNotification !== 'none') {\\n\\t\\t\\t\\tvoid CustomSounds.play(newMessageNotification, {\\n\\t\\t\\t\\t\\tvolume: Number((audioVolume / 100).toPrecision(2)),\\n\\t\\t\\t\\t});\\n\\t\\t\\t}\\n\\t\\t} catch (e) {\\n\\t\\t\\t// do nothing\\n\\t\\t}\\n\\t}\\n\\n\\tpublic newRoom(rid: IRoom['_id']) {\\n\\t\\tTracker.nonreactive(() => {\\n\\t\\t\\tlet newRoomSound = Session.get('newRoomSound') as IRoom['_id'][] | undefined;\\n\\t\\t\\tif (newRoomSound) {\\n\\t\\t\\t\\tnewRoomSound = [...newRoomSound, rid];\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tnewRoomSound = [rid];\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn Session.set('newRoomSound', newRoomSound);\\n\\t\\t});\\n\\t}\\n\\n\\tpublic removeRoomNotification(rid: IRoom['_id']) {\\n\\t\\tlet newRoomSound = (Session.get('newRoomSound') as IRoom['_id'][] | undefined) ?? [];\\n\\t\\tnewRoomSound = newRoomSound.filter((_rid) => _rid !== rid);\\n\\t\\tTracker.nonreactive(() => Session.set('newRoomSound', newRoomSound));\\n\\n\\t\\tconst link = document.querySelector(`.link-room-${rid}`);\\n\\n\\t\\tlink?.classList.remove('new-room-highlight');\\n\\t}\\n}\\n\\nconst instance = new KonchatNotification();\\n\\nexport { instance as KonchatNotification };\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"_toConsumableArray\",\"_objectSpread\",\"export\",\"KonchatNotification\",\"instance\",\"Random\",\"Meteor\",\"ReactiveVar\",\"RoomManager\",\"onClientMessageReceived\",\"getAvatarAsPng\",\"router\",\"stripTags\",\"CustomSounds\",\"e2e\",\"ChatSubscription\",\"getUserPreference\",\"getUserAvatarURL\",\"sdk\",\"notificationStatus\",\"undefined\",\"_proto\",\"prototype\",\"getDesktopPermission\",\"_this\",\"window\",\"Notification\",\"permission\",\"requestPermission\",\"status\",\"set\",\"notify\",\"notification\",\"_notification$payload\",\"_notification$duratio\",\"rid\",\"message\",\"requireInteraction\",\"n\",\"notificationDuration\",\"async\",\"_context\",\"prev\",\"next\",\"abrupt\",\"payload\",\"awrap\",\"msg\",\"text\",\"sent\",\"userId\",\"title\",\"icon\",\"sender\",\"username\",\"body\",\"tag\",\"_id\",\"canReply\",\"silent\",\"duration\",\"setTimeout\",\"close\",\"addEventListener\",\"_ref\",\"response\",\"call\",\"id\",\"onclick\",\"_notification$payload2\",\"focus\",\"name\",\"type\",\"navigate\",\"pattern\",\"params\",\"tmid\",\"tab\",\"context\",\"search\",\"getSearchParameters\",\"jump\",\"stop\",\"Promise\",\"showDesktop\",\"e2eRoom\",\"_notification$payload3\",\"_Meteor$user\",\"_notification$payload4\",\"_notification$payload5\",\"_notification$payload6\",\"_notification$payload7\",\"_this2\",\"_context2\",\"opened\",\"document\",\"hasFocus\",\"user\",\"t\",\"getInstanceByRoomId\",\"decrypt\",\"avatarAsPng\",\"newMessage\",\"_Meteor$user2\",\"newMessageNotification\",\"audioVolume\",\"sub\",\"_context3\",\"findOne\",\"fields\",\"audioNotificationValue\",\"play\",\"volume\",\"Number\",\"toPrecision\",\"t0\",\"newRoom\",\"Tracker\",\"nonreactive\",\"newRoomSound\",\"Session\",\"get\",\"concat\",\"removeRoomNotification\",\"_Session$get\",\"filter\",\"_rid\",\"querySelector\",\"classList\",\"remove\"],\"mappings\":\"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\"}"}