{"code":"function module(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var n,o=t(\"./utils.js\"),i=(n=t(\"./request.js\"))&&n.__esModule?n:{default:n};function s(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=function(){var t,e;function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw TypeError(\"Cannot call a class as a function\")}(this,a),this.services=t,this.options=e,this.allOptions=n,this.type=\"backend\",this.init(t,e,n)}return t=[{key:\"init\",value:function t(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=t,this.options=(0,o.defaults)(a,this.options||{},{loadPath:\"/locales/{{lng}}/{{ns}}.json\",addPath:\"/locales/add/{{lng}}/{{ns}}\",allowMultiLoading:!1,parse:function t(t){return JSON.parse(t)},stringify:JSON.stringify,parsePayload:function t(t,e,a){var n,o;return n={},o=a||\"\",e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o,n},request:i.default,reloadInterval:\"undefined\"==typeof window&&36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:\"cors\",credentials:\"same-origin\",cache:\"default\"}}),this.allOptions=n,this.services&&this.options.reloadInterval&&setInterval(function(){return e.reload()},this.options.reloadInterval)}},{key:\"readMulti\",value:function t(t,e,a){this._readAny(t,t,e,e,a)}},{key:\"read\",value:function t(t,e,a){this._readAny([t],t,[e],e,a)}},{key:\"_readAny\",value:function t(t,e,a,n,i){var s=this,r=this.options.loadPath;\"function\"==typeof this.options.loadPath&&(r=this.options.loadPath(t,a)),(r=(0,o.makePromise)(r)).then(function(o){if(!o)return i(null,{});var r=s.services.interpolator.interpolate(o,{lng:t.join(\"+\"),ns:a.join(\"+\")});s.loadUrl(r,i,e,n)})}},{key:\"loadUrl\",value:function t(t,e,a,n){var o=this;this.options.request(this.options,t,void 0,function(i,s){var r,l;if(s&&(s.status>=500&&s.status<600||!s.status))return e(\"failed loading \"+t+\"; status code: \"+s.status,!0);if(s&&s.status>=400&&s.status<500)return e(\"failed loading \"+t+\"; status code: \"+s.status,!1);if(!s&&i&&i.message&&i.message.indexOf(\"Failed to fetch\")>-1)return e(\"failed loading \"+t+\": \"+i.message,!0);if(i)return e(i,!1);try{r=\"string\"==typeof s.data?o.options.parse(s.data,a,n):s.data}catch(e){l=\"failed parsing \"+t+\" to json\"}if(l)return e(l,!1);e(null,r)})}},{key:\"create\",value:function t(t,e,a,n,o){var i=this;if(this.options.addPath){\"string\"==typeof t&&(t=[t]);var s=this.options.parsePayload(e,a,n),r=0,l=[],u=[];t.forEach(function(a){var n=i.options.addPath;\"function\"==typeof i.options.addPath&&(n=i.options.addPath(a,e));var d=i.services.interpolator.interpolate(n,{lng:a,ns:e});i.options.request(i.options,d,s,function(e,a){r+=1,l.push(e),u.push(a),r===t.length&&o&&o(l,u)})})}}},{key:\"reload\",value:function t(){var t=this,e=this.services,a=e.backendConnector,n=e.languageUtils,o=e.logger,i=a.language;if(!i||\"cimode\"!==i.toLowerCase()){var s=[],r=function t(t){n.toResolveHierarchy(t).forEach(function(t){0>s.indexOf(t)&&s.push(t)})};r(i),this.allOptions.preload&&this.allOptions.preload.forEach(function(t){return r(t)}),s.forEach(function(e){t.allOptions.ns.forEach(function(t){a.read(e,t,\"read\",null,null,function(n,i){n&&o.warn(\"loading namespace \".concat(t,\" for language \").concat(e,\" failed\"),n),!n&&i&&o.log(\"loaded namespace \".concat(t,\" for language \").concat(e),i),a.loaded(\"\".concat(e,\"|\").concat(t),n,i)})})})}}}],s(a.prototype,t),e&&s(a,e),Object.defineProperty(a,\"prototype\",{writable:!1}),a}();r.type=\"backend\",e.default=r,a.exports=e.default}","map":"{\"version\":3,\"sources\":[\"<anon>\"],\"names\":[],\"mappings\":\"\"}"}