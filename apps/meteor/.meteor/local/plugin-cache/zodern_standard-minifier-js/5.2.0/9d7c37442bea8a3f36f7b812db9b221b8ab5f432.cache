{"code":"function module(e,n,t){var a,u,r,o,i,c,s,l,f,d,m;t.link(\"@babel/runtime/regenerator\",{default:function(e){a=e}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){u=e}},1),t.link(\"@rocket.chat/fuselage\",{Box:function(e){r=e},Button:function(e){o=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){i=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(e){c=e},useTranslation:function(e){s=e}},2),t.link(\"react\",{default:function(e){l=e},useState:function(e){f=e}},3),t.link(\"../../../../components/AutoCompleteAgent\",{default:function(e){d=e}},4),t.link(\"../../../../hooks/useEndpointAction\",{useEndpointAction:function(e){m=e}},5),t.exportDefault(function(e){var n=e.agentList,t=e.onAdd,k=s(),p=f(\"\"),g=u(p,2),h=g[0],b=g[1],v=m(\"GET\",\"/v1/livechat/users/agent/:_id\",{keys:{_id:h}}),x=c(),y=i(function(e){return b(e)}),A=i(function(){var e,u,r,o;return a.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(h){i.next=2;break}return i.abrupt(\"return\");case 2:return i.next=4,a.awrap(v());case 4:u=(e=i.sent.user)._id,r=e.username,o=e.name,n.some(function(e){return e.agentId===u})?x({type:\"error\",message:k(\"This_agent_was_already_selected\")}):(b(\"\"),t({agentId:u,username:null!=r?r:\"\",name:o,count:0,order:0}));case 10:case\"end\":return i.stop()}},null,null,null,Promise)});return l.createElement(r,{display:\"flex\",alignItems:\"center\"},l.createElement(d,{value:h,onChange:y}),l.createElement(o,{disabled:!h,onClick:A,mis:8,primary:!0},k(\"Add\")))})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/departments/DepartmentAgentsTable/AddAgent.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Button } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\\nimport React, { useState } from 'react';\\n\\nimport AutoCompleteAgent from '../../../../components/AutoCompleteAgent';\\nimport { useEndpointAction } from '../../../../hooks/useEndpointAction';\\nimport type { IDepartmentAgent } from '../EditDepartment';\\n\\nfunction AddAgent({ agentList, onAdd }: { agentList: IDepartmentAgent[]; onAdd: (agent: IDepartmentAgent) => void }) {\\n\\tconst t = useTranslation();\\n\\n\\tconst [userId, setUserId] = useState('');\\n\\n\\tconst getAgent = useEndpointAction('GET', '/v1/livechat/users/agent/:_id', { keys: { _id: userId } });\\n\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst handleAgent = useMutableCallback((e) => setUserId(e));\\n\\n\\tconst handleSave = useMutableCallback(async () => {\\n\\t\\tif (!userId) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst {\\n\\t\\t\\tuser: { _id, username, name },\\n\\t\\t} = await getAgent();\\n\\n\\t\\tif (!agentList.some(({ agentId }) => agentId === _id)) {\\n\\t\\t\\tsetUserId('');\\n\\t\\t\\tonAdd({ agentId: _id, username: username ?? '', name, count: 0, order: 0 });\\n\\t\\t} else {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: t('This_agent_was_already_selected') });\\n\\t\\t}\\n\\t});\\n\\n\\treturn (\\n\\t\\t<Box display='flex' alignItems='center'>\\n\\t\\t\\t<AutoCompleteAgent value={userId} onChange={handleAgent} />\\n\\t\\t\\t<Button disabled={!userId} onClick={handleSave} mis={8} primary>\\n\\t\\t\\t\\t{t('Add')}\\n\\t\\t\\t</Button>\\n\\t\\t</Box>\\n\\t);\\n}\\n\\nexport default AddAgent;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"_slicedToArray\",\"Box\",\"Button\",\"useMutableCallback\",\"useToastMessageDispatch\",\"useTranslation\",\"React\",\"useState\",\"AutoCompleteAgent\",\"useEndpointAction\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"agentList\",\"onAdd\",\"t\",\"_useState\",\"_useState2\",\"userId\",\"setUserId\",\"getAgent\",\"keys\",\"_id\",\"dispatchToastMessage\",\"handleAgent\",\"e\",\"handleSave\",\"_await$getAgent$user\",\"username\",\"name\",\"async\",\"_context\",\"prev\",\"next\",\"abrupt\",\"awrap\",\"_await$getAgent\",\"sent\",\"user\",\"some\",\"_ref2\",\"agentId\",\"type\",\"message\",\"count\",\"order\",\"stop\",\"Promise\",\"createElement\",\"display\",\"alignItems\",\"value\",\"onChange\",\"disabled\",\"onClick\",\"mis\",\"primary\"],\"mappings\":\"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\"}"}