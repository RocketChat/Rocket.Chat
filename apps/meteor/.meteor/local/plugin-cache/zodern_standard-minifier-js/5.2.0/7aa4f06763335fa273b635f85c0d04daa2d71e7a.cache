{"code":"function module(e,o,r){var n;n=function(e){\"use strict\";function o(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function r(e){return e.state.search||(e.state.search=new o)}function n(e){return\"string\"==typeof e&&e==e.toLowerCase()}function t(e,o,r){return e.getSearchCursor(o,r,{caseFold:n(o),multiline:!0})}function a(e,o,r,n,t){e.openDialog?e.openDialog(o,t,{value:n,selectValueOnOpen:!0,bottom:e.options.search.bottom}):t(prompt(r,n))}function i(e){return e.replace(/\\\\([nrt\\\\])/g,function(e,o){return\"n\"==o?\"\\n\":\"r\"==o?\"\\r\":\"t\"==o?\"\t\":\"\\\\\"==o?\"\\\\\":e})}function s(e){var o=e.match(/^\\/(.*)\\/([a-z]*)$/);if(o)try{e=new RegExp(o[1],-1==o[2].indexOf(\"i\")?\"\":\"i\")}catch(e){}else e=i(e);return(\"string\"==typeof e?\"\"==e:e.test(\"\"))&&(e=/x^/),e}function c(e,o,r){var t,a;o.queryText=r,o.query=s(r),e.removeOverlay(o.overlay,n(o.query)),o.overlay=(t=o.query,a=n(o.query),\"string\"==typeof t?t=new RegExp(t.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\"\\\\$&\"),a?\"gi\":\"g\"):t.global||(t=new RegExp(t.source,t.ignoreCase?\"gi\":\"g\")),{token:function(e){t.lastIndex=e.pos;var o=t.exec(e.string);if(o&&o.index==e.pos)return e.pos+=o[0].length||1,\"searching\";o?e.pos=o.index:e.skipToEnd()}}),e.addOverlay(o.overlay),e.showMatchesOnScrollbar&&(o.annotate&&(o.annotate.clear(),o.annotate=null),o.annotate=e.showMatchesOnScrollbar(o.query,n(o.query)))}function l(o,n,t,i){var s=r(o);if(s.query)return u(o,n);var l=o.getSelection()||s.lastQuery;if(l instanceof RegExp&&\"x^\"==l.source&&(l=null),t&&o.openDialog){var p=null,m=function(r,n){e.e_stop(n),r&&(r!=s.queryText&&(c(o,s,r),s.posFrom=s.posTo=o.getCursor()),p&&(p.style.opacity=1),u(o,n.shiftKey,function(e,r){var n;r.line<3&&document.querySelector&&(n=o.display.wrapper.querySelector(\".CodeMirror-dialog\"))&&n.getBoundingClientRect().bottom-4>o.cursorCoords(r,\"window\").top&&((p=n).style.opacity=.4)}))};(function(e,o,r,n,t){e.openDialog(o,n,{value:r,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){f(e)},onKeyDown:t,bottom:e.options.search.bottom})})(o,d(o),l,m,function(n,t){var a=e.keyName(n),i=o.getOption(\"extraKeys\"),s=i&&i[a]||e.keyMap[o.getOption(\"keyMap\")][a];\"findNext\"==s||\"findPrev\"==s||\"findPersistentNext\"==s||\"findPersistentPrev\"==s?(e.e_stop(n),c(o,r(o),t),o.execCommand(s)):(\"find\"==s||\"findPersistent\"==s)&&(e.e_stop(n),m(t,n))}),i&&l&&(c(o,s,l),u(o,n))}else a(o,d(o),\"Search for:\",l,function(e){e&&!s.query&&o.operation(function(){c(o,s,e),s.posFrom=s.posTo=o.getCursor(),u(o,n)})})}function u(o,n,a){o.operation(function(){var i=r(o),s=t(o,i.query,n?i.posFrom:i.posTo);(s.find(n)||(s=t(o,i.query,n?e.Pos(o.lastLine()):e.Pos(o.firstLine(),0))).find(n))&&(o.setSelection(s.from(),s.to()),o.scrollIntoView({from:s.from(),to:s.to()},20),i.posFrom=s.from(),i.posTo=s.to(),a&&a(s.from(),s.to()))})}function f(e){e.operation(function(){var o=r(e);o.lastQuery=o.query,o.query&&(o.query=o.queryText=null,e.removeOverlay(o.overlay),o.annotate&&(o.annotate.clear(),o.annotate=null))})}function p(e,o){var r=e?document.createElement(e):document.createDocumentFragment();for(var n in o)r[n]=o[n];for(var t=2;t<arguments.length;t++){var a=arguments[t];r.appendChild(\"string\"==typeof a?document.createTextNode(a):a)}return r}function d(e){var o=p(\"label\",{className:\"CodeMirror-search-label\"},e.phrase(\"Search:\"),p(\"input\",{type:\"text\",style:\"width: 10em\",className:\"CodeMirror-search-field\",id:\"CodeMirror-search-field\"}));return o.setAttribute(\"for\",\"CodeMirror-search-field\"),p(\"\",null,o,\" \",p(\"span\",{style:\"color: #666\",className:\"CodeMirror-search-hint\"},e.phrase(\"(Use /re/ syntax for regexp search)\")))}function m(e,o,r){e.operation(function(){for(var n=t(e,o);n.findNext();)if(\"string\"!=typeof o){var a=e.getRange(n.from(),n.to()).match(o);n.replace(r.replace(/\\$(\\d)/g,function(e,o){return a[o]}))}else n.replace(r)})}function h(e,o){if(!e.getOption(\"readOnly\")){var n=e.getSelection()||r(e).lastQuery,c=o?e.phrase(\"Replace all:\"):e.phrase(\"Replace:\"),l=p(\"\",null,p(\"span\",{className:\"CodeMirror-search-label\"},c),p(\"\",null,\" \",p(\"input\",{type:\"text\",style:\"width: 10em\",className:\"CodeMirror-search-field\"}),\" \",p(\"span\",{style:\"color: #666\",className:\"CodeMirror-search-hint\"},e.phrase(\"(Use /re/ syntax for regexp search)\"))));a(e,l,c,n,function(r){r&&(r=s(r),a(e,p(\"\",null,p(\"span\",{className:\"CodeMirror-search-label\"},e.phrase(\"With:\")),\" \",p(\"input\",{type:\"text\",style:\"width: 10em\",className:\"CodeMirror-search-field\"})),e.phrase(\"Replace with:\"),\"\",function(n){if(n=i(n),o)m(e,r,n);else{f(e);var a=t(e,r,e.getCursor(\"from\")),s=function(){var o,i,l,u,f=a.from();((u=a.findNext())||(u=(a=t(e,r)).findNext())&&(!f||a.from().line!=f.line||a.from().ch!=f.ch))&&(e.setSelection(a.from(),a.to()),e.scrollIntoView({from:a.from(),to:a.to()}),o=p(\"\",null,p(\"span\",{className:\"CodeMirror-search-label\"},e.phrase(\"Replace?\")),\" \",p(\"button\",{},e.phrase(\"Yes\")),\" \",p(\"button\",{},e.phrase(\"No\")),\" \",p(\"button\",{},e.phrase(\"All\")),\" \",p(\"button\",{},e.phrase(\"Stop\"))),i=e.phrase(\"Replace?\"),l=[function(){c(u)},s,function(){m(e,r,n)}],e.openConfirm?e.openConfirm(o,l):confirm(i)&&l[0]())},c=function(e){a.replace(\"string\"==typeof r?n:n.replace(/\\$(\\d)/g,function(o,r){return e[r]})),s()};s()}}))})}}e.defineOption(\"search\",{bottom:!1}),e.commands.find=function(e){f(e),l(e)},e.commands.findPersistent=function(e){f(e),l(e,!1,!0)},e.commands.findPersistentNext=function(e){l(e,!1,!0,!0)},e.commands.findPersistentPrev=function(e){l(e,!0,!0,!0)},e.commands.findNext=l,e.commands.findPrev=function(e){l(e,!0)},e.commands.clearSearch=f,e.commands.replace=h,e.commands.replaceAll=function(e){h(e,!0)}},\"object\"==typeof o&&\"object\"==typeof r?n(e(\"../../lib/codemirror\"),e(\"./searchcursor\"),e(\"../dialog/dialog\")):\"function\"==typeof define&&define.amd?define([\"../../lib/codemirror\",\"./searchcursor\",\"../dialog/dialog\"],n):n(CodeMirror)}","map":"{\"version\":3,\"sources\":[\"<anon>\"],\"names\":[],\"mappings\":\"\"}"}