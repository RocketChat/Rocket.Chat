{"code":"function module(t,r,n){\"use strict\";n.exports=u;var e=t(\"../errors\").codes,i=e.ERR_METHOD_NOT_IMPLEMENTED,a=e.ERR_MULTIPLE_CALLBACK,s=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=e.ERR_TRANSFORM_WITH_LENGTH_0,f=t(\"./_stream_duplex\");function h(t,r){var n=this._transformState;n.transforming=!1;var e=n.writecb;if(null===e)return this.emit(\"error\",new a);n.writechunk=null,n.writecb=null,null!=r&&this.push(r),e(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function u(t){if(!(this instanceof u))return new u(t);f.call(this,t),this._transformState={afterTransform:h.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(\"function\"==typeof t.transform&&(this._transform=t.transform),\"function\"==typeof t.flush&&(this._flush=t.flush)),this.on(\"prefinish\",l)}function l(){var t=this;\"function\"!=typeof this._flush||this._readableState.destroyed?_(this,null,null):this._flush(function(r,n){_(t,r,n)})}function _(t,r,n){if(r)return t.emit(\"error\",r);if(null!=n&&t.push(n),t._writableState.length)throw new o;if(t._transformState.transforming)throw new s;return t.push(null)}t(\"inherits\")(u,f),u.prototype.push=function(t,r){return this._transformState.needTransform=!1,f.prototype.push.call(this,t,r)},u.prototype._transform=function(t,r,n){n(new i(\"_transform()\"))},u.prototype._write=function(t,r,n){var e=this._transformState;if(e.writecb=n,e.writechunk=t,e.writeencoding=r,!e.transforming){var i=this._readableState;(e.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},u.prototype._read=function(t){var r=this._transformState;null===r.writechunk||r.transforming?r.needTransform=!0:(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform))},u.prototype._destroy=function(t,r){f.prototype._destroy.call(this,t,function(t){r(t)})}}","map":"{\"version\":3,\"sources\":[\"<anon>\"],\"names\":[],\"mappings\":\"\"}"}