{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/packages/ddp-client/client/client_convenience.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"packages/ddp-client/client/client_convenience.js","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/packages/ddp-client/client/client_convenience.js","targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/packages/ddp-client/client/client_convenience.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/ddp-client/client/client_convenience.js"}},"code":"let DDP;\nmodule.link(\"../common/namespace.js\", {\n  DDP(v) {\n    DDP = v;\n  }\n}, 0);\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n}, 1);\nlet loadAsyncStubHelpers;\nmodule.link(\"./queueStubsHelpers\", {\n  loadAsyncStubHelpers(v) {\n    loadAsyncStubHelpers = v;\n  }\n}, 2);\n// Meteor.refresh can be called on the client (if you're in common code) but it\n// only has an effect on the server.\nMeteor.refresh = () => {};\n\n// By default, try to connect back to the same endpoint as the page\n// was served from.\n//\n// XXX We should be doing this a different way. Right now we don't\n// include ROOT_URL_PATH_PREFIX when computing ddpUrl. (We don't\n// include it on the server when computing\n// DDP_DEFAULT_CONNECTION_URL, and we don't include it in our\n// default, '/'.) We get by with this because DDP.connect then\n// forces the URL passed to it to be interpreted relative to the\n// app's deploy path, even if it is absolute. Instead, we should\n// make DDP_DEFAULT_CONNECTION_URL, if set, include the path prefix;\n// make the default ddpUrl be '' rather that '/'; and make\n// _translateUrl in stream_client_common.js not force absolute paths\n// to be treated like relative paths. See also\n// stream_client_common.js #RationalizingRelativeDDPURLs\nconst runtimeConfig = typeof __meteor_runtime_config__ !== 'undefined' ? __meteor_runtime_config__ : Object.create(null);\nconst ddpUrl = runtimeConfig.DDP_DEFAULT_CONNECTION_URL || '/';\nconst retry = new Retry();\nfunction onDDPVersionNegotiationFailure(description) {\n  Meteor._debug(description);\n  if (Package.reload) {\n    const migrationData = Package.reload.Reload._migrationData('livedata') || Object.create(null);\n    let failures = migrationData.DDPVersionNegotiationFailures || 0;\n    ++failures;\n    Package.reload.Reload._onMigrate('livedata', () => [true, {\n      DDPVersionNegotiationFailures: failures\n    }]);\n    retry.retryLater(failures, () => {\n      Package.reload.Reload._reload({\n        immediateMigration: true\n      });\n    });\n  }\n}\n\n// Makes sure to inject the stub async helpers before creating the connection\nloadAsyncStubHelpers();\nMeteor.connection = DDP.connect(ddpUrl, {\n  onDDPVersionNegotiationFailure: onDDPVersionNegotiationFailure\n});\n\n// Proxy the public methods of Meteor.connection so they can\n// be called directly on Meteor.\n['subscribe', 'methods', 'isAsyncCall', 'call', 'callAsync', 'apply', 'applyAsync', 'status', 'reconnect', 'disconnect'].forEach(name => {\n  Meteor[name] = Meteor.connection[name].bind(Meteor.connection);\n});","map":{"version":3,"names":["DDP","module","link","v","Meteor","loadAsyncStubHelpers","refresh","runtimeConfig","__meteor_runtime_config__","Object","create","ddpUrl","DDP_DEFAULT_CONNECTION_URL","retry","Retry","onDDPVersionNegotiationFailure","description","_debug","Package","reload","migrationData","Reload","_migrationData","failures","DDPVersionNegotiationFailures","_onMigrate","retryLater","_reload","immediateMigration","connection","connect","forEach","name","bind"],"sources":["packages/ddp-client/client/client_convenience.js"],"sourcesContent":["import { DDP } from '../common/namespace.js';\nimport { Meteor } from 'meteor/meteor';\nimport { loadAsyncStubHelpers } from \"./queueStubsHelpers\";\n\n// Meteor.refresh can be called on the client (if you're in common code) but it\n// only has an effect on the server.\nMeteor.refresh = () => {};\n\n// By default, try to connect back to the same endpoint as the page\n// was served from.\n//\n// XXX We should be doing this a different way. Right now we don't\n// include ROOT_URL_PATH_PREFIX when computing ddpUrl. (We don't\n// include it on the server when computing\n// DDP_DEFAULT_CONNECTION_URL, and we don't include it in our\n// default, '/'.) We get by with this because DDP.connect then\n// forces the URL passed to it to be interpreted relative to the\n// app's deploy path, even if it is absolute. Instead, we should\n// make DDP_DEFAULT_CONNECTION_URL, if set, include the path prefix;\n// make the default ddpUrl be '' rather that '/'; and make\n// _translateUrl in stream_client_common.js not force absolute paths\n// to be treated like relative paths. See also\n// stream_client_common.js #RationalizingRelativeDDPURLs\nconst runtimeConfig = typeof __meteor_runtime_config__ !== 'undefined' ? __meteor_runtime_config__ : Object.create(null);\nconst ddpUrl = runtimeConfig.DDP_DEFAULT_CONNECTION_URL || '/';\n\nconst retry = new Retry();\n\nfunction onDDPVersionNegotiationFailure(description) {\n  Meteor._debug(description);\n  if (Package.reload) {\n    const migrationData = Package.reload.Reload._migrationData('livedata') || Object.create(null);\n    let failures = migrationData.DDPVersionNegotiationFailures || 0;\n    ++failures;\n    Package.reload.Reload._onMigrate('livedata', () => [true, { DDPVersionNegotiationFailures: failures }]);\n    retry.retryLater(failures, () => {\n      Package.reload.Reload._reload({ immediateMigration: true });\n    });\n  }\n}\n\n// Makes sure to inject the stub async helpers before creating the connection\nloadAsyncStubHelpers();\n\nMeteor.connection = DDP.connect(ddpUrl, {\n  onDDPVersionNegotiationFailure: onDDPVersionNegotiationFailure\n});\n\n// Proxy the public methods of Meteor.connection so they can\n// be called directly on Meteor.\n[\n  'subscribe',\n  'methods',\n  'isAsyncCall',\n  'call',\n  'callAsync',\n  'apply',\n  'applyAsync',\n  'status',\n  'reconnect',\n  'disconnect'\n].forEach(name => {\n  Meteor[name] = Meteor.connection[name].bind(Meteor.connection);\n});\n"],"mappings":"AAAA,IAAIA,GAAG;AAACC,MAAM,CAACC,IAAI,CAAC,wBAAwB,EAAC;EAACF,GAAGA,CAACG,CAAC,EAAC;IAACH,GAAG,GAACG,CAAC;EAAA;AAAC,CAAC,EAAC,CAAC,CAAC;AAAC,IAAIC,MAAM;AAACH,MAAM,CAACC,IAAI,CAAC,eAAe,EAAC;EAACE,MAAMA,CAACD,CAAC,EAAC;IAACC,MAAM,GAACD,CAAC;EAAA;AAAC,CAAC,EAAC,CAAC,CAAC;AAAC,IAAIE,oBAAoB;AAACJ,MAAM,CAACC,IAAI,CAAC,qBAAqB,EAAC;EAACG,oBAAoBA,CAACF,CAAC,EAAC;IAACE,oBAAoB,GAACF,CAAC;EAAA;AAAC,CAAC,EAAC,CAAC,CAAC;AAI/O;AACA;AACAC,MAAM,CAACE,OAAO,GAAG,MAAM,CAAC,CAAC;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,aAAa,GAAG,OAAOC,yBAAyB,KAAK,WAAW,GAAGA,yBAAyB,GAAGC,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC;AACxH,MAAMC,MAAM,GAAGJ,aAAa,CAACK,0BAA0B,IAAI,GAAG;AAE9D,MAAMC,KAAK,GAAG,IAAIC,KAAK,CAAC,CAAC;AAEzB,SAASC,8BAA8BA,CAACC,WAAW,EAAE;EACnDZ,MAAM,CAACa,MAAM,CAACD,WAAW,CAAC;EAC1B,IAAIE,OAAO,CAACC,MAAM,EAAE;IAClB,MAAMC,aAAa,GAAGF,OAAO,CAACC,MAAM,CAACE,MAAM,CAACC,cAAc,CAAC,UAAU,CAAC,IAAIb,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC;IAC7F,IAAIa,QAAQ,GAAGH,aAAa,CAACI,6BAA6B,IAAI,CAAC;IAC/D,EAAED,QAAQ;IACVL,OAAO,CAACC,MAAM,CAACE,MAAM,CAACI,UAAU,CAAC,UAAU,EAAE,MAAM,CAAC,IAAI,EAAE;MAAED,6BAA6B,EAAED;IAAS,CAAC,CAAC,CAAC;IACvGV,KAAK,CAACa,UAAU,CAACH,QAAQ,EAAE,MAAM;MAC/BL,OAAO,CAACC,MAAM,CAACE,MAAM,CAACM,OAAO,CAAC;QAAEC,kBAAkB,EAAE;MAAK,CAAC,CAAC;IAC7D,CAAC,CAAC;EACJ;AACF;;AAEA;AACAvB,oBAAoB,CAAC,CAAC;AAEtBD,MAAM,CAACyB,UAAU,GAAG7B,GAAG,CAAC8B,OAAO,CAACnB,MAAM,EAAE;EACtCI,8BAA8B,EAAEA;AAClC,CAAC,CAAC;;AAEF;AACA;AACA,CACE,WAAW,EACX,SAAS,EACT,aAAa,EACb,MAAM,EACN,WAAW,EACX,OAAO,EACP,YAAY,EACZ,QAAQ,EACR,WAAW,EACX,YAAY,CACb,CAACgB,OAAO,CAACC,IAAI,IAAI;EAChB5B,MAAM,CAAC4B,IAAI,CAAC,GAAG5B,MAAM,CAACyB,UAAU,CAACG,IAAI,CAAC,CAACC,IAAI,CAAC7B,MAAM,CAACyB,UAAU,CAAC;AAChE,CAAC,CAAC","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"e22f49239a68ee7adf8b223f66b52aba106b041b"}
