/*! For license information please see 6076.abeb5d61.iframe.bundle.js.LICENSE.txt */
(self.webpackChunk_rocket_chat_meteor=self.webpackChunk_rocket_chat_meteor||[]).push([[6076],{"./client/components/Omnichannel/OmnichannelSortingDisclaimer.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{m:function(){return OmnichannelSortingDisclaimer},V:function(){return useOmnichannelSortingDisclaimer}});var dist=__webpack_require__("../../packages/core-typings/dist/index.js"),ui_contexts_dist=__webpack_require__("../../packages/ui-contexts/dist/index.js"),react=__webpack_require__("./node_modules/react/index.js"),useOmnichannel=__webpack_require__("./client/hooks/omnichannel/useOmnichannel.ts");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var useOmnichannelSortingDisclaimer=function useOmnichannelSortingDisclaimer(){var isOmnichannelEnabled=function useOmnichannelEnterpriseEnabled(){var _useOmnichannel=(0,useOmnichannel.q)(),isEnabled=_useOmnichannel.enabled,isEnterprise=_useOmnichannel.isEnterprise;return isEnabled&&isEnterprise}(),sortingMechanism=(0,ui_contexts_dist.useSetting)("Omnichannel_sorting_mechanism")||dist.OmnichannelSortingMechanismSettingType.Timestamp,type=_slicedToArray((0,react.useState)(_defineProperty(_defineProperty(_defineProperty({},dist.OmnichannelSortingMechanismSettingType.Priority,"Priorities"),dist.OmnichannelSortingMechanismSettingType.SLAs,"SLA_Policies"),dist.OmnichannelSortingMechanismSettingType.Timestamp,"")),1)[0][sortingMechanism];return isOmnichannelEnabled?type:""},OmnichannelSortingDisclaimer=function OmnichannelSortingDisclaimer(){var t=(0,ui_contexts_dist.useTranslation)(),type=useOmnichannelSortingDisclaimer();return type?react.createElement(react.Fragment,null,t("Omnichannel_sorting_disclaimer",{sortingMechanism:t(type)})):null};OmnichannelSortingDisclaimer.__docgenInfo={description:"",methods:[],displayName:"OmnichannelSortingDisclaimer"}},"./client/hooks/useIsEnterprise.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{z:function(){return useIsEnterprise}});var _useLicense__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./client/hooks/useLicense.ts"),useIsEnterprise=function useIsEnterprise(){return(0,_useLicense__WEBPACK_IMPORTED_MODULE_0__.cU)({select:function select(data){return{isEnterprise:Boolean(null==data?void 0:data.license.license)}}})}},"./client/sidebar/header/actions/CreateRoom.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:function(){return actions_CreateRoom}});var fuselage=__webpack_require__("./node_modules/@rocket.chat/fuselage/index.js"),dist=__webpack_require__("../../packages/ui-client/dist/index.js"),ui_contexts_dist=__webpack_require__("../../packages/ui-contexts/dist/index.js"),react=__webpack_require__("./node_modules/react/index.js"),useIsEnterprise=__webpack_require__("./client/hooks/useIsEnterprise.ts"),CreateDiscussion=__webpack_require__("./client/components/CreateDiscussion/index.ts"),CreateChannel=__webpack_require__("./client/sidebar/header/CreateChannel/index.ts"),index_module=__webpack_require__("./node_modules/@rocket.chat/fuselage-hooks/dist/index.module.js"),lib=__webpack_require__("../../node_modules/@tanstack/react-query/build/lib/index.js"),index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),UserAutoCompleteMultipleFederated=__webpack_require__("./client/components/UserAutoCompleteMultiple/UserAutoCompleteMultipleFederated.tsx"),goToRoomById=__webpack_require__("./client/lib/utils/goToRoomById.ts");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}var CreateDirectMessage=function CreateDirectMessage(_ref){var onClose=_ref.onClose,t=(0,ui_contexts_dist.useTranslation)(),directMaxUsers=(0,ui_contexts_dist.useSetting)("DirectMesssage_maxUsers")||1,membersFieldId=(0,index_module.useUniqueId)(),dispatchToastMessage=(0,ui_contexts_dist.useToastMessageDispatch)(),createDirectAction=(0,ui_contexts_dist.useEndpoint)("POST","/v1/dm.create"),_useForm=(0,index_esm.mN)({mode:"onBlur",defaultValues:{users:[]}}),control=_useForm.control,handleSubmit=_useForm.handleSubmit,_useForm$formState=_useForm.formState,isSubmitting=_useForm$formState.isSubmitting,isValidating=_useForm$formState.isValidating,errors=_useForm$formState.errors,mutateDirectMessage=(0,lib.useMutation)({mutationFn:createDirectAction,onSuccess:function onSuccess(_ref2){var rid=_ref2.room.rid;(0,goToRoomById.P)(rid)},onError:function onError(error){dispatchToastMessage({type:"error",message:error})},onSettled:function onSettled(){onClose()}}),handleCreate=function(){var _ref4=function _asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(_ref3){var users;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return users=_ref3.users,_context.abrupt("return",mutateDirectMessage.mutateAsync({usernames:users.join(",")}));case 2:case"end":return _context.stop()}}),_callee)})));return function handleCreate(_x){return _ref4.apply(this,arguments)}}();return react.createElement(fuselage.Modal,{"data-qa":"create-direct-modal",wrapperFunction:function wrapperFunction(props){return react.createElement(fuselage.Box,_extends({is:"form",onSubmit:handleSubmit(handleCreate)},props))}},react.createElement(fuselage.Modal.Header,null,react.createElement(fuselage.Modal.Title,null,t("Create_direct_message")),react.createElement(fuselage.Modal.Close,{tabIndex:-1,onClick:onClose})),react.createElement(fuselage.Modal.Content,{mbe:2},react.createElement(fuselage.FieldGroup,null,react.createElement(fuselage.Field,null,react.createElement(fuselage.Box,{htmlFor:membersFieldId},t("Direct_message_creation_description")),react.createElement(fuselage.FieldRow,null,react.createElement(index_esm.xI,{name:"users",rules:{required:t("Direct_message_creation_error"),validate:function validate(users){return users.length+1>directMaxUsers?t("error-direct-message-max-user-exceeded",{maxUsers:directMaxUsers}):void 0}},control:control,render:function render(_ref5){var _ref5$field=_ref5.field,name=_ref5$field.name,onChange=_ref5$field.onChange,value=_ref5$field.value,onBlur=_ref5$field.onBlur;return react.createElement(UserAutoCompleteMultipleFederated.A,{name:name,onChange:onChange,value:value,onBlur:onBlur,id:membersFieldId,"aria-describedby":"".concat(membersFieldId,"-hint ").concat(membersFieldId,"-error"),"aria-required":"true","aria-invalid":Boolean(errors.users)})}})),errors.users&&react.createElement(fuselage.FieldError,{"aria-live":"assertive",id:"".concat(membersFieldId,"-error")},errors.users.message),react.createElement(fuselage.FieldHint,{id:"".concat(membersFieldId,"-hint")},t("Direct_message_creation_description_hint"))))),react.createElement(fuselage.Modal.Footer,null,react.createElement(fuselage.Modal.FooterControllers,null,react.createElement(fuselage.Button,{onClick:onClose},t("Cancel")),react.createElement(fuselage.Button,{loading:isSubmitting||isValidating,type:"submit",primary:!0},t("Create")))))},header_CreateDirectMessage=(0,react.memo)(CreateDirectMessage);CreateDirectMessage.__docgenInfo={description:"",methods:[],displayName:"CreateDirectMessage",props:{onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var UserAutoCompleteMultiple=__webpack_require__("./client/components/UserAutoCompleteMultiple/index.ts"),useEncryptedRoomDescription=__webpack_require__("./client/sidebar/header/hooks/useEncryptedRoomDescription.tsx");function CreateTeamModal_typeof(o){return CreateTeamModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},CreateTeamModal_typeof(o)}function CreateTeamModal_extends(){return CreateTeamModal_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},CreateTeamModal_extends.apply(null,arguments)}function CreateTeamModal_regeneratorRuntime(){CreateTeamModal_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==CreateTeamModal_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(CreateTeamModal_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function CreateTeamModal_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function CreateTeamModal_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){CreateTeamModal_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){CreateTeamModal_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}var CreateTeamModal=function CreateTeamModal(_ref){var _ref3,_errors$name,onClose=_ref.onClose,t=(0,ui_contexts_dist.useTranslation)(),e2eEnabled=(0,ui_contexts_dist.useSetting)("E2E_Enable"),e2eEnabledForPrivateByDefault=(0,ui_contexts_dist.useSetting)("E2E_Enabled_Default_PrivateRooms"),namesValidation=(0,ui_contexts_dist.useSetting)("UTF8_Channel_Names_Validation"),allowSpecialNames=(0,ui_contexts_dist.useSetting)("UI_Allow_room_names_with_special_chars"),dispatchToastMessage=(0,ui_contexts_dist.useToastMessageDispatch)(),canCreateTeam=(0,ui_contexts_dist.usePermission)("create-team"),canSetReadOnly=(0,ui_contexts_dist.usePermissionWithScopedRoles)("set-readonly",["owner"]),checkTeamNameExists=(0,ui_contexts_dist.useEndpoint)("GET","/v1/rooms.nameExists"),createTeamAction=(0,ui_contexts_dist.useEndpoint)("POST","/v1/teams.create"),teamNameRegex=(0,react.useMemo)((function(){return allowSpecialNames?null:new RegExp("^".concat(namesValidation,"$"))}),[allowSpecialNames,namesValidation]),validateTeamName=function(){var _ref2=CreateTeamModal_asyncToGenerator(CreateTeamModal_regeneratorRuntime().mark((function _callee(name){var _yield$checkTeamNameE;return CreateTeamModal_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(name){_context.next=2;break}return _context.abrupt("return");case 2:if(!teamNameRegex||null!=teamNameRegex&&teamNameRegex.test(name)){_context.next=4;break}return _context.abrupt("return",t("Name_cannot_have_special_characters"));case 4:return _context.next=6,checkTeamNameExists({roomName:name});case 6:if(_yield$checkTeamNameE=_context.sent,!_yield$checkTeamNameE.exists){_context.next=10;break}return _context.abrupt("return",t("Teams_Errors_Already_exists",{name:name}));case 10:case"end":return _context.stop()}}),_callee)})));return function validateTeamName(_x){return _ref2.apply(this,arguments)}}(),_useForm=(0,index_esm.mN)({defaultValues:{isPrivate:!0,readOnly:!1,encrypted:null!==(_ref3=e2eEnabledForPrivateByDefault)&&void 0!==_ref3&&_ref3,broadcast:!1,members:[]}}),register=_useForm.register,control=_useForm.control,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue,watch=_useForm.watch,_useForm$formState=_useForm.formState,errors=_useForm$formState.errors,isSubmitting=_useForm$formState.isSubmitting,_watch=watch(),isPrivate=_watch.isPrivate,broadcast=_watch.broadcast,readOnly=_watch.readOnly,encrypted=_watch.encrypted;(0,react.useEffect)((function(){isPrivate||setValue("encrypted",!1),broadcast&&setValue("encrypted",!1),setValue("readOnly",broadcast)}),[watch,setValue,broadcast,isPrivate]);var canChangeReadOnly=!broadcast,canChangeEncrypted=isPrivate&&!broadcast&&e2eEnabled&&!e2eEnabledForPrivateByDefault,getEncryptedHint=(0,useEncryptedRoomDescription.f)("team"),handleCreateTeam=function(){var _ref5=CreateTeamModal_asyncToGenerator(CreateTeamModal_regeneratorRuntime().mark((function _callee2(_ref4){var name,members,isPrivate,readOnly,topic,broadcast,encrypted,params,_yield$createTeamActi,team;return CreateTeamModal_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return name=_ref4.name,members=_ref4.members,isPrivate=_ref4.isPrivate,readOnly=_ref4.readOnly,topic=_ref4.topic,broadcast=_ref4.broadcast,encrypted=_ref4.encrypted,params={name:name,members:members,type:isPrivate?1:0,room:{readOnly:readOnly,extraData:{topic:topic,broadcast:broadcast,encrypted:encrypted}}},_context2.prev=2,_context2.next=5,createTeamAction(params);case 5:_yield$createTeamActi=_context2.sent,team=_yield$createTeamActi.team,dispatchToastMessage({type:"success",message:t("Team_has_been_created")}),(0,goToRoomById.P)(team.roomId),_context2.next=14;break;case 11:_context2.prev=11,_context2.t0=_context2.catch(2),dispatchToastMessage({type:"error",message:_context2.t0});case 14:return _context2.prev=14,onClose(),_context2.finish(14);case 17:case"end":return _context2.stop()}}),_callee2,null,[[2,11,14,17]])})));return function handleCreateTeam(_x2){return _ref5.apply(this,arguments)}}(),createTeamFormId=(0,index_module.useUniqueId)(),nameId=(0,index_module.useUniqueId)(),topicId=(0,index_module.useUniqueId)(),privateId=(0,index_module.useUniqueId)(),readOnlyId=(0,index_module.useUniqueId)(),encryptedId=(0,index_module.useUniqueId)(),broadcastId=(0,index_module.useUniqueId)(),addMembersId=(0,index_module.useUniqueId)();return react.createElement(fuselage.Modal,{"aria-labelledby":"".concat(createTeamFormId,"-title"),wrapperFunction:function wrapperFunction(props){return react.createElement(fuselage.Box,CreateTeamModal_extends({is:"form",id:createTeamFormId,onSubmit:handleSubmit(handleCreateTeam)},props))}},react.createElement(fuselage.Modal.Header,null,react.createElement(fuselage.Modal.Title,{id:"".concat(createTeamFormId,"-title")},t("Teams_New_Title")),react.createElement(fuselage.Modal.Close,{title:t("Close"),onClick:onClose,tabIndex:-1})),react.createElement(fuselage.Modal.Content,{mbe:2},react.createElement(fuselage.Box,{fontScale:"p2",mbe:16},t("Teams_new_description")),react.createElement(fuselage.FieldGroup,{mbe:24},react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldLabel,{required:!0,htmlFor:nameId},t("Teams_New_Name_Label")),react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.TextInput,CreateTeamModal_extends({id:nameId,"aria-invalid":errors.name?"true":"false"},register("name",{required:t("Required_field",{field:t("Name")}),validate:function validate(value){return validateTeamName(value)}}),{addon:react.createElement(fuselage.Icon,{size:"x20",name:isPrivate?"team-lock":"team"}),error:null===(_errors$name=errors.name)||void 0===_errors$name?void 0:_errors$name.message,"aria-describedby":"".concat(nameId,"-error ").concat(nameId,"-hint"),"aria-required":"true"}))),(null==errors?void 0:errors.name)&&react.createElement(fuselage.FieldError,{"aria-live":"assertive",id:"".concat(nameId,"-error")},errors.name.message),!allowSpecialNames&&react.createElement(fuselage.FieldHint,{id:"".concat(nameId,"-hint")},t("No_spaces"))),react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldLabel,{htmlFor:topicId},t("Topic")),react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.TextInput,CreateTeamModal_extends({id:topicId,"aria-describedby":"".concat(topicId,"-hint")},register("topic")))),react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldHint,{id:"".concat(topicId,"-hint")},t("Displayed_next_to_name")))),react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldLabel,{htmlFor:addMembersId},t("Teams_New_Add_members_Label")),react.createElement(index_esm.xI,{control:control,name:"members",render:function render(_ref6){var _ref6$field=_ref6.field,onChange=_ref6$field.onChange,value=_ref6$field.value;return react.createElement(UserAutoCompleteMultiple.A,{id:addMembersId,value:value,onChange:onChange,placeholder:t("Add_people")})}})),react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldLabel,{htmlFor:privateId},t("Teams_New_Private_Label")),react.createElement(index_esm.xI,{control:control,name:"isPrivate",render:function render(_ref7){var _ref7$field=_ref7.field,onChange=_ref7$field.onChange,value=_ref7$field.value,ref=_ref7$field.ref;return react.createElement(fuselage.ToggleSwitch,{id:privateId,"aria-describedby":"".concat(privateId,"-hint"),onChange:onChange,checked:value,ref:ref})}})),react.createElement(fuselage.FieldDescription,{id:"".concat(privateId,"-hint")},t(isPrivate?"People_can_only_join_by_being_invited":"Anyone_can_access")))),react.createElement(fuselage.Accordion,null,react.createElement(fuselage.AccordionItem,{title:t("Advanced_settings")},react.createElement(fuselage.FieldGroup,null,react.createElement(fuselage.Box,{is:"h5",fontScale:"h5",color:"titles-labels"},t("Security_and_permissions")),react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldLabel,{htmlFor:encryptedId},t("Teams_New_Encrypted_Label")),react.createElement(index_esm.xI,{control:control,name:"encrypted",render:function render(_ref8){var _ref8$field=_ref8.field,onChange=_ref8$field.onChange,value=_ref8$field.value,ref=_ref8$field.ref;return react.createElement(fuselage.ToggleSwitch,{id:encryptedId,disabled:!canSetReadOnly||!canChangeEncrypted,onChange:onChange,"aria-describedby":"".concat(encryptedId,"-hint"),checked:value,ref:ref})}})),react.createElement(fuselage.FieldDescription,{id:"".concat(encryptedId,"-hint")},getEncryptedHint({isPrivate:isPrivate,broadcast:broadcast,encrypted:encrypted}))),react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldLabel,{htmlFor:readOnlyId},t("Teams_New_Read_only_Label")),react.createElement(index_esm.xI,{control:control,name:"readOnly",render:function render(_ref9){var _ref9$field=_ref9.field,onChange=_ref9$field.onChange,value=_ref9$field.value,ref=_ref9$field.ref;return react.createElement(fuselage.ToggleSwitch,{id:readOnlyId,"aria-describedby":"".concat(readOnlyId,"-hint"),disabled:!canChangeReadOnly,onChange:onChange,checked:value,ref:ref})}})),react.createElement(fuselage.FieldDescription,{id:"".concat(readOnlyId,"-hint")},readOnly?t("Read_only_field_hint_enabled",{roomType:"team"}):t("Anyone_can_send_new_messages"))),react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldLabel,{htmlFor:broadcastId},t("Teams_New_Broadcast_Label")),react.createElement(index_esm.xI,{control:control,name:"broadcast",render:function render(_ref10){var _ref10$field=_ref10.field,onChange=_ref10$field.onChange,value=_ref10$field.value,ref=_ref10$field.ref;return react.createElement(fuselage.ToggleSwitch,{"aria-describedby":"".concat(broadcastId,"-hint"),id:broadcastId,onChange:onChange,checked:value,ref:ref})}})),broadcast&&react.createElement(fuselage.FieldDescription,{id:"".concat(broadcastId,"-hint")},t("Teams_New_Broadcast_Description"))))))),react.createElement(fuselage.Modal.Footer,null,react.createElement(fuselage.Modal.FooterControllers,null,react.createElement(fuselage.Button,{onClick:onClose},t("Cancel")),react.createElement(fuselage.Button,{disabled:!canCreateTeam,loading:isSubmitting,type:"submit",primary:!0},t("Create")))))},CreateTeam_CreateTeamModal=(0,react.memo)(CreateTeamModal);CreateTeamModal.__docgenInfo={description:"",methods:[],displayName:"CreateTeamModal",props:{onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var useCreateRoomModal=function useCreateRoomModal(Component){var setModal=(0,ui_contexts_dist.useSetModal)();return(0,index_module.useMutableCallback)((function(){var handleClose=function handleClose(){setModal(null)};setModal((function(){return react.createElement(Component,{onClose:handleClose})}))}))};function _toConsumableArray(r){return function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}(r)||function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var CREATE_CHANNEL_PERMISSIONS=["create-c","create-p"],CREATE_TEAM_PERMISSIONS=["create-team"],CREATE_DIRECT_PERMISSIONS=["create-d"],CREATE_DISCUSSION_PERMISSIONS=["start-discussion","start-discussion-other-user"],react_virtuoso_dist=__webpack_require__("./node_modules/react-virtuoso/dist/index.mjs"),CustomScrollbars=__webpack_require__("./client/components/CustomScrollbars/index.ts"),roomCoordinator=__webpack_require__("./client/lib/rooms/roomCoordinator.tsx"),GenericNoResults=__webpack_require__("./client/components/GenericNoResults/index.ts"),FederatedRoomListEmptyPlaceholder=function FederatedRoomListEmptyPlaceholder(){var t=(0,ui_contexts_dist.useTranslation)();return react.createElement(fuselage.Box,{display:"flex",justifyContent:"center",height:"full",backgroundColor:"surface"},react.createElement(GenericNoResults.A,{description:t("There_are_no_rooms_for_the_given_search_criteria")}))},MatrixFederationSearch_FederatedRoomListEmptyPlaceholder=FederatedRoomListEmptyPlaceholder;FederatedRoomListEmptyPlaceholder.__docgenInfo={description:"",methods:[],displayName:"FederatedRoomListEmptyPlaceholder"};var _templateObject,dist_index_module=__webpack_require__("./node_modules/@rocket.chat/css-in-js/dist/index.module.js");var clampLine=(0,dist_index_module.css)(_templateObject||(_templateObject=function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n\tline-clamp: 6;\n"]))),FederatedRoomListItem=function FederatedRoomListItem(_ref){var name=_ref.name,topic=_ref.topic,canonicalAlias=_ref.canonicalAlias,joinedMembers=_ref.joinedMembers,onClickJoin=_ref.onClickJoin,canJoin=_ref.canJoin,disabled=_ref.disabled,t=(0,ui_contexts_dist.useTranslation)(),nameId=(0,index_module.useUniqueId)();return react.createElement(fuselage.Box,{mb:16,pi:24,is:"li",display:"flex",flexDirection:"column",w:"full",name:canonicalAlias,"aria-labelledby":nameId},react.createElement(fuselage.Box,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",mbe:4},react.createElement(fuselage.Box,{flexGrow:1,flexShrink:1,fontScale:"p1",fontWeight:"bold",title:name,withTruncatedText:!0,id:nameId},name),canJoin&&react.createElement(fuselage.Button,{primary:!0,flexShrink:0,onClick:onClickJoin,disabled:disabled,small:!0},t("Join")),!canJoin&&react.createElement(fuselage.Box,{flexShrink:0,color:"danger",title:t("Currently_we_dont_support_joining_servers_with_this_many_people")},t("Cant_join"))),topic&&react.createElement(fuselage.Box,{is:"p",fontScale:"c1",mb:4,maxHeight:"x120",overflow:"hidden",withTruncatedText:!0,className:[clampLine]},topic),react.createElement(fuselage.Box,{mbs:4,fontScale:"micro",fontWeight:"bolder",verticalAlign:"top"},canonicalAlias," ",react.createElement(fuselage.Box,{color:"hint",is:"span",verticalAlign:"top"},react.createElement(fuselage.Icon,{name:"user",size:"x12",mbe:2}),joinedMembers)))},MatrixFederationSearch_FederatedRoomListItem=FederatedRoomListItem;function useInfiniteFederationSearchPublicRooms_typeof(o){return useInfiniteFederationSearchPublicRooms_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},useInfiniteFederationSearchPublicRooms_typeof(o)}function useInfiniteFederationSearchPublicRooms_regeneratorRuntime(){useInfiniteFederationSearchPublicRooms_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==useInfiniteFederationSearchPublicRooms_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(useInfiniteFederationSearchPublicRooms_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function useInfiniteFederationSearchPublicRooms_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}FederatedRoomListItem.__docgenInfo={description:"",methods:[],displayName:"FederatedRoomListItem",props:{disabled:{required:!0,tsType:{name:"boolean"},description:""},onClickJoin:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var useInfiniteFederationSearchPublicRooms=function useInfiniteFederationSearchPublicRooms(serverName,roomName,count){var fetchRoomList=(0,ui_contexts_dist.useEndpoint)("GET","/v1/federation/searchPublicRooms");return(0,lib.useInfiniteQuery)(["federation/searchPublicRooms",serverName,roomName,count],function(){var _ref2=function useInfiniteFederationSearchPublicRooms_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){useInfiniteFederationSearchPublicRooms_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){useInfiniteFederationSearchPublicRooms_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}(useInfiniteFederationSearchPublicRooms_regeneratorRuntime().mark((function _callee(_ref){var pageParam;return useInfiniteFederationSearchPublicRooms_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return pageParam=_ref.pageParam,_context.abrupt("return",fetchRoomList({serverName:serverName,roomName:roomName,count:count,pageToken:pageParam}));case 2:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}(),{getNextPageParam:function getNextPageParam(lastPage){return lastPage.nextPageToken},useErrorBoundary:!0,staleTime:6e5,cacheTime:6e5})};function FederatedRoomList_typeof(o){return FederatedRoomList_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},FederatedRoomList_typeof(o)}function FederatedRoomList_extends(){return FederatedRoomList_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},FederatedRoomList_extends.apply(null,arguments)}function FederatedRoomList_regeneratorRuntime(){FederatedRoomList_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==FederatedRoomList_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(FederatedRoomList_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function FederatedRoomList_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}var FederatedRoomList=function FederatedRoomList(_ref){var serverName=_ref.serverName,roomName=_ref.roomName,count=_ref.count,joinExternalPublicRoom=(0,ui_contexts_dist.useEndpoint)("POST","/v1/federation/joinExternalPublicRoom"),setModal=(0,ui_contexts_dist.useSetModal)(),t=(0,ui_contexts_dist.useTranslation)(),dispatchToastMessage=(0,ui_contexts_dist.useToastMessageDispatch)(),_useInfiniteFederatio=useInfiniteFederationSearchPublicRooms(serverName,roomName,count),data=_useInfiniteFederatio.data,isLoading=_useInfiniteFederatio.isLoading,isFetchingNextPage=_useInfiniteFederatio.isFetchingNextPage,fetchNextPage=_useInfiniteFederatio.fetchNextPage,_useMutation=(0,lib.useMutation)(["federation/joinExternalPublicRoom"],function(){var _ref3=function FederatedRoomList_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){FederatedRoomList_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){FederatedRoomList_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}(FederatedRoomList_regeneratorRuntime().mark((function _callee(_ref2){var id,pageToken;return FederatedRoomList_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return id=_ref2.id,pageToken=_ref2.pageToken,_context.abrupt("return",joinExternalPublicRoom({externalRoomId:id,roomName:roomName,pageToken:pageToken}));case 2:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref3.apply(this,arguments)}}(),{onSuccess:function onSuccess(_,data){dispatchToastMessage({type:"success",message:t("Your_request_to_join__roomName__has_been_made_it_could_take_up_to_15_minutes_to_be_processed",{roomName:data.name})}),setModal(null)},onError:function onError(error,_ref4){var id=_ref4.id;if(error instanceof Error&&"already-joined"===error.message)return setModal(null),void roomCoordinator.roomCoordinator.openRouteLink("c",{rid:id});dispatchToastMessage({type:"error",message:error})}}),_onClickJoin=_useMutation.mutate,isLoadingMutation=_useMutation.isLoading;if(isLoading)return react.createElement(fuselage.Throbber,null);var flattenedData=null==data?void 0:data.pages.flatMap((function(page){return page.rooms}));return react.createElement(fuselage.Box,{is:"ul",overflow:"hidden",height:"356px",flexGrow:1,flexShrink:0,mi:-24},react.createElement(react_virtuoso_dist.Virtuoso,{data:flattenedData||[],computeItemKey:function computeItemKey(index,room){return(null==room?void 0:room.id)||index},overscan:4,components:{Footer:function Footer(){return isFetchingNextPage?react.createElement(fuselage.Throbber,null):null},Scroller:CustomScrollbars.Z,EmptyPlaceholder:MatrixFederationSearch_FederatedRoomListEmptyPlaceholder},endReached:isLoading||isFetchingNextPage?function(){}:function(){return fetchNextPage()},itemContent:function itemContent(_,room){return react.createElement(MatrixFederationSearch_FederatedRoomListItem,FederatedRoomList_extends({onClickJoin:function onClickJoin(){return _onClickJoin(room)}},room,{disabled:isLoadingMutation,key:room.id}))}}))},MatrixFederationSearch_FederatedRoomList=FederatedRoomList;FederatedRoomList.__docgenInfo={description:"",methods:[],displayName:"FederatedRoomList",props:{serverName:{required:!0,tsType:{name:"string"},description:""},roomName:{required:!1,tsType:{name:"string"},description:""},pageToken:{required:!1,tsType:{name:"string"},description:""},count:{required:!1,tsType:{name:"number"},description:""}}};var MatrixFederationRemoveServerList_templateObject,react_error_boundary_umd=__webpack_require__("./node_modules/react-error-boundary/dist/react-error-boundary.umd.js"),FederatedRoomListErrorBoundary=function FederatedRoomListErrorBoundary(_ref){var children=_ref.children,resetKeys=_ref.resetKeys,t=(0,ui_contexts_dist.useTranslation)();return react.createElement(lib.QueryErrorResetBoundary,null,(function(_ref2){var reset=_ref2.reset;return react.createElement(react_error_boundary_umd.ErrorBoundary,{children:children,resetKeys:resetKeys,fallbackRender:function fallbackRender(_ref3){var resetErrorBoundary=_ref3.resetErrorBoundary;return react.createElement(fuselage.States,null,react.createElement(fuselage.StatesIcon,{name:"circle-exclamation",variation:"danger"}),react.createElement(fuselage.StatesTitle,null,t("Error")),react.createElement(fuselage.StatesSubtitle,null,t("Error_something_went_wrong")),react.createElement(fuselage.StatesActions,null,react.createElement(fuselage.StatesAction,{onClick:function onClick(){reset(),resetErrorBoundary()}},react.createElement(fuselage.Icon,{name:"reload"})," ",t("Reload"))))}})}))},MatrixFederationSearch_FederatedRoomListErrorBoundary=FederatedRoomListErrorBoundary;FederatedRoomListErrorBoundary.__docgenInfo={description:"",methods:[],displayName:"FederatedRoomListErrorBoundary",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""},resetKeys:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"unknown[]"},description:""}}};var style=(0,dist_index_module.css)(MatrixFederationRemoveServerList_templateObject||(MatrixFederationRemoveServerList_templateObject=function MatrixFederationRemoveServerList_taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n\ti {\n\t\tvisibility: hidden;\n\t}\n\tli {\n\t\tcursor: default;\n\t}\n\tli:hover {\n\t\ti {\n\t\t\tcursor: pointer;\n\t\t\tvisibility: visible;\n\t\t}\n\t}\n"]))),MatrixFederationRemoveServerList=function MatrixFederationRemoveServerList(_ref){var servers=_ref.servers,removeMatrixServer=(0,ui_contexts_dist.useEndpoint)("POST","/v1/federation/removeServerByUser"),queryClient=(0,lib.useQueryClient)(),_useMutation=(0,lib.useMutation)(["federation/removeServerByUser"],(function(serverName){return removeMatrixServer({serverName:serverName})}),{onSuccess:function onSuccess(){return queryClient.invalidateQueries(["federation/listServersByUsers"])}}),removeServer=_useMutation.mutate,isRemovingServer=_useMutation.isLoading,t=(0,ui_contexts_dist.useTranslation)();return react.createElement(fuselage.Box,{display:"flex",flexDirection:"column",className:[style]},react.createElement(fuselage.Box,{is:"h2",fontScale:"p1",fontWeight:"bolder"},t("Servers")),servers.map((function(_ref2){var name=_ref2.name,isDefault=_ref2.default;return react.createElement(fuselage.Option,{key:name,title:name,label:name},!isDefault&&react.createElement(fuselage.IconButton,{icon:"cross",tiny:!0,danger:!isRemovingServer,disabled:isRemovingServer,"aria-label":t("Remove"),onClick:function onClick(){return removeServer(name)}}))})))},MatrixFederationSearch_MatrixFederationRemoveServerList=MatrixFederationRemoveServerList;function useMatrixServerList_typeof(o){return useMatrixServerList_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},useMatrixServerList_typeof(o)}function useMatrixServerList_regeneratorRuntime(){useMatrixServerList_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==useMatrixServerList_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(useMatrixServerList_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function useMatrixServerList_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function useMatrixServerList_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){useMatrixServerList_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){useMatrixServerList_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}MatrixFederationRemoveServerList.__docgenInfo={description:"",methods:[],displayName:"MatrixFederationRemoveServerList",props:{servers:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ name: string; default: boolean; local: boolean }",signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"default",value:{name:"boolean",required:!0}},{key:"local",value:{name:"boolean",required:!0}}]}}],raw:"Array<{ name: string; default: boolean; local: boolean }>"},description:""}}};var useMatrixServerList=function useMatrixServerList(){var fetchServerList=(0,ui_contexts_dist.useEndpoint)("GET","/v1/federation/listServersByUser");return(0,lib.useQuery)(["federation/listServersByUsers"],useMatrixServerList_asyncToGenerator(useMatrixServerList_regeneratorRuntime().mark((function _callee(){return useMatrixServerList_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",fetchServerList());case 1:case"end":return _context.stop()}}),_callee)}))),{useErrorBoundary:!0,staleTime:1/0})};function MatrixFederationManageServerModal_typeof(o){return MatrixFederationManageServerModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},MatrixFederationManageServerModal_typeof(o)}function MatrixFederationManageServerModal_regeneratorRuntime(){MatrixFederationManageServerModal_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==MatrixFederationManageServerModal_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(MatrixFederationManageServerModal_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function MatrixFederationManageServerModal_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function MatrixFederationManageServerModal_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return MatrixFederationManageServerModal_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?MatrixFederationManageServerModal_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MatrixFederationManageServerModal_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var MatrixFederationAddServerModal=function MatrixFederationAddServerModal(_ref){var _onSuccess,onClickClose=_ref.onClickClose,t=(0,ui_contexts_dist.useTranslation)(),addMatrixServer=(0,ui_contexts_dist.useEndpoint)("POST","/v1/federation/addServerByUser"),_useState2=_slicedToArray((0,react.useState)(""),2),serverName=_useState2[0],setServerName=_useState2[1],_useState4=_slicedToArray((0,react.useState)(),2),errorKey=_useState4[0],setErrorKey=_useState4[1],setModal=(0,ui_contexts_dist.useSetModal)(),queryClient=(0,lib.useQueryClient)(),dispatchToastMessage=(0,ui_contexts_dist.useToastMessageDispatch)(),_useMutation=(0,lib.useMutation)(["v1/federation/addServerByUser",serverName],(function(){return addMatrixServer({serverName:serverName})}),{onSuccess:(_onSuccess=function MatrixFederationManageServerModal_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){MatrixFederationManageServerModal_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){MatrixFederationManageServerModal_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}(MatrixFederationManageServerModal_regeneratorRuntime().mark((function _callee(){return MatrixFederationManageServerModal_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,queryClient.invalidateQueries(["federation/listServersByUsers"]);case 2:setModal(react.createElement(MatrixFederationSearch_MatrixFederationSearch,{defaultSelectedServer:serverName,onClose:onClickClose,key:serverName}));case 3:case"end":return _context.stop()}}),_callee)}))),function onSuccess(){return _onSuccess.apply(this,arguments)}),onError:function onError(error){var errorKey=function getErrorKey(error){if(error)return"invalid-server-name"===error.error?"Server_doesnt_exist":"invalid-server-name"===error.error?"Server_already_added":void 0}(error);errorKey?setErrorKey(errorKey):dispatchToastMessage({type:"error",message:error})}}),addServer=_useMutation.mutate,isLoading=_useMutation.isLoading,isError=_useMutation.isError,_useMatrixServerList=useMatrixServerList(),data=_useMatrixServerList.data,isLoadingServerList=_useMatrixServerList.isLoading,titleId=(0,index_module.useUniqueId)(),serverNameId=(0,index_module.useUniqueId)();return react.createElement(fuselage.Modal,{maxHeight:"x600",open:!0,"aria-labelledby":titleId},react.createElement(fuselage.Modal.Header,null,react.createElement(fuselage.Modal.Title,{id:titleId},t("Manage_servers")),react.createElement(fuselage.Modal.Close,{onClick:onClickClose})),react.createElement(fuselage.Modal.Content,null,react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldLabel,{htmlFor:serverNameId},t("Server_name")),react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.TextInput,{id:serverNameId,disabled:isLoading,value:serverName,onChange:function onChange(e){setServerName(e.currentTarget.value),errorKey&&setErrorKey(void 0)},mie:4}),react.createElement(fuselage.Button,{primary:!0,loading:isLoading,onClick:function onClick(){return addServer()}},t("Add"))),isError&&errorKey&&react.createElement(fuselage.FieldError,null,t(errorKey)),react.createElement(fuselage.FieldHint,null,t("Federation_Example_matrix_server"))),react.createElement(fuselage.Divider,{mb:16}),!isLoadingServerList&&(null==data?void 0:data.servers)&&react.createElement(MatrixFederationSearch_MatrixFederationRemoveServerList,{servers:data.servers})),react.createElement(fuselage.Modal.Footer,null,react.createElement(fuselage.ButtonGroup,null,react.createElement(fuselage.Button,{onClick:onClickClose},t("Cancel")))))},MatrixFederationManageServerModal=MatrixFederationAddServerModal;function MatrixFederationSearchModalContent_slicedToArray(r,e){return function MatrixFederationSearchModalContent_arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function MatrixFederationSearchModalContent_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function MatrixFederationSearchModalContent_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return MatrixFederationSearchModalContent_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?MatrixFederationSearchModalContent_arrayLikeToArray(r,a):void 0}}(r,e)||function MatrixFederationSearchModalContent_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MatrixFederationSearchModalContent_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}MatrixFederationAddServerModal.__docgenInfo={description:"",methods:[],displayName:"MatrixFederationAddServerModal",props:{onClickClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var MatrixFederationSearchModalContent=function MatrixFederationSearchModalContent(_ref){var defaultSelectedServer=_ref.defaultSelectedServer,servers=_ref.servers,_useState2=MatrixFederationSearchModalContent_slicedToArray((0,react.useState)((function(){var _defaultServer$name,defaultServer=servers.find((function(server){return server.name===defaultSelectedServer}));return null!==(_defaultServer$name=null==defaultServer?void 0:defaultServer.name)&&void 0!==_defaultServer$name?_defaultServer$name:servers[0].name})),2),serverName=_useState2[0],setServerName=_useState2[1],_useState4=MatrixFederationSearchModalContent_slicedToArray((0,react.useState)(""),2),roomName=_useState4[0],setRoomName=_useState4[1],setModal=(0,ui_contexts_dist.useSetModal)(),debouncedRoomName=(0,index_module.useDebouncedValue)(roomName,400),t=(0,ui_contexts_dist.useTranslation)(),serverOptions=(0,react.useMemo)((function(){return servers.map((function(server){return[server.name,server.name]}))}),[servers]),manageServers=(0,react.useCallback)((function(){setModal(react.createElement(MatrixFederationManageServerModal,{onClickClose:function onClickClose(){return setModal(react.createElement(MatrixFederationSearch_MatrixFederationSearch,{onClose:function onClose(){return setModal(null)}}))}}))}),[setModal]);return react.createElement(react.Fragment,null,react.createElement(fuselage.Box,{display:"flex",flexDirection:"row"},react.createElement(fuselage.Box,{mie:4,flexGrow:0,flexShrink:4},react.createElement(fuselage.Select,{options:serverOptions,value:serverName,onChange:function onChange(value){return setServerName(String(value))}})),react.createElement(fuselage.SearchInput,{"aria-label":t("Search_rooms"),placeholder:t("Search_rooms"),flexGrow:4,flexShrink:0,value:roomName,onChange:function onChange(e){return setRoomName(e.currentTarget.value)}})),react.createElement(fuselage.Box,{is:"a",role:"button",display:"flex",flexDirection:"row",mbe:16,onClick:manageServers},t("Manage_server_list")),react.createElement(MatrixFederationSearch_FederatedRoomListErrorBoundary,null,react.createElement(MatrixFederationSearch_FederatedRoomList,{serverName:serverName,roomName:debouncedRoomName})))},MatrixFederationSearch_MatrixFederationSearchModalContent=MatrixFederationSearchModalContent;MatrixFederationSearchModalContent.__docgenInfo={description:"",methods:[],displayName:"MatrixFederationSearchModalContent",props:{servers:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n\tname: string;\n\tdefault: boolean;\n\tlocal: boolean;\n}",signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"default",value:{name:"boolean",required:!0}},{key:"local",value:{name:"boolean",required:!0}}]}}],raw:"Array<{\n\tname: string;\n\tdefault: boolean;\n\tlocal: boolean;\n}>"},description:""},defaultSelectedServer:{required:!1,tsType:{name:"string"},description:""}}};var MatrixFederationSearch=function MatrixFederationSearch(_ref){var onClose=_ref.onClose,defaultSelectedServer=_ref.defaultSelectedServer,t=(0,ui_contexts_dist.useTranslation)(),_useMatrixServerList=useMatrixServerList(),data=_useMatrixServerList.data,isLoading=_useMatrixServerList.isLoading,titleId=(0,index_module.useUniqueId)();return react.createElement(fuselage.Modal,{open:!0,"aria-labelledby":titleId},react.createElement(fuselage.Modal.Header,null,react.createElement(fuselage.Modal.Title,{id:titleId},t("Federation_Federated_room_search")),react.createElement(fuselage.Modal.Close,{onClick:onClose})),react.createElement(fuselage.Modal.Content,{display:"flex",flexDirection:"column"},isLoading&&react.createElement(react.Fragment,null,react.createElement(fuselage.Skeleton,null),react.createElement(fuselage.Skeleton,null),react.createElement(fuselage.Skeleton,null),react.createElement(fuselage.Skeleton,null)),!isLoading&&(null==data?void 0:data.servers)&&react.createElement(MatrixFederationSearch_MatrixFederationSearchModalContent,{defaultSelectedServer:defaultSelectedServer,servers:data.servers})),react.createElement(fuselage.Modal.Footer,null))},MatrixFederationSearch_MatrixFederationSearch=MatrixFederationSearch;function useMatrixFederationItems_tsx_toConsumableArray(r){return function useMatrixFederationItems_tsx_arrayWithoutHoles(r){if(Array.isArray(r))return useMatrixFederationItems_tsx_arrayLikeToArray(r)}(r)||function useMatrixFederationItems_tsx_iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||function useMatrixFederationItems_tsx_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return useMatrixFederationItems_tsx_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?useMatrixFederationItems_tsx_arrayLikeToArray(r,a):void 0}}(r)||function useMatrixFederationItems_tsx_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useMatrixFederationItems_tsx_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}MatrixFederationSearch.__docgenInfo={description:"",methods:[],displayName:"MatrixFederationSearch",props:{onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},defaultSelectedServer:{required:!1,tsType:{name:"string"},description:""}}};var CREATE_ROOM_PERMISSIONS=["create-c","create-p","create-d","start-discussion","start-discussion-other-user"],useCreateRoom=function useCreateRoom(){var t=(0,ui_contexts_dist.useTranslation)(),showCreate=(0,ui_contexts_dist.useAtLeastOnePermission)(CREATE_ROOM_PERMISSIONS),data=(0,useIsEnterprise.z)().data,isMatrixEnabled=(0,ui_contexts_dist.useSetting)("Federation_Matrix_enabled")&&(null==data?void 0:data.isEnterprise),createRoomItems=function useCreateRoomItems(){var t=(0,ui_contexts_dist.useTranslation)(),discussionEnabled=(0,ui_contexts_dist.useSetting)("Discussion_enabled"),canCreateChannel=(0,ui_contexts_dist.useAtLeastOnePermission)(CREATE_CHANNEL_PERMISSIONS),canCreateTeam=(0,ui_contexts_dist.useAtLeastOnePermission)(CREATE_TEAM_PERMISSIONS),canCreateDirectMessages=(0,ui_contexts_dist.useAtLeastOnePermission)(CREATE_DIRECT_PERMISSIONS),canCreateDiscussion=(0,ui_contexts_dist.useAtLeastOnePermission)(CREATE_DISCUSSION_PERMISSIONS),createChannel=useCreateRoomModal(CreateChannel.A),createTeam=useCreateRoomModal(CreateTeam_CreateTeamModal),createDiscussion=useCreateRoomModal(CreateDiscussion.A),createDirectMessage=useCreateRoomModal(header_CreateDirectMessage),createChannelItem={id:"channel",content:t("Channel"),icon:"hashtag",onClick:function onClick(){createChannel()}},createTeamItem={id:"team",content:t("Team"),icon:"team",onClick:function onClick(){createTeam()}},createDirectMessageItem={id:"direct",content:t("Direct_message"),icon:"balloon",onClick:function onClick(){createDirectMessage()}},createDiscussionItem={id:"discussion",content:t("Discussion"),icon:"discussion",onClick:function onClick(){createDiscussion()}};return[].concat(_toConsumableArray(canCreateDirectMessages?[createDirectMessageItem]:[]),_toConsumableArray(canCreateDiscussion&&discussionEnabled?[createDiscussionItem]:[]),_toConsumableArray(canCreateChannel?[createChannelItem]:[]),_toConsumableArray(canCreateTeam?[createTeamItem]:[]))}(),matrixFederationSearchItems=function useMatrixFederationItems(_ref){var isMatrixEnabled=_ref.isMatrixEnabled,t=(0,ui_contexts_dist.useTranslation)(),searchFederatedRooms=useCreateRoomModal(MatrixFederationSearch_MatrixFederationSearch),matrixFederationSearchItem={id:"matrix-federation-search",content:t("Federation_Search_federated_rooms"),icon:"magnifier",onClick:function onClick(){searchFederatedRooms()}};return useMatrixFederationItems_tsx_toConsumableArray(isMatrixEnabled?[matrixFederationSearchItem]:[])}({isMatrixEnabled:isMatrixEnabled});return[{title:t("Create_new"),items:createRoomItems,permission:showCreate},{title:t("Explore"),items:matrixFederationSearchItems,permission:showCreate&&isMatrixEnabled}].filter((function(section){return section.permission}))};function CreateRoom_extends(){return CreateRoom_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},CreateRoom_extends.apply(null,arguments)}var CreateRoom=function CreateRoom(props){var t=(0,ui_contexts_dist.useTranslation)(),sections=useCreateRoom();return react.createElement(dist.h4,CreateRoom_extends({icon:"edit-rounded",sections:sections,title:t("Create_new"),is:fuselage.Sidebar.TopBar.Action},props))},actions_CreateRoom=CreateRoom;CreateRoom.__docgenInfo={description:"",methods:[],displayName:"CreateRoom"}},"./client/sidebar/header/actions/Directory.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _rocket_chat_fuselage__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@rocket.chat/fuselage/index.js"),_rocket_chat_fuselage_hooks__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@rocket.chat/fuselage-hooks/dist/index.module.js"),_rocket_chat_ui_contexts__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui-contexts/dist/index.js"),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var Directory=function Directory(props){var router=(0,_rocket_chat_ui_contexts__WEBPACK_IMPORTED_MODULE_2__.useRouter)(),sidebar=(0,_rocket_chat_ui_contexts__WEBPACK_IMPORTED_MODULE_2__.useLayout)().sidebar,handleDirectory=(0,_rocket_chat_fuselage_hooks__WEBPACK_IMPORTED_MODULE_1__.useMutableCallback)((function(){sidebar.toggle(),router.navigate("/directory")})),currentRoute=(0,_rocket_chat_ui_contexts__WEBPACK_IMPORTED_MODULE_2__.useCurrentRoutePath)();return react__WEBPACK_IMPORTED_MODULE_3__.createElement(_rocket_chat_fuselage__WEBPACK_IMPORTED_MODULE_0__.Sidebar.TopBar.Action,_extends({},props,{icon:"notebook-hashtag",onClick:handleDirectory,pressed:null==currentRoute?void 0:currentRoute.includes("/directory")}))};__webpack_exports__.A=Directory,Directory.__docgenInfo={description:"",methods:[],displayName:"Directory"}},"./client/sidebar/header/actions/Login.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _rocket_chat_fuselage__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@rocket.chat/fuselage/index.js"),_rocket_chat_ui_contexts__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/ui-contexts/dist/index.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var Login=function Login(props){var setForceLogin=(0,_rocket_chat_ui_contexts__WEBPACK_IMPORTED_MODULE_1__.useSessionDispatch)("forceLogin"),t=(0,_rocket_chat_ui_contexts__WEBPACK_IMPORTED_MODULE_1__.useTranslation)();return react__WEBPACK_IMPORTED_MODULE_2__.createElement(_rocket_chat_fuselage__WEBPACK_IMPORTED_MODULE_0__.Sidebar.TopBar.Action,_extends({},props,{primary:!0,icon:"login",title:t("Sign_in_to_start_talking"),onClick:function onClick(){return setForceLogin(!0)}}))};__webpack_exports__.A=Login,Login.__docgenInfo={description:"",methods:[],displayName:"Login"}},"./client/sidebar/header/actions/Search.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:function(){return actions_Search}});var fuselage=__webpack_require__("./node_modules/@rocket.chat/fuselage/index.js"),index_module=__webpack_require__("./node_modules/@rocket.chat/fuselage-hooks/dist/index.module.js"),react=__webpack_require__("./node_modules/react/index.js"),tinykeys_module=__webpack_require__("./node_modules/tinykeys/dist/tinykeys.module.js"),dist_index_module=__webpack_require__("./node_modules/@rocket.chat/css-in-js/dist/index.module.js"),esm=__webpack_require__("./node_modules/@rocket.chat/string-helpers/dist/esm/index.js"),dist=__webpack_require__("../../packages/ui-contexts/dist/index.js"),lib=__webpack_require__("../../node_modules/@tanstack/react-query/build/lib/index.js"),react_virtuoso_dist=__webpack_require__("./node_modules/react-virtuoso/dist/index.mjs"),CustomScrollbars=__webpack_require__("./client/components/CustomScrollbars/index.ts"),getConfig=__webpack_require__("./client/lib/utils/getConfig.ts"),useAvatarTemplate=__webpack_require__("./client/sidebar/hooks/useAvatarTemplate.tsx"),usePreventDefault=__webpack_require__("./client/sidebar/hooks/usePreventDefault.ts"),useTemplateByViewMode=__webpack_require__("./client/sidebar/hooks/useTemplateByViewMode.tsx"),SideBarItemTemplateWithData=__webpack_require__("./client/sidebar/RoomList/SideBarItemTemplateWithData.tsx"),UserStatus=__webpack_require__("./client/components/UserStatus/index.ts"),roomCoordinator=__webpack_require__("./client/lib/rooms/roomCoordinator.tsx");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var UserItem=function UserItem(_ref){var item=_ref.item,id=_ref.id,style=_ref.style,t=_ref.t,SideBarItemTemplate=_ref.SideBarItemTemplate,AvatarTemplate=_ref.AvatarTemplate,title=_ref.useRealName?item.fname||item.name:item.name||item.fname,icon=react.createElement(fuselage.Sidebar.Item.Icon,{icon:""},react.createElement(UserStatus.LO,{uid:item._id})),href=roomCoordinator.roomCoordinator.getRouteLink(item.t,{name:item.name});return react.createElement(SideBarItemTemplate,{is:"a",style:_objectSpread({height:"100%"},style),id:id,href:href,title:title,subtitle:t("No_messages_yet"),avatar:AvatarTemplate&&react.createElement(AvatarTemplate,item),icon:icon})},search_UserItem=(0,react.memo)(UserItem);UserItem.__docgenInfo={description:"",methods:[],displayName:"UserItem",props:{item:{required:!0,tsType:{name:"signature",type:"object",raw:"{\n\tname?: string;\n\tfname?: string;\n\t_id: IUser['_id'];\n\tt: string;\n}",signature:{properties:[{key:"name",value:{name:"string",required:!1}},{key:"fname",value:{name:"string",required:!1}},{key:"_id",value:{name:"IUser['_id']",raw:"IUser['_id']",required:!0}},{key:"t",value:{name:"string",required:!0}}]}},description:""},t:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => string",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"string"}}},description:""},SideBarItemTemplate:{required:!0,tsType:{name:"any"},description:""},AvatarTemplate:{required:!0,tsType:{name:"any"},description:""},id:{required:!0,tsType:{name:"string"},description:""},style:{required:!1,tsType:{name:"CSSStyleRule"},description:""},useRealName:{required:!1,tsType:{name:"boolean"},description:""}}};var _templateObject,Row=function Row(_ref){var item=_ref.item,data=_ref.data,t=data.t,SideBarItemTemplate=data.SideBarItemTemplate,AvatarTemplate=data.avatarTemplate,useRealName=data.useRealName,extended=data.extended;return"d"!==item.t||item.u?react.createElement(SideBarItemTemplateWithData.A,{id:"search-".concat(item._id),extended:extended,t:t,room:item,SideBarItemTemplate:SideBarItemTemplate,AvatarTemplate:AvatarTemplate}):react.createElement(search_UserItem,{id:"search-".concat(item._id),useRealName:useRealName,t:t,item:item,SideBarItemTemplate:SideBarItemTemplate,AvatarTemplate:AvatarTemplate})},search_Row=(0,react.memo)(Row);function SearchList_typeof(o){return SearchList_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},SearchList_typeof(o)}Row.__docgenInfo={description:"",methods:[],displayName:"Row",props:{item:{required:!0,tsType:{name:"intersection",raw:"ISubscription & IRoom",elements:[{name:"ISubscription"},{name:"IRoom"}]},description:""},data:{required:!0,tsType:{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"},description:""}}};var _excluded=["setValue"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==SearchList_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(SearchList_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function _asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}function _toConsumableArray(r){return function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}(r)||function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||_unsupportedIterableToArray(r)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SearchList_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function SearchList_defineProperty(e,r,t){return(r=function SearchList_toPropertyKey(t){var i=function SearchList_toPrimitive(t,r){if("object"!=SearchList_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=SearchList_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==SearchList_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||_unsupportedIterableToArray(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var _navigator$userAgentD,shortcut=null!==(_navigator$userAgentD=navigator.userAgentData)&&void 0!==_navigator$userAgentD&&_navigator$userAgentD.mobile||function mobileCheck(){var a,check=!1;return a=navigator.userAgent||navigator.vendor||window.opera||"",(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(check=!0),check}()?"":window.navigator.platform.toLowerCase().includes("mac")?"(+K)":"(Ctrl+K)",LIMIT=parseInt(String((0,getConfig.z)("Sidebar_Search_Spotlight_LIMIT",20))),options={sort:{lm:-1,name:1},limit:LIMIT},useSearchItems=function useSearchItems(filterText){var _useMemo2=_slicedToArray((0,react.useMemo)((function(){return filterText.match(/(@|#)?(.*)/i)||[]}),[filterText]),3),mention=_useMemo2[1],name=_useMemo2[2],query=(0,react.useMemo)((function(){var filterRegex=new RegExp((0,esm.Nt)(name),"i");return function SearchList_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?SearchList_ownKeys(Object(t),!0).forEach((function(r){SearchList_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):SearchList_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({$or:[{name:filterRegex},{fname:filterRegex}]},mention&&{t:"@"===mention?"d":{$ne:"d"}})}),[name,mention]),localRooms=(0,dist.useUserSubscriptions)(query,options),usernamesFromClient=_toConsumableArray(null==localRooms?void 0:localRooms.map((function(_ref){var t=_ref.t,name=_ref.name;return"d"===t?name:null}))).filter(Boolean),searchForChannels="#"===mention,searchForDMs="@"===mention,type=(0,react.useMemo)((function(){return searchForChannels?{users:!1,rooms:!0,includeFederatedRooms:!0}:searchForDMs?{users:!0,rooms:!1}:{users:!0,rooms:!0,includeFederatedRooms:!0}}),[searchForChannels,searchForDMs]),getSpotlight=(0,dist.useMethod)("spotlight");return(0,lib.useQuery)(["sidebar/search/spotlight",name,usernamesFromClient,type,localRooms.map((function(_ref2){return _ref2._id+_ref2.name}))],_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var spotlight,filterUsersUnique,roomFilter,usersFilter,userMap,resultsFromServer,exact;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(localRooms.length!==LIMIT){_context.next=2;break}return _context.abrupt("return",localRooms);case 2:return _context.next=4,getSpotlight(name,usernamesFromClient,type);case 4:return spotlight=_context.sent,filterUsersUnique=function filterUsersUnique(_ref4,index,arr){var _id=_ref4._id;return index===arr.findIndex((function(user){return _id===user._id}))},roomFilter=function roomFilter(room){return!localRooms.find((function(item){var _room$uids;return"d"===room.t&&room.uids&&room.uids.length>1&&(null===(_room$uids=room.uids)||void 0===_room$uids?void 0:_room$uids.includes(item._id))||[item.rid,item._id].includes(room._id)}))},usersFilter=function usersFilter(user){return!localRooms.find((function(room){var _room$uids2;return"d"===room.t&&room.uids&&2===(null===(_room$uids2=room.uids)||void 0===_room$uids2?void 0:_room$uids2.length)&&room.uids.includes(user._id)}))},userMap=function userMap(user){return{_id:user._id,t:"d",name:user.username,fname:user.name,avatarETag:user.avatarETag}},(resultsFromServer=[]).push.apply(resultsFromServer,_toConsumableArray(spotlight.users.filter(filterUsersUnique).filter(usersFilter).map(userMap))),resultsFromServer.push.apply(resultsFromServer,_toConsumableArray(spotlight.rooms.filter(roomFilter))),exact=null==resultsFromServer?void 0:resultsFromServer.filter((function(item){return[item.name,item.fname].includes(name)})),_context.abrupt("return",Array.from(new Set([].concat(_toConsumableArray(exact),_toConsumableArray(localRooms),resultsFromServer))));case 14:case"end":return _context.stop()}}),_callee)}))),{staleTime:6e4,keepPreviousData:!0,placeholderData:localRooms})},toggleSelectionState=function toggleSelectionState(next,current,input){null==input||input.setAttribute("aria-activedescendant",next.id),next.setAttribute("aria-selected","true"),next.classList.add("rcx-sidebar-item--selected"),current&&(current.removeAttribute("aria-selected"),current.classList.remove("rcx-sidebar-item--selected"))},SearchList=(0,react.forwardRef)((function SearchList(_ref5,ref){var onClose=_ref5.onClose,listId=(0,index_module.useUniqueId)(),t=(0,dist.useTranslation)(),_useInput=function useInput(initial){var _useState2=_slicedToArray((0,react.useState)(initial),2),value=_useState2[0],setValue=_useState2[1];return{value:value,onChange:(0,index_module.useMutableCallback)((function(e){setValue(e.currentTarget.value)})),setValue:setValue}}(""),setFilterValue=_useInput.setValue,filter=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.includes(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)o=s[r],t.includes(o)||{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_useInput,_excluded),cursorRef=(0,react.useRef)(null),autofocus=(0,index_module.useMergedRefs)((0,index_module.useAutoFocus)(),cursorRef),listRef=(0,react.useRef)(null),boxRef=(0,react.useRef)(null),selectedElement=(0,react.useRef)(null),itemIndexRef=(0,react.useRef)(0),sidebarViewMode=(0,dist.useUserPreference)("sidebarViewMode"),useRealName=(0,dist.useSetting)("UI_Use_Real_Name"),sideBarItemTemplate=(0,useTemplateByViewMode.d)(),avatarTemplate=(0,useAvatarTemplate.h)(),extended="extended"===sidebarViewMode,filterText=(0,index_module.useDebouncedValue)(filter.value,100),placeholder=[t("Search"),shortcut].filter(Boolean).join(" "),_useSearchItems=useSearchItems(filterText),_useSearchItems$data=_useSearchItems.data,items=void 0===_useSearchItems$data?[]:_useSearchItems$data,isLoading=_useSearchItems.isLoading,itemData=(0,react.useMemo)((function(){return{items:items,t:t,SideBarItemTemplate:sideBarItemTemplate,avatarTemplate:avatarTemplate,useRealName:useRealName,extended:extended,sidebarViewMode:sidebarViewMode}}),[avatarTemplate,extended,items,useRealName,sideBarItemTemplate,sidebarViewMode,t]),changeSelection=(0,index_module.useMutableCallback)((function(dir){var nextSelectedElement=null;if("up"===dir){var _selectedElement$curr,potentialElement=null===(_selectedElement$curr=selectedElement.current)||void 0===_selectedElement$curr||null===(_selectedElement$curr=_selectedElement$curr.parentElement)||void 0===_selectedElement$curr?void 0:_selectedElement$curr.previousSibling;potentialElement&&(nextSelectedElement=potentialElement.querySelector("a"))}else{var _selectedElement$curr2,_potentialElement=null===(_selectedElement$curr2=selectedElement.current)||void 0===_selectedElement$curr2||null===(_selectedElement$curr2=_selectedElement$curr2.parentElement)||void 0===_selectedElement$curr2?void 0:_selectedElement$curr2.nextSibling;_potentialElement&&(nextSelectedElement=_potentialElement.querySelector("a"))}return nextSelectedElement?(toggleSelectionState(nextSelectedElement,selectedElement.current||void 0,(null==cursorRef?void 0:cursorRef.current)||void 0),nextSelectedElement):selectedElement.current})),resetCursor=(0,index_module.useMutableCallback)((function(){setTimeout((function(){var _listRef$current,_boxRef$current;itemIndexRef.current=0,null===(_listRef$current=listRef.current)||void 0===_listRef$current||_listRef$current.scrollToIndex({index:itemIndexRef.current}),selectedElement.current=null===(_boxRef$current=boxRef.current)||void 0===_boxRef$current?void 0:_boxRef$current.querySelector("a.rcx-sidebar-item"),selectedElement.current&&toggleSelectionState(selectedElement.current,void 0,(null==cursorRef?void 0:cursorRef.current)||void 0)}),0)}));(0,usePreventDefault.f)(boxRef),(0,react.useEffect)((function(){resetCursor()})),(0,react.useEffect)((function(){resetCursor()}),[filterText,resetCursor]),(0,react.useEffect)((function(){if(null!=cursorRef&&cursorRef.current)return(0,tinykeys_module.Ay)(null==cursorRef?void 0:cursorRef.current,{Escape:function Escape(event){event.preventDefault(),setFilterValue((function(value){return value||onClose(),resetCursor(),""}))},Tab:onClose,ArrowUp:function ArrowUp(){var _listRef$current2,currentElement=changeSelection("up");itemIndexRef.current=Math.max(itemIndexRef.current-1,0),null===(_listRef$current2=listRef.current)||void 0===_listRef$current2||_listRef$current2.scrollToIndex({index:itemIndexRef.current}),selectedElement.current=currentElement},ArrowDown:function ArrowDown(){var _listRef$current3,currentElement=changeSelection("down");itemIndexRef.current=Math.min(itemIndexRef.current+1,items.length+1),null===(_listRef$current3=listRef.current)||void 0===_listRef$current3||_listRef$current3.scrollToIndex({index:itemIndexRef.current}),selectedElement.current=currentElement},Enter:function Enter(event){event.preventDefault(),selectedElement.current&&items.length>0?selectedElement.current.click():onClose()}})}),[cursorRef,changeSelection,items.length,onClose,resetCursor,setFilterValue]);return react.createElement(fuselage.Box,{position:"absolute","rcx-sidebar":!0,h:"full",display:"flex",flexDirection:"column",zIndex:99,w:"full",className:(0,dist_index_module.css)(_templateObject||(_templateObject=_taggedTemplateLiteral(["\n\t\t\t\tleft: 0;\n\t\t\t\ttop: 0;\n\t\t\t"]))),ref:ref,role:"search"},react.createElement(fuselage.Sidebar.TopBar.Section,{flexShrink:0,is:"form"},react.createElement(fuselage.Box,{mb:"x12",w:"full"},react.createElement(fuselage.TextInput,_extends({"aria-owns":listId,"data-qa":"sidebar-search-input",ref:autofocus},filter,{placeholder:placeholder,role:"searchbox",addon:react.createElement(fuselage.Icon,{name:"cross",size:"x20",onClick:onClose})})))),react.createElement(fuselage.Box,{ref:boxRef,role:"listbox",id:listId,tabIndex:-1,flexShrink:1,h:"full",w:"full","data-qa":"sidebar-search-result","aria-live":"polite","aria-atomic":"true","aria-busy":isLoading,onClick:function handleClick(e){var _e$target$parentEleme;if(!(e.target instanceof Element&&[e.target.tagName,null===(_e$target$parentEleme=e.target.parentElement)||void 0===_e$target$parentEleme?void 0:_e$target$parentEleme.tagName].includes("BUTTON")))return onClose()}},react.createElement(react_virtuoso_dist.Virtuoso,{style:{height:"100%",width:"100%"},totalCount:items.length,data:items,components:{Scroller:CustomScrollbars.Z},computeItemKey:function computeItemKey(_,room){return room._id},itemContent:function itemContent(_,data){return react.createElement(search_Row,{data:itemData,item:data})},ref:listRef})))})),search_SearchList=SearchList;function Search_extends(){return Search_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Search_extends.apply(null,arguments)}function Search_slicedToArray(r,e){return function Search_arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function Search_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function Search_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return Search_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Search_arrayLikeToArray(r,a):void 0}}(r,e)||function Search_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Search_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}SearchList.__docgenInfo={description:"",methods:[],displayName:"SearchList",props:{onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var Search=function Search(props){var _useState2=Search_slicedToArray((0,react.useState)(!1),2),searchOpen=_useState2[0],setSearchOpen=_useState2[1],ref=(0,react.useRef)(null),handleCloseSearch=(0,index_module.useMutableCallback)((function(){setSearchOpen(!1)}));(0,index_module.useOutsideClick)([ref],handleCloseSearch);var openSearch=(0,index_module.useMutableCallback)((function(){setSearchOpen(!0)}));return(0,react.useEffect)((function(){var unsubscribe=(0,tinykeys_module.Ay)(window,{"$mod+K":function $modK(event){event.preventDefault(),openSearch()},"$mod+P":function $modP(event){event.preventDefault(),openSearch()}});return function(){unsubscribe()}}),[openSearch]),react.createElement(react.Fragment,null,react.createElement(fuselage.Sidebar.TopBar.Action,Search_extends({icon:"magnifier",onClick:openSearch},props)),searchOpen&&react.createElement(search_SearchList,{ref:ref,onClose:handleCloseSearch}))},actions_Search=Search;Search.__docgenInfo={description:"",methods:[],displayName:"Search"}},"./client/sidebar/header/actions/Sort.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:function(){return actions_Sort}});var fuselage=__webpack_require__("./node_modules/@rocket.chat/fuselage/index.js"),dist=__webpack_require__("../../packages/ui-client/dist/index.js"),ui_contexts_dist=__webpack_require__("../../packages/ui-contexts/dist/index.js"),react=__webpack_require__("./node_modules/react/index.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var OmnichannelSortingDisclaimer=__webpack_require__("./client/components/Omnichannel/OmnichannelSortingDisclaimer.tsx"),useSortMenu=function useSortMenu(){var t=(0,ui_contexts_dist.useTranslation)(),viewModeItems=function useViewModeItems(){var t=(0,ui_contexts_dist.useTranslation)(),saveUserPreferences=(0,ui_contexts_dist.useEndpoint)("POST","/v1/users.setPreferences"),useHandleChange=function useHandleChange(value){return(0,react.useCallback)((function(){return saveUserPreferences({data:{sidebarViewMode:value}})}),[value])},sidebarViewMode=(0,ui_contexts_dist.useUserPreference)("sidebarViewMode","extended"),sidebarDisplayAvatar=(0,ui_contexts_dist.useUserPreference)("sidebarDisplayAvatar",!1),setToExtended=useHandleChange("extended"),setToMedium=useHandleChange("medium"),setToCondensed=useHandleChange("condensed"),handleChangeSidebarDisplayAvatar=(0,react.useCallback)((function(){return saveUserPreferences({data:{sidebarDisplayAvatar:!sidebarDisplayAvatar}})}),[saveUserPreferences,sidebarDisplayAvatar]);return[{id:"extended",content:t("Extended"),icon:"extended-view",addon:react.createElement(fuselage.RadioButton,{onChange:setToExtended,checked:"extended"===sidebarViewMode})},{id:"medium",content:t("Medium"),icon:"medium-view",addon:react.createElement(fuselage.RadioButton,{onChange:setToMedium,checked:"medium"===sidebarViewMode})},{id:"condensed",content:t("Condensed"),icon:"condensed-view",addon:react.createElement(fuselage.RadioButton,{onChange:setToCondensed,checked:"condensed"===sidebarViewMode})},{id:"avatars",content:t("Avatars"),icon:"user-rounded",addon:react.createElement(fuselage.ToggleSwitch,{onChange:handleChangeSidebarDisplayAvatar,checked:sidebarDisplayAvatar})}]}(),sortModeItems=function useSortModeItems(){var t=(0,ui_contexts_dist.useTranslation)(),saveUserPreferences=(0,ui_contexts_dist.useEndpoint)("POST","/v1/users.setPreferences"),sidebarSortBy=(0,ui_contexts_dist.useUserPreference)("sidebarSortby","activity"),isOmnichannelEnabled=(0,OmnichannelSortingDisclaimer.V)(),useHandleChange=function useHandleChange(value){return(0,react.useCallback)((function(){return saveUserPreferences({data:{sidebarSortby:value}})}),[value])},setToAlphabetical=useHandleChange("alphabetical"),setToActivity=useHandleChange("activity");return[{id:"activity",content:t("Activity"),icon:"clock",addon:react.createElement(fuselage.RadioButton,{onChange:setToActivity,checked:"activity"===sidebarSortBy}),description:"activity"===sidebarSortBy&&isOmnichannelEnabled&&react.createElement(OmnichannelSortingDisclaimer.m,null)},{id:"name",content:t("Name"),icon:"sort-az",addon:react.createElement(fuselage.RadioButton,{onChange:setToAlphabetical,checked:"alphabetical"===sidebarSortBy}),description:"alphabetical"===sidebarSortBy&&isOmnichannelEnabled&&react.createElement(OmnichannelSortingDisclaimer.m,null)}]}(),groupingListItems=function useGroupingListItems(){var t=(0,ui_contexts_dist.useTranslation)(),sidebarGroupByType=(0,ui_contexts_dist.useUserPreference)("sidebarGroupByType"),sidebarShowFavorites=(0,ui_contexts_dist.useUserPreference)("sidebarShowFavorites"),sidebarShowUnread=(0,ui_contexts_dist.useUserPreference)("sidebarShowUnread"),saveUserPreferences=(0,ui_contexts_dist.useEndpoint)("POST","/v1/users.setPreferences"),useHandleChange=function useHandleChange(key,value){return(0,react.useCallback)((function(){return saveUserPreferences({data:_defineProperty({},key,value)})}),[key,value])},handleChangeGroupByType=useHandleChange("sidebarGroupByType",!sidebarGroupByType),handleChangeShoFavorite=useHandleChange("sidebarShowFavorites",!sidebarShowFavorites),handleChangeShowUnread=useHandleChange("sidebarShowUnread",!sidebarShowUnread);return[{id:"unread",content:t("Unread"),icon:"flag",addon:react.createElement(fuselage.CheckBox,{onChange:handleChangeShowUnread,checked:sidebarShowUnread})},{id:"favorites",content:t("Favorites"),icon:"star",addon:react.createElement(fuselage.CheckBox,{onChange:handleChangeShoFavorite,checked:sidebarShowFavorites})},{id:"types",content:t("Types"),icon:"group-by-type",addon:react.createElement(fuselage.CheckBox,{onChange:handleChangeGroupByType,checked:sidebarGroupByType})}]}();return[{title:t("Display"),items:viewModeItems},{title:t("Sort_By"),items:sortModeItems},{title:t("Group_by"),items:groupingListItems}]};function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var Sort=function Sort(props){var t=(0,ui_contexts_dist.useTranslation)(),sections=useSortMenu();return react.createElement(dist.h4,_extends({icon:"sort",sections:sections,title:t("Display"),selectionMode:"multiple",is:fuselage.Sidebar.TopBar.Action},props))},actions_Sort=Sort;Sort.__docgenInfo={description:"",methods:[],displayName:"Sort"}},"./node_modules/react-error-boundary/dist/react-error-boundary.umd.js":function(__unused_webpack_module,exports,__webpack_require__){!function(exports,React){"use strict";function _interopNamespace(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach((function(k){if("default"!==k){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:!0,get:function(){return e[k]}})}})),n.default=e,Object.freeze(n)}var React__namespace=_interopNamespace(React);function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}var changedArray=function changedArray(a,b){return void 0===a&&(a=[]),void 0===b&&(b=[]),a.length!==b.length||a.some((function(item,index){return!Object.is(item,b[index])}))},initialState={error:null},ErrorBoundary=function(_React$Component){function ErrorBoundary(){for(var _this,_len=arguments.length,_args=new Array(_len),_key=0;_key<_len;_key++)_args[_key]=arguments[_key];return(_this=_React$Component.call.apply(_React$Component,[this].concat(_args))||this).state=initialState,_this.resetErrorBoundary=function(){for(var _this$props,_len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];null==_this.props.onReset||(_this$props=_this.props).onReset.apply(_this$props,args),_this.reset()},_this}_inheritsLoose(ErrorBoundary,_React$Component),ErrorBoundary.getDerivedStateFromError=function getDerivedStateFromError(error){return{error:error}};var _proto=ErrorBoundary.prototype;return _proto.reset=function reset(){this.setState(initialState)},_proto.componentDidCatch=function componentDidCatch(error,info){var _this$props$onError,_this$props2;null==(_this$props$onError=(_this$props2=this.props).onError)||_this$props$onError.call(_this$props2,error,info)},_proto.componentDidUpdate=function componentDidUpdate(prevProps,prevState){var _this$props$onResetKe,_this$props3,error=this.state.error,resetKeys=this.props.resetKeys;null!==error&&null!==prevState.error&&changedArray(prevProps.resetKeys,resetKeys)&&(null==(_this$props$onResetKe=(_this$props3=this.props).onResetKeysChange)||_this$props$onResetKe.call(_this$props3,prevProps.resetKeys,resetKeys),this.reset())},_proto.render=function render(){var error=this.state.error,_this$props4=this.props,fallbackRender=_this$props4.fallbackRender,FallbackComponent=_this$props4.FallbackComponent,fallback=_this$props4.fallback;if(null!==error){var _props={error:error,resetErrorBoundary:this.resetErrorBoundary};if(React__namespace.isValidElement(fallback))return fallback;if("function"==typeof fallbackRender)return fallbackRender(_props);if(FallbackComponent)return React__namespace.createElement(FallbackComponent,_props);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},ErrorBoundary}(React__namespace.Component);function withErrorBoundary(Component,errorBoundaryProps){var Wrapped=function Wrapped(props){return React__namespace.createElement(ErrorBoundary,errorBoundaryProps,React__namespace.createElement(Component,props))},name=Component.displayName||Component.name||"Unknown";return Wrapped.displayName="withErrorBoundary("+name+")",Wrapped}function useErrorHandler(givenError){var _React$useState=React__namespace.useState(null),error=_React$useState[0],setError=_React$useState[1];if(null!=givenError)throw givenError;if(null!=error)throw error;return setError}exports.ErrorBoundary=ErrorBoundary,exports.useErrorHandler=useErrorHandler,exports.withErrorBoundary=withErrorBoundary,Object.defineProperty(exports,"__esModule",{value:!0})}(exports,__webpack_require__("./node_modules/react/index.js"))}}]);