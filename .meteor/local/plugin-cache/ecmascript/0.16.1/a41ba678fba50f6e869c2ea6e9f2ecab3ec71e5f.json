{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/weslley/Documents/projects/Rocket.Chat/app/file-upload/server/config/GoogleStorage.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.linux.x86_64"},"sourceFileName":"app/file-upload/server/config/GoogleStorage.js","filename":"/home/weslley/Documents/projects/Rocket.Chat/app/file-upload/server/config/GoogleStorage.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/home/weslley/Documents/projects/Rocket.Chat","root":"/home/weslley/Documents/projects/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/home/weslley/Documents/projects/Rocket.Chat/app/file-upload/server/config/GoogleStorage.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/file-upload/server/config/GoogleStorage.js"}},"code":"let http;\nmodule.link(\"http\", {\n  default(v) {\n    http = v;\n  }\n\n}, 0);\nlet https;\nmodule.link(\"https\", {\n  default(v) {\n    https = v;\n  }\n\n}, 1);\n\nlet _;\n\nmodule.link(\"underscore\", {\n  default(v) {\n    _ = v;\n  }\n\n}, 2);\nlet FileUploadClass, FileUpload;\nmodule.link(\"../lib/FileUpload\", {\n  FileUploadClass(v) {\n    FileUploadClass = v;\n  },\n\n  FileUpload(v) {\n    FileUpload = v;\n  }\n\n}, 3);\nlet settings;\nmodule.link(\"../../../settings\", {\n  settings(v) {\n    settings = v;\n  }\n\n}, 4);\nmodule.link(\"../../ufs/GoogleStorage/server.js\");\nlet SystemLogger;\nmodule.link(\"../../../../server/lib/logger/system\", {\n  SystemLogger(v) {\n    SystemLogger = v;\n  }\n\n}, 5);\n\nconst get = function (file, req, res) {\n  const forceDownload = typeof req.query.download !== 'undefined';\n  this.store.getRedirectURL(file, forceDownload, (err, fileUrl) => {\n    if (err) {\n      return SystemLogger.error(err);\n    }\n\n    if (!fileUrl) {\n      return res.end();\n    }\n\n    const storeType = file.store.split(':').pop();\n\n    if (settings.get(\"FileUpload_GoogleStorage_Proxy_\".concat(storeType))) {\n      const request = /^https:/.test(fileUrl) ? https : http;\n      return FileUpload.proxyFile(file.name, fileUrl, forceDownload, request, req, res);\n    }\n\n    return FileUpload.redirectToFile(fileUrl, req, res);\n  });\n};\n\nconst copy = function (file, out) {\n  this.store.getRedirectURL(file, false, (err, fileUrl) => {\n    if (err) {\n      SystemLogger.error(err);\n    }\n\n    if (fileUrl) {\n      const request = /^https:/.test(fileUrl) ? https : http;\n      request.get(fileUrl, fileRes => fileRes.pipe(out));\n    } else {\n      out.end();\n    }\n  });\n};\n\nconst GoogleCloudStorageUploads = new FileUploadClass({\n  name: 'GoogleCloudStorage:Uploads',\n  get,\n  copy // store setted bellow\n\n});\nconst GoogleCloudStorageAvatars = new FileUploadClass({\n  name: 'GoogleCloudStorage:Avatars',\n  get,\n  copy // store setted bellow\n\n});\nconst GoogleCloudStorageUserDataFiles = new FileUploadClass({\n  name: 'GoogleCloudStorage:UserDataFiles',\n  get,\n  copy // store setted bellow\n\n});\n\nconst configure = _.debounce(function () {\n  const bucket = settings.get('FileUpload_GoogleStorage_Bucket');\n  const accessId = settings.get('FileUpload_GoogleStorage_AccessId');\n  const secret = settings.get('FileUpload_GoogleStorage_Secret');\n  const URLExpiryTimeSpan = settings.get('FileUpload_S3_URLExpiryTimeSpan');\n\n  if (!bucket || !accessId || !secret) {\n    return;\n  }\n\n  const config = {\n    connection: {\n      credentials: {\n        client_email: accessId,\n        private_key: secret\n      }\n    },\n    bucket,\n    URLExpiryTimeSpan\n  };\n  GoogleCloudStorageUploads.store = FileUpload.configureUploadsStore('GoogleStorage', GoogleCloudStorageUploads.name, config);\n  GoogleCloudStorageAvatars.store = FileUpload.configureUploadsStore('GoogleStorage', GoogleCloudStorageAvatars.name, config);\n  GoogleCloudStorageUserDataFiles.store = FileUpload.configureUploadsStore('GoogleStorage', GoogleCloudStorageUserDataFiles.name, config);\n}, 500);\n\nsettings.watchByRegex(/^FileUpload_GoogleStorage_/, configure);","map":{"version":3,"sources":["app/file-upload/server/config/GoogleStorage.js"],"names":["http","module","link","default","v","https","_","FileUploadClass","FileUpload","settings","SystemLogger","get","file","req","res","forceDownload","query","download","store","getRedirectURL","err","fileUrl","error","end","storeType","split","pop","request","test","proxyFile","name","redirectToFile","copy","out","fileRes","pipe","GoogleCloudStorageUploads","GoogleCloudStorageAvatars","GoogleCloudStorageUserDataFiles","configure","debounce","bucket","accessId","secret","URLExpiryTimeSpan","config","connection","credentials","client_email","private_key","configureUploadsStore","watchByRegex"],"mappings":"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","sourcesContent":["import http from 'http';\nimport https from 'https';\n\nimport _ from 'underscore';\n\nimport { FileUploadClass, FileUpload } from '../lib/FileUpload';\nimport { settings } from '../../../settings';\nimport '../../ufs/GoogleStorage/server.js';\nimport { SystemLogger } from '../../../../server/lib/logger/system';\n\nconst get = function (file, req, res) {\n\tconst forceDownload = typeof req.query.download !== 'undefined';\n\n\tthis.store.getRedirectURL(file, forceDownload, (err, fileUrl) => {\n\t\tif (err) {\n\t\t\treturn SystemLogger.error(err);\n\t\t}\n\n\t\tif (!fileUrl) {\n\t\t\treturn res.end();\n\t\t}\n\n\t\tconst storeType = file.store.split(':').pop();\n\t\tif (settings.get(`FileUpload_GoogleStorage_Proxy_${storeType}`)) {\n\t\t\tconst request = /^https:/.test(fileUrl) ? https : http;\n\n\t\t\treturn FileUpload.proxyFile(file.name, fileUrl, forceDownload, request, req, res);\n\t\t}\n\n\t\treturn FileUpload.redirectToFile(fileUrl, req, res);\n\t});\n};\n\nconst copy = function (file, out) {\n\tthis.store.getRedirectURL(file, false, (err, fileUrl) => {\n\t\tif (err) {\n\t\t\tSystemLogger.error(err);\n\t\t}\n\n\t\tif (fileUrl) {\n\t\t\tconst request = /^https:/.test(fileUrl) ? https : http;\n\t\t\trequest.get(fileUrl, (fileRes) => fileRes.pipe(out));\n\t\t} else {\n\t\t\tout.end();\n\t\t}\n\t});\n};\n\nconst GoogleCloudStorageUploads = new FileUploadClass({\n\tname: 'GoogleCloudStorage:Uploads',\n\tget,\n\tcopy,\n\t// store setted bellow\n});\n\nconst GoogleCloudStorageAvatars = new FileUploadClass({\n\tname: 'GoogleCloudStorage:Avatars',\n\tget,\n\tcopy,\n\t// store setted bellow\n});\n\nconst GoogleCloudStorageUserDataFiles = new FileUploadClass({\n\tname: 'GoogleCloudStorage:UserDataFiles',\n\tget,\n\tcopy,\n\t// store setted bellow\n});\n\nconst configure = _.debounce(function () {\n\tconst bucket = settings.get('FileUpload_GoogleStorage_Bucket');\n\tconst accessId = settings.get('FileUpload_GoogleStorage_AccessId');\n\tconst secret = settings.get('FileUpload_GoogleStorage_Secret');\n\tconst URLExpiryTimeSpan = settings.get('FileUpload_S3_URLExpiryTimeSpan');\n\n\tif (!bucket || !accessId || !secret) {\n\t\treturn;\n\t}\n\n\tconst config = {\n\t\tconnection: {\n\t\t\tcredentials: {\n\t\t\t\tclient_email: accessId,\n\t\t\t\tprivate_key: secret,\n\t\t\t},\n\t\t},\n\t\tbucket,\n\t\tURLExpiryTimeSpan,\n\t};\n\n\tGoogleCloudStorageUploads.store = FileUpload.configureUploadsStore('GoogleStorage', GoogleCloudStorageUploads.name, config);\n\tGoogleCloudStorageAvatars.store = FileUpload.configureUploadsStore('GoogleStorage', GoogleCloudStorageAvatars.name, config);\n\tGoogleCloudStorageUserDataFiles.store = FileUpload.configureUploadsStore('GoogleStorage', GoogleCloudStorageUserDataFiles.name, config);\n}, 500);\n\nsettings.watchByRegex(/^FileUpload_GoogleStorage_/, configure);\n"]},"sourceType":"module","hash":"a41ba678fba50f6e869c2ea6e9f2ecab3ec71e5f"}
