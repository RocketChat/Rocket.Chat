[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\n\n/* Package-scope variables */\nvar getCaretCoordinates;\n\n(function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// packages/dandv_caret-position/packages/dandv_caret-position.js                                                     //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n(function () {\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                 //\n// packages/dandv:caret-position/component/index.js                                                                //\n//                                                                                                                 //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                   //\n/* jshint browser: true */                                                                                         // 1\n                                                                                                                   // 2\n// The properties that we copy into a mirrored div.                                                                // 3\n// Note that some browsers, such as Firefox,                                                                       // 4\n// do not concatenate properties, i.e. padding-top, bottom etc. -> padding,                                        // 5\n// so we have to do every single property specifically.                                                            // 6\nvar properties = [                                                                                                 // 7\n  'direction',  // RTL support                                                                                     // 8\n  'boxSizing',                                                                                                     // 9\n  'width',  // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does       // 10\n  'height',                                                                                                        // 11\n  'overflowX',                                                                                                     // 12\n  'overflowY',  // copy the scrollbar for IE                                                                       // 13\n                                                                                                                   // 14\n  'borderTopWidth',                                                                                                // 15\n  'borderRightWidth',                                                                                              // 16\n  'borderBottomWidth',                                                                                             // 17\n  'borderLeftWidth',                                                                                               // 18\n                                                                                                                   // 19\n  'paddingTop',                                                                                                    // 20\n  'paddingRight',                                                                                                  // 21\n  'paddingBottom',                                                                                                 // 22\n  'paddingLeft',                                                                                                   // 23\n                                                                                                                   // 24\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/font                                                         // 25\n  'fontStyle',                                                                                                     // 26\n  'fontVariant',                                                                                                   // 27\n  'fontWeight',                                                                                                    // 28\n  'fontStretch',                                                                                                   // 29\n  'fontSize',                                                                                                      // 30\n  'fontSizeAdjust',                                                                                                // 31\n  'lineHeight',                                                                                                    // 32\n  'fontFamily',                                                                                                    // 33\n                                                                                                                   // 34\n  'textAlign',                                                                                                     // 35\n  'textTransform',                                                                                                 // 36\n  'textIndent',                                                                                                    // 37\n  'textDecoration',  // might not make a difference, but better be safe                                            // 38\n                                                                                                                   // 39\n  'letterSpacing',                                                                                                 // 40\n  'wordSpacing'                                                                                                    // 41\n];                                                                                                                 // 42\n                                                                                                                   // 43\nvar isFirefox = !(window.mozInnerScreenX == null);                                                                 // 44\n                                                                                                                   // 45\nvar getCaretCoordinatesFn = function (element, position, recalculate) {                                            // 46\n  // mirrored div                                                                                                  // 47\n  var div = document.createElement('div');                                                                         // 48\n  div.id = 'input-textarea-caret-position-mirror-div';                                                             // 49\n  document.body.appendChild(div);                                                                                  // 50\n                                                                                                                   // 51\n  var style = div.style;                                                                                           // 52\n  var computed = window.getComputedStyle? getComputedStyle(element) : element.currentStyle;  // currentStyle for IE < 9\n                                                                                                                   // 54\n  // default textarea styles                                                                                       // 55\n  style.whiteSpace = 'pre-wrap';                                                                                   // 56\n  if (element.nodeName !== 'INPUT')                                                                                // 57\n    style.wordWrap = 'break-word';  // only for textarea-s                                                         // 58\n                                                                                                                   // 59\n  // position off-screen                                                                                           // 60\n  style.position = 'absolute';  // required to return coordinates properly                                         // 61\n  style.visibility = 'hidden';  // not 'display: none' because we want rendering                                   // 62\n                                                                                                                   // 63\n  // transfer the element's properties to the div                                                                  // 64\n  properties.forEach(function (prop) {                                                                             // 65\n    style[prop] = computed[prop];                                                                                  // 66\n  });                                                                                                              // 67\n                                                                                                                   // 68\n  if (isFirefox) {                                                                                                 // 69\n    style.width = parseInt(computed.width) - 2 + 'px'  // Firefox adds 2 pixels to the padding - https://bugzilla.mozilla.org/show_bug.cgi?id=753662\n    // Firefox lies about the overflow property for textareas: https://bugzilla.mozilla.org/show_bug.cgi?id=984275 // 71\n    if (element.scrollHeight > parseInt(computed.height))                                                          // 72\n      style.overflowY = 'scroll';                                                                                  // 73\n  } else {                                                                                                         // 74\n    style.overflow = 'hidden';  // for Chrome to not render a scrollbar; IE keeps overflowY = 'scroll'             // 75\n  }                                                                                                                // 76\n                                                                                                                   // 77\n  div.textContent = element.value.substring(0, position);                                                          // 78\n  // the second special handling for input type=\"text\" vs textarea: spaces need to be replaced with non-breaking spaces - http://stackoverflow.com/a/13402035/1269037\n  if (element.nodeName === 'INPUT')                                                                                // 80\n    div.textContent = div.textContent.replace(/\\s/g, \"\\u00a0\");                                                    // 81\n                                                                                                                   // 82\n  var span = document.createElement('span');                                                                       // 83\n  // Wrapping must be replicated *exactly*, including when a long word gets                                        // 84\n  // onto the next line, with whitespace at the end of the line before (#7).                                       // 85\n  // The  *only* reliable way to do that is to copy the *entire* rest of the                                       // 86\n  // textarea's content into the <span> created at the caret position.                                             // 87\n  // for inputs, just '.' would be enough, but why bother?                                                         // 88\n  span.textContent = element.value.substring(position) || '.';  // || because a completely empty faux span doesn't render at all\n  div.appendChild(span);                                                                                           // 90\n                                                                                                                   // 91\n  var coordinates = {                                                                                              // 92\n    top: span.offsetTop + parseInt(computed['borderTopWidth']),                                                    // 93\n    left: span.offsetLeft + parseInt(computed['borderLeftWidth'])                                                  // 94\n  };                                                                                                               // 95\n                                                                                                                   // 96\n  document.body.removeChild(div);                                                                                  // 97\n                                                                                                                   // 98\n  return coordinates;                                                                                              // 99\n}                                                                                                                  // 100\n                                                                                                                   // 101\nif (typeof Package !== 'undefined') {                                                                              // 102\n  getCaretCoordinates = getCaretCoordinatesFn;  // Meteor                                                          // 103\n} else {                                                                                                           // 104\n  module.exports = getCaretCoordinatesFn;    // Component                                                          // 105\n}                                                                                                                  // 106\n                                                                                                                   // 107\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nPackage._define(\"dandv:caret-position\", {\n  getCaretCoordinates: getCaretCoordinates\n});\n\n})();\n","servePath":"/packages/dandv_caret-position.js"}]