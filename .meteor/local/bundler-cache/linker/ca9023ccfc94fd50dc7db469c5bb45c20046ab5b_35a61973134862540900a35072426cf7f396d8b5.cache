[{"type":"js","data":"(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar ECMAScript = Package.ecmascript.ECMAScript;\nvar _ = Package.underscore._;\nvar meteorInstall = Package.modules.meteorInstall;\nvar Promise = Package.promise.Promise;\n\n/* Package-scope variables */\nvar Boilerplate;\n\nvar require = meteorInstall({\"node_modules\":{\"meteor\":{\"boilerplate-generator\":{\"generator.js\":function module(require,exports,module){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// packages/boilerplate-generator/generator.js                                                                       //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\nlet _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n\n}, 0);\nmodule.export({\n  Boilerplate: () => Boilerplate\n});\nlet readFile;\nmodule.link(\"fs\", {\n  readFile(v) {\n    readFile = v;\n  }\n\n}, 0);\nlet createStream;\nmodule.link(\"combined-stream2\", {\n  create(v) {\n    createStream = v;\n  }\n\n}, 1);\nlet WebBrowserTemplate;\nmodule.link(\"./template-web.browser\", {\n  default(v) {\n    WebBrowserTemplate = v;\n  }\n\n}, 2);\nlet WebCordovaTemplate;\nmodule.link(\"./template-web.cordova\", {\n  default(v) {\n    WebCordovaTemplate = v;\n  }\n\n}, 3);\n\n// Copied from webapp_server\nconst readUtf8FileSync = filename => Meteor.wrapAsync(readFile)(filename, 'utf8');\n\nconst identity = value => value;\n\nfunction appendToStream(chunk, stream) {\n  if (typeof chunk === \"string\") {\n    stream.append(Buffer.from(chunk, \"utf8\"));\n  } else if (Buffer.isBuffer(chunk) || typeof chunk.read === \"function\") {\n    stream.append(chunk);\n  }\n}\n\nlet shouldWarnAboutToHTMLDeprecation = !Meteor.isProduction;\n\nclass Boilerplate {\n  constructor(arch, manifest) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    const {\n      headTemplate,\n      closeTemplate\n    } = getTemplate(arch);\n    this.headTemplate = headTemplate;\n    this.closeTemplate = closeTemplate;\n    this.baseData = null;\n\n    this._generateBoilerplateFromManifest(manifest, options);\n  }\n\n  toHTML(extraData) {\n    if (shouldWarnAboutToHTMLDeprecation) {\n      shouldWarnAboutToHTMLDeprecation = false;\n      console.error(\"The Boilerplate#toHTML method has been deprecated. \" + \"Please use Boilerplate#toHTMLStream instead.\");\n      console.trace();\n    } // Calling .await() requires a Fiber.\n\n\n    return this.toHTMLAsync(extraData).await();\n  } // Returns a Promise that resolves to a string of HTML.\n\n\n  toHTMLAsync(extraData) {\n    return new Promise((resolve, reject) => {\n      const stream = this.toHTMLStream(extraData);\n      const chunks = [];\n      stream.on(\"data\", chunk => chunks.push(chunk));\n      stream.on(\"end\", () => {\n        resolve(Buffer.concat(chunks).toString(\"utf8\"));\n      });\n      stream.on(\"error\", reject);\n    });\n  } // The 'extraData' argument can be used to extend 'self.baseData'. Its\n  // purpose is to allow you to specify data that you might not know at\n  // the time that you construct the Boilerplate object. (e.g. it is used\n  // by 'webapp' to specify data that is only known at request-time).\n  // this returns a stream\n\n\n  toHTMLStream(extraData) {\n    if (!this.baseData || !this.headTemplate || !this.closeTemplate) {\n      throw new Error('Boilerplate did not instantiate correctly.');\n    }\n\n    const data = _objectSpread(_objectSpread({}, this.baseData), extraData);\n\n    const start = \"<!DOCTYPE html>\\n\" + this.headTemplate(data);\n    const {\n      body,\n      dynamicBody\n    } = data;\n    const end = this.closeTemplate(data);\n    const response = createStream();\n    appendToStream(start, response);\n\n    if (body) {\n      appendToStream(body, response);\n    }\n\n    if (dynamicBody) {\n      appendToStream(dynamicBody, response);\n    }\n\n    appendToStream(end, response);\n    return response;\n  } // XXX Exported to allow client-side only changes to rebuild the boilerplate\n  // without requiring a full server restart.\n  // Produces an HTML string with given manifest and boilerplateSource.\n  // Optionally takes urlMapper in case urls from manifest need to be prefixed\n  // or rewritten.\n  // Optionally takes pathMapper for resolving relative file system paths.\n  // Optionally allows to override fields of the data context.\n\n\n  _generateBoilerplateFromManifest(manifest) {\n    let {\n      urlMapper = identity,\n      pathMapper = identity,\n      baseDataExtension,\n      inline\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    const boilerplateBaseData = _objectSpread({\n      css: [],\n      js: [],\n      head: '',\n      body: '',\n      meteorManifest: JSON.stringify(manifest)\n    }, baseDataExtension);\n\n    manifest.forEach(item => {\n      const urlPath = urlMapper(item.url);\n      const itemObj = {\n        url: urlPath\n      };\n\n      if (inline) {\n        itemObj.scriptContent = readUtf8FileSync(pathMapper(item.path));\n        itemObj.inline = true;\n      } else if (item.sri) {\n        itemObj.sri = item.sri;\n      }\n\n      if (item.type === 'css' && item.where === 'client') {\n        boilerplateBaseData.css.push(itemObj);\n      }\n\n      if (item.type === 'js' && item.where === 'client' && // Dynamic JS modules should not be loaded eagerly in the\n      // initial HTML of the app.\n      !item.path.startsWith('dynamic/')) {\n        boilerplateBaseData.js.push(itemObj);\n      }\n\n      if (item.type === 'head') {\n        boilerplateBaseData.head = readUtf8FileSync(pathMapper(item.path));\n      }\n\n      if (item.type === 'body') {\n        boilerplateBaseData.body = readUtf8FileSync(pathMapper(item.path));\n      }\n    });\n    this.baseData = boilerplateBaseData;\n  }\n\n}\n\n; // Returns a template function that, when called, produces the boilerplate\n// html as a string.\n\nfunction getTemplate(arch) {\n  const prefix = arch.split(\".\", 2).join(\".\");\n\n  if (prefix === \"web.browser\") {\n    return WebBrowserTemplate;\n  }\n\n  if (prefix === \"web.cordova\") {\n    return WebCordovaTemplate;\n  }\n\n  throw new Error(\"Unsupported arch: \" + arch);\n}\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template-web.browser.js\":function module(require,exports,module){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// packages/boilerplate-generator/template-web.browser.js                                                            //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\nmodule.export({\n  headTemplate: () => headTemplate,\n  closeTemplate: () => closeTemplate\n});\nlet template;\nmodule.link(\"./template\", {\n  default(v) {\n    template = v;\n  }\n\n}, 0);\n\nconst sri = (sri, mode) => sri && mode ? \" integrity=\\\"sha512-\".concat(sri, \"\\\" crossorigin=\\\"\").concat(mode, \"\\\"\") : '';\n\nconst headTemplate = _ref => {\n  let {\n    css,\n    htmlAttributes,\n    bundledJsCssUrlRewriteHook,\n    sriMode,\n    head,\n    dynamicHead\n  } = _ref;\n  var headSections = head.split(/<meteor-bundled-css[^<>]*>/, 2);\n  var cssBundle = [...(css || []).map(file => template('  <link rel=\"stylesheet\" type=\"text/css\" class=\"__meteor-css__\" href=\"<%- href %>\"<%= sri %>>')({\n    href: bundledJsCssUrlRewriteHook(file.url),\n    sri: sri(file.sri, sriMode)\n  }))].join('\\n');\n  return ['<html' + Object.keys(htmlAttributes || {}).map(key => template(' <%= attrName %>=\"<%- attrValue %>\"')({\n    attrName: key,\n    attrValue: htmlAttributes[key]\n  })).join('') + '>', '<head>', headSections.length === 1 ? [cssBundle, headSections[0]].join('\\n') : [headSections[0], cssBundle, headSections[1]].join('\\n'), dynamicHead, '</head>', '<body>'].join('\\n');\n};\n\nconst closeTemplate = _ref2 => {\n  let {\n    meteorRuntimeConfig,\n    meteorRuntimeHash,\n    rootUrlPathPrefix,\n    inlineScriptsAllowed,\n    js,\n    additionalStaticJs,\n    bundledJsCssUrlRewriteHook,\n    sriMode\n  } = _ref2;\n  return ['', inlineScriptsAllowed ? template('  <script type=\"text/javascript\">__meteor_runtime_config__ = JSON.parse(decodeURIComponent(<%= conf %>))</script>')({\n    conf: meteorRuntimeConfig\n  }) : template('  <script type=\"text/javascript\" src=\"<%- src %>/meteor_runtime_config.js?hash=<%- hash %>\"></script>')({\n    src: rootUrlPathPrefix,\n    hash: meteorRuntimeHash\n  }), '', ...(js || []).map(file => template('  <script type=\"text/javascript\" src=\"<%- src %>\"<%= sri %>></script>')({\n    src: bundledJsCssUrlRewriteHook(file.url),\n    sri: sri(file.sri, sriMode)\n  })), ...(additionalStaticJs || []).map(_ref3 => {\n    let {\n      contents,\n      pathname\n    } = _ref3;\n    return inlineScriptsAllowed ? template('  <script><%= contents %></script>')({\n      contents\n    }) : template('  <script type=\"text/javascript\" src=\"<%- src %>\"></script>')({\n      src: rootUrlPathPrefix + pathname\n    });\n  }), '', '', '</body>', '</html>'].join('\\n');\n};\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template-web.cordova.js\":function module(require,exports,module){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// packages/boilerplate-generator/template-web.cordova.js                                                            //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\nmodule.export({\n  headTemplate: () => headTemplate,\n  closeTemplate: () => closeTemplate\n});\nlet template;\nmodule.link(\"./template\", {\n  default(v) {\n    template = v;\n  }\n\n}, 0);\n\nconst headTemplate = _ref => {\n  let {\n    meteorRuntimeConfig,\n    rootUrlPathPrefix,\n    inlineScriptsAllowed,\n    css,\n    js,\n    additionalStaticJs,\n    htmlAttributes,\n    bundledJsCssUrlRewriteHook,\n    head,\n    dynamicHead\n  } = _ref;\n  var headSections = head.split(/<meteor-bundled-css[^<>]*>/, 2);\n  var cssBundle = [// We are explicitly not using bundledJsCssUrlRewriteHook: in cordova we serve assets up directly from disk, so rewriting the URL does not make sense\n  ...(css || []).map(file => template('  <link rel=\"stylesheet\" type=\"text/css\" class=\"__meteor-css__\" href=\"<%- href %>\">')({\n    href: file.url\n  }))].join('\\n');\n  return ['<html>', '<head>', '  <meta charset=\"utf-8\">', '  <meta name=\"format-detection\" content=\"telephone=no\">', '  <meta name=\"viewport\" content=\"user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, viewport-fit=cover\">', '  <meta name=\"msapplication-tap-highlight\" content=\"no\">', '  <meta http-equiv=\"Content-Security-Policy\" content=\"default-src * android-webview-video-poster: gap: data: blob: \\'unsafe-inline\\' \\'unsafe-eval\\' ws: wss:;\">', headSections.length === 1 ? [cssBundle, headSections[0]].join('\\n') : [headSections[0], cssBundle, headSections[1]].join('\\n'), '  <script type=\"text/javascript\">', template('    __meteor_runtime_config__ = JSON.parse(decodeURIComponent(<%= conf %>));')({\n    conf: meteorRuntimeConfig\n  }), '    if (/Android/i.test(navigator.userAgent)) {', // When Android app is emulated, it cannot connect to localhost,\n  // instead it should connect to 10.0.2.2\n  // (unless we\\'re using an http proxy; then it works!)\n  '      if (!__meteor_runtime_config__.httpProxyPort) {', '        __meteor_runtime_config__.ROOT_URL = (__meteor_runtime_config__.ROOT_URL || \\'\\').replace(/localhost/i, \\'10.0.2.2\\');', '        __meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL = (__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL || \\'\\').replace(/localhost/i, \\'10.0.2.2\\');', '      }', '    }', '  </script>', '', '  <script type=\"text/javascript\" src=\"/cordova.js\"></script>', ...(js || []).map(file => template('  <script type=\"text/javascript\" src=\"<%- src %>\"></script>')({\n    src: file.url\n  })), ...(additionalStaticJs || []).map(_ref2 => {\n    let {\n      contents,\n      pathname\n    } = _ref2;\n    return inlineScriptsAllowed ? template('  <script><%= contents %></script>')({\n      contents\n    }) : template('  <script type=\"text/javascript\" src=\"<%- src %>\"></script>')({\n      src: rootUrlPathPrefix + pathname\n    });\n  }), '', '</head>', '', '<body>'].join('\\n');\n};\n\nfunction closeTemplate() {\n  return \"</body>\\n</html>\";\n}\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.js\":function module(require,exports,module){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// packages/boilerplate-generator/template.js                                                                        //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\nmodule.export({\n  default: () => template\n});\n\nlet _;\n\nmodule.link(\"meteor/underscore\", {\n  _(v) {\n    _ = v;\n  }\n\n}, 0);\n\nfunction template(text) {\n  return _.template(text, null, {\n    evaluate: /<%([\\s\\S]+?)%>/g,\n    interpolate: /<%=([\\s\\S]+?)%>/g,\n    escape: /<%-([\\s\\S]+?)%>/g\n  });\n}\n\n;\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"node_modules\":{\"combined-stream2\":{\"package.json\":function module(require,exports,module){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// node_modules/meteor/boilerplate-generator/node_modules/combined-stream2/package.json                              //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\nmodule.exports = {\n  \"name\": \"combined-stream2\",\n  \"version\": \"1.1.2\",\n  \"main\": \"index.js\"\n};\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function module(require,exports,module){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// node_modules/meteor/boilerplate-generator/node_modules/combined-stream2/index.js                                  //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\nmodule.useNode();\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}}}}}},{\n  \"extensions\": [\n    \".js\",\n    \".json\"\n  ]\n});\n\nvar exports = require(\"/node_modules/meteor/boilerplate-generator/generator.js\");\n\n/* Exports */\nPackage._define(\"boilerplate-generator\", exports, {\n  Boilerplate: Boilerplate\n});\n\n})();\n","servePath":"/packages/boilerplate-generator.js","sourceMap":{"version":3,"sources":["packages/boilerplate-generator/generator.js","packages/boilerplate-generator/template-web.browser.js","packages/boilerplate-generator/template-web.cordova.js","packages/boilerplate-generator/template.js"],"names":["_objectSpread","module","link","default","v","export","Boilerplate","readFile","createStream","create","WebBrowserTemplate","WebCordovaTemplate","readUtf8FileSync","filename","Meteor","wrapAsync","identity","value","appendToStream","chunk","stream","append","Buffer","from","isBuffer","read","shouldWarnAboutToHTMLDeprecation","isProduction","constructor","arch","manifest","options","headTemplate","closeTemplate","getTemplate","baseData","_generateBoilerplateFromManifest","toHTML","extraData","console","error","trace","toHTMLAsync","await","Promise","resolve","reject","toHTMLStream","chunks","on","push","concat","toString","Error","data","start","body","dynamicBody","end","response","urlMapper","pathMapper","baseDataExtension","inline","boilerplateBaseData","css","js","head","meteorManifest","JSON","stringify","forEach","item","urlPath","url","itemObj","scriptContent","path","sri","type","where","startsWith","prefix","split","join","template","mode","htmlAttributes","bundledJsCssUrlRewriteHook","sriMode","dynamicHead","headSections","cssBundle","map","file","href","Object","keys","key","attrName","attrValue","length","meteorRuntimeConfig","meteorRuntimeHash","rootUrlPathPrefix","inlineScriptsAllowed","additionalStaticJs","conf","src","hash","contents","pathname","_","text","evaluate","interpolate","escape"],"mappings":"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","file":"/packages/boilerplate-generator.js","sourcesContent":["import { readFile } from 'fs';\nimport { create as createStream } from \"combined-stream2\";\n\nimport WebBrowserTemplate from './template-web.browser';\nimport WebCordovaTemplate from './template-web.cordova';\n\n// Copied from webapp_server\nconst readUtf8FileSync = filename => Meteor.wrapAsync(readFile)(filename, 'utf8');\n\nconst identity = value => value;\n\nfunction appendToStream(chunk, stream) {\n  if (typeof chunk === \"string\") {\n    stream.append(Buffer.from(chunk, \"utf8\"));\n  } else if (Buffer.isBuffer(chunk) ||\n             typeof chunk.read === \"function\") {\n    stream.append(chunk);\n  }\n}\n\nlet shouldWarnAboutToHTMLDeprecation = ! Meteor.isProduction;\n\nexport class Boilerplate {\n  constructor(arch, manifest, options = {}) {\n    const { headTemplate, closeTemplate } = getTemplate(arch);\n    this.headTemplate = headTemplate;\n    this.closeTemplate = closeTemplate;\n    this.baseData = null;\n\n    this._generateBoilerplateFromManifest(\n      manifest,\n      options\n    );\n  }\n\n  toHTML(extraData) {\n    if (shouldWarnAboutToHTMLDeprecation) {\n      shouldWarnAboutToHTMLDeprecation = false;\n      console.error(\n        \"The Boilerplate#toHTML method has been deprecated. \" +\n          \"Please use Boilerplate#toHTMLStream instead.\"\n      );\n      console.trace();\n    }\n\n    // Calling .await() requires a Fiber.\n    return this.toHTMLAsync(extraData).await();\n  }\n\n  // Returns a Promise that resolves to a string of HTML.\n  toHTMLAsync(extraData) {\n    return new Promise((resolve, reject) => {\n      const stream = this.toHTMLStream(extraData);\n      const chunks = [];\n      stream.on(\"data\", chunk => chunks.push(chunk));\n      stream.on(\"end\", () => {\n        resolve(Buffer.concat(chunks).toString(\"utf8\"));\n      });\n      stream.on(\"error\", reject);\n    });\n  }\n\n  // The 'extraData' argument can be used to extend 'self.baseData'. Its\n  // purpose is to allow you to specify data that you might not know at\n  // the time that you construct the Boilerplate object. (e.g. it is used\n  // by 'webapp' to specify data that is only known at request-time).\n  // this returns a stream\n  toHTMLStream(extraData) {\n    if (!this.baseData || !this.headTemplate || !this.closeTemplate) {\n      throw new Error('Boilerplate did not instantiate correctly.');\n    }\n\n    const data = {...this.baseData, ...extraData};\n    const start = \"<!DOCTYPE html>\\n\" + this.headTemplate(data);\n\n    const { body, dynamicBody } = data;\n\n    const end = this.closeTemplate(data);\n    const response = createStream();\n\n    appendToStream(start, response);\n\n    if (body) {\n      appendToStream(body, response);\n    }\n\n    if (dynamicBody) {\n      appendToStream(dynamicBody, response);\n    }\n\n    appendToStream(end, response);\n\n    return response;\n  }\n\n  // XXX Exported to allow client-side only changes to rebuild the boilerplate\n  // without requiring a full server restart.\n  // Produces an HTML string with given manifest and boilerplateSource.\n  // Optionally takes urlMapper in case urls from manifest need to be prefixed\n  // or rewritten.\n  // Optionally takes pathMapper for resolving relative file system paths.\n  // Optionally allows to override fields of the data context.\n  _generateBoilerplateFromManifest(manifest, {\n    urlMapper = identity,\n    pathMapper = identity,\n    baseDataExtension,\n    inline,\n  } = {}) {\n\n    const boilerplateBaseData = {\n      css: [],\n      js: [],\n      head: '',\n      body: '',\n      meteorManifest: JSON.stringify(manifest),\n      ...baseDataExtension,\n    };\n\n    manifest.forEach(item => {\n      const urlPath = urlMapper(item.url);\n      const itemObj = { url: urlPath };\n\n      if (inline) {\n        itemObj.scriptContent = readUtf8FileSync(\n          pathMapper(item.path));\n        itemObj.inline = true;\n      } else if (item.sri) {\n        itemObj.sri = item.sri;\n      }\n\n      if (item.type === 'css' && item.where === 'client') {\n        boilerplateBaseData.css.push(itemObj);\n      }\n\n      if (item.type === 'js' && item.where === 'client' &&\n        // Dynamic JS modules should not be loaded eagerly in the\n        // initial HTML of the app.\n        !item.path.startsWith('dynamic/')) {\n        boilerplateBaseData.js.push(itemObj);\n      }\n\n      if (item.type === 'head') {\n        boilerplateBaseData.head =\n          readUtf8FileSync(pathMapper(item.path));\n      }\n\n      if (item.type === 'body') {\n        boilerplateBaseData.body =\n          readUtf8FileSync(pathMapper(item.path));\n      }\n    });\n\n    this.baseData = boilerplateBaseData;\n  }\n};\n\n// Returns a template function that, when called, produces the boilerplate\n// html as a string.\nfunction getTemplate(arch) {\n  const prefix = arch.split(\".\", 2).join(\".\");\n\n  if (prefix === \"web.browser\") {\n    return WebBrowserTemplate;\n  }\n\n  if (prefix === \"web.cordova\") {\n    return WebCordovaTemplate;\n  }\n\n  throw new Error(\"Unsupported arch: \" + arch);\n}\n","import template from './template';\n\nconst sri = (sri, mode) =>\n  (sri && mode) ? ` integrity=\"sha512-${sri}\" crossorigin=\"${mode}\"` : '';\n\nexport const headTemplate = ({\n  css,\n  htmlAttributes,\n  bundledJsCssUrlRewriteHook,\n  sriMode,\n  head,\n  dynamicHead,\n}) => {\n  var headSections = head.split(/<meteor-bundled-css[^<>]*>/, 2);\n  var cssBundle = [...(css || []).map(file =>\n    template('  <link rel=\"stylesheet\" type=\"text/css\" class=\"__meteor-css__\" href=\"<%- href %>\"<%= sri %>>')({\n      href: bundledJsCssUrlRewriteHook(file.url),\n      sri: sri(file.sri, sriMode),\n    })\n  )].join('\\n');\n\n  return [\n    '<html' + Object.keys(htmlAttributes || {}).map(\n      key => template(' <%= attrName %>=\"<%- attrValue %>\"')({\n        attrName: key,\n        attrValue: htmlAttributes[key],\n      })\n    ).join('') + '>',\n\n    '<head>',\n\n    (headSections.length === 1)\n      ? [cssBundle, headSections[0]].join('\\n')\n      : [headSections[0], cssBundle, headSections[1]].join('\\n'),\n\n    dynamicHead,\n    '</head>',\n    '<body>',\n  ].join('\\n');\n};\n\n// Template function for rendering the boilerplate html for browsers\nexport const closeTemplate = ({\n  meteorRuntimeConfig,\n  meteorRuntimeHash,\n  rootUrlPathPrefix,\n  inlineScriptsAllowed,\n  js,\n  additionalStaticJs,\n  bundledJsCssUrlRewriteHook,\n  sriMode,\n}) => [\n  '',\n  inlineScriptsAllowed\n    ? template('  <script type=\"text/javascript\">__meteor_runtime_config__ = JSON.parse(decodeURIComponent(<%= conf %>))</script>')({\n      conf: meteorRuntimeConfig,\n    })\n    : template('  <script type=\"text/javascript\" src=\"<%- src %>/meteor_runtime_config.js?hash=<%- hash %>\"></script>')({\n      src: rootUrlPathPrefix,\n      hash: meteorRuntimeHash,\n    }),\n  '',\n\n  ...(js || []).map(file =>\n    template('  <script type=\"text/javascript\" src=\"<%- src %>\"<%= sri %>></script>')({\n      src: bundledJsCssUrlRewriteHook(file.url),\n      sri: sri(file.sri, sriMode),\n    })\n  ),\n\n  ...(additionalStaticJs || []).map(({ contents, pathname }) => (\n    inlineScriptsAllowed\n      ? template('  <script><%= contents %></script>')({\n        contents,\n      })\n      : template('  <script type=\"text/javascript\" src=\"<%- src %>\"></script>')({\n        src: rootUrlPathPrefix + pathname,\n      })\n  )),\n\n  '',\n  '',\n  '</body>',\n  '</html>'\n].join('\\n');\n","import template from './template';\n\n// Template function for rendering the boilerplate html for cordova\nexport const headTemplate = ({\n  meteorRuntimeConfig,\n  rootUrlPathPrefix,\n  inlineScriptsAllowed,\n  css,\n  js,\n  additionalStaticJs,\n  htmlAttributes,\n  bundledJsCssUrlRewriteHook,\n  head,\n  dynamicHead,\n}) => {\n  var headSections = head.split(/<meteor-bundled-css[^<>]*>/, 2);\n  var cssBundle = [\n    // We are explicitly not using bundledJsCssUrlRewriteHook: in cordova we serve assets up directly from disk, so rewriting the URL does not make sense\n    ...(css || []).map(file =>\n      template('  <link rel=\"stylesheet\" type=\"text/css\" class=\"__meteor-css__\" href=\"<%- href %>\">')({\n        href: file.url,\n      })\n  )].join('\\n');\n\n  return [\n    '<html>',\n    '<head>',\n    '  <meta charset=\"utf-8\">',\n    '  <meta name=\"format-detection\" content=\"telephone=no\">',\n    '  <meta name=\"viewport\" content=\"user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, viewport-fit=cover\">',\n    '  <meta name=\"msapplication-tap-highlight\" content=\"no\">',\n    '  <meta http-equiv=\"Content-Security-Policy\" content=\"default-src * android-webview-video-poster: gap: data: blob: \\'unsafe-inline\\' \\'unsafe-eval\\' ws: wss:;\">',\n\n  (headSections.length === 1)\n    ? [cssBundle, headSections[0]].join('\\n')\n    : [headSections[0], cssBundle, headSections[1]].join('\\n'),\n\n    '  <script type=\"text/javascript\">',\n    template('    __meteor_runtime_config__ = JSON.parse(decodeURIComponent(<%= conf %>));')({\n      conf: meteorRuntimeConfig,\n    }),\n    '    if (/Android/i.test(navigator.userAgent)) {',\n    // When Android app is emulated, it cannot connect to localhost,\n    // instead it should connect to 10.0.2.2\n    // (unless we\\'re using an http proxy; then it works!)\n    '      if (!__meteor_runtime_config__.httpProxyPort) {',\n    '        __meteor_runtime_config__.ROOT_URL = (__meteor_runtime_config__.ROOT_URL || \\'\\').replace(/localhost/i, \\'10.0.2.2\\');',\n    '        __meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL = (__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL || \\'\\').replace(/localhost/i, \\'10.0.2.2\\');',\n    '      }',\n    '    }',\n    '  </script>',\n    '',\n    '  <script type=\"text/javascript\" src=\"/cordova.js\"></script>',\n\n    ...(js || []).map(file =>\n      template('  <script type=\"text/javascript\" src=\"<%- src %>\"></script>')({\n        src: file.url,\n      })\n    ),\n\n    ...(additionalStaticJs || []).map(({ contents, pathname }) => (\n      inlineScriptsAllowed\n        ? template('  <script><%= contents %></script>')({\n          contents,\n        })\n        : template('  <script type=\"text/javascript\" src=\"<%- src %>\"></script>')({\n          src: rootUrlPathPrefix + pathname\n        })\n    )),\n    '',\n    '</head>',\n    '',\n    '<body>',\n  ].join('\\n');\n};\n\nexport function closeTemplate() {\n  return \"</body>\\n</html>\";\n}\n","import { _ } from 'meteor/underscore';\n\n// As identified in issue #9149, when an application overrides the default\n// _.template settings using _.templateSettings, those new settings are\n// used anywhere _.template is used, including within the\n// boilerplate-generator. To handle this, _.template settings that have\n// been verified to work are overridden here on each _.template call.\nexport default function template(text) {\n  return _.template(text, null, {\n    evaluate    : /<%([\\s\\S]+?)%>/g,\n    interpolate : /<%=([\\s\\S]+?)%>/g,\n    escape      : /<%-([\\s\\S]+?)%>/g,\n  });\n};\n"]}}]