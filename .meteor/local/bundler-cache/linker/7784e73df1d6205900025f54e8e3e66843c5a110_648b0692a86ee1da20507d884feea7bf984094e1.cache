[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar _ = Package.underscore._;\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar Tracker = Package.tracker.Tracker;\nvar Deps = Package.tracker.Deps;\nvar Session = Package.session.Session;\nvar $ = Package.jquery.$;\nvar jQuery = Package.jquery.jQuery;\nvar Template = Package['templating-runtime'].Template;\nvar EventEmitter = Package['raix:eventemitter'].EventEmitter;\nvar Promise = Package.promise.Promise;\nvar meteorInstall = Package.modules.meteorInstall;\nvar meteorBabelHelpers = Package.modules.meteorBabelHelpers;\nvar Symbol = Package['ecmascript-runtime-client'].Symbol;\nvar Map = Package['ecmascript-runtime-client'].Map;\nvar Set = Package['ecmascript-runtime-client'].Set;\nvar Blaze = Package.blaze.Blaze;\nvar UI = Package.blaze.UI;\nvar Handlebars = Package.blaze.Handlebars;\nvar Spacebars = Package.spacebars.Spacebars;\nvar HTML = Package.htmljs.HTML;\n\n/* Package-scope variables */\nvar TAPi18next, __coffeescriptShare, TAPi18n;\n\nvar require = meteorInstall({\"node_modules\":{\"meteor\":{\"rocketchat:tap-i18n\":{\"lib\":{\"tap_i18next\":{\"tap_i18next-1.7.3.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/rocketchat_tap-i18n/lib/tap_i18next/tap_i18next-1.7.3.js                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n!function (module1) {\n  var _typeof;\n\n  module1.link(\"@babel/runtime/helpers/typeof\", {\n    default: function (v) {\n      _typeof = v;\n    }\n  }, 0);\n  // tap_i18next is a copy of i18next that expose i18next to the global namespace\n  // under the name name TAPi18next instead of i18n to (1) avoid interfering with other\n  // Meteor packages that might use i18n with different configurations than we do\n  // or worse - (2) using a different version of i18next\n  //\n  // setJqueryExt is disabled by default in TAPi18next\n  // sprintf is a default postProcess in TAPi18next\n  //\n  // TAPi18next is set outside of the singleton builder to make it available in the\n  // package level\n  // i18next, v1.7.3\n  // Copyright (c)2014 Jan MÃ¼hlemann (jamuhl).\n  // Distributed under MIT license\n  // http://i18next.com\n  // set TAPi18next outside of the singleton builder to make it available in the package level\n  TAPi18next = {};\n\n  (function () {\n    // add indexOf to non ECMA-262 standard compliant browsers\n    if (!Array.prototype.indexOf) {\n      Array.prototype.indexOf = function (searchElement\n      /*, fromIndex */\n      ) {\n        \"use strict\";\n\n        if (this == null) {\n          throw new TypeError();\n        }\n\n        var t = Object(this);\n        var len = t.length >>> 0;\n\n        if (len === 0) {\n          return -1;\n        }\n\n        var n = 0;\n\n        if (arguments.length > 0) {\n          n = Number(arguments[1]);\n\n          if (n != n) {\n            // shortcut for verifying if it's NaN\n            n = 0;\n          } else if (n != 0 && n != Infinity && n != -Infinity) {\n            n = (n > 0 || -1) * Math.floor(Math.abs(n));\n          }\n        }\n\n        if (n >= len) {\n          return -1;\n        }\n\n        var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);\n\n        for (; k < len; k++) {\n          if (k in t && t[k] === searchElement) {\n            return k;\n          }\n        }\n\n        return -1;\n      };\n    } // add lastIndexOf to non ECMA-262 standard compliant browsers\n\n\n    if (!Array.prototype.lastIndexOf) {\n      Array.prototype.lastIndexOf = function (searchElement\n      /*, fromIndex*/\n      ) {\n        \"use strict\";\n\n        if (this == null) {\n          throw new TypeError();\n        }\n\n        var t = Object(this);\n        var len = t.length >>> 0;\n\n        if (len === 0) {\n          return -1;\n        }\n\n        var n = len;\n\n        if (arguments.length > 1) {\n          n = Number(arguments[1]);\n\n          if (n != n) {\n            n = 0;\n          } else if (n != 0 && n != 1 / 0 && n != -(1 / 0)) {\n            n = (n > 0 || -1) * Math.floor(Math.abs(n));\n          }\n        }\n\n        var k = n >= 0 ? Math.min(n, len - 1) : len - Math.abs(n);\n\n        for (; k >= 0; k--) {\n          if (k in t && t[k] === searchElement) {\n            return k;\n          }\n        }\n\n        return -1;\n      };\n    } // Add string trim for IE8.\n\n\n    if (typeof String.prototype.trim !== 'function') {\n      String.prototype.trim = function () {\n        return this.replace(/^\\s+|\\s+$/g, '');\n      };\n    }\n\n    var root = this,\n        $ = root.jQuery || root.Zepto,\n        resStore = {},\n        currentLng,\n        replacementCounter = 0,\n        languages = [],\n        initialized = false; // Export the i18next object for **CommonJS**. \n    // If we're not in CommonJS, add `i18n` to the\n    // global object or to jquery.\n\n    if (typeof module !== 'undefined' && module.exports) {\n      module.exports = TAPi18next;\n    } else {\n      if ($) {\n        $.TAPi18next = $.TAPi18next || TAPi18next;\n      }\n\n      root.TAPi18next = root.TAPi18next || TAPi18next;\n    } // defaults\n\n\n    var o = {\n      lng: undefined,\n      load: 'all',\n      preload: [],\n      lowerCaseLng: false,\n      returnObjectTrees: false,\n      fallbackLng: ['dev'],\n      fallbackNS: [],\n      detectLngQS: 'setLng',\n      ns: 'translation',\n      fallbackOnNull: true,\n      fallbackOnEmpty: false,\n      fallbackToDefaultNS: false,\n      nsseparator: ':',\n      keyseparator: '.',\n      selectorAttr: 'data-i18n',\n      debug: false,\n      resGetPath: 'locales/__lng__/__ns__.json',\n      resPostPath: 'locales/add/__lng__/__ns__',\n      getAsync: true,\n      postAsync: true,\n      resStore: undefined,\n      useLocalStorage: false,\n      localStorageExpirationTime: 7 * 24 * 60 * 60 * 1000,\n      dynamicLoad: false,\n      sendMissing: false,\n      sendMissingTo: 'fallback',\n      // current | all\n      sendType: 'POST',\n      interpolationPrefix: '__',\n      interpolationSuffix: '__',\n      reusePrefix: '$t(',\n      reuseSuffix: ')',\n      pluralSuffix: '_plural',\n      pluralNotFound: ['plural_not_found', Math.random()].join(''),\n      contextNotFound: ['context_not_found', Math.random()].join(''),\n      escapeInterpolation: false,\n      setJqueryExt: false,\n      defaultValueFromContent: true,\n      useDataAttrOptions: false,\n      cookieExpirationTime: undefined,\n      useCookie: true,\n      cookieName: 'TAPi18next',\n      cookieDomain: undefined,\n      objectTreeKeyHandler: undefined,\n      postProcess: [\"sprintf\"],\n      parseMissingKey: undefined,\n      shortcutFunction: 'sprintf' // or: defaultValue\n\n    };\n\n    function _extend(target, source) {\n      if (!source || typeof source === 'function') {\n        return target;\n      }\n\n      for (var attr in meteorBabelHelpers.sanitizeForInObject(source)) {\n        target[attr] = source[attr];\n      }\n\n      return target;\n    }\n\n    function _each(object, callback, args) {\n      var name,\n          i = 0,\n          length = object.length,\n          isObj = length === undefined || Object.prototype.toString.apply(object) !== '[object Array]' || typeof object === \"function\";\n\n      if (args) {\n        if (isObj) {\n          for (name in meteorBabelHelpers.sanitizeForInObject(object)) {\n            if (callback.apply(object[name], args) === false) {\n              break;\n            }\n          }\n        } else {\n          for (; i < length;) {\n            if (callback.apply(object[i++], args) === false) {\n              break;\n            }\n          }\n        } // A special, fast, case for the most common use of each\n\n      } else {\n        if (isObj) {\n          for (name in meteorBabelHelpers.sanitizeForInObject(object)) {\n            if (callback.call(object[name], name, object[name]) === false) {\n              break;\n            }\n          }\n        } else {\n          for (; i < length;) {\n            if (callback.call(object[i], i, object[i++]) === false) {\n              break;\n            }\n          }\n        }\n      }\n\n      return object;\n    }\n\n    var _entityMap = {\n      \"&\": \"&amp;\",\n      \"<\": \"&lt;\",\n      \">\": \"&gt;\",\n      '\"': '&quot;',\n      \"'\": '&#39;',\n      \"/\": '&#x2F;'\n    };\n\n    function _escape(data) {\n      if (typeof data === 'string') {\n        return data.replace(/[&<>\"'\\/]/g, function (s) {\n          return _entityMap[s];\n        });\n      } else {\n        return data;\n      }\n    }\n\n    function _ajax(options) {\n      // v0.5.0 of https://github.com/goloroden/http.js\n      var getXhr = function (callback) {\n        // Use the native XHR object if the browser supports it.\n        if (window.XMLHttpRequest) {\n          return callback(null, new XMLHttpRequest());\n        } else if (window.ActiveXObject) {\n          // In Internet Explorer check for ActiveX versions of the XHR object.\n          try {\n            return callback(null, new ActiveXObject(\"Msxml2.XMLHTTP\"));\n          } catch (e) {\n            return callback(null, new ActiveXObject(\"Microsoft.XMLHTTP\"));\n          }\n        } // If no XHR support was found, throw an error.\n\n\n        return callback(new Error());\n      };\n\n      var encodeUsingUrlEncoding = function (data) {\n        if (typeof data === 'string') {\n          return data;\n        }\n\n        var result = [];\n\n        for (var dataItem in meteorBabelHelpers.sanitizeForInObject(data)) {\n          if (data.hasOwnProperty(dataItem)) {\n            result.push(encodeURIComponent(dataItem) + '=' + encodeURIComponent(data[dataItem]));\n          }\n        }\n\n        return result.join('&');\n      };\n\n      var utf8 = function (text) {\n        text = text.replace(/\\r\\n/g, '\\n');\n        var result = '';\n\n        for (var i = 0; i < text.length; i++) {\n          var c = text.charCodeAt(i);\n\n          if (c < 128) {\n            result += String.fromCharCode(c);\n          } else if (c > 127 && c < 2048) {\n            result += String.fromCharCode(c >> 6 | 192);\n            result += String.fromCharCode(c & 63 | 128);\n          } else {\n            result += String.fromCharCode(c >> 12 | 224);\n            result += String.fromCharCode(c >> 6 & 63 | 128);\n            result += String.fromCharCode(c & 63 | 128);\n          }\n        }\n\n        return result;\n      };\n\n      var base64 = function (text) {\n        var keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n        text = utf8(text);\n        var result = '',\n            chr1,\n            chr2,\n            chr3,\n            enc1,\n            enc2,\n            enc3,\n            enc4,\n            i = 0;\n\n        do {\n          chr1 = text.charCodeAt(i++);\n          chr2 = text.charCodeAt(i++);\n          chr3 = text.charCodeAt(i++);\n          enc1 = chr1 >> 2;\n          enc2 = (chr1 & 3) << 4 | chr2 >> 4;\n          enc3 = (chr2 & 15) << 2 | chr3 >> 6;\n          enc4 = chr3 & 63;\n\n          if (isNaN(chr2)) {\n            enc3 = enc4 = 64;\n          } else if (isNaN(chr3)) {\n            enc4 = 64;\n          }\n\n          result += keyStr.charAt(enc1) + keyStr.charAt(enc2) + keyStr.charAt(enc3) + keyStr.charAt(enc4);\n          chr1 = chr2 = chr3 = '';\n          enc1 = enc2 = enc3 = enc4 = '';\n        } while (i < text.length);\n\n        return result;\n      };\n\n      var mergeHeaders = function () {\n        // Use the first header object as base.\n        var result = arguments[0]; // Iterate through the remaining header objects and add them.\n\n        for (var i = 1; i < arguments.length; i++) {\n          var currentHeaders = arguments[i];\n\n          for (var header in meteorBabelHelpers.sanitizeForInObject(currentHeaders)) {\n            if (currentHeaders.hasOwnProperty(header)) {\n              result[header] = currentHeaders[header];\n            }\n          }\n        } // Return the merged headers.\n\n\n        return result;\n      };\n\n      var ajax = function (method, url, options, callback) {\n        // Adjust parameters.\n        if (typeof options === 'function') {\n          callback = options;\n          options = {};\n        } // Set default parameter values.\n\n\n        options.cache = options.cache || false;\n        options.data = options.data || {};\n        options.headers = options.headers || {};\n        options.jsonp = options.jsonp || false;\n        options.async = options.async === undefined ? true : options.async; // Merge the various header objects.\n\n        var headers = mergeHeaders({\n          'accept': '*/*',\n          'content-type': 'application/x-www-form-urlencoded;charset=UTF-8'\n        }, ajax.headers, options.headers); // Encode the data according to the content-type.\n\n        var payload;\n\n        if (headers['content-type'] === 'application/json') {\n          payload = JSON.stringify(options.data);\n        } else {\n          payload = encodeUsingUrlEncoding(options.data);\n        } // Specially prepare GET requests: Setup the query string, handle caching and make a JSONP call\n        // if neccessary.\n\n\n        if (method === 'GET') {\n          // Setup the query string.\n          var queryString = [];\n\n          if (payload) {\n            queryString.push(payload);\n            payload = null;\n          } // Handle caching.\n\n\n          if (!options.cache) {\n            queryString.push('_=' + new Date().getTime());\n          } // If neccessary prepare the query string for a JSONP call.\n\n\n          if (options.jsonp) {\n            queryString.push('callback=' + options.jsonp);\n            queryString.push('jsonp=' + options.jsonp);\n          } // Merge the query string and attach it to the url.\n\n\n          queryString = queryString.join('&');\n\n          if (queryString.length > 1) {\n            if (url.indexOf('?') > -1) {\n              url += '&' + queryString;\n            } else {\n              url += '?' + queryString;\n            }\n          } // Make a JSONP call if neccessary.\n\n\n          if (options.jsonp) {\n            var head = document.getElementsByTagName('head')[0];\n            var script = document.createElement('script');\n            script.type = 'text/javascript';\n            script.src = url;\n            head.appendChild(script);\n            return;\n          }\n        } // Since we got here, it is no JSONP request, so make a normal XHR request.\n\n\n        getXhr(function (err, xhr) {\n          if (err) return callback(err); // Open the request.\n\n          xhr.open(method, url, options.async); // Set the request headers.\n\n          for (var header in meteorBabelHelpers.sanitizeForInObject(headers)) {\n            if (headers.hasOwnProperty(header)) {\n              xhr.setRequestHeader(header, headers[header]);\n            }\n          } // Handle the request events.\n\n\n          xhr.onreadystatechange = function () {\n            if (xhr.readyState === 4) {\n              var data = xhr.responseText || ''; // If no callback is given, return.\n\n              if (!callback) {\n                return;\n              } // Return an object that provides access to the data as text and JSON.\n\n\n              callback(xhr.status, {\n                text: function () {\n                  return data;\n                },\n                json: function () {\n                  return JSON.parse(data);\n                }\n              });\n            }\n          }; // Actually send the XHR request.\n\n\n          xhr.send(payload);\n        });\n      }; // Define the external interface.\n\n\n      var http = {\n        authBasic: function (username, password) {\n          ajax.headers['Authorization'] = 'Basic ' + base64(username + ':' + password);\n        },\n        connect: function (url, options, callback) {\n          return ajax('CONNECT', url, options, callback);\n        },\n        del: function (url, options, callback) {\n          return ajax('DELETE', url, options, callback);\n        },\n        get: function (url, options, callback) {\n          return ajax('GET', url, options, callback);\n        },\n        head: function (url, options, callback) {\n          return ajax('HEAD', url, options, callback);\n        },\n        headers: function (headers) {\n          ajax.headers = headers || {};\n        },\n        isAllowed: function (url, verb, callback) {\n          this.options(url, function (status, data) {\n            callback(data.text().indexOf(verb) !== -1);\n          });\n        },\n        options: function (url, options, callback) {\n          return ajax('OPTIONS', url, options, callback);\n        },\n        patch: function (url, options, callback) {\n          return ajax('PATCH', url, options, callback);\n        },\n        post: function (url, options, callback) {\n          return ajax('POST', url, options, callback);\n        },\n        put: function (url, options, callback) {\n          return ajax('PUT', url, options, callback);\n        },\n        trace: function (url, options, callback) {\n          return ajax('TRACE', url, options, callback);\n        }\n      };\n      var methode = options.type ? options.type.toLowerCase() : 'get';\n      http[methode](options.url, options, function (status, data) {\n        if (status === 200) {\n          options.success(data.json(), status, null);\n        } else {\n          options.error(data.text(), status, null);\n        }\n      });\n    }\n\n    var _cookie = {\n      create: function (name, value, minutes, domain) {\n        var expires;\n\n        if (minutes) {\n          var date = new Date();\n          date.setTime(date.getTime() + minutes * 60 * 1000);\n          expires = \"; expires=\" + date.toGMTString();\n        } else expires = \"\";\n\n        domain = domain ? \"domain=\" + domain + \";\" : \"\";\n        document.cookie = name + \"=\" + value + expires + \";\" + domain + \"path=/\";\n      },\n      read: function (name) {\n        var nameEQ = name + \"=\";\n        var ca = document.cookie.split(';');\n\n        for (var i = 0; i < ca.length; i++) {\n          var c = ca[i];\n\n          while (c.charAt(0) == ' ') {\n            c = c.substring(1, c.length);\n          }\n\n          if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);\n        }\n\n        return null;\n      },\n      remove: function (name) {\n        this.create(name, \"\", -1);\n      }\n    };\n    var cookie_noop = {\n      create: function (name, value, minutes, domain) {},\n      read: function (name) {\n        return null;\n      },\n      remove: function (name) {}\n    }; // move dependent functions to a container so that\n    // they can be overriden easier in no jquery environment (node.js)\n\n    var f = {\n      extend: $ ? $.extend : _extend,\n      each: $ ? $.each : _each,\n      ajax: $ ? $.ajax : typeof document !== 'undefined' ? _ajax : function () {},\n      cookie: typeof document !== 'undefined' ? _cookie : cookie_noop,\n      detectLanguage: detectLanguage,\n      escape: _escape,\n      log: function (str) {\n        if (o.debug && typeof console !== \"undefined\") console.log(str);\n      },\n      toLanguages: function (lng) {\n        var languages = [];\n\n        if (typeof lng === 'string' && lng.indexOf('-') > -1) {\n          var parts = lng.split('-');\n          lng = o.lowerCaseLng ? parts[0].toLowerCase() + '-' + parts[1].toLowerCase() : parts[0].toLowerCase() + '-' + parts[1].toUpperCase();\n          if (o.load !== 'unspecific') languages.push(lng);\n          if (o.load !== 'current') languages.push(parts[0]);\n        } else {\n          languages.push(lng);\n        }\n\n        for (var i = 0; i < o.fallbackLng.length; i++) {\n          if (languages.indexOf(o.fallbackLng[i]) === -1 && o.fallbackLng[i]) languages.push(o.fallbackLng[i]);\n        }\n\n        return languages;\n      },\n      regexEscape: function (str) {\n        return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n      }\n    };\n\n    function init(options, cb) {\n      if (typeof options === 'function') {\n        cb = options;\n        options = {};\n      }\n\n      options = options || {}; // override defaults with passed in options\n\n      f.extend(o, options);\n      delete o.fixLng;\n      /* passed in each time */\n      // create namespace object if namespace is passed in as string\n\n      if (typeof o.ns == 'string') {\n        o.ns = {\n          namespaces: [o.ns],\n          defaultNs: o.ns\n        };\n      } // fallback namespaces\n\n\n      if (typeof o.fallbackNS == 'string') {\n        o.fallbackNS = [o.fallbackNS];\n      } // fallback languages\n\n\n      if (typeof o.fallbackLng == 'string' || typeof o.fallbackLng == 'boolean') {\n        o.fallbackLng = [o.fallbackLng];\n      } // escape prefix/suffix\n\n\n      o.interpolationPrefixEscaped = f.regexEscape(o.interpolationPrefix);\n      o.interpolationSuffixEscaped = f.regexEscape(o.interpolationSuffix);\n      if (!o.lng) o.lng = f.detectLanguage();\n\n      if (o.lng) {\n        // set cookie with lng set (as detectLanguage will set cookie on need)\n        if (o.useCookie) f.cookie.create(o.cookieName, o.lng, o.cookieExpirationTime, o.cookieDomain);\n      } else {\n        o.lng = o.fallbackLng[0];\n        if (o.useCookie) f.cookie.remove(o.cookieName);\n      }\n\n      languages = f.toLanguages(o.lng);\n      currentLng = languages[0];\n      f.log('currentLng set to: ' + currentLng);\n      var lngTranslate = translate;\n\n      if (options.fixLng) {\n        lngTranslate = function (key, options) {\n          options = options || {};\n          options.lng = options.lng || lngTranslate.lng;\n          return translate(key, options);\n        };\n\n        lngTranslate.lng = currentLng;\n      }\n\n      pluralExtensions.setCurrentLng(currentLng); // add JQuery extensions\n\n      if ($ && o.setJqueryExt) addJqueryFunct(); // jQuery deferred\n\n      var deferred;\n\n      if ($ && $.Deferred) {\n        deferred = $.Deferred();\n      } // return immidiatly if res are passed in\n\n\n      if (o.resStore) {\n        resStore = o.resStore;\n        initialized = true;\n        if (cb) cb(lngTranslate);\n        if (deferred) deferred.resolve(lngTranslate);\n        if (deferred) return deferred.promise();\n        return;\n      } // languages to load\n\n\n      var lngsToLoad = f.toLanguages(o.lng);\n      if (typeof o.preload === 'string') o.preload = [o.preload];\n\n      for (var i = 0, l = o.preload.length; i < l; i++) {\n        var pres = f.toLanguages(o.preload[i]);\n\n        for (var y = 0, len = pres.length; y < len; y++) {\n          if (lngsToLoad.indexOf(pres[y]) < 0) {\n            lngsToLoad.push(pres[y]);\n          }\n        }\n      } // else load them\n\n\n      TAPi18next.sync.load(lngsToLoad, o, function (err, store) {\n        resStore = store;\n        initialized = true;\n        if (cb) cb(lngTranslate);\n        if (deferred) deferred.resolve(lngTranslate);\n      });\n      if (deferred) return deferred.promise();\n    }\n\n    function preload(lngs, cb) {\n      if (typeof lngs === 'string') lngs = [lngs];\n\n      for (var i = 0, l = lngs.length; i < l; i++) {\n        if (o.preload.indexOf(lngs[i]) < 0) {\n          o.preload.push(lngs[i]);\n        }\n      }\n\n      return init(cb);\n    }\n\n    function addResourceBundle(lng, ns, resources) {\n      if (typeof ns !== 'string') {\n        resources = ns;\n        ns = o.ns.defaultNs;\n      } else if (o.ns.namespaces.indexOf(ns) < 0) {\n        o.ns.namespaces.push(ns);\n      }\n\n      resStore[lng] = resStore[lng] || {};\n      resStore[lng][ns] = resStore[lng][ns] || {};\n      f.extend(resStore[lng][ns], resources);\n    }\n\n    function removeResourceBundle(lng, ns) {\n      if (typeof ns !== 'string') {\n        ns = o.ns.defaultNs;\n      }\n\n      resStore[lng] = resStore[lng] || {};\n      resStore[lng][ns] = {};\n    }\n\n    function setDefaultNamespace(ns) {\n      o.ns.defaultNs = ns;\n    }\n\n    function loadNamespace(namespace, cb) {\n      loadNamespaces([namespace], cb);\n    }\n\n    function loadNamespaces(namespaces, cb) {\n      var opts = {\n        dynamicLoad: o.dynamicLoad,\n        resGetPath: o.resGetPath,\n        getAsync: o.getAsync,\n        customLoad: o.customLoad,\n        ns: {\n          namespaces: namespaces,\n          defaultNs: ''\n        }\n        /* new namespaces to load */\n\n      }; // languages to load\n\n      var lngsToLoad = f.toLanguages(o.lng);\n      if (typeof o.preload === 'string') o.preload = [o.preload];\n\n      for (var i = 0, l = o.preload.length; i < l; i++) {\n        var pres = f.toLanguages(o.preload[i]);\n\n        for (var y = 0, len = pres.length; y < len; y++) {\n          if (lngsToLoad.indexOf(pres[y]) < 0) {\n            lngsToLoad.push(pres[y]);\n          }\n        }\n      } // check if we have to load\n\n\n      var lngNeedLoad = [];\n\n      for (var a = 0, lenA = lngsToLoad.length; a < lenA; a++) {\n        var needLoad = false;\n        var resSet = resStore[lngsToLoad[a]];\n\n        if (resSet) {\n          for (var b = 0, lenB = namespaces.length; b < lenB; b++) {\n            if (!resSet[namespaces[b]]) needLoad = true;\n          }\n        } else {\n          needLoad = true;\n        }\n\n        if (needLoad) lngNeedLoad.push(lngsToLoad[a]);\n      }\n\n      if (lngNeedLoad.length) {\n        TAPi18next.sync._fetch(lngNeedLoad, opts, function (err, store) {\n          var todo = namespaces.length * lngNeedLoad.length; // load each file individual\n\n          f.each(namespaces, function (nsIndex, nsValue) {\n            // append namespace to namespace array\n            if (o.ns.namespaces.indexOf(nsValue) < 0) {\n              o.ns.namespaces.push(nsValue);\n            }\n\n            f.each(lngNeedLoad, function (lngIndex, lngValue) {\n              resStore[lngValue] = resStore[lngValue] || {};\n              resStore[lngValue][nsValue] = store[lngValue][nsValue];\n              todo--; // wait for all done befor callback\n\n              if (todo === 0 && cb) {\n                if (o.useLocalStorage) TAPi18next.sync._storeLocal(resStore);\n                cb();\n              }\n            });\n          });\n        });\n      } else {\n        if (cb) cb();\n      }\n    }\n\n    function setLng(lng, options, cb) {\n      if (typeof options === 'function') {\n        cb = options;\n        options = {};\n      } else if (!options) {\n        options = {};\n      }\n\n      options.lng = lng;\n      return init(options, cb);\n    }\n\n    function lng() {\n      return currentLng;\n    }\n\n    function addJqueryFunct() {\n      // $.t shortcut\n      $.t = $.t || translate;\n\n      function parse(ele, key, options) {\n        if (key.length === 0) return;\n        var attr = 'text';\n\n        if (key.indexOf('[') === 0) {\n          var parts = key.split(']');\n          key = parts[1];\n          attr = parts[0].substr(1, parts[0].length - 1);\n        }\n\n        if (key.indexOf(';') === key.length - 1) {\n          key = key.substr(0, key.length - 2);\n        }\n\n        var optionsToUse;\n\n        if (attr === 'html') {\n          optionsToUse = o.defaultValueFromContent ? $.extend({\n            defaultValue: ele.html()\n          }, options) : options;\n          ele.html($.t(key, optionsToUse));\n        } else if (attr === 'text') {\n          optionsToUse = o.defaultValueFromContent ? $.extend({\n            defaultValue: ele.text()\n          }, options) : options;\n          ele.text($.t(key, optionsToUse));\n        } else if (attr === 'prepend') {\n          optionsToUse = o.defaultValueFromContent ? $.extend({\n            defaultValue: ele.html()\n          }, options) : options;\n          ele.prepend($.t(key, optionsToUse));\n        } else if (attr === 'append') {\n          optionsToUse = o.defaultValueFromContent ? $.extend({\n            defaultValue: ele.html()\n          }, options) : options;\n          ele.append($.t(key, optionsToUse));\n        } else if (attr.indexOf(\"data-\") === 0) {\n          var dataAttr = attr.substr(\"data-\".length);\n          optionsToUse = o.defaultValueFromContent ? $.extend({\n            defaultValue: ele.data(dataAttr)\n          }, options) : options;\n          var translated = $.t(key, optionsToUse); //we change into the data cache\n\n          ele.data(dataAttr, translated); //we change into the dom\n\n          ele.attr(attr, translated);\n        } else {\n          optionsToUse = o.defaultValueFromContent ? $.extend({\n            defaultValue: ele.attr(attr)\n          }, options) : options;\n          ele.attr(attr, $.t(key, optionsToUse));\n        }\n      }\n\n      function localize(ele, options) {\n        var key = ele.attr(o.selectorAttr);\n        if (!key && typeof key !== 'undefined' && key !== false) key = ele.text() || ele.val();\n        if (!key) return;\n        var target = ele,\n            targetSelector = ele.data(\"i18n-target\");\n\n        if (targetSelector) {\n          target = ele.find(targetSelector) || ele;\n        }\n\n        if (!options && o.useDataAttrOptions === true) {\n          options = ele.data(\"i18n-options\");\n        }\n\n        options = options || {};\n\n        if (key.indexOf(';') >= 0) {\n          var keys = key.split(';');\n          $.each(keys, function (m, k) {\n            if (k !== '') parse(target, k, options);\n          });\n        } else {\n          parse(target, key, options);\n        }\n\n        if (o.useDataAttrOptions === true) ele.data(\"i18n-options\", options);\n      } // fn\n\n\n      $.fn.TAPi18next = function (options) {\n        return this.each(function () {\n          // localize element itself\n          localize($(this), options); // localize childs\n\n          var elements = $(this).find('[' + o.selectorAttr + ']');\n          elements.each(function () {\n            localize($(this), options);\n          });\n        });\n      };\n    }\n\n    function applyReplacement(str, replacementHash, nestedKey, options) {\n      if (!str) return str;\n      options = options || replacementHash; // first call uses replacement hash combined with options\n\n      if (str.indexOf(options.interpolationPrefix || o.interpolationPrefix) < 0) return str;\n      var prefix = options.interpolationPrefix ? f.regexEscape(options.interpolationPrefix) : o.interpolationPrefixEscaped,\n          suffix = options.interpolationSuffix ? f.regexEscape(options.interpolationSuffix) : o.interpolationSuffixEscaped,\n          unEscapingSuffix = 'HTML' + suffix;\n      f.each(replacementHash, function (key, value) {\n        var nextKey = nestedKey ? nestedKey + o.keyseparator + key : key;\n\n        if (_typeof(value) === 'object' && value !== null) {\n          str = applyReplacement(str, value, nextKey, options);\n        } else {\n          if (options.escapeInterpolation || o.escapeInterpolation) {\n            str = str.replace(new RegExp([prefix, nextKey, unEscapingSuffix].join(''), 'g'), value);\n            str = str.replace(new RegExp([prefix, nextKey, suffix].join(''), 'g'), f.escape(value));\n          } else {\n            str = str.replace(new RegExp([prefix, nextKey, suffix].join(''), 'g'), value);\n          } // str = options.escapeInterpolation;\n\n        }\n      });\n      return str;\n    } // append it to functions\n\n\n    f.applyReplacement = applyReplacement;\n\n    function applyReuse(translated, options) {\n      var comma = ',';\n      var options_open = '{';\n      var options_close = '}';\n      var opts = f.extend({}, options);\n      delete opts.postProcess;\n\n      while (translated.indexOf(o.reusePrefix) != -1) {\n        replacementCounter++;\n\n        if (replacementCounter > o.maxRecursion) {\n          break;\n        } // safety net for too much recursion\n\n\n        var index_of_opening = translated.lastIndexOf(o.reusePrefix);\n        var index_of_end_of_closing = translated.indexOf(o.reuseSuffix, index_of_opening) + o.reuseSuffix.length;\n        var token = translated.substring(index_of_opening, index_of_end_of_closing);\n        var token_without_symbols = token.replace(o.reusePrefix, '').replace(o.reuseSuffix, '');\n\n        if (token_without_symbols.indexOf(comma) != -1) {\n          var index_of_token_end_of_closing = token_without_symbols.indexOf(comma);\n\n          if (token_without_symbols.indexOf(options_open, index_of_token_end_of_closing) != -1 && token_without_symbols.indexOf(options_close, index_of_token_end_of_closing) != -1) {\n            var index_of_opts_opening = token_without_symbols.indexOf(options_open, index_of_token_end_of_closing);\n            var index_of_opts_end_of_closing = token_without_symbols.indexOf(options_close, index_of_opts_opening) + options_close.length;\n\n            try {\n              opts = f.extend(opts, JSON.parse(token_without_symbols.substring(index_of_opts_opening, index_of_opts_end_of_closing)));\n              token_without_symbols = token_without_symbols.substring(0, index_of_token_end_of_closing);\n            } catch (e) {}\n          }\n        }\n\n        var translated_token = _translate(token_without_symbols, opts);\n\n        translated = translated.replace(token, translated_token);\n      }\n\n      return translated;\n    }\n\n    function hasContext(options) {\n      return options.context && (typeof options.context == 'string' || typeof options.context == 'number');\n    }\n\n    function needsPlural(options) {\n      return options.count !== undefined && typeof options.count != 'string' && options.count !== 1;\n    }\n\n    function exists(key, options) {\n      options = options || {};\n\n      var notFound = _getDefaultValue(key, options),\n          found = _find(key, options);\n\n      return found !== undefined || found === notFound;\n    }\n\n    function translate(key, options) {\n      if (typeof options === 'undefined') {\n        options = {};\n      }\n\n      if (!initialized) {\n        f.log('i18next not finished initialization. you might have called t function before loading resources finished.');\n        return options.defaultValue || '';\n      }\n\n      ;\n      replacementCounter = 0;\n      return _translate.apply(null, arguments);\n    }\n\n    function _getDefaultValue(key, options) {\n      return options.defaultValue !== undefined ? options.defaultValue : key;\n    }\n\n    function _injectSprintfProcessor() {\n      var values = []; // mh: build array from second argument onwards\n\n      for (var i = 1; i < arguments.length; i++) {\n        values.push(arguments[i]);\n      }\n\n      return {\n        postProcess: 'sprintf',\n        sprintf: values\n      };\n    }\n\n    function _translate(potentialKeys, options) {\n      if (typeof options !== \"undefined\" && options !== null && _typeof(options) !== 'object') {\n        if (o.shortcutFunction === 'sprintf') {\n          // mh: gettext like sprintf syntax found, automatically create sprintf processor\n          options = _injectSprintfProcessor.apply(null, arguments);\n        } else if (o.shortcutFunction === 'defaultValue') {\n          options = {\n            defaultValue: options\n          };\n        }\n      } else {\n        options = options || {};\n      }\n\n      if (potentialKeys === undefined || potentialKeys === null) return '';\n\n      if (typeof potentialKeys == 'string') {\n        potentialKeys = [potentialKeys];\n      }\n\n      var key = potentialKeys[0];\n\n      if (potentialKeys.length > 1) {\n        for (var i = 0; i < potentialKeys.length; i++) {\n          key = potentialKeys[i];\n\n          if (exists(key, options)) {\n            break;\n          }\n        }\n      }\n\n      var notFound = _getDefaultValue(key, options),\n          found = _find(key, options),\n          lngs = options.lng ? f.toLanguages(options.lng) : languages,\n          ns = options.ns || o.ns.defaultNs,\n          parts; // split ns and key\n\n\n      if (key.indexOf(o.nsseparator) > -1) {\n        parts = key.split(o.nsseparator);\n        ns = parts[0];\n        key = parts[1];\n      }\n\n      if (found === undefined && o.sendMissing) {\n        if (options.lng) {\n          sync.postMissing(lngs[0], ns, key, notFound, lngs);\n        } else {\n          sync.postMissing(o.lng, ns, key, notFound, lngs);\n        }\n      }\n\n      var postProcessor = options.postProcess || o.postProcess;\n\n      if (found !== undefined && postProcessor) {\n        if (postProcessors[postProcessor]) {\n          found = postProcessors[postProcessor](found, key, options);\n        }\n      } // process notFound if function exists\n\n\n      var splitNotFound = notFound;\n\n      if (notFound.indexOf(o.nsseparator) > -1) {\n        parts = notFound.split(o.nsseparator);\n        splitNotFound = parts[1];\n      }\n\n      if (splitNotFound === key && o.parseMissingKey) {\n        notFound = o.parseMissingKey(notFound);\n      }\n\n      if (found === undefined) {\n        notFound = applyReplacement(notFound, options);\n        notFound = applyReuse(notFound, options);\n\n        if (postProcessor && postProcessors[postProcessor]) {\n          var val = _getDefaultValue(key, options);\n\n          found = postProcessors[postProcessor](val, key, options);\n        }\n      }\n\n      return found !== undefined ? found : notFound;\n    }\n\n    function _find(key, options) {\n      options = options || {};\n\n      var optionWithoutCount,\n          translated,\n          notFound = _getDefaultValue(key, options),\n          lngs = languages;\n\n      if (!resStore) {\n        return notFound;\n      } // no resStore to translate from\n      // CI mode\n\n\n      if (lngs[0].toLowerCase() === 'cimode') return notFound; // passed in lng\n\n      if (options.lng) {\n        lngs = f.toLanguages(options.lng);\n\n        if (!resStore[lngs[0]]) {\n          var oldAsync = o.getAsync;\n          o.getAsync = false;\n          TAPi18next.sync.load(lngs, o, function (err, store) {\n            f.extend(resStore, store);\n            o.getAsync = oldAsync;\n          });\n        }\n      }\n\n      var ns = options.ns || o.ns.defaultNs;\n\n      if (key.indexOf(o.nsseparator) > -1) {\n        var parts = key.split(o.nsseparator);\n        ns = parts[0];\n        key = parts[1];\n      }\n\n      if (hasContext(options)) {\n        optionWithoutCount = f.extend({}, options);\n        delete optionWithoutCount.context;\n        optionWithoutCount.defaultValue = o.contextNotFound;\n        var contextKey = ns + o.nsseparator + key + '_' + options.context;\n        translated = translate(contextKey, optionWithoutCount);\n\n        if (translated != o.contextNotFound) {\n          return applyReplacement(translated, {\n            context: options.context\n          }); // apply replacement for context only\n        } // else continue translation with original/nonContext key\n\n      }\n\n      if (needsPlural(options)) {\n        optionWithoutCount = f.extend({}, options);\n        delete optionWithoutCount.count;\n        optionWithoutCount.defaultValue = o.pluralNotFound;\n        var pluralKey = ns + o.nsseparator + key + o.pluralSuffix;\n        var pluralExtension = pluralExtensions.get(lngs[0], options.count);\n\n        if (pluralExtension >= 0) {\n          pluralKey = pluralKey + '_' + pluralExtension;\n        } else if (pluralExtension === 1) {\n          pluralKey = ns + o.nsseparator + key; // singular\n        }\n\n        translated = translate(pluralKey, optionWithoutCount);\n\n        if (translated != o.pluralNotFound) {\n          return applyReplacement(translated, {\n            count: options.count,\n            interpolationPrefix: options.interpolationPrefix,\n            interpolationSuffix: options.interpolationSuffix\n          }); // apply replacement for count only\n        } // else continue translation with original/singular key\n\n      }\n\n      var found;\n      var keys = key.split(o.keyseparator);\n\n      for (var i = 0, len = lngs.length; i < len; i++) {\n        if (found !== undefined) break;\n        var l = lngs[i];\n        var x = 0;\n        var value = resStore[l] && resStore[l][ns];\n\n        while (keys[x]) {\n          value = value && value[keys[x]];\n          x++;\n        }\n\n        if (value !== undefined) {\n          var valueType = Object.prototype.toString.apply(value);\n\n          if (typeof value === 'string') {\n            value = applyReplacement(value, options);\n            value = applyReuse(value, options);\n          } else if (valueType === '[object Array]' && !o.returnObjectTrees && !options.returnObjectTrees) {\n            value = value.join('\\n');\n            value = applyReplacement(value, options);\n            value = applyReuse(value, options);\n          } else if (value === null && o.fallbackOnNull === true) {\n            value = undefined;\n          } else if (value !== null) {\n            if (!o.returnObjectTrees && !options.returnObjectTrees) {\n              if (o.objectTreeKeyHandler && typeof o.objectTreeKeyHandler == 'function') {\n                value = o.objectTreeKeyHandler(key, value, l, ns, options);\n              } else {\n                value = 'key \\'' + ns + ':' + key + ' (' + l + ')\\' ' + 'returned an object instead of string.';\n                f.log(value);\n              }\n            } else if (valueType !== '[object Number]' && valueType !== '[object Function]' && valueType !== '[object RegExp]') {\n              var copy = valueType === '[object Array]' ? [] : {}; // apply child translation on a copy\n\n              f.each(value, function (m) {\n                copy[m] = _translate(ns + o.nsseparator + key + o.keyseparator + m, options);\n              });\n              value = copy;\n            }\n          }\n\n          if (typeof value === 'string' && value.trim() === '' && o.fallbackOnEmpty === true) value = undefined;\n          found = value;\n        }\n      }\n\n      if (found === undefined && !options.isFallbackLookup && (o.fallbackToDefaultNS === true || o.fallbackNS && o.fallbackNS.length > 0)) {\n        // set flag for fallback lookup - avoid recursion\n        options.isFallbackLookup = true;\n\n        if (o.fallbackNS.length) {\n          for (var y = 0, lenY = o.fallbackNS.length; y < lenY; y++) {\n            found = _find(o.fallbackNS[y] + o.nsseparator + key, options);\n\n            if (found) {\n              /* compare value without namespace */\n              var foundValue = found.indexOf(o.nsseparator) > -1 ? found.split(o.nsseparator)[1] : found,\n                  notFoundValue = notFound.indexOf(o.nsseparator) > -1 ? notFound.split(o.nsseparator)[1] : notFound;\n              if (foundValue !== notFoundValue) break;\n            }\n          }\n        } else {\n          found = _find(key, options); // fallback to default NS\n        }\n      }\n\n      return found;\n    }\n\n    function detectLanguage() {\n      var detectedLng; // get from qs\n\n      var qsParm = [];\n\n      if (typeof window !== 'undefined') {\n        (function () {\n          var query = window.location.search.substring(1);\n          var parms = query.split('&');\n\n          for (var i = 0; i < parms.length; i++) {\n            var pos = parms[i].indexOf('=');\n\n            if (pos > 0) {\n              var key = parms[i].substring(0, pos);\n              var val = parms[i].substring(pos + 1);\n              qsParm[key] = val;\n            }\n          }\n        })();\n\n        if (qsParm[o.detectLngQS]) {\n          detectedLng = qsParm[o.detectLngQS];\n        }\n      } // get from cookie\n\n\n      if (!detectedLng && typeof document !== 'undefined' && o.useCookie) {\n        var c = f.cookie.read(o.cookieName);\n        if (c) detectedLng = c;\n      } // get from navigator\n\n\n      if (!detectedLng && typeof navigator !== 'undefined') {\n        detectedLng = navigator.language ? navigator.language : navigator.userLanguage;\n      }\n\n      return detectedLng;\n    }\n\n    var sync = {\n      load: function (lngs, options, cb) {\n        if (options.useLocalStorage) {\n          sync._loadLocal(lngs, options, function (err, store) {\n            var missingLngs = [];\n\n            for (var i = 0, len = lngs.length; i < len; i++) {\n              if (!store[lngs[i]]) missingLngs.push(lngs[i]);\n            }\n\n            if (missingLngs.length > 0) {\n              sync._fetch(missingLngs, options, function (err, fetched) {\n                f.extend(store, fetched);\n\n                sync._storeLocal(fetched);\n\n                cb(null, store);\n              });\n            } else {\n              cb(null, store);\n            }\n          });\n        } else {\n          sync._fetch(lngs, options, function (err, store) {\n            cb(null, store);\n          });\n        }\n      },\n      _loadLocal: function (lngs, options, cb) {\n        var store = {},\n            nowMS = new Date().getTime();\n\n        if (window.localStorage) {\n          var todo = lngs.length;\n          f.each(lngs, function (key, lng) {\n            var local = window.localStorage.getItem('res_' + lng);\n\n            if (local) {\n              local = JSON.parse(local);\n\n              if (local.i18nStamp && local.i18nStamp + options.localStorageExpirationTime > nowMS) {\n                store[lng] = local;\n              }\n            }\n\n            todo--; // wait for all done befor callback\n\n            if (todo === 0) cb(null, store);\n          });\n        }\n      },\n      _storeLocal: function (store) {\n        if (window.localStorage) {\n          for (var m in meteorBabelHelpers.sanitizeForInObject(store)) {\n            store[m].i18nStamp = new Date().getTime();\n            window.localStorage.setItem('res_' + m, JSON.stringify(store[m]));\n          }\n        }\n\n        return;\n      },\n      _fetch: function (lngs, options, cb) {\n        var ns = options.ns,\n            store = {};\n\n        if (!options.dynamicLoad) {\n          var todo = ns.namespaces.length * lngs.length,\n              errors; // load each file individual\n\n          f.each(ns.namespaces, function (nsIndex, nsValue) {\n            f.each(lngs, function (lngIndex, lngValue) {\n              // Call this once our translation has returned.\n              var loadComplete = function (err, data) {\n                if (err) {\n                  errors = errors || [];\n                  errors.push(err);\n                }\n\n                store[lngValue] = store[lngValue] || {};\n                store[lngValue][nsValue] = data;\n                todo--; // wait for all done befor callback\n\n                if (todo === 0) cb(errors, store);\n              };\n\n              if (typeof options.customLoad == 'function') {\n                // Use the specified custom callback.\n                options.customLoad(lngValue, nsValue, options, loadComplete);\n              } else {\n                //~ // Use our inbuilt sync.\n                sync._fetchOne(lngValue, nsValue, options, loadComplete);\n              }\n            });\n          });\n        } else {\n          // Call this once our translation has returned.\n          var loadComplete = function (err, data) {\n            cb(null, data);\n          };\n\n          if (typeof options.customLoad == 'function') {\n            // Use the specified custom callback.\n            options.customLoad(lngs, ns.namespaces, options, loadComplete);\n          } else {\n            var url = applyReplacement(options.resGetPath, {\n              lng: lngs.join('+'),\n              ns: ns.namespaces.join('+')\n            }); // load all needed stuff once\n\n            f.ajax({\n              url: url,\n              success: function (data, status, xhr) {\n                f.log('loaded: ' + url);\n                loadComplete(null, data);\n              },\n              error: function (xhr, status, error) {\n                f.log('failed loading: ' + url);\n                loadComplete('failed loading resource.json error: ' + error);\n              },\n              dataType: \"json\",\n              async: options.getAsync\n            });\n          }\n        }\n      },\n      _fetchOne: function (lng, ns, options, done) {\n        var url = applyReplacement(options.resGetPath, {\n          lng: lng,\n          ns: ns\n        });\n        f.ajax({\n          url: url,\n          success: function (data, status, xhr) {\n            f.log('loaded: ' + url);\n            done(null, data);\n          },\n          error: function (xhr, status, error) {\n            if (status && status == 200 || xhr && xhr.status && xhr.status == 200) {\n              // file loaded but invalid json, stop waste time !\n              f.log('There is a typo in: ' + url);\n            } else if (status && status == 404 || xhr && xhr.status && xhr.status == 404) {\n              f.log('Does not exist: ' + url);\n            } else {\n              var theStatus = status ? status : xhr && xhr.status ? xhr.status : null;\n              f.log(theStatus + ' when loading ' + url);\n            }\n\n            done(error, {});\n          },\n          dataType: \"json\",\n          async: options.getAsync\n        });\n      },\n      postMissing: function (lng, ns, key, defaultValue, lngs) {\n        var payload = {};\n        payload[key] = defaultValue;\n        var urls = [];\n\n        if (o.sendMissingTo === 'fallback' && o.fallbackLng[0] !== false) {\n          for (var i = 0; i < o.fallbackLng.length; i++) {\n            urls.push({\n              lng: o.fallbackLng[i],\n              url: applyReplacement(o.resPostPath, {\n                lng: o.fallbackLng[i],\n                ns: ns\n              })\n            });\n          }\n        } else if (o.sendMissingTo === 'current' || o.sendMissingTo === 'fallback' && o.fallbackLng[0] === false) {\n          urls.push({\n            lng: lng,\n            url: applyReplacement(o.resPostPath, {\n              lng: lng,\n              ns: ns\n            })\n          });\n        } else if (o.sendMissingTo === 'all') {\n          for (var i = 0, l = lngs.length; i < l; i++) {\n            urls.push({\n              lng: lngs[i],\n              url: applyReplacement(o.resPostPath, {\n                lng: lngs[i],\n                ns: ns\n              })\n            });\n          }\n        }\n\n        for (var y = 0, len = urls.length; y < len; y++) {\n          var item = urls[y];\n          f.ajax({\n            url: item.url,\n            type: o.sendType,\n            data: payload,\n            success: function (data, status, xhr) {\n              f.log('posted missing key \\'' + key + '\\' to: ' + item.url); // add key to resStore\n\n              var keys = key.split('.');\n              var x = 0;\n              var value = resStore[item.lng][ns];\n\n              while (keys[x]) {\n                if (x === keys.length - 1) {\n                  value = value[keys[x]] = defaultValue;\n                } else {\n                  value = value[keys[x]] = value[keys[x]] || {};\n                }\n\n                x++;\n              }\n            },\n            error: function (xhr, status, error) {\n              f.log('failed posting missing key \\'' + key + '\\' to: ' + item.url);\n            },\n            dataType: \"json\",\n            async: o.postAsync\n          });\n        }\n      }\n    }; // definition http://translate.sourceforge.net/wiki/l10n/pluralforms\n\n    var pluralExtensions = {\n      rules: {\n        \"ach\": {\n          \"name\": \"Acholi\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n > 1);\n          }\n        },\n        \"af\": {\n          \"name\": \"Afrikaans\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"ak\": {\n          \"name\": \"Akan\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n > 1);\n          }\n        },\n        \"am\": {\n          \"name\": \"Amharic\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n > 1);\n          }\n        },\n        \"an\": {\n          \"name\": \"Aragonese\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"ar\": {\n          \"name\": \"Arabic\",\n          \"numbers\": [0, 1, 2, 3, 11, 100],\n          \"plurals\": function (n) {\n            return Number(n === 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5);\n          }\n        },\n        \"arn\": {\n          \"name\": \"Mapudungun\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n > 1);\n          }\n        },\n        \"ast\": {\n          \"name\": \"Asturian\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"ay\": {\n          \"name\": \"Aymar\\xE1\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"az\": {\n          \"name\": \"Azerbaijani\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"be\": {\n          \"name\": \"Belarusian\",\n          \"numbers\": [1, 2, 5],\n          \"plurals\": function (n) {\n            return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n          }\n        },\n        \"bg\": {\n          \"name\": \"Bulgarian\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"bn\": {\n          \"name\": \"Bengali\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"bo\": {\n          \"name\": \"Tibetan\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"br\": {\n          \"name\": \"Breton\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n > 1);\n          }\n        },\n        \"bs\": {\n          \"name\": \"Bosnian\",\n          \"numbers\": [1, 2, 5],\n          \"plurals\": function (n) {\n            return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n          }\n        },\n        \"ca\": {\n          \"name\": \"Catalan\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"cgg\": {\n          \"name\": \"Chiga\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"cs\": {\n          \"name\": \"Czech\",\n          \"numbers\": [1, 2, 5],\n          \"plurals\": function (n) {\n            return Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2);\n          }\n        },\n        \"csb\": {\n          \"name\": \"Kashubian\",\n          \"numbers\": [1, 2, 5],\n          \"plurals\": function (n) {\n            return Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n          }\n        },\n        \"cy\": {\n          \"name\": \"Welsh\",\n          \"numbers\": [1, 2, 3, 8],\n          \"plurals\": function (n) {\n            return Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3);\n          }\n        },\n        \"da\": {\n          \"name\": \"Danish\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"de\": {\n          \"name\": \"German\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"dz\": {\n          \"name\": \"Dzongkha\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"el\": {\n          \"name\": \"Greek\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"en\": {\n          \"name\": \"English\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"eo\": {\n          \"name\": \"Esperanto\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"es\": {\n          \"name\": \"Spanish\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"es_ar\": {\n          \"name\": \"Argentinean Spanish\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"et\": {\n          \"name\": \"Estonian\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"eu\": {\n          \"name\": \"Basque\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"fa\": {\n          \"name\": \"Persian\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"fi\": {\n          \"name\": \"Finnish\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"fil\": {\n          \"name\": \"Filipino\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n > 1);\n          }\n        },\n        \"fo\": {\n          \"name\": \"Faroese\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"fr\": {\n          \"name\": \"French\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n > 1);\n          }\n        },\n        \"fur\": {\n          \"name\": \"Friulian\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"fy\": {\n          \"name\": \"Frisian\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"ga\": {\n          \"name\": \"Irish\",\n          \"numbers\": [1, 2, 3, 7, 11],\n          \"plurals\": function (n) {\n            return Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4);\n          }\n        },\n        \"gd\": {\n          \"name\": \"Scottish Gaelic\",\n          \"numbers\": [1, 2, 3, 20],\n          \"plurals\": function (n) {\n            return Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3);\n          }\n        },\n        \"gl\": {\n          \"name\": \"Galician\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"gu\": {\n          \"name\": \"Gujarati\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"gun\": {\n          \"name\": \"Gun\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n > 1);\n          }\n        },\n        \"ha\": {\n          \"name\": \"Hausa\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"he\": {\n          \"name\": \"Hebrew\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"hi\": {\n          \"name\": \"Hindi\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"hr\": {\n          \"name\": \"Croatian\",\n          \"numbers\": [1, 2, 5],\n          \"plurals\": function (n) {\n            return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n          }\n        },\n        \"hu\": {\n          \"name\": \"Hungarian\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"hy\": {\n          \"name\": \"Armenian\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"ia\": {\n          \"name\": \"Interlingua\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"id\": {\n          \"name\": \"Indonesian\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"is\": {\n          \"name\": \"Icelandic\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n % 10 != 1 || n % 100 == 11);\n          }\n        },\n        \"it\": {\n          \"name\": \"Italian\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"ja\": {\n          \"name\": \"Japanese\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"jbo\": {\n          \"name\": \"Lojban\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"jv\": {\n          \"name\": \"Javanese\",\n          \"numbers\": [0, 1],\n          \"plurals\": function (n) {\n            return Number(n !== 0);\n          }\n        },\n        \"ka\": {\n          \"name\": \"Georgian\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"kk\": {\n          \"name\": \"Kazakh\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"km\": {\n          \"name\": \"Khmer\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"kn\": {\n          \"name\": \"Kannada\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"ko\": {\n          \"name\": \"Korean\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"ku\": {\n          \"name\": \"Kurdish\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"kw\": {\n          \"name\": \"Cornish\",\n          \"numbers\": [1, 2, 3, 4],\n          \"plurals\": function (n) {\n            return Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3);\n          }\n        },\n        \"ky\": {\n          \"name\": \"Kyrgyz\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"lb\": {\n          \"name\": \"Letzeburgesch\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"ln\": {\n          \"name\": \"Lingala\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n > 1);\n          }\n        },\n        \"lo\": {\n          \"name\": \"Lao\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"lt\": {\n          \"name\": \"Lithuanian\",\n          \"numbers\": [1, 2, 10],\n          \"plurals\": function (n) {\n            return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n          }\n        },\n        \"lv\": {\n          \"name\": \"Latvian\",\n          \"numbers\": [1, 2, 0],\n          \"plurals\": function (n) {\n            return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2);\n          }\n        },\n        \"mai\": {\n          \"name\": \"Maithili\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"mfe\": {\n          \"name\": \"Mauritian Creole\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n > 1);\n          }\n        },\n        \"mg\": {\n          \"name\": \"Malagasy\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n > 1);\n          }\n        },\n        \"mi\": {\n          \"name\": \"Maori\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n > 1);\n          }\n        },\n        \"mk\": {\n          \"name\": \"Macedonian\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n == 1 || n % 10 == 1 ? 0 : 1);\n          }\n        },\n        \"ml\": {\n          \"name\": \"Malayalam\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"mn\": {\n          \"name\": \"Mongolian\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"mnk\": {\n          \"name\": \"Mandinka\",\n          \"numbers\": [0, 1, 2],\n          \"plurals\": function (n) {\n            return Number(n == 0 ? 0 : n == 1 ? 1 : 2);\n          }\n        },\n        \"mr\": {\n          \"name\": \"Marathi\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"ms\": {\n          \"name\": \"Malay\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"mt\": {\n          \"name\": \"Maltese\",\n          \"numbers\": [1, 2, 11, 20],\n          \"plurals\": function (n) {\n            return Number(n == 1 ? 0 : n === 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3);\n          }\n        },\n        \"nah\": {\n          \"name\": \"Nahuatl\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"nap\": {\n          \"name\": \"Neapolitan\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"nb\": {\n          \"name\": \"Norwegian Bokmal\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"ne\": {\n          \"name\": \"Nepali\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"nl\": {\n          \"name\": \"Dutch\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"nn\": {\n          \"name\": \"Norwegian Nynorsk\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"no\": {\n          \"name\": \"Norwegian\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"nso\": {\n          \"name\": \"Northern Sotho\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"oc\": {\n          \"name\": \"Occitan\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n > 1);\n          }\n        },\n        \"or\": {\n          \"name\": \"Oriya\",\n          \"numbers\": [2, 1],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"pa\": {\n          \"name\": \"Punjabi\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"pap\": {\n          \"name\": \"Papiamento\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"pl\": {\n          \"name\": \"Polish\",\n          \"numbers\": [1, 2, 5],\n          \"plurals\": function (n) {\n            return Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n          }\n        },\n        \"pms\": {\n          \"name\": \"Piemontese\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"ps\": {\n          \"name\": \"Pashto\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"pt\": {\n          \"name\": \"Portuguese\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"pt_br\": {\n          \"name\": \"Brazilian Portuguese\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"rm\": {\n          \"name\": \"Romansh\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"ro\": {\n          \"name\": \"Romanian\",\n          \"numbers\": [1, 2, 20],\n          \"plurals\": function (n) {\n            return Number(n == 1 ? 0 : n === 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2);\n          }\n        },\n        \"ru\": {\n          \"name\": \"Russian\",\n          \"numbers\": [1, 2, 5],\n          \"plurals\": function (n) {\n            return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n          }\n        },\n        \"sah\": {\n          \"name\": \"Yakut\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"sco\": {\n          \"name\": \"Scots\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"se\": {\n          \"name\": \"Northern Sami\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"si\": {\n          \"name\": \"Sinhala\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"sk\": {\n          \"name\": \"Slovak\",\n          \"numbers\": [1, 2, 5],\n          \"plurals\": function (n) {\n            return Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2);\n          }\n        },\n        \"sl\": {\n          \"name\": \"Slovenian\",\n          \"numbers\": [5, 1, 2, 3],\n          \"plurals\": function (n) {\n            return Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0);\n          }\n        },\n        \"so\": {\n          \"name\": \"Somali\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"son\": {\n          \"name\": \"Songhay\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"sq\": {\n          \"name\": \"Albanian\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"sr\": {\n          \"name\": \"Serbian\",\n          \"numbers\": [1, 2, 5],\n          \"plurals\": function (n) {\n            return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n          }\n        },\n        \"su\": {\n          \"name\": \"Sundanese\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"sv\": {\n          \"name\": \"Swedish\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"sw\": {\n          \"name\": \"Swahili\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"ta\": {\n          \"name\": \"Tamil\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"te\": {\n          \"name\": \"Telugu\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"tg\": {\n          \"name\": \"Tajik\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n > 1);\n          }\n        },\n        \"th\": {\n          \"name\": \"Thai\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"ti\": {\n          \"name\": \"Tigrinya\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n > 1);\n          }\n        },\n        \"tk\": {\n          \"name\": \"Turkmen\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"tr\": {\n          \"name\": \"Turkish\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n > 1);\n          }\n        },\n        \"tt\": {\n          \"name\": \"Tatar\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"ug\": {\n          \"name\": \"Uyghur\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"uk\": {\n          \"name\": \"Ukrainian\",\n          \"numbers\": [1, 2, 5],\n          \"plurals\": function (n) {\n            return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n          }\n        },\n        \"ur\": {\n          \"name\": \"Urdu\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"uz\": {\n          \"name\": \"Uzbek\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n > 1);\n          }\n        },\n        \"vi\": {\n          \"name\": \"Vietnamese\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"wa\": {\n          \"name\": \"Walloon\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n > 1);\n          }\n        },\n        \"wo\": {\n          \"name\": \"Wolof\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        },\n        \"yo\": {\n          \"name\": \"Yoruba\",\n          \"numbers\": [1, 2],\n          \"plurals\": function (n) {\n            return Number(n != 1);\n          }\n        },\n        \"zh\": {\n          \"name\": \"Chinese\",\n          \"numbers\": [1],\n          \"plurals\": function (n) {\n            return 0;\n          }\n        }\n      },\n      // for demonstration only sl and ar is added but you can add your own pluralExtensions\n      addRule: function (lng, obj) {\n        pluralExtensions.rules[lng] = obj;\n      },\n      setCurrentLng: function (lng) {\n        if (!pluralExtensions.currentRule || pluralExtensions.currentRule.lng !== lng) {\n          var parts = lng.split('-');\n          pluralExtensions.currentRule = {\n            lng: lng,\n            rule: pluralExtensions.rules[parts[0]]\n          };\n        }\n      },\n      get: function (lng, count) {\n        var parts = lng.split('-');\n\n        function getResult(l, c) {\n          var ext;\n\n          if (pluralExtensions.currentRule && pluralExtensions.currentRule.lng === lng) {\n            ext = pluralExtensions.currentRule.rule;\n          } else {\n            ext = pluralExtensions.rules[l];\n          }\n\n          if (ext) {\n            var i = ext.plurals(c);\n            var number = ext.numbers[i];\n\n            if (ext.numbers.length === 2 && ext.numbers[0] === 1) {\n              if (number === 2) {\n                number = -1; // regular plural\n              } else if (number === 1) {\n                number = 1; // singular\n              }\n            } //console.log(count + '-' + number);\n\n\n            return number;\n          } else {\n            return c === 1 ? '1' : '-1';\n          }\n        }\n\n        return getResult(parts[0], count);\n      }\n    };\n    var postProcessors = {};\n\n    var addPostProcessor = function (name, fc) {\n      postProcessors[name] = fc;\n    }; // sprintf support\n\n\n    var sprintf = function () {\n      function get_type(variable) {\n        return Object.prototype.toString.call(variable).slice(8, -1).toLowerCase();\n      }\n\n      function str_repeat(input, multiplier) {\n        for (var output = []; multiplier > 0; output[--multiplier] = input) {\n          /* do nothing */\n        }\n\n        return output.join('');\n      }\n\n      var str_format = function () {\n        if (!str_format.cache.hasOwnProperty(arguments[0])) {\n          str_format.cache[arguments[0]] = str_format.parse(arguments[0]);\n        }\n\n        return str_format.format.call(null, str_format.cache[arguments[0]], arguments);\n      };\n\n      str_format.format = function (parse_tree, argv) {\n        var cursor = 1,\n            tree_length = parse_tree.length,\n            node_type = '',\n            arg,\n            output = [],\n            i,\n            k,\n            match,\n            pad,\n            pad_character,\n            pad_length;\n\n        for (i = 0; i < tree_length; i++) {\n          node_type = get_type(parse_tree[i]);\n\n          if (node_type === 'string') {\n            output.push(parse_tree[i]);\n          } else if (node_type === 'array') {\n            match = parse_tree[i]; // convenience purposes only\n\n            if (match[2]) {\n              // keyword argument\n              arg = argv[cursor];\n\n              for (k = 0; k < match[2].length; k++) {\n                if (!arg.hasOwnProperty(match[2][k])) {\n                  throw sprintf('[sprintf] property \"%s\" does not exist', match[2][k]);\n                }\n\n                arg = arg[match[2][k]];\n              }\n            } else if (match[1]) {\n              // positional argument (explicit)\n              arg = argv[match[1]];\n            } else {\n              // positional argument (implicit)\n              arg = argv[cursor++];\n            }\n\n            if (/[^s]/.test(match[8]) && get_type(arg) != 'number') {\n              throw sprintf('[sprintf] expecting number but found %s', get_type(arg));\n            }\n\n            switch (match[8]) {\n              case 'b':\n                arg = arg.toString(2);\n                break;\n\n              case 'c':\n                arg = String.fromCharCode(arg);\n                break;\n\n              case 'd':\n                arg = parseInt(arg, 10);\n                break;\n\n              case 'e':\n                arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential();\n                break;\n\n              case 'f':\n                arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg);\n                break;\n\n              case 'o':\n                arg = arg.toString(8);\n                break;\n\n              case 's':\n                arg = (arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg;\n                break;\n\n              case 'u':\n                arg = Math.abs(arg);\n                break;\n\n              case 'x':\n                arg = arg.toString(16);\n                break;\n\n              case 'X':\n                arg = arg.toString(16).toUpperCase();\n                break;\n            }\n\n            arg = /[def]/.test(match[8]) && match[3] && arg >= 0 ? '+' + arg : arg;\n            pad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' ';\n            pad_length = match[6] - String(arg).length;\n            pad = match[6] ? str_repeat(pad_character, pad_length) : '';\n            output.push(match[5] ? arg + pad : pad + arg);\n          }\n        }\n\n        return output.join('');\n      };\n\n      str_format.cache = {};\n\n      str_format.parse = function (fmt) {\n        var _fmt = fmt,\n            match = [],\n            parse_tree = [],\n            arg_names = 0;\n\n        while (_fmt) {\n          if ((match = /^[^\\x25]+/.exec(_fmt)) !== null) {\n            parse_tree.push(match[0]);\n          } else if ((match = /^\\x25{2}/.exec(_fmt)) !== null) {\n            parse_tree.push('%');\n          } else if ((match = /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {\n            if (match[2]) {\n              arg_names |= 1;\n              var field_list = [],\n                  replacement_field = match[2],\n                  field_match = [];\n\n              if ((field_match = /^([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n                field_list.push(field_match[1]);\n\n                while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\n                  if ((field_match = /^\\.([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n                    field_list.push(field_match[1]);\n                  } else if ((field_match = /^\\[(\\d+)\\]/.exec(replacement_field)) !== null) {\n                    field_list.push(field_match[1]);\n                  } else {\n                    throw '[sprintf] huh?';\n                  }\n                }\n              } else {\n                throw '[sprintf] huh?';\n              }\n\n              match[2] = field_list;\n            } else {\n              arg_names |= 2;\n            }\n\n            if (arg_names === 3) {\n              throw '[sprintf] mixing positional and named placeholders is not (yet) supported';\n            }\n\n            parse_tree.push(match);\n          } else {\n            throw '[sprintf] huh?';\n          }\n\n          _fmt = _fmt.substring(match[0].length);\n        }\n\n        return parse_tree;\n      };\n\n      return str_format;\n    }();\n\n    var vsprintf = function (fmt, argv) {\n      argv.unshift(fmt);\n      return sprintf.apply(null, argv);\n    };\n\n    addPostProcessor(\"sprintf\", function (val, key, opts) {\n      if (!opts.sprintf) return val;\n\n      if (Object.prototype.toString.apply(opts.sprintf) === '[object Array]') {\n        return vsprintf(val, opts.sprintf);\n      } else if (_typeof(opts.sprintf) === 'object') {\n        return sprintf(val, opts.sprintf);\n      }\n\n      return val;\n    }); // public api interface\n\n    TAPi18next.init = init;\n    TAPi18next.setLng = setLng;\n    TAPi18next.preload = preload;\n    TAPi18next.addResourceBundle = addResourceBundle;\n    TAPi18next.removeResourceBundle = removeResourceBundle;\n    TAPi18next.loadNamespace = loadNamespace;\n    TAPi18next.loadNamespaces = loadNamespaces;\n    TAPi18next.setDefaultNamespace = setDefaultNamespace;\n    TAPi18next.t = translate;\n    TAPi18next.translate = translate;\n    TAPi18next.exists = exists;\n    TAPi18next.detectLanguage = f.detectLanguage;\n    TAPi18next.pluralExtensions = pluralExtensions;\n    TAPi18next.sync = sync;\n    TAPi18next.functions = f;\n    TAPi18next.lng = lng;\n    TAPi18next.addPostProcessor = addPostProcessor;\n    TAPi18next.options = o;\n  })();\n}.call(this, module);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"tap_i18n\":{\"globals.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/rocketchat_tap-i18n/lib/tap_i18n/globals.js                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  globals: function () {\n    return globals;\n  }\n});\nvar globals = {\n  fallback_language: 'en',\n  langauges_tags_regex: '[a-z]{2,3}(?:-[a-zA-Z]{4})?(?:-[A-Z]{2,3})?',\n  project_translations_domain: 'project',\n  browser_path: '/tap-i18n',\n  debug: false\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"tap_i18n-client.coffee\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/rocketchat_tap-i18n/lib/tap_i18n/tap_i18n-client.coffee                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nmodule.export({\n  TAPi18nClient: function () {\n    return TAPi18nClient;\n  }\n});\nvar TAPi18nBase;\nmodule.link(\"./tap_i18n-common\", {\n  TAPi18nBase: function (v) {\n    TAPi18nBase = v;\n  }\n}, 0);\nvar globals;\nmodule.link(\"./globals\", {\n  globals: function (v) {\n    globals = v;\n  }\n}, 1);\nvar indexOf = [].indexOf;\n\nvar TAPi18nClient = function () {\n  var TAPi18nClient =\n  /*#__PURE__*/\n  function (_TAPi18nBase) {\n    _inheritsLoose(TAPi18nClient, _TAPi18nBase);\n\n    function TAPi18nClient() {\n      return _TAPi18nBase.apply(this, arguments) || this;\n    }\n\n    var _proto = TAPi18nClient.prototype;\n\n    _proto._getLanguageFilePath = function () {\n      function _getLanguageFilePath(lang_tag) {\n        var path;\n\n        if (!this._enabled()) {\n          return null;\n        }\n\n        path = this.conf.cdn_path != null ? this.conf.cdn_path : this.conf.i18n_files_route;\n        path = path.replace(/\\/$/, \"\");\n\n        if (Meteor.isCordova && path[0] === \"/\") {\n          path = Meteor.absoluteUrl().replace(/\\/+$/, \"\") + path;\n        }\n\n        return path + \"/\" + lang_tag + \".json\";\n      }\n\n      return _getLanguageFilePath;\n    }();\n\n    _proto._loadLanguage = function () {\n      function _loadLanguage(languageTag) {\n        var _this = this;\n\n        var dependencyLoadDfd, dfd, directDependencyLanguageTag, loadLanguageTag, project_languages; // Load languageTag and its dependencies languages to TAPi18next if we\n        // haven't loaded them already.\n        // languageTag dependencies languages are:\n        // * The base language if languageTag is a dialect.\n        // * The fallback language (en) if we haven't loaded it already.\n        // Returns a deferred object that resolves with no arguments if all files\n        // loaded successfully to TAPi18next and rejects with array of error\n        // messages otherwise\n        // Example:\n        // TAPi18n._loadLanguage(\"pt-BR\")\n        //   .done(function () {\n        //     console.log(\"languageLoaded successfully\");\n        //   })\n        //   .fail(function (messages) {\n        //     console.log(\"Couldn't load languageTag\", messages);\n        //   })\n        // The above example will attempt to load pt-BR, pt and en\n\n        dfd = new $.Deferred();\n\n        if (!this._enabled()) {\n          return dfd.reject(\"tap-i18n is not enabled in the project level, check tap-i18n README\");\n        }\n\n        project_languages = this._getProjectLanguages();\n\n        if (indexOf.call(project_languages, languageTag) >= 0) {\n          if (indexOf.call(this._loaded_languages, languageTag) < 0) {\n            loadLanguageTag = function () {\n              var jqXHR;\n              jqXHR = $.getJSON(_this._getLanguageFilePath(languageTag));\n              jqXHR.done(function (data) {\n                _this._loadLangFileObject(languageTag, data);\n\n                _this._loaded_languages.push(languageTag);\n\n                return dfd.resolve();\n              });\n              return jqXHR.fail(function (xhr, error_code) {\n                return dfd.reject(\"Couldn't load language '\" + languageTag + \"' JSON: \" + error_code);\n              });\n            };\n\n            directDependencyLanguageTag = indexOf.call(languageTag, \"-\") >= 0 ? languageTag.replace(/-.*/, \"\") : this._fallback_language; // load dependency language if it is part of the project and not the fallback language\n\n            if (languageTag !== this._fallback_language && indexOf.call(project_languages, directDependencyLanguageTag) >= 0) {\n              dependencyLoadDfd = this._loadLanguage(directDependencyLanguageTag);\n              dependencyLoadDfd.done(function () {\n                // All dependencies loaded successfully\n                return loadLanguageTag();\n              });\n              dependencyLoadDfd.fail(function (message) {\n                return dfd.reject(\"Loading process failed since dependency language '\" + directDependencyLanguageTag + \"' failed to load: \" + message);\n              });\n            } else {\n              loadLanguageTag();\n            }\n          } else {\n            // languageTag loaded already\n            dfd.resolve();\n          }\n        } else {\n          dfd.reject([\"Language \" + languageTag + \" is not supported\"]);\n        }\n\n        return dfd.promise();\n      }\n\n      return _loadLanguage;\n    }();\n\n    _proto._registerHelpers = function () {\n      function _registerHelpers(package_name, template) {\n        var _this2 = this;\n\n        var helpers, tapI18nextProxy, underscore_helper;\n\n        if (package_name !== globals.project_translations_domain) {\n          tapI18nextProxy = this._getPackageI18nextProxy(this.packages[package_name].namespace);\n        } else {\n          tapI18nextProxy = this._getPackageI18nextProxy(globals.project_translations_domain);\n        }\n\n        underscore_helper = function (key) {\n          var options;\n\n          for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = arguments[_key];\n          }\n\n          options = args.pop().hash;\n\n          if (!_.isEmpty(args)) {\n            options.sprintf = args;\n          }\n\n          return tapI18nextProxy(key, options);\n        }; // template specific helpers\n\n\n        if (package_name !== globals.project_translations_domain) {\n          // {{_ }}\n          if (Template[template] != null && Template[template].helpers != null) {\n            helpers = {};\n            helpers[this.packages[package_name].helper_name] = underscore_helper;\n            Template[template].helpers(helpers);\n          }\n        } else {\n          // {{_ }}\n          // global helpers\n          UI.registerHelper(this.conf.helper_name, underscore_helper); // {{languageTag}}\n\n          UI.registerHelper(\"languageTag\", function () {\n            return _this2.getLanguage();\n          });\n        }\n      }\n\n      return _registerHelpers;\n    }();\n\n    _proto._getRegisterHelpersProxy = function () {\n      function _getRegisterHelpersProxy(package_name) {\n        var _this3 = this;\n\n        // A proxy to _registerHelpers where the package_name is fixed to package_name\n        return function (template) {\n          return _this3._registerHelpers(package_name, template);\n        };\n      }\n\n      return _getRegisterHelpersProxy;\n    }();\n\n    _proto._prepareLanguageSpecificTranslator = function () {\n      function _prepareLanguageSpecificTranslator(lang_tag) {\n        var _this4 = this;\n\n        var dfd;\n        dfd = new $.Deferred().resolve().promise();\n\n        if (lang_tag in this._languageSpecificTranslatorsTrackers) {\n          return dfd;\n        }\n\n        this._languageSpecificTranslatorsTrackers[lang_tag] = new Tracker.Dependency();\n\n        if (!(lang_tag in this._languageSpecificTranslators)) {\n          dfd = this._loadLanguage(lang_tag).done(function () {\n            _this4._languageSpecificTranslators[lang_tag] = _this4._getSpecificLangTranslator(lang_tag);\n            return _this4._languageSpecificTranslatorsTrackers[lang_tag].changed();\n          });\n        }\n\n        return dfd;\n      }\n\n      return _prepareLanguageSpecificTranslator;\n    }();\n\n    _proto._getPackageI18nextProxy = function () {\n      function _getPackageI18nextProxy(package_name) {\n        var _this5 = this;\n\n        // A proxy to TAPi18next.t where the namespace is preset to the package's\n        return function (key, options) {\n          var lang_tag = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n          // Devs get confused and use lang option instead of lng option, make lang\n          // alias of lng\n          if ((options != null ? options.lang : void 0) != null && (options != null ? options.lng : void 0) == null) {\n            options.lng = options.lang;\n          }\n\n          if ((options != null ? options.lng : void 0) != null && lang_tag == null) {\n            lang_tag = options.lng; // Remove options.lng so we won't pass it to the regular TAPi18next\n            // before the language specific translator is ready to keep behavior\n            // consistent.\n            // If lang is actually ready before the language specifc translator is\n            // ready, TAPi18next will translate to lang_tag if we won't remove\n            // options.lng.\n\n            delete options.lng;\n          }\n\n          if (lang_tag != null) {\n            _this5._prepareLanguageSpecificTranslator(lang_tag);\n\n            _this5._languageSpecificTranslatorsTrackers[lang_tag].depend();\n\n            if (lang_tag in _this5._languageSpecificTranslators) {\n              return _this5._languageSpecificTranslators[lang_tag](_this5._getPackageDomain(package_name) + \":\" + key, options);\n            } else {\n              return TAPi18next.t(_this5._getPackageDomain(package_name) + \":\" + key, options);\n            }\n          } // If inside a reactive computation, we want to invalidate the computation if the client lang changes\n\n\n          _this5._language_changed_tracker.depend();\n\n          return TAPi18next.t(_this5._getPackageDomain(package_name) + \":\" + key, options);\n        };\n      }\n\n      return _getPackageI18nextProxy;\n    }();\n\n    _proto._onceEnabled = function () {\n      function _onceEnabled() {\n        return this._registerHelpers(globals.project_translations_domain);\n      }\n\n      return _onceEnabled;\n    }();\n\n    _proto.setLanguage = function () {\n      function setLanguage(lang_tag) {\n        var _this6 = this;\n\n        var isAborted, self;\n        self = this;\n\n        if (typeof this._abortPreviousSetLang === \"function\") {\n          this._abortPreviousSetLang();\n        }\n\n        isAborted = false;\n\n        this._abortPreviousSetLang = function () {\n          return isAborted = true;\n        };\n\n        return this._loadLanguage(lang_tag).then(function () {\n          if (!isAborted) {\n            TAPi18next.setLng(lang_tag);\n\n            _this6._language_changed_tracker.changed();\n\n            return Session.set(_this6._loaded_lang_session_key, lang_tag);\n          }\n        });\n      }\n\n      return setLanguage;\n    }();\n\n    _proto.getLanguage = function () {\n      function getLanguage() {\n        var session_lang;\n\n        if (!this._enabled()) {\n          return null;\n        }\n\n        session_lang = Session.get(this._loaded_lang_session_key);\n\n        if (session_lang != null) {\n          return session_lang;\n        } else {\n          return this._fallback_language;\n        }\n      }\n\n      return getLanguage;\n    }();\n\n    return TAPi18nClient;\n  }(TAPi18nBase);\n\n  ;\n  TAPi18nClient.prototype._languageSpecificTranslators = null;\n  TAPi18nClient.prototype._languageSpecificTranslatorsTrackers = null;\n  TAPi18nClient.prototype._abortPreviousSetLang = null;\n  return TAPi18nClient;\n}.call(this);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"tap_i18n-common.coffee\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/rocketchat_tap-i18n/lib/tap_i18n/tap_i18n-common.coffee                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nmodule.export({\n  TAPi18nBase: function () {\n    return TAPi18nBase;\n  }\n});\nvar TAPi18next;\nmodule.link(\"../tap_i18next/tap_i18next-1.7.3.js\", {\n  \"default\": function (v) {\n    TAPi18next = v;\n  }\n}, 0);\nvar globals;\nmodule.link(\"./globals\", {\n  globals: function (v) {\n    globals = v;\n  }\n}, 1);\nvar fallback_language;\nfallback_language = globals.fallback_language;\nTAPi18next.init({\n  resStore: {},\n  fallbackLng: globals.fallback_language,\n  useCookie: false\n});\n\nvar TAPi18nBase = function () {\n  var TAPi18nBase =\n  /*#__PURE__*/\n  function (_EventEmitter) {\n    _inheritsLoose(TAPi18nBase, _EventEmitter);\n\n    function TAPi18nBase() {\n      var _this;\n\n      _this = _EventEmitter.call(this) || this;\n      _this._fallback_language = fallback_language;\n      _this._language_changed_tracker = new Tracker.Dependency();\n      _this._loaded_languages = [fallback_language]; // stores the loaded languages, the fallback language is loaded automatically\n\n      _this.conf = null; // If conf isn't null we assume that tap:i18n is enabled for the project.\n      // We assume conf is valid, we sterilize and validate it during the build process.\n\n      _this.packages = {}; // Stores the packages' package-tap.i18n jsons\n\n      _this.languages_names = {}; // Stores languages that we've found languages files for in the project dir.\n      // format:\n      // {\n      //    lang_tag: [lang_name_in_english, lang_name_in_local_language]\n      // }\n\n      _this.translations = {}; // Stores the packages/project translations - Server side only\n      // fallback_language translations are not stored here\n\n      if (Meteor.isClient) {\n        Session.set(_this._loaded_lang_session_key, null);\n        _this._languageSpecificTranslators = {};\n        _this._languageSpecificTranslatorsTrackers = {};\n      }\n\n      if (Meteor.isServer) {\n        _this.server_translators = {};\n        Meteor.startup(function () {\n          // If tap-i18n is enabled for that project\n          if (_this._enabled()) {\n            return _this._registerHTTPMethod();\n          }\n        });\n      }\n\n      _this.__ = _this._getPackageI18nextProxy(globals.project_translations_domain);\n      TAPi18next.setLng(fallback_language);\n      return _this;\n    }\n\n    var _proto = TAPi18nBase.prototype;\n\n    _proto._enable = function () {\n      function _enable(conf) {\n        // tap:i18n gets enabled for a project once a conf file is set for it.\n        // It can be either a conf object that was set by project-tap.i18n file or\n        // a default conf, which is being added if the project has lang files\n        // (*.i18n.json) but not project-tap.i18n\n        this.conf = conf;\n        return this._onceEnabled();\n      }\n\n      return _enable;\n    }();\n\n    _proto._onceEnabled = function () {\n      function _onceEnabled() {}\n\n      return _onceEnabled;\n    }() // The arch specific code can use this for procedures that should be performed once\n    // tap:i18n gets enabled (project conf file is being set)\n    ;\n\n    _proto._enabled = function () {\n      function _enabled() {\n        // read the comment of @conf\n        return this.conf != null;\n      }\n\n      return _enabled;\n    }();\n\n    _proto._getPackageDomain = function () {\n      function _getPackageDomain(package_name) {\n        return package_name.replace(/:/g, \"-\");\n      }\n\n      return _getPackageDomain;\n    }();\n\n    _proto.addResourceBundle = function () {\n      function addResourceBundle(lang_tag, package_name, translations) {\n        return TAPi18next.addResourceBundle(lang_tag, this._getPackageDomain(package_name), translations);\n      }\n\n      return addResourceBundle;\n    }();\n\n    _proto._getSpecificLangTranslator = function () {\n      function _getSpecificLangTranslator(lang) {\n        var current_lang, translator;\n        current_lang = TAPi18next.lng();\n        translator = null;\n        TAPi18next.setLng(lang, {\n          fixLng: true\n        }, function (lang_translator) {\n          return translator = lang_translator;\n        }); // Restore i18next lang that had been changed in the process of generating\n        // lang specific translator\n\n        TAPi18next.setLng(current_lang);\n        return translator;\n      }\n\n      return _getSpecificLangTranslator;\n    }();\n\n    _proto._getProjectLanguages = function () {\n      function _getProjectLanguages() {\n        // Return an array of languages available for the current project\n        if (this._enabled()) {\n          if (_.isArray(this.conf.supported_languages)) {\n            return _.union([this._fallback_language], this.conf.supported_languages);\n          } else {\n            // If supported_languages is null, all the languages we found\n            // translations files to in the project level are considered supported.\n            // We use the @.languages_names array to tell which languages we found\n            // since for every i18n.json file we found in the project level we add\n            // an entry for its language to @.languages_names in the build process.\n            // We also know for certain that when tap-i18n is enabled the fallback\n            // lang is in @.languages_names\n            return _.keys(this.languages_names);\n          }\n        } else {\n          return [this._fallback_language];\n        }\n      }\n\n      return _getProjectLanguages;\n    }();\n\n    _proto.getLanguages = function () {\n      function getLanguages() {\n        var i, lang_tag, languages, len, ref;\n\n        if (!this._enabled()) {\n          return null;\n        }\n\n        languages = {};\n        ref = this._getProjectLanguages();\n\n        for (i = 0, len = ref.length; i < len; i++) {\n          lang_tag = ref[i];\n          languages[lang_tag] = {\n            name: this.languages_names[lang_tag][1],\n            en: this.languages_names[lang_tag][0]\n          };\n        }\n\n        return languages;\n      }\n\n      return getLanguages;\n    }();\n\n    _proto._loadLangFileObject = function () {\n      function _loadLangFileObject(language_tag, data) {\n        var package_keys, package_name, ref, results;\n        results = [];\n\n        for (package_name in meteorBabelHelpers.sanitizeForInObject(data)) {\n          package_keys = data[package_name]; // Translations that are added by loadTranslations() have higher priority\n\n          package_keys = _.extend({}, package_keys, ((ref = this._loadTranslations_cache[language_tag]) != null ? ref[package_name] : void 0) || {});\n          results.push(this.addResourceBundle(language_tag, package_name, package_keys));\n        }\n\n        return results;\n      }\n\n      return _loadLangFileObject;\n    }();\n\n    _proto.loadTranslations = function () {\n      function loadTranslations(translations, namespace) {\n        var language_tag, project_languages, results, translation_keys;\n        project_languages = this._getProjectLanguages();\n        results = [];\n\n        for (language_tag in meteorBabelHelpers.sanitizeForInObject(translations)) {\n          translation_keys = translations[language_tag];\n\n          if (this._loadTranslations_cache[language_tag] == null) {\n            this._loadTranslations_cache[language_tag] = {};\n          }\n\n          if (this._loadTranslations_cache[language_tag][namespace] == null) {\n            this._loadTranslations_cache[language_tag][namespace] = {};\n          }\n\n          _.extend(this._loadTranslations_cache[language_tag][namespace], translation_keys);\n\n          this.addResourceBundle(language_tag, namespace, translation_keys);\n\n          if (Meteor.isClient && this.getLanguage() === language_tag) {\n            // Retranslate if session language updated\n            results.push(this._language_changed_tracker.changed());\n          } else {\n            results.push(void 0);\n          }\n        }\n\n        return results;\n      }\n\n      return loadTranslations;\n    }();\n\n    return TAPi18nBase;\n  }(EventEmitter);\n\n  ;\n  TAPi18nBase.prototype._loaded_lang_session_key = \"TAPi18n::loaded_lang\";\n  TAPi18nBase.prototype._loadTranslations_cache = {};\n  return TAPi18nBase;\n}.call(this);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},\"client.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/rocketchat_tap-i18n/client.js                                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  TAPi18n: function () {\n    return TAPi18n;\n  }\n});\nvar TAPi18nClient;\nmodule.link(\"./lib/tap_i18n/tap_i18n-client\", {\n  TAPi18nClient: function (v) {\n    TAPi18nClient = v;\n  }\n}, 0);\nvar TAPi18n = new TAPi18nClient();\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}}}},{\n  \"extensions\": [\n    \".js\",\n    \".json\",\n    \".coffee\"\n  ]\n});\n\nrequire(\"/node_modules/meteor/rocketchat:tap-i18n/lib/tap_i18next/tap_i18next-1.7.3.js\");\nvar exports = require(\"/node_modules/meteor/rocketchat:tap-i18n/client.js\");\n\n/* Exports */\nPackage._define(\"rocketchat:tap-i18n\", exports, {\n  TAPi18next: TAPi18next,\n  TAPi18n: TAPi18n\n});\n\n})();\n","servePath":"/packages/rocketchat_tap-i18n.js","sourceMap":{"version":3,"sources":["packages/rocketchat:tap-i18n/lib/tap_i18next/tap_i18next-1.7.3.js","packages/rocketchat:tap-i18n/lib/tap_i18n/globals.js","/packages/rocketchat_tap-i18n/lib/tap_i18n/tap_i18n-client.coffee","/lib/tap_i18n/tap_i18n-client.coffee","/packages/rocketchat_tap-i18n/lib/tap_i18n/tap_i18n-common.coffee","/lib/tap_i18n/tap_i18n-common.coffee","packages/rocketchat:tap-i18n/client.js"],"names":["_typeof","module1","link","default","v","TAPi18next","Array","prototype","indexOf","searchElement","TypeError","t","Object","len","length","n","arguments","Number","Infinity","Math","floor","abs","k","max","lastIndexOf","min","String","trim","replace","root","$","jQuery","Zepto","resStore","currentLng","replacementCounter","languages","initialized","module","exports","o","lng","undefined","load","preload","lowerCaseLng","returnObjectTrees","fallbackLng","fallbackNS","detectLngQS","ns","fallbackOnNull","fallbackOnEmpty","fallbackToDefaultNS","nsseparator","keyseparator","selectorAttr","debug","resGetPath","resPostPath","getAsync","postAsync","useLocalStorage","localStorageExpirationTime","dynamicLoad","sendMissing","sendMissingTo","sendType","interpolationPrefix","interpolationSuffix","reusePrefix","reuseSuffix","pluralSuffix","pluralNotFound","random","join","contextNotFound","escapeInterpolation","setJqueryExt","defaultValueFromContent","useDataAttrOptions","cookieExpirationTime","useCookie","cookieName","cookieDomain","objectTreeKeyHandler","postProcess","parseMissingKey","shortcutFunction","_extend","target","source","attr","_each","object","callback","args","name","i","isObj","toString","apply","call","_entityMap","_escape","data","s","_ajax","options","getXhr","window","XMLHttpRequest","ActiveXObject","e","Error","encodeUsingUrlEncoding","result","dataItem","hasOwnProperty","push","encodeURIComponent","utf8","text","c","charCodeAt","fromCharCode","base64","keyStr","chr1","chr2","chr3","enc1","enc2","enc3","enc4","isNaN","charAt","mergeHeaders","currentHeaders","header","ajax","method","url","cache","headers","jsonp","async","payload","JSON","stringify","queryString","Date","getTime","head","document","getElementsByTagName","script","createElement","type","src","appendChild","err","xhr","open","setRequestHeader","onreadystatechange","readyState","responseText","status","json","parse","send","http","authBasic","username","password","connect","del","get","isAllowed","verb","patch","post","put","trace","methode","toLowerCase","success","error","_cookie","create","value","minutes","domain","expires","date","setTime","toGMTString","cookie","read","nameEQ","ca","split","substring","remove","cookie_noop","f","extend","each","detectLanguage","escape","log","str","console","toLanguages","parts","toUpperCase","regexEscape","init","cb","fixLng","namespaces","defaultNs","interpolationPrefixEscaped","interpolationSuffixEscaped","lngTranslate","translate","key","pluralExtensions","setCurrentLng","addJqueryFunct","deferred","Deferred","resolve","promise","lngsToLoad","l","pres","y","sync","store","lngs","addResourceBundle","resources","removeResourceBundle","setDefaultNamespace","loadNamespace","namespace","loadNamespaces","opts","customLoad","lngNeedLoad","a","lenA","needLoad","resSet","b","lenB","_fetch","todo","nsIndex","nsValue","lngIndex","lngValue","_storeLocal","setLng","ele","substr","optionsToUse","defaultValue","html","prepend","append","dataAttr","translated","localize","val","targetSelector","find","keys","m","fn","elements","applyReplacement","replacementHash","nestedKey","prefix","suffix","unEscapingSuffix","nextKey","RegExp","applyReuse","comma","options_open","options_close","maxRecursion","index_of_opening","index_of_end_of_closing","token","token_without_symbols","index_of_token_end_of_closing","index_of_opts_opening","index_of_opts_end_of_closing","translated_token","_translate","hasContext","context","needsPlural","count","exists","notFound","_getDefaultValue","found","_find","_injectSprintfProcessor","values","sprintf","potentialKeys","postMissing","postProcessor","postProcessors","splitNotFound","optionWithoutCount","oldAsync","contextKey","pluralKey","pluralExtension","x","valueType","copy","isFallbackLookup","lenY","foundValue","notFoundValue","detectedLng","qsParm","query","location","search","parms","pos","navigator","language","userLanguage","_loadLocal","missingLngs","fetched","nowMS","localStorage","local","getItem","i18nStamp","setItem","errors","loadComplete","_fetchOne","dataType","done","theStatus","urls","item","rules","addRule","obj","currentRule","rule","getResult","ext","plurals","number","numbers","addPostProcessor","fc","get_type","variable","slice","str_repeat","input","multiplier","output","str_format","format","parse_tree","argv","cursor","tree_length","node_type","arg","match","pad","pad_character","pad_length","test","parseInt","toExponential","parseFloat","toFixed","fmt","_fmt","arg_names","exec","field_list","replacement_field","field_match","vsprintf","unshift","functions","export","globals","fallback_language","langauges_tags_regex","project_translations_domain","browser_path","TAPi18nClient","TAPi18nBase","_getLanguageFilePath","lang_tag","path","_enabled","conf","cdn_path","i18n_files_route","Meteor","isCordova","absoluteUrl","_loadLanguage","languageTag","dependencyLoadDfd","dfd","directDependencyLanguageTag","loadLanguageTag","project_languages","reject","_getProjectLanguages","_loaded_languages","jqXHR","getJSON","_loadLangFileObject","fail","error_code","_fallback_language","message","_registerHelpers","package_name","template","helpers","tapI18nextProxy","underscore_helper","_getPackageI18nextProxy","packages","pop","hash","_","isEmpty","Template","helper_name","UI","registerHelper","getLanguage","_getRegisterHelpersProxy","_prepareLanguageSpecificTranslator","_languageSpecificTranslatorsTrackers","Tracker","Dependency","_languageSpecificTranslators","_getSpecificLangTranslator","changed","lang","depend","_getPackageDomain","_language_changed_tracker","_onceEnabled","setLanguage","isAborted","self","_abortPreviousSetLang","then","Session","set","_loaded_lang_session_key","session_lang","languages_names","translations","isClient","isServer","server_translators","startup","_registerHTTPMethod","__","_enable","current_lang","translator","lang_translator","isArray","supported_languages","union","getLanguages","ref","en","language_tag","package_keys","results","_loadTranslations_cache","loadTranslations","translation_keys","EventEmitter","TAPi18n"],"mappings":"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","file":"/packages/rocketchat_tap-i18n.js","sourcesContent":["// tap_i18next is a copy of i18next that expose i18next to the global namespace\n// under the name name TAPi18next instead of i18n to (1) avoid interfering with other\n// Meteor packages that might use i18n with different configurations than we do\n// or worse - (2) using a different version of i18next\n//\n// setJqueryExt is disabled by default in TAPi18next\n// sprintf is a default postProcess in TAPi18next\n//\n// TAPi18next is set outside of the singleton builder to make it available in the\n// package level\n\n// i18next, v1.7.3\n// Copyright (c)2014 Jan MÃ¼hlemann (jamuhl).\n// Distributed under MIT license\n// http://i18next.com\n\n// set TAPi18next outside of the singleton builder to make it available in the package level\nTAPi18next = {};\n(function() {\n\n    // add indexOf to non ECMA-262 standard compliant browsers\n    if (!Array.prototype.indexOf) {\n        Array.prototype.indexOf = function (searchElement /*, fromIndex */ ) {\n            \"use strict\";\n            if (this == null) {\n                throw new TypeError();\n            }\n            var t = Object(this);\n            var len = t.length >>> 0;\n            if (len === 0) {\n                return -1;\n            }\n            var n = 0;\n            if (arguments.length > 0) {\n                n = Number(arguments[1]);\n                if (n != n) { // shortcut for verifying if it's NaN\n                    n = 0;\n                } else if (n != 0 && n != Infinity && n != -Infinity) {\n                    n = (n > 0 || -1) * Math.floor(Math.abs(n));\n                }\n            }\n            if (n >= len) {\n                return -1;\n            }\n            var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);\n            for (; k < len; k++) {\n                if (k in t && t[k] === searchElement) {\n                    return k;\n                }\n            }\n            return -1;\n        }\n    }\n    \n    // add lastIndexOf to non ECMA-262 standard compliant browsers\n    if (!Array.prototype.lastIndexOf) {\n        Array.prototype.lastIndexOf = function(searchElement /*, fromIndex*/) {\n            \"use strict\";\n            if (this == null) {\n                throw new TypeError();\n            }\n            var t = Object(this);\n            var len = t.length >>> 0;\n            if (len === 0) {\n                return -1;\n            }\n            var n = len;\n            if (arguments.length > 1) {\n                n = Number(arguments[1]);\n                if (n != n) {\n                    n = 0;\n                } else if (n != 0 && n != (1 / 0) && n != -(1 / 0)) {\n                    n = (n > 0 || -1) * Math.floor(Math.abs(n));\n                }\n            }\n            var k = n >= 0 ? Math.min(n, len - 1) : len - Math.abs(n);\n            for (; k >= 0; k--) {\n                if (k in t && t[k] === searchElement) {\n                    return k;\n                }\n            }\n            return -1;\n        };\n    }\n    \n    // Add string trim for IE8.\n    if (typeof String.prototype.trim !== 'function') {\n        String.prototype.trim = function() {\n            return this.replace(/^\\s+|\\s+$/g, ''); \n        }\n    }\n\n    var root = this\n      , $ = root.jQuery || root.Zepto\n      , resStore = {}\n      , currentLng\n      , replacementCounter = 0\n      , languages = []\n      , initialized = false;\n\n\n    // Export the i18next object for **CommonJS**. \n    // If we're not in CommonJS, add `i18n` to the\n    // global object or to jquery.\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = TAPi18next;\n    } else {\n        if ($) {\n            $.TAPi18next = $.TAPi18next || TAPi18next;\n        }\n        \n        root.TAPi18next = root.TAPi18next || TAPi18next;\n    }\n    // defaults\n    var o = {\n        lng: undefined,\n        load: 'all',\n        preload: [],\n        lowerCaseLng: false,\n        returnObjectTrees: false,\n        fallbackLng: ['dev'],\n        fallbackNS: [],\n        detectLngQS: 'setLng',\n        ns: 'translation',\n        fallbackOnNull: true,\n        fallbackOnEmpty: false,\n        fallbackToDefaultNS: false,\n        nsseparator: ':',\n        keyseparator: '.',\n        selectorAttr: 'data-i18n',\n        debug: false,\n        \n        resGetPath: 'locales/__lng__/__ns__.json',\n        resPostPath: 'locales/add/__lng__/__ns__',\n    \n        getAsync: true,\n        postAsync: true,\n    \n        resStore: undefined,\n        useLocalStorage: false,\n        localStorageExpirationTime: 7*24*60*60*1000,\n    \n        dynamicLoad: false,\n        sendMissing: false,\n        sendMissingTo: 'fallback', // current | all\n        sendType: 'POST',\n    \n        interpolationPrefix: '__',\n        interpolationSuffix: '__',\n        reusePrefix: '$t(',\n        reuseSuffix: ')',\n        pluralSuffix: '_plural',\n        pluralNotFound: ['plural_not_found', Math.random()].join(''),\n        contextNotFound: ['context_not_found', Math.random()].join(''),\n        escapeInterpolation: false,\n    \n        setJqueryExt: false,\n        defaultValueFromContent: true,\n        useDataAttrOptions: false,\n        cookieExpirationTime: undefined,\n        useCookie: true,\n        cookieName: 'TAPi18next',\n        cookieDomain: undefined,\n    \n        objectTreeKeyHandler: undefined,\n        postProcess: [\"sprintf\"],\n        parseMissingKey: undefined,\n    \n        shortcutFunction: 'sprintf' // or: defaultValue\n    };\n    function _extend(target, source) {\n        if (!source || typeof source === 'function') {\n            return target;\n        }\n    \n        for (var attr in source) { target[attr] = source[attr]; }\n        return target;\n    }\n    \n    function _each(object, callback, args) {\n        var name, i = 0,\n            length = object.length,\n            isObj = length === undefined || Object.prototype.toString.apply(object) !== '[object Array]' || typeof object === \"function\";\n    \n        if (args) {\n            if (isObj) {\n                for (name in object) {\n                    if (callback.apply(object[name], args) === false) {\n                        break;\n                    }\n                }\n            } else {\n                for ( ; i < length; ) {\n                    if (callback.apply(object[i++], args) === false) {\n                        break;\n                    }\n                }\n            }\n    \n        // A special, fast, case for the most common use of each\n        } else {\n            if (isObj) {\n                for (name in object) {\n                    if (callback.call(object[name], name, object[name]) === false) {\n                        break;\n                    }\n                }\n            } else {\n                for ( ; i < length; ) {\n                    if (callback.call(object[i], i, object[i++]) === false) {\n                        break;\n                    }\n                }\n            }\n        }\n    \n        return object;\n    }\n    \n    var _entityMap = {\n        \"&\": \"&amp;\",\n        \"<\": \"&lt;\",\n        \">\": \"&gt;\",\n        '\"': '&quot;',\n        \"'\": '&#39;',\n        \"/\": '&#x2F;'\n    };\n    \n    function _escape(data) {\n        if (typeof data === 'string') {\n            return data.replace(/[&<>\"'\\/]/g, function (s) {\n                return _entityMap[s];\n            });\n        }else{\n            return data;\n        }\n    }\n    \n    function _ajax(options) {\n    \n        // v0.5.0 of https://github.com/goloroden/http.js\n        var getXhr = function (callback) {\n            // Use the native XHR object if the browser supports it.\n            if (window.XMLHttpRequest) {\n                return callback(null, new XMLHttpRequest());\n            } else if (window.ActiveXObject) {\n                // In Internet Explorer check for ActiveX versions of the XHR object.\n                try {\n                    return callback(null, new ActiveXObject(\"Msxml2.XMLHTTP\"));\n                } catch (e) {\n                    return callback(null, new ActiveXObject(\"Microsoft.XMLHTTP\"));\n                }\n            }\n    \n            // If no XHR support was found, throw an error.\n            return callback(new Error());\n        };\n    \n        var encodeUsingUrlEncoding = function (data) {\n            if(typeof data === 'string') {\n                return data;\n            }\n    \n            var result = [];\n            for(var dataItem in data) {\n                if(data.hasOwnProperty(dataItem)) {\n                    result.push(encodeURIComponent(dataItem) + '=' + encodeURIComponent(data[dataItem]));\n                }\n            }\n    \n            return result.join('&');\n        };\n    \n        var utf8 = function (text) {\n            text = text.replace(/\\r\\n/g, '\\n');\n            var result = '';\n    \n            for(var i = 0; i < text.length; i++) {\n                var c = text.charCodeAt(i);\n    \n                if(c < 128) {\n                        result += String.fromCharCode(c);\n                } else if((c > 127) && (c < 2048)) {\n                        result += String.fromCharCode((c >> 6) | 192);\n                        result += String.fromCharCode((c & 63) | 128);\n                } else {\n                        result += String.fromCharCode((c >> 12) | 224);\n                        result += String.fromCharCode(((c >> 6) & 63) | 128);\n                        result += String.fromCharCode((c & 63) | 128);\n                }\n            }\n    \n            return result;\n        };\n    \n        var base64 = function (text) {\n            var keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    \n            text = utf8(text);\n            var result = '',\n                    chr1, chr2, chr3,\n                    enc1, enc2, enc3, enc4,\n                    i = 0;\n    \n            do {\n                chr1 = text.charCodeAt(i++);\n                chr2 = text.charCodeAt(i++);\n                chr3 = text.charCodeAt(i++);\n    \n                enc1 = chr1 >> 2;\n                enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n                enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n                enc4 = chr3 & 63;\n    \n                if(isNaN(chr2)) {\n                    enc3 = enc4 = 64;\n                } else if(isNaN(chr3)) {\n                    enc4 = 64;\n                }\n    \n                result +=\n                    keyStr.charAt(enc1) +\n                    keyStr.charAt(enc2) +\n                    keyStr.charAt(enc3) +\n                    keyStr.charAt(enc4);\n                chr1 = chr2 = chr3 = '';\n                enc1 = enc2 = enc3 = enc4 = '';\n            } while(i < text.length);\n    \n            return result;\n        };\n    \n        var mergeHeaders = function () {\n            // Use the first header object as base.\n            var result = arguments[0];\n    \n            // Iterate through the remaining header objects and add them.\n            for(var i = 1; i < arguments.length; i++) {\n                var currentHeaders = arguments[i];\n                for(var header in currentHeaders) {\n                    if(currentHeaders.hasOwnProperty(header)) {\n                        result[header] = currentHeaders[header];\n                    }\n                }\n            }\n    \n            // Return the merged headers.\n            return result;\n        };\n    \n        var ajax = function (method, url, options, callback) {\n            // Adjust parameters.\n            if(typeof options === 'function') {\n                callback = options;\n                options = {};\n            }\n    \n            // Set default parameter values.\n            options.cache = options.cache || false;\n            options.data = options.data || {};\n            options.headers = options.headers || {};\n            options.jsonp = options.jsonp || false;\n            options.async = options.async === undefined ? true : options.async;\n    \n            // Merge the various header objects.\n            var headers = mergeHeaders({\n                'accept': '*/*',\n                'content-type': 'application/x-www-form-urlencoded;charset=UTF-8'\n            }, ajax.headers, options.headers);\n    \n            // Encode the data according to the content-type.\n            var payload;\n            if (headers['content-type'] === 'application/json') {\n                payload = JSON.stringify(options.data);\n            } else {\n                payload = encodeUsingUrlEncoding(options.data);\n            }\n    \n            // Specially prepare GET requests: Setup the query string, handle caching and make a JSONP call\n            // if neccessary.\n            if(method === 'GET') {\n                // Setup the query string.\n                var queryString = [];\n                if(payload) {\n                    queryString.push(payload);\n                    payload = null;\n                }\n    \n                // Handle caching.\n                if(!options.cache) {\n                    queryString.push('_=' + (new Date()).getTime());\n                }\n    \n                // If neccessary prepare the query string for a JSONP call.\n                if(options.jsonp) {\n                    queryString.push('callback=' + options.jsonp);\n                    queryString.push('jsonp=' + options.jsonp);\n                }\n    \n                // Merge the query string and attach it to the url.\n                queryString = queryString.join('&');\n                if (queryString.length > 1) {\n                    if (url.indexOf('?') > -1) {\n                        url += '&' + queryString;\n                    } else {\n                        url += '?' + queryString;\n                    }\n                }\n    \n                // Make a JSONP call if neccessary.\n                if(options.jsonp) {\n                    var head = document.getElementsByTagName('head')[0];\n                    var script = document.createElement('script');\n                    script.type = 'text/javascript';\n                    script.src = url;\n                    head.appendChild(script);\n                    return;\n                }\n            }\n    \n            // Since we got here, it is no JSONP request, so make a normal XHR request.\n            getXhr(function (err, xhr) {\n                if(err) return callback(err);\n    \n                // Open the request.\n                xhr.open(method, url, options.async);\n    \n                // Set the request headers.\n                for(var header in headers) {\n                    if(headers.hasOwnProperty(header)) {\n                        xhr.setRequestHeader(header, headers[header]);\n                    }\n                }\n    \n                // Handle the request events.\n                xhr.onreadystatechange = function () {\n                    if(xhr.readyState === 4) {\n                        var data = xhr.responseText || '';\n    \n                        // If no callback is given, return.\n                        if(!callback) {\n                            return;\n                        }\n    \n                        // Return an object that provides access to the data as text and JSON.\n                        callback(xhr.status, {\n                            text: function () {\n                                return data;\n                            },\n    \n                            json: function () {\n                                return JSON.parse(data);\n                            }\n                        });\n                    }\n                };\n    \n                // Actually send the XHR request.\n                xhr.send(payload);\n            });\n        };\n    \n        // Define the external interface.\n        var http = {\n            authBasic: function (username, password) {\n                ajax.headers['Authorization'] = 'Basic ' + base64(username + ':' + password);\n            },\n    \n            connect: function (url, options, callback) {\n                return ajax('CONNECT', url, options, callback);\n            },\n    \n            del: function (url, options, callback) {\n                return ajax('DELETE', url, options, callback);\n            },\n    \n            get: function (url, options, callback) {\n                return ajax('GET', url, options, callback);\n            },\n    \n            head: function (url, options, callback) {\n                return ajax('HEAD', url, options, callback);\n            },\n    \n            headers: function (headers) {\n                ajax.headers = headers || {};\n            },\n    \n            isAllowed: function (url, verb, callback) {\n                this.options(url, function (status, data) {\n                    callback(data.text().indexOf(verb) !== -1);\n                });\n            },\n    \n            options: function (url, options, callback) {\n                return ajax('OPTIONS', url, options, callback);\n            },\n    \n            patch: function (url, options, callback) {\n                return ajax('PATCH', url, options, callback);\n            },\n    \n            post: function (url, options, callback) {\n                return ajax('POST', url, options, callback);\n            },\n    \n            put: function (url, options, callback) {\n                return ajax('PUT', url, options, callback);\n            },\n    \n            trace: function (url, options, callback) {\n                return ajax('TRACE', url, options, callback);\n            }\n        };\n    \n    \n        var methode = options.type ? options.type.toLowerCase() : 'get';\n    \n        http[methode](options.url, options, function (status, data) {\n            if (status === 200) {\n                options.success(data.json(), status, null);\n            } else {\n                options.error(data.text(), status, null);\n            }\n        });\n    }\n    \n    var _cookie = {\n        create: function(name,value,minutes,domain) {\n            var expires;\n            if (minutes) {\n                var date = new Date();\n                date.setTime(date.getTime()+(minutes*60*1000));\n                expires = \"; expires=\"+date.toGMTString();\n            }\n            else expires = \"\";\n            domain = (domain)? \"domain=\"+domain+\";\" : \"\";\n            document.cookie = name+\"=\"+value+expires+\";\"+domain+\"path=/\";\n        },\n    \n        read: function(name) {\n            var nameEQ = name + \"=\";\n            var ca = document.cookie.split(';');\n            for(var i=0;i < ca.length;i++) {\n                var c = ca[i];\n                while (c.charAt(0)==' ') c = c.substring(1,c.length);\n                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length,c.length);\n            }\n            return null;\n        },\n    \n        remove: function(name) {\n            this.create(name,\"\",-1);\n        }\n    };\n    \n    var cookie_noop = {\n        create: function(name,value,minutes,domain) {},\n        read: function(name) { return null; },\n        remove: function(name) {}\n    };\n    \n    \n    \n    // move dependent functions to a container so that\n    // they can be overriden easier in no jquery environment (node.js)\n    var f = {\n        extend: $ ? $.extend : _extend,\n        each: $ ? $.each : _each,\n        ajax: $ ? $.ajax : (typeof document !== 'undefined' ? _ajax : function() {}),\n        cookie: typeof document !== 'undefined' ? _cookie : cookie_noop,\n        detectLanguage: detectLanguage,\n        escape: _escape,\n        log: function(str) {\n            if (o.debug && typeof console !== \"undefined\") console.log(str);\n        },\n        toLanguages: function(lng) {\n            var languages = [];\n            if (typeof lng === 'string' && lng.indexOf('-') > -1) {\n                var parts = lng.split('-');\n    \n                lng = o.lowerCaseLng ?\n                    parts[0].toLowerCase() +  '-' + parts[1].toLowerCase() :\n                    parts[0].toLowerCase() +  '-' + parts[1].toUpperCase();\n    \n                if (o.load !== 'unspecific') languages.push(lng);\n                if (o.load !== 'current') languages.push(parts[0]);\n            } else {\n                languages.push(lng);\n            }\n    \n            for (var i = 0; i < o.fallbackLng.length; i++) {\n                if (languages.indexOf(o.fallbackLng[i]) === -1 && o.fallbackLng[i]) languages.push(o.fallbackLng[i]);\n            }\n    \n            return languages;\n        },\n        regexEscape: function(str) {\n            return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n        }\n    };\n    function init(options, cb) {\n        \n        if (typeof options === 'function') {\n            cb = options;\n            options = {};\n        }\n        options = options || {};\n        \n        // override defaults with passed in options\n        f.extend(o, options);\n        delete o.fixLng; /* passed in each time */\n    \n        // create namespace object if namespace is passed in as string\n        if (typeof o.ns == 'string') {\n            o.ns = { namespaces: [o.ns], defaultNs: o.ns};\n        }\n    \n        // fallback namespaces\n        if (typeof o.fallbackNS == 'string') {\n            o.fallbackNS = [o.fallbackNS];\n        }\n    \n        // fallback languages\n        if (typeof o.fallbackLng == 'string' || typeof o.fallbackLng == 'boolean') {\n            o.fallbackLng = [o.fallbackLng];\n        }\n    \n        // escape prefix/suffix\n        o.interpolationPrefixEscaped = f.regexEscape(o.interpolationPrefix);\n        o.interpolationSuffixEscaped = f.regexEscape(o.interpolationSuffix);\n    \n        if (!o.lng) o.lng = f.detectLanguage(); \n        if (o.lng) {\n            // set cookie with lng set (as detectLanguage will set cookie on need)\n            if (o.useCookie) f.cookie.create(o.cookieName, o.lng, o.cookieExpirationTime, o.cookieDomain);\n        } else {\n            o.lng =  o.fallbackLng[0];\n            if (o.useCookie) f.cookie.remove(o.cookieName);\n        }\n    \n        languages = f.toLanguages(o.lng);\n        currentLng = languages[0];\n        f.log('currentLng set to: ' + currentLng);\n    \n        var lngTranslate = translate;\n        if (options.fixLng) {\n            lngTranslate = function(key, options) {\n                options = options || {};\n                options.lng = options.lng || lngTranslate.lng;\n                return translate(key, options);\n            };\n            lngTranslate.lng = currentLng;\n        }\n    \n        pluralExtensions.setCurrentLng(currentLng);\n    \n        // add JQuery extensions\n        if ($ && o.setJqueryExt) addJqueryFunct();\n    \n        // jQuery deferred\n        var deferred;\n        if ($ && $.Deferred) {\n            deferred = $.Deferred();\n        }\n    \n        // return immidiatly if res are passed in\n        if (o.resStore) {\n            resStore = o.resStore;\n            initialized = true;\n            if (cb) cb(lngTranslate);\n            if (deferred) deferred.resolve(lngTranslate);\n            if (deferred) return deferred.promise();\n            return;\n        }\n    \n        // languages to load\n        var lngsToLoad = f.toLanguages(o.lng);\n        if (typeof o.preload === 'string') o.preload = [o.preload];\n        for (var i = 0, l = o.preload.length; i < l; i++) {\n            var pres = f.toLanguages(o.preload[i]);\n            for (var y = 0, len = pres.length; y < len; y++) {\n                if (lngsToLoad.indexOf(pres[y]) < 0) {\n                    lngsToLoad.push(pres[y]);\n                }\n            }\n        }\n    \n        // else load them\n        TAPi18next.sync.load(lngsToLoad, o, function(err, store) {\n            resStore = store;\n            initialized = true;\n    \n            if (cb) cb(lngTranslate);\n            if (deferred) deferred.resolve(lngTranslate);\n        });\n    \n        if (deferred) return deferred.promise();\n    }\n    function preload(lngs, cb) {\n        if (typeof lngs === 'string') lngs = [lngs];\n        for (var i = 0, l = lngs.length; i < l; i++) {\n            if (o.preload.indexOf(lngs[i]) < 0) {\n                o.preload.push(lngs[i]);\n            }\n        }\n        return init(cb);\n    }\n    \n    function addResourceBundle(lng, ns, resources) {\n        if (typeof ns !== 'string') {\n            resources = ns;\n            ns = o.ns.defaultNs;\n        } else if (o.ns.namespaces.indexOf(ns) < 0) {\n            o.ns.namespaces.push(ns);\n        }\n    \n        resStore[lng] = resStore[lng] || {};\n        resStore[lng][ns] = resStore[lng][ns] || {};\n    \n        f.extend(resStore[lng][ns], resources);\n    }\n    \n    function removeResourceBundle(lng, ns) {\n        if (typeof ns !== 'string') {\n            ns = o.ns.defaultNs;\n        }\n    \n        resStore[lng] = resStore[lng] || {};\n        resStore[lng][ns] = {};\n    }\n    \n    function setDefaultNamespace(ns) {\n        o.ns.defaultNs = ns;\n    }\n    \n    function loadNamespace(namespace, cb) {\n        loadNamespaces([namespace], cb);\n    }\n    \n    function loadNamespaces(namespaces, cb) {\n        var opts = {\n            dynamicLoad: o.dynamicLoad,\n            resGetPath: o.resGetPath,\n            getAsync: o.getAsync,\n            customLoad: o.customLoad,\n            ns: { namespaces: namespaces, defaultNs: ''} /* new namespaces to load */\n        };\n    \n        // languages to load\n        var lngsToLoad = f.toLanguages(o.lng);\n        if (typeof o.preload === 'string') o.preload = [o.preload];\n        for (var i = 0, l = o.preload.length; i < l; i++) {\n            var pres = f.toLanguages(o.preload[i]);\n            for (var y = 0, len = pres.length; y < len; y++) {\n                if (lngsToLoad.indexOf(pres[y]) < 0) {\n                    lngsToLoad.push(pres[y]);\n                }\n            }\n        }\n    \n        // check if we have to load\n        var lngNeedLoad = [];\n        for (var a = 0, lenA = lngsToLoad.length; a < lenA; a++) {\n            var needLoad = false;\n            var resSet = resStore[lngsToLoad[a]];\n            if (resSet) {\n                for (var b = 0, lenB = namespaces.length; b < lenB; b++) {\n                    if (!resSet[namespaces[b]]) needLoad = true;\n                }\n            } else {\n                needLoad = true;\n            }\n    \n            if (needLoad) lngNeedLoad.push(lngsToLoad[a]);\n        }\n    \n        if (lngNeedLoad.length) {\n            TAPi18next.sync._fetch(lngNeedLoad, opts, function(err, store) {\n                var todo = namespaces.length * lngNeedLoad.length;\n    \n                // load each file individual\n                f.each(namespaces, function(nsIndex, nsValue) {\n    \n                    // append namespace to namespace array\n                    if (o.ns.namespaces.indexOf(nsValue) < 0) {\n                        o.ns.namespaces.push(nsValue);\n                    }\n    \n                    f.each(lngNeedLoad, function(lngIndex, lngValue) {\n                        resStore[lngValue] = resStore[lngValue] || {};\n                        resStore[lngValue][nsValue] = store[lngValue][nsValue];\n    \n                        todo--; // wait for all done befor callback\n                        if (todo === 0 && cb) {\n                            if (o.useLocalStorage) TAPi18next.sync._storeLocal(resStore);\n                            cb();\n                        }\n                    });\n                });\n            });\n        } else {\n            if (cb) cb();\n        }\n    }\n    \n    function setLng(lng, options, cb) {\n        if (typeof options === 'function') {\n            cb = options;\n            options = {};\n        } else if (!options) {\n            options = {};\n        }\n    \n        options.lng = lng;\n        return init(options, cb);\n    }\n    \n    function lng() {\n        return currentLng;\n    }\n    function addJqueryFunct() {\n        // $.t shortcut\n        $.t = $.t || translate;\n    \n        function parse(ele, key, options) {\n            if (key.length === 0) return;\n    \n            var attr = 'text';\n    \n            if (key.indexOf('[') === 0) {\n                var parts = key.split(']');\n                key = parts[1];\n                attr = parts[0].substr(1, parts[0].length-1);\n            }\n    \n            if (key.indexOf(';') === key.length-1) {\n                key = key.substr(0, key.length-2);\n            }\n    \n            var optionsToUse;\n            if (attr === 'html') {\n                optionsToUse = o.defaultValueFromContent ? $.extend({ defaultValue: ele.html() }, options) : options;\n                ele.html($.t(key, optionsToUse));\n            } else if (attr === 'text') {\n                optionsToUse = o.defaultValueFromContent ? $.extend({ defaultValue: ele.text() }, options) : options;\n                ele.text($.t(key, optionsToUse));\n            } else if (attr === 'prepend') {\n                optionsToUse = o.defaultValueFromContent ? $.extend({ defaultValue: ele.html() }, options) : options;\n                ele.prepend($.t(key, optionsToUse));\n            } else if (attr === 'append') {\n                optionsToUse = o.defaultValueFromContent ? $.extend({ defaultValue: ele.html() }, options) : options;\n                ele.append($.t(key, optionsToUse));\n            } else if (attr.indexOf(\"data-\") === 0) {\n                var dataAttr = attr.substr((\"data-\").length);\n                optionsToUse = o.defaultValueFromContent ? $.extend({ defaultValue: ele.data(dataAttr) }, options) : options;\n                var translated = $.t(key, optionsToUse);\n                //we change into the data cache\n                ele.data(dataAttr, translated);\n                //we change into the dom\n                ele.attr(attr, translated);\n            } else {\n                optionsToUse = o.defaultValueFromContent ? $.extend({ defaultValue: ele.attr(attr) }, options) : options;\n                ele.attr(attr, $.t(key, optionsToUse));\n            }\n        }\n    \n        function localize(ele, options) {\n            var key = ele.attr(o.selectorAttr);\n            if (!key && typeof key !== 'undefined' && key !== false) key = ele.text() || ele.val();\n            if (!key) return;\n    \n            var target = ele\n              , targetSelector = ele.data(\"i18n-target\");\n            if (targetSelector) {\n                target = ele.find(targetSelector) || ele;\n            }\n    \n            if (!options && o.useDataAttrOptions === true) {\n                options = ele.data(\"i18n-options\");\n            }\n            options = options || {};\n    \n            if (key.indexOf(';') >= 0) {\n                var keys = key.split(';');\n    \n                $.each(keys, function(m, k) {\n                    if (k !== '') parse(target, k, options);\n                });\n    \n            } else {\n                parse(target, key, options);\n            }\n    \n            if (o.useDataAttrOptions === true) ele.data(\"i18n-options\", options);\n        }\n    \n        // fn\n        $.fn.TAPi18next = function (options) {\n            return this.each(function() {\n                // localize element itself\n                localize($(this), options);\n    \n                // localize childs\n                var elements =  $(this).find('[' + o.selectorAttr + ']');\n                elements.each(function() { \n                    localize($(this), options);\n                });\n            });\n        };\n    }\n    function applyReplacement(str, replacementHash, nestedKey, options) {\n        if (!str) return str;\n    \n        options = options || replacementHash; // first call uses replacement hash combined with options\n        if (str.indexOf(options.interpolationPrefix || o.interpolationPrefix) < 0) return str;\n    \n        var prefix = options.interpolationPrefix ? f.regexEscape(options.interpolationPrefix) : o.interpolationPrefixEscaped\n          , suffix = options.interpolationSuffix ? f.regexEscape(options.interpolationSuffix) : o.interpolationSuffixEscaped\n          , unEscapingSuffix = 'HTML'+suffix;\n    \n        f.each(replacementHash, function(key, value) {\n            var nextKey = nestedKey ? nestedKey + o.keyseparator + key : key;\n            if (typeof value === 'object' && value !== null) {\n                str = applyReplacement(str, value, nextKey, options);\n            } else {\n                if (options.escapeInterpolation || o.escapeInterpolation) {\n                    str = str.replace(new RegExp([prefix, nextKey, unEscapingSuffix].join(''), 'g'), value);\n                    str = str.replace(new RegExp([prefix, nextKey, suffix].join(''), 'g'), f.escape(value));\n                } else {\n                    str = str.replace(new RegExp([prefix, nextKey, suffix].join(''), 'g'), value);\n                }\n                // str = options.escapeInterpolation;\n            }\n        });\n        return str;\n    }\n    \n    // append it to functions\n    f.applyReplacement = applyReplacement;\n    \n    function applyReuse(translated, options) {\n        var comma = ',';\n        var options_open = '{';\n        var options_close = '}';\n    \n        var opts = f.extend({}, options);\n        delete opts.postProcess;\n    \n        while (translated.indexOf(o.reusePrefix) != -1) {\n            replacementCounter++;\n            if (replacementCounter > o.maxRecursion) { break; } // safety net for too much recursion\n            var index_of_opening = translated.lastIndexOf(o.reusePrefix);\n            var index_of_end_of_closing = translated.indexOf(o.reuseSuffix, index_of_opening) + o.reuseSuffix.length;\n            var token = translated.substring(index_of_opening, index_of_end_of_closing);\n            var token_without_symbols = token.replace(o.reusePrefix, '').replace(o.reuseSuffix, '');\n    \n    \n            if (token_without_symbols.indexOf(comma) != -1) {\n                var index_of_token_end_of_closing = token_without_symbols.indexOf(comma);\n                if (token_without_symbols.indexOf(options_open, index_of_token_end_of_closing) != -1 && token_without_symbols.indexOf(options_close, index_of_token_end_of_closing) != -1) {\n                    var index_of_opts_opening = token_without_symbols.indexOf(options_open, index_of_token_end_of_closing);\n                    var index_of_opts_end_of_closing = token_without_symbols.indexOf(options_close, index_of_opts_opening) + options_close.length;\n                    try {\n                        opts = f.extend(opts, JSON.parse(token_without_symbols.substring(index_of_opts_opening, index_of_opts_end_of_closing)));\n                        token_without_symbols = token_without_symbols.substring(0, index_of_token_end_of_closing);\n                    } catch (e) {\n                    }\n                }\n            }\n    \n            var translated_token = _translate(token_without_symbols, opts);\n            translated = translated.replace(token, translated_token);\n        }\n        return translated;\n    }\n    \n    function hasContext(options) {\n        return (options.context && (typeof options.context == 'string' || typeof options.context == 'number'));\n    }\n    \n    function needsPlural(options) {\n        return (options.count !== undefined && typeof options.count != 'string' && options.count !== 1);\n    }\n    \n    function exists(key, options) {\n        options = options || {};\n    \n        var notFound = _getDefaultValue(key, options)\n            , found = _find(key, options);\n    \n        return found !== undefined || found === notFound;\n    }\n    \n    function translate(key, options) {\n        if (typeof options === 'undefined') {\n          options = {};\n        }\n    \n        if (!initialized) {\n            f.log('i18next not finished initialization. you might have called t function before loading resources finished.')\n            return options.defaultValue || '';\n        };\n        replacementCounter = 0;\n        return _translate.apply(null, arguments);\n    }\n    \n    function _getDefaultValue(key, options) {\n        return (options.defaultValue !== undefined) ? options.defaultValue : key;\n    }\n    \n    function _injectSprintfProcessor() {\n    \n        var values = [];\n    \n        // mh: build array from second argument onwards\n        for (var i = 1; i < arguments.length; i++) {\n            values.push(arguments[i]);\n        }\n    \n        return {\n            postProcess: 'sprintf',\n            sprintf:     values\n        };\n    }\n    \n    function _translate(potentialKeys, options) {\n        if (typeof options !== \"undefined\" && options !== null && typeof options !== 'object') {\n            if (o.shortcutFunction === 'sprintf') {\n                // mh: gettext like sprintf syntax found, automatically create sprintf processor\n                options = _injectSprintfProcessor.apply(null, arguments);\n            } else if (o.shortcutFunction === 'defaultValue') {\n                options = {\n                    defaultValue: options\n                }\n            }\n        } else {\n            options = options || {};\n        }\n    \n        if (potentialKeys === undefined || potentialKeys === null) return '';\n    \n        if (typeof potentialKeys == 'string') {\n            potentialKeys = [potentialKeys];\n        }\n    \n        var key = potentialKeys[0];\n    \n        if (potentialKeys.length > 1) {\n            for (var i = 0; i < potentialKeys.length; i++) {\n                key = potentialKeys[i];\n                if (exists(key, options)) {\n                    break;\n                }\n            }\n        }\n    \n        var notFound = _getDefaultValue(key, options)\n            , found = _find(key, options)\n            , lngs = options.lng ? f.toLanguages(options.lng) : languages\n            , ns = options.ns || o.ns.defaultNs\n            , parts;\n    \n        // split ns and key\n        if (key.indexOf(o.nsseparator) > -1) {\n            parts = key.split(o.nsseparator);\n            ns = parts[0];\n            key = parts[1];\n        }\n    \n        if (found === undefined && o.sendMissing) {\n            if (options.lng) {\n                sync.postMissing(lngs[0], ns, key, notFound, lngs);\n            } else {\n                sync.postMissing(o.lng, ns, key, notFound, lngs);\n            }\n        }\n    \n        var postProcessor = options.postProcess || o.postProcess;\n        if (found !== undefined && postProcessor) {\n            if (postProcessors[postProcessor]) {\n                found = postProcessors[postProcessor](found, key, options);\n            }\n        }\n    \n        // process notFound if function exists\n        var splitNotFound = notFound;\n        if (notFound.indexOf(o.nsseparator) > -1) {\n            parts = notFound.split(o.nsseparator);\n            splitNotFound = parts[1];\n        }\n        if (splitNotFound === key && o.parseMissingKey) {\n            notFound = o.parseMissingKey(notFound);\n        }\n    \n        if (found === undefined) {\n            notFound = applyReplacement(notFound, options);\n            notFound = applyReuse(notFound, options);\n    \n            if (postProcessor && postProcessors[postProcessor]) {\n                var val = _getDefaultValue(key, options);\n                found = postProcessors[postProcessor](val, key, options);\n            }\n        }\n    \n        return (found !== undefined) ? found : notFound;\n    }\n    \n    function _find(key, options) {\n        options = options || {};\n    \n        var optionWithoutCount, translated\n            , notFound = _getDefaultValue(key, options)\n            , lngs = languages;\n    \n        if (!resStore) { return notFound; } // no resStore to translate from\n    \n        // CI mode\n        if (lngs[0].toLowerCase() === 'cimode') return notFound;\n    \n        // passed in lng\n        if (options.lng) {\n            lngs = f.toLanguages(options.lng);\n    \n            if (!resStore[lngs[0]]) {\n                var oldAsync = o.getAsync;\n                o.getAsync = false;\n    \n                TAPi18next.sync.load(lngs, o, function(err, store) {\n                    f.extend(resStore, store);\n                    o.getAsync = oldAsync;\n                });\n            }\n        }\n    \n        var ns = options.ns || o.ns.defaultNs;\n        if (key.indexOf(o.nsseparator) > -1) {\n            var parts = key.split(o.nsseparator);\n            ns = parts[0];\n            key = parts[1];\n        }\n    \n        if (hasContext(options)) {\n            optionWithoutCount = f.extend({}, options);\n            delete optionWithoutCount.context;\n            optionWithoutCount.defaultValue = o.contextNotFound;\n    \n            var contextKey = ns + o.nsseparator + key + '_' + options.context;\n    \n            translated = translate(contextKey, optionWithoutCount);\n            if (translated != o.contextNotFound) {\n                return applyReplacement(translated, { context: options.context }); // apply replacement for context only\n            } // else continue translation with original/nonContext key\n        }\n    \n        if (needsPlural(options)) {\n            optionWithoutCount = f.extend({}, options);\n            delete optionWithoutCount.count;\n            optionWithoutCount.defaultValue = o.pluralNotFound;\n    \n            var pluralKey = ns + o.nsseparator + key + o.pluralSuffix;\n            var pluralExtension = pluralExtensions.get(lngs[0], options.count);\n            if (pluralExtension >= 0) {\n                pluralKey = pluralKey + '_' + pluralExtension;\n            } else if (pluralExtension === 1) {\n                pluralKey = ns + o.nsseparator + key; // singular\n            }\n    \n            translated = translate(pluralKey, optionWithoutCount);\n            if (translated != o.pluralNotFound) {\n                return applyReplacement(translated, {\n                    count: options.count,\n                    interpolationPrefix: options.interpolationPrefix,\n                    interpolationSuffix: options.interpolationSuffix\n                }); // apply replacement for count only\n            } // else continue translation with original/singular key\n        }\n    \n        var found;\n        var keys = key.split(o.keyseparator);\n        for (var i = 0, len = lngs.length; i < len; i++ ) {\n            if (found !== undefined) break;\n    \n            var l = lngs[i];\n    \n            var x = 0;\n            var value = resStore[l] && resStore[l][ns];\n            while (keys[x]) {\n                value = value && value[keys[x]];\n                x++;\n            }\n            if (value !== undefined) {\n                var valueType = Object.prototype.toString.apply(value);\n                if (typeof value === 'string') {\n                    value = applyReplacement(value, options);\n                    value = applyReuse(value, options);\n                } else if (valueType === '[object Array]' && !o.returnObjectTrees && !options.returnObjectTrees) {\n                    value = value.join('\\n');\n                    value = applyReplacement(value, options);\n                    value = applyReuse(value, options);\n                } else if (value === null && o.fallbackOnNull === true) {\n                    value = undefined;\n                } else if (value !== null) {\n                    if (!o.returnObjectTrees && !options.returnObjectTrees) {\n                        if (o.objectTreeKeyHandler && typeof o.objectTreeKeyHandler == 'function') {\n                            value = o.objectTreeKeyHandler(key, value, l, ns, options);\n                        } else {\n                            value = 'key \\'' + ns + ':' + key + ' (' + l + ')\\' ' +\n                                'returned an object instead of string.';\n                            f.log(value);\n                        }\n                    } else if (valueType !== '[object Number]' && valueType !== '[object Function]' && valueType !== '[object RegExp]') {\n                        var copy = (valueType === '[object Array]') ? [] : {}; // apply child translation on a copy\n                        f.each(value, function(m) {\n                            copy[m] = _translate(ns + o.nsseparator + key + o.keyseparator + m, options);\n                        });\n                        value = copy;\n                    }\n                }\n    \n                if (typeof value === 'string' && value.trim() === '' && o.fallbackOnEmpty === true)\n                    value = undefined;\n    \n                found = value;\n            }\n        }\n    \n        if (found === undefined && !options.isFallbackLookup && (o.fallbackToDefaultNS === true || (o.fallbackNS && o.fallbackNS.length > 0))) {\n            // set flag for fallback lookup - avoid recursion\n            options.isFallbackLookup = true;\n    \n            if (o.fallbackNS.length) {\n    \n                for (var y = 0, lenY = o.fallbackNS.length; y < lenY; y++) {\n                    found = _find(o.fallbackNS[y] + o.nsseparator + key, options);\n    \n                    if (found) {\n                        /* compare value without namespace */\n                        var foundValue = found.indexOf(o.nsseparator) > -1 ? found.split(o.nsseparator)[1] : found\n                          , notFoundValue = notFound.indexOf(o.nsseparator) > -1 ? notFound.split(o.nsseparator)[1] : notFound;\n    \n                        if (foundValue !== notFoundValue) break;\n                    }\n                }\n            } else {\n                found = _find(key, options); // fallback to default NS\n            }\n        }\n    \n        return found;\n    }\n    function detectLanguage() {\n        var detectedLng;\n    \n        // get from qs\n        var qsParm = [];\n        if (typeof window !== 'undefined') {\n            (function() {\n                var query = window.location.search.substring(1);\n                var parms = query.split('&');\n                for (var i=0; i<parms.length; i++) {\n                    var pos = parms[i].indexOf('=');\n                    if (pos > 0) {\n                        var key = parms[i].substring(0,pos);\n                        var val = parms[i].substring(pos+1);\n                        qsParm[key] = val;\n                    }\n                }\n            })();\n            if (qsParm[o.detectLngQS]) {\n                detectedLng = qsParm[o.detectLngQS];\n            }\n        }\n    \n        // get from cookie\n        if (!detectedLng && typeof document !== 'undefined' && o.useCookie ) {\n            var c = f.cookie.read(o.cookieName);\n            if (c) detectedLng = c;\n        }\n    \n        // get from navigator\n        if (!detectedLng && typeof navigator !== 'undefined') {\n            detectedLng =  (navigator.language) ? navigator.language : navigator.userLanguage;\n        }\n        \n        return detectedLng;\n    }\n    var sync = {\n    \n        load: function(lngs, options, cb) {\n            if (options.useLocalStorage) {\n                sync._loadLocal(lngs, options, function(err, store) {\n                    var missingLngs = [];\n                    for (var i = 0, len = lngs.length; i < len; i++) {\n                        if (!store[lngs[i]]) missingLngs.push(lngs[i]);\n                    }\n    \n                    if (missingLngs.length > 0) {\n                        sync._fetch(missingLngs, options, function(err, fetched) {\n                            f.extend(store, fetched);\n                            sync._storeLocal(fetched);\n    \n                            cb(null, store);\n                        });\n                    } else {\n                        cb(null, store);\n                    }\n                });\n            } else {\n                sync._fetch(lngs, options, function(err, store){\n                    cb(null, store);\n                });\n            }\n        },\n    \n        _loadLocal: function(lngs, options, cb) {\n            var store = {}\n              , nowMS = new Date().getTime();\n    \n            if(window.localStorage) {\n    \n                var todo = lngs.length;\n    \n                f.each(lngs, function(key, lng) {\n                    var local = window.localStorage.getItem('res_' + lng);\n    \n                    if (local) {\n                        local = JSON.parse(local);\n    \n                        if (local.i18nStamp && local.i18nStamp + options.localStorageExpirationTime > nowMS) {\n                            store[lng] = local;\n                        }\n                    }\n    \n                    todo--; // wait for all done befor callback\n                    if (todo === 0) cb(null, store);\n                });\n            }\n        },\n    \n        _storeLocal: function(store) {\n            if(window.localStorage) {\n                for (var m in store) {\n                    store[m].i18nStamp = new Date().getTime();\n                    window.localStorage.setItem('res_' + m, JSON.stringify(store[m]));\n                }\n            }\n            return;\n        },\n    \n        _fetch: function(lngs, options, cb) {\n            var ns = options.ns\n              , store = {};\n            \n            if (!options.dynamicLoad) {\n                var todo = ns.namespaces.length * lngs.length\n                  , errors;\n    \n                // load each file individual\n                f.each(ns.namespaces, function(nsIndex, nsValue) {\n                    f.each(lngs, function(lngIndex, lngValue) {\n                        \n                        // Call this once our translation has returned.\n                        var loadComplete = function(err, data) {\n                            if (err) {\n                                errors = errors || [];\n                                errors.push(err);\n                            }\n                            store[lngValue] = store[lngValue] || {};\n                            store[lngValue][nsValue] = data;\n    \n                            todo--; // wait for all done befor callback\n                            if (todo === 0) cb(errors, store);\n                        };\n                        \n                        if(typeof options.customLoad == 'function'){\n                            // Use the specified custom callback.\n                            options.customLoad(lngValue, nsValue, options, loadComplete);\n                        } else {\n                            //~ // Use our inbuilt sync.\n                            sync._fetchOne(lngValue, nsValue, options, loadComplete);\n                        }\n                    });\n                });\n            } else {\n                // Call this once our translation has returned.\n                var loadComplete = function(err, data) {\n                    cb(null, data);\n                };\n    \n                if(typeof options.customLoad == 'function'){\n                    // Use the specified custom callback.\n                    options.customLoad(lngs, ns.namespaces, options, loadComplete);\n                } else {\n                    var url = applyReplacement(options.resGetPath, { lng: lngs.join('+'), ns: ns.namespaces.join('+') });\n                    // load all needed stuff once\n                    f.ajax({\n                        url: url,\n                        success: function(data, status, xhr) {\n                            f.log('loaded: ' + url);\n                            loadComplete(null, data);\n                        },\n                        error : function(xhr, status, error) {\n                            f.log('failed loading: ' + url);\n                            loadComplete('failed loading resource.json error: ' + error);\n                        },\n                        dataType: \"json\",\n                        async : options.getAsync\n                    });\n                }    \n            }\n        },\n    \n        _fetchOne: function(lng, ns, options, done) {\n            var url = applyReplacement(options.resGetPath, { lng: lng, ns: ns });\n            f.ajax({\n                url: url,\n                success: function(data, status, xhr) {\n                    f.log('loaded: ' + url);\n                    done(null, data);\n                },\n                error : function(xhr, status, error) {\n                    if ((status && status == 200) || (xhr && xhr.status && xhr.status == 200)) {\n                        // file loaded but invalid json, stop waste time !\n                        f.log('There is a typo in: ' + url);\n                    } else if ((status && status == 404) || (xhr && xhr.status && xhr.status == 404)) {\n                        f.log('Does not exist: ' + url);\n                    } else {\n                        var theStatus = status ? status : ((xhr && xhr.status) ? xhr.status : null);\n                        f.log(theStatus + ' when loading ' + url);\n                    }\n                    \n                    done(error, {});\n                },\n                dataType: \"json\",\n                async : options.getAsync\n            });\n        },\n    \n        postMissing: function(lng, ns, key, defaultValue, lngs) {\n            var payload = {};\n            payload[key] = defaultValue;\n    \n            var urls = [];\n    \n            if (o.sendMissingTo === 'fallback' && o.fallbackLng[0] !== false) {\n                for (var i = 0; i < o.fallbackLng.length; i++) {\n                    urls.push({lng: o.fallbackLng[i], url: applyReplacement(o.resPostPath, { lng: o.fallbackLng[i], ns: ns })});\n                }\n            } else if (o.sendMissingTo === 'current' || (o.sendMissingTo === 'fallback' && o.fallbackLng[0] === false) ) {\n                urls.push({lng: lng, url: applyReplacement(o.resPostPath, { lng: lng, ns: ns })});\n            } else if (o.sendMissingTo === 'all') {\n                for (var i = 0, l = lngs.length; i < l; i++) {\n                    urls.push({lng: lngs[i], url: applyReplacement(o.resPostPath, { lng: lngs[i], ns: ns })});\n                }\n            }\n    \n            for (var y = 0, len = urls.length; y < len; y++) {\n                var item = urls[y];\n                f.ajax({\n                    url: item.url,\n                    type: o.sendType,\n                    data: payload,\n                    success: function(data, status, xhr) {\n                        f.log('posted missing key \\'' + key + '\\' to: ' + item.url);\n    \n                        // add key to resStore\n                        var keys = key.split('.');\n                        var x = 0;\n                        var value = resStore[item.lng][ns];\n                        while (keys[x]) {\n                            if (x === keys.length - 1) {\n                                value = value[keys[x]] = defaultValue;\n                            } else {\n                                value = value[keys[x]] = value[keys[x]] || {};\n                            }\n                            x++;\n                        }\n                    },\n                    error : function(xhr, status, error) {\n                        f.log('failed posting missing key \\'' + key + '\\' to: ' + item.url);\n                    },\n                    dataType: \"json\",\n                    async : o.postAsync\n                });\n            }\n        }\n    };\n    // definition http://translate.sourceforge.net/wiki/l10n/pluralforms\n    var pluralExtensions = {\n    \n        rules: {\n            \"ach\": {\n                \"name\": \"Acholi\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n > 1); }\n            }, \n            \"af\": {\n                \"name\": \"Afrikaans\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"ak\": {\n                \"name\": \"Akan\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n > 1); }\n            }, \n            \"am\": {\n                \"name\": \"Amharic\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n > 1); }\n            }, \n            \"an\": {\n                \"name\": \"Aragonese\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"ar\": {\n                \"name\": \"Arabic\", \n                \"numbers\": [\n                    0, \n                    1, \n                    2, \n                    3, \n                    11, \n                    100\n                ], \n                \"plurals\": function(n) { return Number(n===0 ? 0 : n==1 ? 1 : n==2 ? 2 : n%100>=3 && n%100<=10 ? 3 : n%100>=11 ? 4 : 5); }\n            }, \n            \"arn\": {\n                \"name\": \"Mapudungun\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n > 1); }\n            }, \n            \"ast\": {\n                \"name\": \"Asturian\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"ay\": {\n                \"name\": \"Aymar\\u00e1\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"az\": {\n                \"name\": \"Azerbaijani\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"be\": {\n                \"name\": \"Belarusian\", \n                \"numbers\": [\n                    1, \n                    2, \n                    5\n                ], \n                \"plurals\": function(n) { return Number(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2); }\n            }, \n            \"bg\": {\n                \"name\": \"Bulgarian\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"bn\": {\n                \"name\": \"Bengali\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"bo\": {\n                \"name\": \"Tibetan\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"br\": {\n                \"name\": \"Breton\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n > 1); }\n            }, \n            \"bs\": {\n                \"name\": \"Bosnian\", \n                \"numbers\": [\n                    1, \n                    2, \n                    5\n                ], \n                \"plurals\": function(n) { return Number(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2); }\n            }, \n            \"ca\": {\n                \"name\": \"Catalan\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"cgg\": {\n                \"name\": \"Chiga\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"cs\": {\n                \"name\": \"Czech\", \n                \"numbers\": [\n                    1, \n                    2, \n                    5\n                ], \n                \"plurals\": function(n) { return Number((n==1) ? 0 : (n>=2 && n<=4) ? 1 : 2); }\n            }, \n            \"csb\": {\n                \"name\": \"Kashubian\", \n                \"numbers\": [\n                    1, \n                    2, \n                    5\n                ], \n                \"plurals\": function(n) { return Number(n==1 ? 0 : n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2); }\n            }, \n            \"cy\": {\n                \"name\": \"Welsh\", \n                \"numbers\": [\n                    1, \n                    2, \n                    3, \n                    8\n                ], \n                \"plurals\": function(n) { return Number((n==1) ? 0 : (n==2) ? 1 : (n != 8 && n != 11) ? 2 : 3); }\n            }, \n            \"da\": {\n                \"name\": \"Danish\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"de\": {\n                \"name\": \"German\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"dz\": {\n                \"name\": \"Dzongkha\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"el\": {\n                \"name\": \"Greek\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"en\": {\n                \"name\": \"English\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"eo\": {\n                \"name\": \"Esperanto\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"es\": {\n                \"name\": \"Spanish\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"es_ar\": {\n                \"name\": \"Argentinean Spanish\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"et\": {\n                \"name\": \"Estonian\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"eu\": {\n                \"name\": \"Basque\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"fa\": {\n                \"name\": \"Persian\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"fi\": {\n                \"name\": \"Finnish\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"fil\": {\n                \"name\": \"Filipino\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n > 1); }\n            }, \n            \"fo\": {\n                \"name\": \"Faroese\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"fr\": {\n                \"name\": \"French\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n > 1); }\n            }, \n            \"fur\": {\n                \"name\": \"Friulian\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"fy\": {\n                \"name\": \"Frisian\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"ga\": {\n                \"name\": \"Irish\", \n                \"numbers\": [\n                    1, \n                    2,\n                    3,\n                    7, \n                    11\n                ], \n                \"plurals\": function(n) { return Number(n==1 ? 0 : n==2 ? 1 : n<7 ? 2 : n<11 ? 3 : 4) ;}\n            }, \n            \"gd\": {\n                \"name\": \"Scottish Gaelic\", \n                \"numbers\": [\n                    1, \n                    2, \n                    3,\n                    20\n                ], \n                \"plurals\": function(n) { return Number((n==1 || n==11) ? 0 : (n==2 || n==12) ? 1 : (n > 2 && n < 20) ? 2 : 3); }\n            }, \n            \"gl\": {\n                \"name\": \"Galician\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"gu\": {\n                \"name\": \"Gujarati\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"gun\": {\n                \"name\": \"Gun\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n > 1); }\n            }, \n            \"ha\": {\n                \"name\": \"Hausa\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"he\": {\n                \"name\": \"Hebrew\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"hi\": {\n                \"name\": \"Hindi\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"hr\": {\n                \"name\": \"Croatian\", \n                \"numbers\": [\n                    1, \n                    2,\n                    5\n                ], \n                \"plurals\": function(n) { return Number(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2); }\n            }, \n            \"hu\": {\n                \"name\": \"Hungarian\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"hy\": {\n                \"name\": \"Armenian\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"ia\": {\n                \"name\": \"Interlingua\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"id\": {\n                \"name\": \"Indonesian\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"is\": {\n                \"name\": \"Icelandic\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n%10!=1 || n%100==11); }\n            }, \n            \"it\": {\n                \"name\": \"Italian\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"ja\": {\n                \"name\": \"Japanese\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"jbo\": {\n                \"name\": \"Lojban\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"jv\": {\n                \"name\": \"Javanese\", \n                \"numbers\": [\n                    0, \n                    1\n                ], \n                \"plurals\": function(n) { return Number(n !== 0); }\n            }, \n            \"ka\": {\n                \"name\": \"Georgian\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"kk\": {\n                \"name\": \"Kazakh\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"km\": {\n                \"name\": \"Khmer\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"kn\": {\n                \"name\": \"Kannada\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"ko\": {\n                \"name\": \"Korean\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"ku\": {\n                \"name\": \"Kurdish\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"kw\": {\n                \"name\": \"Cornish\", \n                \"numbers\": [\n                    1, \n                    2, \n                    3,\n                    4\n                ], \n                \"plurals\": function(n) { return Number((n==1) ? 0 : (n==2) ? 1 : (n == 3) ? 2 : 3); }\n            }, \n            \"ky\": {\n                \"name\": \"Kyrgyz\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"lb\": {\n                \"name\": \"Letzeburgesch\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"ln\": {\n                \"name\": \"Lingala\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n > 1); }\n            }, \n            \"lo\": {\n                \"name\": \"Lao\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"lt\": {\n                \"name\": \"Lithuanian\", \n                \"numbers\": [\n                    1, \n                    2,\n                    10\n                ], \n                \"plurals\": function(n) { return Number(n%10==1 && n%100!=11 ? 0 : n%10>=2 && (n%100<10 || n%100>=20) ? 1 : 2); }\n            }, \n            \"lv\": {\n                \"name\": \"Latvian\", \n                \"numbers\": [\n                    1, \n                    2, \n                    0\n                ], \n                \"plurals\": function(n) { return Number(n%10==1 && n%100!=11 ? 0 : n !== 0 ? 1 : 2); }\n            }, \n            \"mai\": {\n                \"name\": \"Maithili\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"mfe\": {\n                \"name\": \"Mauritian Creole\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n > 1); }\n            }, \n            \"mg\": {\n                \"name\": \"Malagasy\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n > 1); }\n            }, \n            \"mi\": {\n                \"name\": \"Maori\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n > 1); }\n            }, \n            \"mk\": {\n                \"name\": \"Macedonian\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n==1 || n%10==1 ? 0 : 1); }\n            }, \n            \"ml\": {\n                \"name\": \"Malayalam\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"mn\": {\n                \"name\": \"Mongolian\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"mnk\": {\n                \"name\": \"Mandinka\", \n                \"numbers\": [\n                    0, \n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n == 0 ? 0 : n==1 ? 1 : 2); }\n            }, \n            \"mr\": {\n                \"name\": \"Marathi\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"ms\": {\n                \"name\": \"Malay\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"mt\": {\n                \"name\": \"Maltese\", \n                \"numbers\": [\n                    1, \n                    2, \n                    11, \n                    20\n                ], \n                \"plurals\": function(n) { return Number(n==1 ? 0 : n===0 || ( n%100>1 && n%100<11) ? 1 : (n%100>10 && n%100<20 ) ? 2 : 3); }\n            }, \n            \"nah\": {\n                \"name\": \"Nahuatl\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"nap\": {\n                \"name\": \"Neapolitan\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"nb\": {\n                \"name\": \"Norwegian Bokmal\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"ne\": {\n                \"name\": \"Nepali\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"nl\": {\n                \"name\": \"Dutch\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"nn\": {\n                \"name\": \"Norwegian Nynorsk\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"no\": {\n                \"name\": \"Norwegian\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"nso\": {\n                \"name\": \"Northern Sotho\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"oc\": {\n                \"name\": \"Occitan\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n > 1); }\n            }, \n            \"or\": {\n                \"name\": \"Oriya\", \n                \"numbers\": [\n                    2, \n                    1\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"pa\": {\n                \"name\": \"Punjabi\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"pap\": {\n                \"name\": \"Papiamento\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"pl\": {\n                \"name\": \"Polish\", \n                \"numbers\": [\n                    1, \n                    2,\n                    5\n                ], \n                \"plurals\": function(n) { return Number(n==1 ? 0 : n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2); }\n            }, \n            \"pms\": {\n                \"name\": \"Piemontese\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"ps\": {\n                \"name\": \"Pashto\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"pt\": {\n                \"name\": \"Portuguese\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"pt_br\": {\n                \"name\": \"Brazilian Portuguese\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"rm\": {\n                \"name\": \"Romansh\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"ro\": {\n                \"name\": \"Romanian\", \n                \"numbers\": [\n                    1, \n                    2,\n                    20\n                ], \n                \"plurals\": function(n) { return Number(n==1 ? 0 : (n===0 || (n%100 > 0 && n%100 < 20)) ? 1 : 2); }\n            }, \n            \"ru\": {\n                \"name\": \"Russian\", \n                \"numbers\": [\n                    1, \n                    2, \n                    5\n                ], \n                \"plurals\": function(n) { return Number(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2); }\n            }, \n            \"sah\": {\n                \"name\": \"Yakut\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"sco\": {\n                \"name\": \"Scots\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"se\": {\n                \"name\": \"Northern Sami\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"si\": {\n                \"name\": \"Sinhala\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"sk\": {\n                \"name\": \"Slovak\", \n                \"numbers\": [\n                    1, \n                    2, \n                    5\n                ], \n                \"plurals\": function(n) { return Number((n==1) ? 0 : (n>=2 && n<=4) ? 1 : 2); }\n            }, \n            \"sl\": {\n                \"name\": \"Slovenian\", \n                \"numbers\": [\n                    5, \n                    1, \n                    2, \n                    3\n                ], \n                \"plurals\": function(n) { return Number(n%100==1 ? 1 : n%100==2 ? 2 : n%100==3 || n%100==4 ? 3 : 0); }\n            }, \n            \"so\": {\n                \"name\": \"Somali\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"son\": {\n                \"name\": \"Songhay\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"sq\": {\n                \"name\": \"Albanian\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"sr\": {\n                \"name\": \"Serbian\", \n                \"numbers\": [\n                    1, \n                    2,\n                    5\n                ], \n                \"plurals\": function(n) { return Number(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2); }\n            }, \n            \"su\": {\n                \"name\": \"Sundanese\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"sv\": {\n                \"name\": \"Swedish\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"sw\": {\n                \"name\": \"Swahili\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"ta\": {\n                \"name\": \"Tamil\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"te\": {\n                \"name\": \"Telugu\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"tg\": {\n                \"name\": \"Tajik\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n > 1); }\n            }, \n            \"th\": {\n                \"name\": \"Thai\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"ti\": {\n                \"name\": \"Tigrinya\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n > 1); }\n            }, \n            \"tk\": {\n                \"name\": \"Turkmen\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"tr\": {\n                \"name\": \"Turkish\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n > 1); }\n            }, \n            \"tt\": {\n                \"name\": \"Tatar\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"ug\": {\n                \"name\": \"Uyghur\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"uk\": {\n                \"name\": \"Ukrainian\", \n                \"numbers\": [\n                    1, \n                    2,\n                    5\n                ], \n                \"plurals\": function(n) { return Number(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2); }\n            }, \n            \"ur\": {\n                \"name\": \"Urdu\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"uz\": {\n                \"name\": \"Uzbek\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n > 1); }\n            }, \n            \"vi\": {\n                \"name\": \"Vietnamese\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"wa\": {\n                \"name\": \"Walloon\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n > 1); }\n            }, \n            \"wo\": {\n                \"name\": \"Wolof\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }, \n            \"yo\": {\n                \"name\": \"Yoruba\", \n                \"numbers\": [\n                    1, \n                    2\n                ], \n                \"plurals\": function(n) { return Number(n != 1); }\n            }, \n            \"zh\": {\n                \"name\": \"Chinese\", \n                \"numbers\": [\n                    1\n                ], \n                \"plurals\": function(n) { return 0; }\n            }\n        },\n    \n        // for demonstration only sl and ar is added but you can add your own pluralExtensions\n        addRule: function(lng, obj) {\n            pluralExtensions.rules[lng] = obj;    \n        },\n    \n        setCurrentLng: function(lng) {\n            if (!pluralExtensions.currentRule || pluralExtensions.currentRule.lng !== lng) {\n                var parts = lng.split('-');\n    \n                pluralExtensions.currentRule = {\n                    lng: lng,\n                    rule: pluralExtensions.rules[parts[0]]\n                };\n            }\n        },\n    \n        get: function(lng, count) {\n            var parts = lng.split('-');\n    \n            function getResult(l, c) {\n                var ext;\n                if (pluralExtensions.currentRule && pluralExtensions.currentRule.lng === lng) {\n                    ext = pluralExtensions.currentRule.rule; \n                } else {\n                    ext = pluralExtensions.rules[l];\n                }\n                if (ext) {\n                    var i = ext.plurals(c);\n                    var number = ext.numbers[i];\n                    if (ext.numbers.length === 2 && ext.numbers[0] === 1) {\n                        if (number === 2) { \n                            number = -1; // regular plural\n                        } else if (number === 1) {\n                            number = 1; // singular\n                        }\n                    }//console.log(count + '-' + number);\n                    return number;\n                } else {\n                    return c === 1 ? '1' : '-1';\n                }\n            }\n                        \n            return getResult(parts[0], count);\n        }\n    \n    };\n    var postProcessors = {};\n    var addPostProcessor = function(name, fc) {\n        postProcessors[name] = fc;\n    };\n    // sprintf support\n    var sprintf = (function() {\n        function get_type(variable) {\n            return Object.prototype.toString.call(variable).slice(8, -1).toLowerCase();\n        }\n        function str_repeat(input, multiplier) {\n            for (var output = []; multiplier > 0; output[--multiplier] = input) {/* do nothing */}\n            return output.join('');\n        }\n    \n        var str_format = function() {\n            if (!str_format.cache.hasOwnProperty(arguments[0])) {\n                str_format.cache[arguments[0]] = str_format.parse(arguments[0]);\n            }\n            return str_format.format.call(null, str_format.cache[arguments[0]], arguments);\n        };\n    \n        str_format.format = function(parse_tree, argv) {\n            var cursor = 1, tree_length = parse_tree.length, node_type = '', arg, output = [], i, k, match, pad, pad_character, pad_length;\n            for (i = 0; i < tree_length; i++) {\n                node_type = get_type(parse_tree[i]);\n                if (node_type === 'string') {\n                    output.push(parse_tree[i]);\n                }\n                else if (node_type === 'array') {\n                    match = parse_tree[i]; // convenience purposes only\n                    if (match[2]) { // keyword argument\n                        arg = argv[cursor];\n                        for (k = 0; k < match[2].length; k++) {\n                            if (!arg.hasOwnProperty(match[2][k])) {\n                                throw(sprintf('[sprintf] property \"%s\" does not exist', match[2][k]));\n                            }\n                            arg = arg[match[2][k]];\n                        }\n                    }\n                    else if (match[1]) { // positional argument (explicit)\n                        arg = argv[match[1]];\n                    }\n                    else { // positional argument (implicit)\n                        arg = argv[cursor++];\n                    }\n    \n                    if (/[^s]/.test(match[8]) && (get_type(arg) != 'number')) {\n                        throw(sprintf('[sprintf] expecting number but found %s', get_type(arg)));\n                    }\n                    switch (match[8]) {\n                        case 'b': arg = arg.toString(2); break;\n                        case 'c': arg = String.fromCharCode(arg); break;\n                        case 'd': arg = parseInt(arg, 10); break;\n                        case 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;\n                        case 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;\n                        case 'o': arg = arg.toString(8); break;\n                        case 's': arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg); break;\n                        case 'u': arg = Math.abs(arg); break;\n                        case 'x': arg = arg.toString(16); break;\n                        case 'X': arg = arg.toString(16).toUpperCase(); break;\n                    }\n                    arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? '+'+ arg : arg);\n                    pad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' ';\n                    pad_length = match[6] - String(arg).length;\n                    pad = match[6] ? str_repeat(pad_character, pad_length) : '';\n                    output.push(match[5] ? arg + pad : pad + arg);\n                }\n            }\n            return output.join('');\n        };\n    \n        str_format.cache = {};\n    \n        str_format.parse = function(fmt) {\n            var _fmt = fmt, match = [], parse_tree = [], arg_names = 0;\n            while (_fmt) {\n                if ((match = /^[^\\x25]+/.exec(_fmt)) !== null) {\n                    parse_tree.push(match[0]);\n                }\n                else if ((match = /^\\x25{2}/.exec(_fmt)) !== null) {\n                    parse_tree.push('%');\n                }\n                else if ((match = /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {\n                    if (match[2]) {\n                        arg_names |= 1;\n                        var field_list = [], replacement_field = match[2], field_match = [];\n                        if ((field_match = /^([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n                            field_list.push(field_match[1]);\n                            while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\n                                if ((field_match = /^\\.([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n                                    field_list.push(field_match[1]);\n                                }\n                                else if ((field_match = /^\\[(\\d+)\\]/.exec(replacement_field)) !== null) {\n                                    field_list.push(field_match[1]);\n                                }\n                                else {\n                                    throw('[sprintf] huh?');\n                                }\n                            }\n                        }\n                        else {\n                            throw('[sprintf] huh?');\n                        }\n                        match[2] = field_list;\n                    }\n                    else {\n                        arg_names |= 2;\n                    }\n                    if (arg_names === 3) {\n                        throw('[sprintf] mixing positional and named placeholders is not (yet) supported');\n                    }\n                    parse_tree.push(match);\n                }\n                else {\n                    throw('[sprintf] huh?');\n                }\n                _fmt = _fmt.substring(match[0].length);\n            }\n            return parse_tree;\n        };\n    \n        return str_format;\n    })();\n    \n    var vsprintf = function(fmt, argv) {\n        argv.unshift(fmt);\n        return sprintf.apply(null, argv);\n    };\n    \n    addPostProcessor(\"sprintf\", function(val, key, opts) {\n        if (!opts.sprintf) return val;\n    \n        if (Object.prototype.toString.apply(opts.sprintf) === '[object Array]') {\n            return vsprintf(val, opts.sprintf);\n        } else if (typeof opts.sprintf === 'object') {\n            return sprintf(val, opts.sprintf);\n        }\n    \n        return val;\n    });\n    // public api interface\n    TAPi18next.init = init;\n    TAPi18next.setLng = setLng;\n    TAPi18next.preload = preload;\n    TAPi18next.addResourceBundle = addResourceBundle;\n    TAPi18next.removeResourceBundle = removeResourceBundle;\n    TAPi18next.loadNamespace = loadNamespace;\n    TAPi18next.loadNamespaces = loadNamespaces;\n    TAPi18next.setDefaultNamespace = setDefaultNamespace;\n    TAPi18next.t = translate;\n    TAPi18next.translate = translate;\n    TAPi18next.exists = exists;\n    TAPi18next.detectLanguage = f.detectLanguage;\n    TAPi18next.pluralExtensions = pluralExtensions;\n    TAPi18next.sync = sync;\n    TAPi18next.functions = f;\n    TAPi18next.lng = lng;\n    TAPi18next.addPostProcessor = addPostProcessor;\n    TAPi18next.options = o;\n})();\n","// The globals object will be accessible to the build plugin, the server and\n// the client\n\nexport const globals = {\n\tfallback_language: 'en',\n\tlangauges_tags_regex: '[a-z]{2,3}(?:-[a-zA-Z]{4})?(?:-[A-Z]{2,3})?',\n\tproject_translations_domain: 'project',\n\tbrowser_path: '/tap-i18n',\n\tdebug: false,\n};\n","import { TAPi18nBase } from './tap_i18n-common';\nimport { globals } from './globals';\n\nexport class TAPi18nClient extends TAPi18nBase\n  _languageSpecificTranslators: null\n  _languageSpecificTranslatorsTrackers: null\n\n  _getLanguageFilePath: (lang_tag) ->\n    if not @_enabled()\n      return null\n\n    path = if @.conf.cdn_path? then @.conf.cdn_path else @.conf.i18n_files_route\n    path = path.replace /\\/$/, \"\"\n    if Meteor.isCordova and path[0] == \"/\"\n      path = Meteor.absoluteUrl().replace(/\\/+$/, \"\") + path\n\n    \"#{path}/#{lang_tag}.json\"\n\n  _loadLanguage: (languageTag) ->\n    # Load languageTag and its dependencies languages to TAPi18next if we\n    # haven't loaded them already.\n    #\n    # languageTag dependencies languages are:\n    # * The base language if languageTag is a dialect.\n    # * The fallback language (en) if we haven't loaded it already.\n    #\n    # Returns a deferred object that resolves with no arguments if all files\n    # loaded successfully to TAPi18next and rejects with array of error\n    # messages otherwise\n    #\n    # Example:\n    # TAPi18n._loadLanguage(\"pt-BR\")\n    #   .done(function () {\n    #     console.log(\"languageLoaded successfully\");\n    #   })\n    #   .fail(function (messages) {\n    #     console.log(\"Couldn't load languageTag\", messages);\n    #   })\n    #\n    # The above example will attempt to load pt-BR, pt and en\n\n    dfd = new $.Deferred()\n\n    if not @_enabled()\n      return dfd.reject \"tap-i18n is not enabled in the project level, check tap-i18n README\"\n\n    project_languages = @_getProjectLanguages()\n\n    if languageTag in project_languages\n      if languageTag not in @_loaded_languages\n        loadLanguageTag = =>\n          jqXHR = $.getJSON(@_getLanguageFilePath(languageTag))\n\n          jqXHR.done (data) =>\n            @_loadLangFileObject(languageTag, data)\n\n            @_loaded_languages.push languageTag\n\n            dfd.resolve()\n\n          jqXHR.fail (xhr, error_code) =>\n            dfd.reject(\"Couldn't load language '#{languageTag}' JSON: #{error_code}\")\n\n        directDependencyLanguageTag = if \"-\" in languageTag then languageTag.replace(/-.*/, \"\") else @._fallback_language\n\n        # load dependency language if it is part of the project and not the fallback language\n        if languageTag != @._fallback_language and directDependencyLanguageTag in project_languages\n          dependencyLoadDfd = @_loadLanguage directDependencyLanguageTag\n\n          dependencyLoadDfd.done =>\n            # All dependencies loaded successfully\n            loadLanguageTag()\n\n          dependencyLoadDfd.fail (message) =>\n            dfd.reject(\"Loading process failed since dependency language\n              '#{directDependencyLanguageTag}' failed to load: \" + message)\n        else\n          loadLanguageTag()\n      else\n        # languageTag loaded already\n        dfd.resolve()\n    else\n      dfd.reject([\"Language #{languageTag} is not supported\"])\n\n    return dfd.promise()\n\n  _registerHelpers: (package_name, template) ->\n    if package_name != globals.project_translations_domain\n      tapI18nextProxy = @_getPackageI18nextProxy(@packages[package_name].namespace)\n    else\n      tapI18nextProxy = @_getPackageI18nextProxy(globals.project_translations_domain)\n\n    underscore_helper = (key, args...) ->\n      options = (args.pop()).hash\n      if not _.isEmpty(args)\n        options.sprintf = args\n\n      tapI18nextProxy(key, options)\n\n    # template specific helpers\n    if package_name != globals.project_translations_domain\n      # {{_ }}\n      if Template[template]? and Template[template].helpers?\n        helpers = {}\n        helpers[@packages[package_name].helper_name] = underscore_helper\n        Template[template].helpers(helpers)\n\n    # global helpers\n    else\n      # {{_ }}\n      UI.registerHelper @conf.helper_name, underscore_helper\n\n      # {{languageTag}}\n      UI.registerHelper \"languageTag\", () => @getLanguage()\n\n    return\n\n  _getRegisterHelpersProxy: (package_name) ->\n    # A proxy to _registerHelpers where the package_name is fixed to package_name\n    (template) =>\n      @_registerHelpers(package_name, template)\n\n  _prepareLanguageSpecificTranslator: (lang_tag) ->\n    dfd = (new $.Deferred()).resolve().promise()\n\n    if lang_tag of @_languageSpecificTranslatorsTrackers\n      return dfd\n\n    @_languageSpecificTranslatorsTrackers[lang_tag] = new Tracker.Dependency\n\n    if not(lang_tag of @_languageSpecificTranslators)\n      dfd = @_loadLanguage(lang_tag)\n        .done =>\n          @_languageSpecificTranslators[lang_tag] = @_getSpecificLangTranslator(lang_tag)\n\n          @_languageSpecificTranslatorsTrackers[lang_tag].changed()\n\n    return dfd\n\n  _getPackageI18nextProxy: (package_name) ->\n    # A proxy to TAPi18next.t where the namespace is preset to the package's\n\n    (key, options, lang_tag=null) =>\n      # Devs get confused and use lang option instead of lng option, make lang\n      # alias of lng\n      if options?.lang? and not options?.lng?\n        options.lng = options.lang\n\n      if options?.lng? and not lang_tag?\n        lang_tag = options.lng\n        # Remove options.lng so we won't pass it to the regular TAPi18next\n        # before the language specific translator is ready to keep behavior\n        # consistent.\n        #\n        # If lang is actually ready before the language specifc translator is\n        # ready, TAPi18next will translate to lang_tag if we won't remove\n        # options.lng.\n        delete options.lng\n\n      if lang_tag?\n        @_prepareLanguageSpecificTranslator(lang_tag)\n\n        @_languageSpecificTranslatorsTrackers[lang_tag].depend()\n\n        if lang_tag of @_languageSpecificTranslators\n          return @_languageSpecificTranslators[lang_tag] \"#{@_getPackageDomain(package_name)}:#{key}\", options\n        else\n          return TAPi18next.t \"#{@_getPackageDomain(package_name)}:#{key}\", options\n\n      # If inside a reactive computation, we want to invalidate the computation if the client lang changes\n      @_language_changed_tracker.depend()\n\n\n      TAPi18next.t \"#{@_getPackageDomain(package_name)}:#{key}\", options\n\n  _onceEnabled: () ->\n    @_registerHelpers globals.project_translations_domain\n\n  _abortPreviousSetLang: null\n  setLanguage: (lang_tag) ->\n    self = @\n\n    @_abortPreviousSetLang?()\n\n    isAborted = false\n    @_abortPreviousSetLang = -> isAborted = true\n\n    @_loadLanguage(lang_tag).then =>\n      if not isAborted\n        TAPi18next.setLng(lang_tag)\n\n        @_language_changed_tracker.changed()\n        Session.set @_loaded_lang_session_key, lang_tag\n\n  getLanguage: ->\n    if not @._enabled()\n      return null\n\n    session_lang = Session.get @_loaded_lang_session_key\n\n    if session_lang? then session_lang else @._fallback_language\n","var indexOf = [].indexOf;\n\nimport {\n  TAPi18nBase\n} from './tap_i18n-common';\n\nimport {\n  globals\n} from './globals';\n\nexport var TAPi18nClient = (function() {\n  class TAPi18nClient extends TAPi18nBase {\n    _getLanguageFilePath(lang_tag) {\n      var path;\n      if (!this._enabled()) {\n        return null;\n      }\n      path = this.conf.cdn_path != null ? this.conf.cdn_path : this.conf.i18n_files_route;\n      path = path.replace(/\\/$/, \"\");\n      if (Meteor.isCordova && path[0] === \"/\") {\n        path = Meteor.absoluteUrl().replace(/\\/+$/, \"\") + path;\n      }\n      return `${path}/${lang_tag}.json`;\n    }\n\n    _loadLanguage(languageTag) {\n      var dependencyLoadDfd, dfd, directDependencyLanguageTag, loadLanguageTag, project_languages;\n      // Load languageTag and its dependencies languages to TAPi18next if we\n      // haven't loaded them already.\n\n      // languageTag dependencies languages are:\n      // * The base language if languageTag is a dialect.\n      // * The fallback language (en) if we haven't loaded it already.\n\n      // Returns a deferred object that resolves with no arguments if all files\n      // loaded successfully to TAPi18next and rejects with array of error\n      // messages otherwise\n\n      // Example:\n      // TAPi18n._loadLanguage(\"pt-BR\")\n      //   .done(function () {\n      //     console.log(\"languageLoaded successfully\");\n      //   })\n      //   .fail(function (messages) {\n      //     console.log(\"Couldn't load languageTag\", messages);\n      //   })\n\n      // The above example will attempt to load pt-BR, pt and en\n      dfd = new $.Deferred();\n      if (!this._enabled()) {\n        return dfd.reject(\"tap-i18n is not enabled in the project level, check tap-i18n README\");\n      }\n      project_languages = this._getProjectLanguages();\n      if (indexOf.call(project_languages, languageTag) >= 0) {\n        if (indexOf.call(this._loaded_languages, languageTag) < 0) {\n          loadLanguageTag = () => {\n            var jqXHR;\n            jqXHR = $.getJSON(this._getLanguageFilePath(languageTag));\n            jqXHR.done((data) => {\n              this._loadLangFileObject(languageTag, data);\n              this._loaded_languages.push(languageTag);\n              return dfd.resolve();\n            });\n            return jqXHR.fail((xhr, error_code) => {\n              return dfd.reject(`Couldn't load language '${languageTag}' JSON: ${error_code}`);\n            });\n          };\n          directDependencyLanguageTag = indexOf.call(languageTag, \"-\") >= 0 ? languageTag.replace(/-.*/, \"\") : this._fallback_language;\n          // load dependency language if it is part of the project and not the fallback language\n          if (languageTag !== this._fallback_language && indexOf.call(project_languages, directDependencyLanguageTag) >= 0) {\n            dependencyLoadDfd = this._loadLanguage(directDependencyLanguageTag);\n            dependencyLoadDfd.done(() => {\n              // All dependencies loaded successfully\n              return loadLanguageTag();\n            });\n            dependencyLoadDfd.fail((message) => {\n              return dfd.reject(`Loading process failed since dependency language '${directDependencyLanguageTag}' failed to load: ` + message);\n            });\n          } else {\n            loadLanguageTag();\n          }\n        } else {\n          // languageTag loaded already\n          dfd.resolve();\n        }\n      } else {\n        dfd.reject([`Language ${languageTag} is not supported`]);\n      }\n      return dfd.promise();\n    }\n\n    _registerHelpers(package_name, template) {\n      var helpers, tapI18nextProxy, underscore_helper;\n      if (package_name !== globals.project_translations_domain) {\n        tapI18nextProxy = this._getPackageI18nextProxy(this.packages[package_name].namespace);\n      } else {\n        tapI18nextProxy = this._getPackageI18nextProxy(globals.project_translations_domain);\n      }\n      underscore_helper = function(key, ...args) {\n        var options;\n        options = (args.pop()).hash;\n        if (!_.isEmpty(args)) {\n          options.sprintf = args;\n        }\n        return tapI18nextProxy(key, options);\n      };\n      // template specific helpers\n      if (package_name !== globals.project_translations_domain) {\n        // {{_ }}\n        if ((Template[template] != null) && (Template[template].helpers != null)) {\n          helpers = {};\n          helpers[this.packages[package_name].helper_name] = underscore_helper;\n          Template[template].helpers(helpers);\n        }\n      } else {\n        // {{_ }}\n        // global helpers\n        UI.registerHelper(this.conf.helper_name, underscore_helper);\n        // {{languageTag}}\n        UI.registerHelper(\"languageTag\", () => {\n          return this.getLanguage();\n        });\n      }\n    }\n\n    _getRegisterHelpersProxy(package_name) {\n      // A proxy to _registerHelpers where the package_name is fixed to package_name\n      return (template) => {\n        return this._registerHelpers(package_name, template);\n      };\n    }\n\n    _prepareLanguageSpecificTranslator(lang_tag) {\n      var dfd;\n      dfd = (new $.Deferred()).resolve().promise();\n      if (lang_tag in this._languageSpecificTranslatorsTrackers) {\n        return dfd;\n      }\n      this._languageSpecificTranslatorsTrackers[lang_tag] = new Tracker.Dependency;\n      if (!(lang_tag in this._languageSpecificTranslators)) {\n        dfd = this._loadLanguage(lang_tag).done(() => {\n          this._languageSpecificTranslators[lang_tag] = this._getSpecificLangTranslator(lang_tag);\n          return this._languageSpecificTranslatorsTrackers[lang_tag].changed();\n        });\n      }\n      return dfd;\n    }\n\n    _getPackageI18nextProxy(package_name) {\n      // A proxy to TAPi18next.t where the namespace is preset to the package's\n      return (key, options, lang_tag = null) => {\n        // Devs get confused and use lang option instead of lng option, make lang\n        // alias of lng\n        if (((options != null ? options.lang : void 0) != null) && ((options != null ? options.lng : void 0) == null)) {\n          options.lng = options.lang;\n        }\n        if (((options != null ? options.lng : void 0) != null) && (lang_tag == null)) {\n          lang_tag = options.lng;\n          // Remove options.lng so we won't pass it to the regular TAPi18next\n          // before the language specific translator is ready to keep behavior\n          // consistent.\n\n          // If lang is actually ready before the language specifc translator is\n          // ready, TAPi18next will translate to lang_tag if we won't remove\n          // options.lng.\n          delete options.lng;\n        }\n        if (lang_tag != null) {\n          this._prepareLanguageSpecificTranslator(lang_tag);\n          this._languageSpecificTranslatorsTrackers[lang_tag].depend();\n          if (lang_tag in this._languageSpecificTranslators) {\n            return this._languageSpecificTranslators[lang_tag](`${this._getPackageDomain(package_name)}:${key}`, options);\n          } else {\n            return TAPi18next.t(`${this._getPackageDomain(package_name)}:${key}`, options);\n          }\n        }\n        // If inside a reactive computation, we want to invalidate the computation if the client lang changes\n        this._language_changed_tracker.depend();\n        return TAPi18next.t(`${this._getPackageDomain(package_name)}:${key}`, options);\n      };\n    }\n\n    _onceEnabled() {\n      return this._registerHelpers(globals.project_translations_domain);\n    }\n\n    setLanguage(lang_tag) {\n      var isAborted, self;\n      self = this;\n      if (typeof this._abortPreviousSetLang === \"function\") {\n        this._abortPreviousSetLang();\n      }\n      isAborted = false;\n      this._abortPreviousSetLang = function() {\n        return isAborted = true;\n      };\n      return this._loadLanguage(lang_tag).then(() => {\n        if (!isAborted) {\n          TAPi18next.setLng(lang_tag);\n          this._language_changed_tracker.changed();\n          return Session.set(this._loaded_lang_session_key, lang_tag);\n        }\n      });\n    }\n\n    getLanguage() {\n      var session_lang;\n      if (!this._enabled()) {\n        return null;\n      }\n      session_lang = Session.get(this._loaded_lang_session_key);\n      if (session_lang != null) {\n        return session_lang;\n      } else {\n        return this._fallback_language;\n      }\n    }\n\n  };\n\n  TAPi18nClient.prototype._languageSpecificTranslators = null;\n\n  TAPi18nClient.prototype._languageSpecificTranslatorsTrackers = null;\n\n  TAPi18nClient.prototype._abortPreviousSetLang = null;\n\n  return TAPi18nClient;\n\n}).call(this);\n","import TAPi18next from '../tap_i18next/tap_i18next-1.7.3.js'\nimport { globals } from './globals'\n\nfallback_language = globals.fallback_language\n\nTAPi18next.init({ resStore: {}, fallbackLng: globals.fallback_language, useCookie: false });\n\nexport class TAPi18nBase extends EventEmitter\n  _loaded_lang_session_key: \"TAPi18n::loaded_lang\"\n\n  constructor: ->\n    super()\n    @_fallback_language = fallback_language\n\n    @_language_changed_tracker = new Tracker.Dependency\n\n    @_loaded_languages = [fallback_language] # stores the loaded languages, the fallback language is loaded automatically\n\n    @conf = null # If conf isn't null we assume that tap:i18n is enabled for the project.\n              # We assume conf is valid, we sterilize and validate it during the build process.\n\n    @packages = {} # Stores the packages' package-tap.i18n jsons\n\n    @languages_names = {} # Stores languages that we've found languages files for in the project dir.\n                                        # format:\n                                        # {\n                                        #    lang_tag: [lang_name_in_english, lang_name_in_local_language]\n                                        # }\n\n    @translations = {} # Stores the packages/project translations - Server side only\n                    # fallback_language translations are not stored here\n\n\n    if Meteor.isClient\n      Session.set @_loaded_lang_session_key, null\n\n      @_languageSpecificTranslators = {}\n      @_languageSpecificTranslatorsTrackers = {}\n\n    if Meteor.isServer\n      @server_translators = {}\n\n      Meteor.startup =>\n        # If tap-i18n is enabled for that project\n        if @_enabled()\n          @_registerHTTPMethod()\n\n    @__ = @_getPackageI18nextProxy(globals.project_translations_domain)\n\n    TAPi18next.setLng fallback_language\n\n  _enable: (conf) ->\n    # tap:i18n gets enabled for a project once a conf file is set for it.\n    # It can be either a conf object that was set by project-tap.i18n file or\n    # a default conf, which is being added if the project has lang files\n    # (*.i18n.json) but not project-tap.i18n\n    @conf = conf\n\n    @._onceEnabled()\n\n  _onceEnabled: () ->\n    # The arch specific code can use this for procedures that should be performed once\n    # tap:i18n gets enabled (project conf file is being set)\n    return\n\n  _enabled: ->\n    # read the comment of @conf\n    @conf?\n\n  _getPackageDomain: (package_name) ->\n    package_name.replace(/:/g, \"-\")\n\n  addResourceBundle: (lang_tag, package_name, translations) ->\n    TAPi18next.addResourceBundle(lang_tag, @_getPackageDomain(package_name), translations)\n\n  _getSpecificLangTranslator: (lang) ->\n    current_lang = TAPi18next.lng()\n\n    translator = null\n    TAPi18next.setLng lang, {fixLng: true}, (lang_translator) =>\n      translator = lang_translator\n\n    # Restore i18next lang that had been changed in the process of generating\n    # lang specific translator\n    TAPi18next.setLng current_lang\n\n    return translator\n\n  _getProjectLanguages: () ->\n    # Return an array of languages available for the current project\n    if @._enabled()\n      if _.isArray @.conf.supported_languages\n        return _.union([@._fallback_language], @.conf.supported_languages)\n      else\n        # If supported_languages is null, all the languages we found\n        # translations files to in the project level are considered supported.\n        # We use the @.languages_names array to tell which languages we found\n        # since for every i18n.json file we found in the project level we add\n        # an entry for its language to @.languages_names in the build process.\n        #\n        # We also know for certain that when tap-i18n is enabled the fallback\n        # lang is in @.languages_names\n        return _.keys @.languages_names\n    else\n      return [@._fallback_language]\n\n  getLanguages: ->\n    if not @._enabled()\n      return null\n\n    languages = {}\n    for lang_tag in @._getProjectLanguages()\n      languages[lang_tag] =\n        name: @.languages_names[lang_tag][1]\n        en: @.languages_names[lang_tag][0]\n\n    languages\n\n  _loadLangFileObject: (language_tag, data) ->\n    for package_name, package_keys of data\n      # Translations that are added by loadTranslations() have higher priority\n      package_keys = _.extend({}, package_keys, @_loadTranslations_cache[language_tag]?[package_name] or {})\n\n      @addResourceBundle(language_tag, package_name, package_keys)\n\n  _loadTranslations_cache: {}\n  loadTranslations: (translations, namespace) ->\n    project_languages = @_getProjectLanguages()\n\n    for language_tag, translation_keys of translations\n      if not @_loadTranslations_cache[language_tag]?\n        @_loadTranslations_cache[language_tag] = {}\n\n      if not @_loadTranslations_cache[language_tag][namespace]?\n        @_loadTranslations_cache[language_tag][namespace] = {}\n\n      _.extend(@_loadTranslations_cache[language_tag][namespace], translation_keys)\n\n      @addResourceBundle(language_tag, namespace, translation_keys)\n\n      if Meteor.isClient and @getLanguage() == language_tag\n        # Retranslate if session language updated\n        @_language_changed_tracker.changed()\n","var fallback_language;\n\nimport TAPi18next from '../tap_i18next/tap_i18next-1.7.3.js';\n\nimport {\n  globals\n} from './globals';\n\nfallback_language = globals.fallback_language;\n\nTAPi18next.init({\n  resStore: {},\n  fallbackLng: globals.fallback_language,\n  useCookie: false\n});\n\nexport var TAPi18nBase = (function() {\n  class TAPi18nBase extends EventEmitter {\n    constructor() {\n      super();\n      this._fallback_language = fallback_language;\n      this._language_changed_tracker = new Tracker.Dependency;\n      this._loaded_languages = [fallback_language]; // stores the loaded languages, the fallback language is loaded automatically\n      this.conf = null; // If conf isn't null we assume that tap:i18n is enabled for the project.\n      // We assume conf is valid, we sterilize and validate it during the build process.\n      this.packages = {}; // Stores the packages' package-tap.i18n jsons\n      this.languages_names = {}; // Stores languages that we've found languages files for in the project dir.\n      // format:\n      // {\n      //    lang_tag: [lang_name_in_english, lang_name_in_local_language]\n      // }\n      this.translations = {}; // Stores the packages/project translations - Server side only\n      // fallback_language translations are not stored here\n      if (Meteor.isClient) {\n        Session.set(this._loaded_lang_session_key, null);\n        this._languageSpecificTranslators = {};\n        this._languageSpecificTranslatorsTrackers = {};\n      }\n      if (Meteor.isServer) {\n        this.server_translators = {};\n        Meteor.startup(() => {\n          // If tap-i18n is enabled for that project\n          if (this._enabled()) {\n            return this._registerHTTPMethod();\n          }\n        });\n      }\n      this.__ = this._getPackageI18nextProxy(globals.project_translations_domain);\n      TAPi18next.setLng(fallback_language);\n    }\n\n    _enable(conf) {\n      // tap:i18n gets enabled for a project once a conf file is set for it.\n      // It can be either a conf object that was set by project-tap.i18n file or\n      // a default conf, which is being added if the project has lang files\n      // (*.i18n.json) but not project-tap.i18n\n      this.conf = conf;\n      return this._onceEnabled();\n    }\n\n    _onceEnabled() {}\n\n    // The arch specific code can use this for procedures that should be performed once\n    // tap:i18n gets enabled (project conf file is being set)\n    _enabled() {\n      // read the comment of @conf\n      return this.conf != null;\n    }\n\n    _getPackageDomain(package_name) {\n      return package_name.replace(/:/g, \"-\");\n    }\n\n    addResourceBundle(lang_tag, package_name, translations) {\n      return TAPi18next.addResourceBundle(lang_tag, this._getPackageDomain(package_name), translations);\n    }\n\n    _getSpecificLangTranslator(lang) {\n      var current_lang, translator;\n      current_lang = TAPi18next.lng();\n      translator = null;\n      TAPi18next.setLng(lang, {\n        fixLng: true\n      }, (lang_translator) => {\n        return translator = lang_translator;\n      });\n      // Restore i18next lang that had been changed in the process of generating\n      // lang specific translator\n      TAPi18next.setLng(current_lang);\n      return translator;\n    }\n\n    _getProjectLanguages() {\n      // Return an array of languages available for the current project\n      if (this._enabled()) {\n        if (_.isArray(this.conf.supported_languages)) {\n          return _.union([this._fallback_language], this.conf.supported_languages);\n        } else {\n          // If supported_languages is null, all the languages we found\n          // translations files to in the project level are considered supported.\n          // We use the @.languages_names array to tell which languages we found\n          // since for every i18n.json file we found in the project level we add\n          // an entry for its language to @.languages_names in the build process.\n\n          // We also know for certain that when tap-i18n is enabled the fallback\n          // lang is in @.languages_names\n          return _.keys(this.languages_names);\n        }\n      } else {\n        return [this._fallback_language];\n      }\n    }\n\n    getLanguages() {\n      var i, lang_tag, languages, len, ref;\n      if (!this._enabled()) {\n        return null;\n      }\n      languages = {};\n      ref = this._getProjectLanguages();\n      for (i = 0, len = ref.length; i < len; i++) {\n        lang_tag = ref[i];\n        languages[lang_tag] = {\n          name: this.languages_names[lang_tag][1],\n          en: this.languages_names[lang_tag][0]\n        };\n      }\n      return languages;\n    }\n\n    _loadLangFileObject(language_tag, data) {\n      var package_keys, package_name, ref, results;\n      results = [];\n      for (package_name in data) {\n        package_keys = data[package_name];\n        // Translations that are added by loadTranslations() have higher priority\n        package_keys = _.extend({}, package_keys, ((ref = this._loadTranslations_cache[language_tag]) != null ? ref[package_name] : void 0) || {});\n        results.push(this.addResourceBundle(language_tag, package_name, package_keys));\n      }\n      return results;\n    }\n\n    loadTranslations(translations, namespace) {\n      var language_tag, project_languages, results, translation_keys;\n      project_languages = this._getProjectLanguages();\n      results = [];\n      for (language_tag in translations) {\n        translation_keys = translations[language_tag];\n        if (this._loadTranslations_cache[language_tag] == null) {\n          this._loadTranslations_cache[language_tag] = {};\n        }\n        if (this._loadTranslations_cache[language_tag][namespace] == null) {\n          this._loadTranslations_cache[language_tag][namespace] = {};\n        }\n        _.extend(this._loadTranslations_cache[language_tag][namespace], translation_keys);\n        this.addResourceBundle(language_tag, namespace, translation_keys);\n        if (Meteor.isClient && this.getLanguage() === language_tag) {\n          // Retranslate if session language updated\n          results.push(this._language_changed_tracker.changed());\n        } else {\n          results.push(void 0);\n        }\n      }\n      return results;\n    }\n\n  };\n\n  TAPi18nBase.prototype._loaded_lang_session_key = \"TAPi18n::loaded_lang\";\n\n  TAPi18nBase.prototype._loadTranslations_cache = {};\n\n  return TAPi18nBase;\n\n}).call(this);\n","import { TAPi18nClient } from './lib/tap_i18n/tap_i18n-client';\n\nexport const TAPi18n = new TAPi18nClient();\n"]}}]