[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar Tracker = Package.tracker.Tracker;\nvar Deps = Package.tracker.Deps;\nvar check = Package.check.check;\nvar Match = Package.check.Match;\nvar ObserveSequence = Package['observe-sequence'].ObserveSequence;\nvar ReactiveVar = Package['reactive-var'].ReactiveVar;\nvar OrderedDict = Package['ordered-dict'].OrderedDict;\nvar HTML = Package.htmljs.HTML;\nvar meteorInstall = Package.modules.meteorInstall;\nvar meteorBabelHelpers = Package.modules.meteorBabelHelpers;\nvar Promise = Package.promise.Promise;\nvar Symbol = Package['ecmascript-runtime-client'].Symbol;\nvar Map = Package['ecmascript-runtime-client'].Map;\nvar Set = Package['ecmascript-runtime-client'].Set;\n\n/* Package-scope variables */\nvar Blaze, AttributeHandler, ElementAttributesUpdater, UI, Handlebars;\n\nvar require = meteorInstall({\"node_modules\":{\"meteor\":{\"blaze\":{\"preamble.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/preamble.js                                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/**\n * @namespace Blaze\n * @summary The namespace for all Blaze-related methods and classes.\n */\nBlaze = {}; // Utility to HTML-escape a string.  Included for legacy reasons.\n// TODO: Should be replaced with _.escape once underscore is upgraded to a newer\n//       version which escapes ` (backtick) as well. Underscore 1.5.2 does not.\n\nBlaze._escape = function () {\n  var escape_map = {\n    \"<\": \"&lt;\",\n    \">\": \"&gt;\",\n    '\"': \"&quot;\",\n    \"'\": \"&#x27;\",\n    \"/\": \"&#x2F;\",\n    \"`\": \"&#x60;\",\n\n    /* IE allows backtick-delimited attributes?? */\n    \"&\": \"&amp;\"\n  };\n\n  var escape_one = function (c) {\n    return escape_map[c];\n  };\n\n  return function (x) {\n    return x.replace(/[&<>\"'`]/g, escape_one);\n  };\n}();\n\nBlaze._warn = function (msg) {\n  msg = 'Warning: ' + msg;\n\n  if (typeof console !== 'undefined' && console.warn) {\n    console.warn(msg);\n  }\n};\n\nvar nativeBind = Function.prototype.bind; // An implementation of _.bind which allows better optimization.\n// See: https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#3-managing-arguments\n\nif (nativeBind) {\n  Blaze._bind = function (func, obj) {\n    if (arguments.length === 2) {\n      return nativeBind.call(func, obj);\n    } // Copy the arguments so this function can be optimized.\n\n\n    var args = new Array(arguments.length);\n\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    return nativeBind.apply(func, args.slice(1));\n  };\n} else {\n  // A slower but backwards compatible version.\n  Blaze._bind = function (objA, objB) {\n    objA.bind(objB);\n  };\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"dombackend.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/dombackend.js                                                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar DOMBackend = {};\nBlaze._DOMBackend = DOMBackend;\nvar $jq = typeof jQuery !== 'undefined' ? jQuery : typeof Package !== 'undefined' ? Package.jquery && Package.jquery.jQuery : null;\nif (!$jq) throw new Error(\"jQuery not found\");\nDOMBackend._$jq = $jq;\n\nDOMBackend.parseHTML = function (html) {\n  // Return an array of nodes.\n  //\n  // jQuery does fancy stuff like creating an appropriate\n  // container element and setting innerHTML on it, as well\n  // as working around various IE quirks.\n  return $jq.parseHTML(html) || [];\n};\n\nDOMBackend.Events = {\n  // `selector` is non-null.  `type` is one type (but\n  // may be in backend-specific form, e.g. have namespaces).\n  // Order fired must be order bound.\n  delegateEvents: function (elem, type, selector, handler) {\n    $jq(elem).on(type, selector, handler);\n  },\n  undelegateEvents: function (elem, type, handler) {\n    $jq(elem).off(type, '**', handler);\n  },\n  bindEventCapturer: function (elem, type, selector, handler) {\n    var $elem = $jq(elem);\n\n    var wrapper = function (event) {\n      event = $jq.event.fix(event);\n      event.currentTarget = event.target; // Note: It might improve jQuery interop if we called into jQuery\n      // here somehow.  Since we don't use jQuery to dispatch the event,\n      // we don't fire any of jQuery's event hooks or anything.  However,\n      // since jQuery can't bind capturing handlers, it's not clear\n      // where we would hook in.  Internal jQuery functions like `dispatch`\n      // are too high-level.\n\n      var $target = $jq(event.currentTarget);\n      if ($target.is($elem.find(selector))) handler.call(elem, event);\n    };\n\n    handler._meteorui_wrapper = wrapper;\n    type = DOMBackend.Events.parseEventType(type); // add *capturing* event listener\n\n    elem.addEventListener(type, wrapper, true);\n  },\n  unbindEventCapturer: function (elem, type, handler) {\n    type = DOMBackend.Events.parseEventType(type);\n    elem.removeEventListener(type, handler._meteorui_wrapper, true);\n  },\n  parseEventType: function (type) {\n    // strip off namespaces\n    var dotLoc = type.indexOf('.');\n    if (dotLoc >= 0) return type.slice(0, dotLoc);\n    return type;\n  }\n}; ///// Removal detection and interoperability.\n// For an explanation of this technique, see:\n// http://bugs.jquery.com/ticket/12213#comment:23 .\n//\n// In short, an element is considered \"removed\" when jQuery\n// cleans up its *private* userdata on the element,\n// which we can detect using a custom event with a teardown\n// hook.\n\nvar NOOP = function () {}; // Circular doubly-linked list\n\n\nvar TeardownCallback = function (func) {\n  this.next = this;\n  this.prev = this;\n  this.func = func;\n}; // Insert newElt before oldElt in the circular list\n\n\nTeardownCallback.prototype.linkBefore = function (oldElt) {\n  this.prev = oldElt.prev;\n  this.next = oldElt;\n  oldElt.prev.next = this;\n  oldElt.prev = this;\n};\n\nTeardownCallback.prototype.unlink = function () {\n  this.prev.next = this.next;\n  this.next.prev = this.prev;\n};\n\nTeardownCallback.prototype.go = function () {\n  var func = this.func;\n  func && func();\n};\n\nTeardownCallback.prototype.stop = TeardownCallback.prototype.unlink;\nDOMBackend.Teardown = {\n  _JQUERY_EVENT_NAME: 'blaze_teardown_watcher',\n  _CB_PROP: '$blaze_teardown_callbacks',\n  // Registers a callback function to be called when the given element or\n  // one of its ancestors is removed from the DOM via the backend library.\n  // The callback function is called at most once, and it receives the element\n  // in question as an argument.\n  onElementTeardown: function (elem, func) {\n    var elt = new TeardownCallback(func);\n    var propName = DOMBackend.Teardown._CB_PROP;\n\n    if (!elem[propName]) {\n      // create an empty node that is never unlinked\n      elem[propName] = new TeardownCallback(); // Set up the event, only the first time.\n\n      $jq(elem).on(DOMBackend.Teardown._JQUERY_EVENT_NAME, NOOP);\n    }\n\n    elt.linkBefore(elem[propName]);\n    return elt; // so caller can call stop()\n  },\n  // Recursively call all teardown hooks, in the backend and registered\n  // through DOMBackend.onElementTeardown.\n  tearDownElement: function (elem) {\n    var elems = []; // Array.prototype.slice.call doesn't work when given a NodeList in\n    // IE8 (\"JScript object expected\").\n\n    var nodeList = elem.getElementsByTagName('*');\n\n    for (var i = 0; i < nodeList.length; i++) {\n      elems.push(nodeList[i]);\n    }\n\n    elems.push(elem);\n    $jq.cleanData(elems);\n  }\n};\n$jq.event.special[DOMBackend.Teardown._JQUERY_EVENT_NAME] = {\n  setup: function () {// This \"setup\" callback is important even though it is empty!\n    // Without it, jQuery will call addEventListener, which is a\n    // performance hit, especially with Chrome's async stack trace\n    // feature enabled.\n  },\n  teardown: function () {\n    var elem = this;\n    var callbacks = elem[DOMBackend.Teardown._CB_PROP];\n\n    if (callbacks) {\n      var elt = callbacks.next;\n\n      while (elt !== callbacks) {\n        elt.go();\n        elt = elt.next;\n      }\n\n      callbacks.go();\n      elem[DOMBackend.Teardown._CB_PROP] = null;\n    }\n  }\n}; // Must use jQuery semantics for `context`, not\n// querySelectorAll's.  In other words, all the parts\n// of `selector` must be found under `context`.\n\nDOMBackend.findBySelector = function (selector, context) {\n  return $jq(selector, context);\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"domrange.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/domrange.js                                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n// A constant empty array (frozen if the JS engine supports it).\nvar _emptyArray = Object.freeze ? Object.freeze([]) : []; // `[new] Blaze._DOMRange([nodeAndRangeArray])`\n//\n// A DOMRange consists of an array of consecutive nodes and DOMRanges,\n// which may be replaced at any time with a new array.  If the DOMRange\n// has been attached to the DOM at some location, then updating\n// the array will cause the DOM to be updated at that location.\n\n\nBlaze._DOMRange = function (nodeAndRangeArray) {\n  if (!(this instanceof DOMRange)) // called without `new`\n    return new DOMRange(nodeAndRangeArray);\n  var members = nodeAndRangeArray || _emptyArray;\n  if (!(members && typeof members.length === 'number')) throw new Error(\"Expected array\");\n\n  for (var i = 0; i < members.length; i++) {\n    this._memberIn(members[i]);\n  }\n\n  this.members = members;\n  this.emptyRangePlaceholder = null;\n  this.attached = false;\n  this.parentElement = null;\n  this.parentRange = null;\n  this.attachedCallbacks = _emptyArray;\n};\n\nvar DOMRange = Blaze._DOMRange; // In IE 8, don't use empty text nodes as placeholders\n// in empty DOMRanges, use comment nodes instead.  Using\n// empty text nodes in modern browsers is great because\n// it doesn't clutter the web inspector.  In IE 8, however,\n// it seems to lead in some roundabout way to the OAuth\n// pop-up crashing the browser completely.  In the past,\n// we didn't use empty text nodes on IE 8 because they\n// don't accept JS properties, so just use the same logic\n// even though we don't need to set properties on the\n// placeholder anymore.\n\nDOMRange._USE_COMMENT_PLACEHOLDERS = function () {\n  var result = false;\n  var textNode = document.createTextNode(\"\");\n\n  try {\n    textNode.someProp = true;\n  } catch (e) {\n    // IE 8\n    result = true;\n  }\n\n  return result;\n}(); // static methods\n\n\nDOMRange._insert = function (rangeOrNode, parentElement, nextNode, _isMove) {\n  var m = rangeOrNode;\n\n  if (m instanceof DOMRange) {\n    m.attach(parentElement, nextNode, _isMove);\n  } else {\n    if (_isMove) DOMRange._moveNodeWithHooks(m, parentElement, nextNode);else DOMRange._insertNodeWithHooks(m, parentElement, nextNode);\n  }\n};\n\nDOMRange._remove = function (rangeOrNode) {\n  var m = rangeOrNode;\n\n  if (m instanceof DOMRange) {\n    m.detach();\n  } else {\n    DOMRange._removeNodeWithHooks(m);\n  }\n};\n\nDOMRange._removeNodeWithHooks = function (n) {\n  if (!n.parentNode) return;\n\n  if (n.nodeType === 1 && n.parentNode._uihooks && n.parentNode._uihooks.removeElement) {\n    n.parentNode._uihooks.removeElement(n);\n  } else {\n    n.parentNode.removeChild(n);\n  }\n};\n\nDOMRange._insertNodeWithHooks = function (n, parent, next) {\n  // `|| null` because IE throws an error if 'next' is undefined\n  next = next || null;\n\n  if (n.nodeType === 1 && parent._uihooks && parent._uihooks.insertElement) {\n    parent._uihooks.insertElement(n, next);\n  } else {\n    parent.insertBefore(n, next);\n  }\n};\n\nDOMRange._moveNodeWithHooks = function (n, parent, next) {\n  if (n.parentNode !== parent) return; // `|| null` because IE throws an error if 'next' is undefined\n\n  next = next || null;\n\n  if (n.nodeType === 1 && parent._uihooks && parent._uihooks.moveElement) {\n    parent._uihooks.moveElement(n, next);\n  } else {\n    parent.insertBefore(n, next);\n  }\n};\n\nDOMRange.forElement = function (elem) {\n  if (elem.nodeType !== 1) throw new Error(\"Expected element, found: \" + elem);\n  var range = null;\n\n  while (elem && !range) {\n    range = elem.$blaze_range || null;\n    if (!range) elem = elem.parentNode;\n  }\n\n  return range;\n};\n\nDOMRange.prototype.attach = function (parentElement, nextNode, _isMove, _isReplace) {\n  // This method is called to insert the DOMRange into the DOM for\n  // the first time, but it's also used internally when\n  // updating the DOM.\n  //\n  // If _isMove is true, move this attached range to a different\n  // location under the same parentElement.\n  if (_isMove || _isReplace) {\n    if (!(this.parentElement === parentElement && this.attached)) throw new Error(\"Can only move or replace an attached DOMRange, and only under the same parent element\");\n  }\n\n  var members = this.members;\n\n  if (members.length) {\n    this.emptyRangePlaceholder = null;\n\n    for (var i = 0; i < members.length; i++) {\n      DOMRange._insert(members[i], parentElement, nextNode, _isMove);\n    }\n  } else {\n    var placeholder = DOMRange._USE_COMMENT_PLACEHOLDERS ? document.createComment(\"\") : document.createTextNode(\"\");\n    this.emptyRangePlaceholder = placeholder;\n    parentElement.insertBefore(placeholder, nextNode || null);\n  }\n\n  this.attached = true;\n  this.parentElement = parentElement;\n\n  if (!(_isMove || _isReplace)) {\n    for (var i = 0; i < this.attachedCallbacks.length; i++) {\n      var obj = this.attachedCallbacks[i];\n      obj.attached && obj.attached(this, parentElement);\n    }\n  }\n};\n\nDOMRange.prototype.setMembers = function (newNodeAndRangeArray) {\n  var newMembers = newNodeAndRangeArray;\n  if (!(newMembers && typeof newMembers.length === 'number')) throw new Error(\"Expected array\");\n  var oldMembers = this.members;\n\n  for (var i = 0; i < oldMembers.length; i++) {\n    this._memberOut(oldMembers[i]);\n  }\n\n  for (var i = 0; i < newMembers.length; i++) {\n    this._memberIn(newMembers[i]);\n  }\n\n  if (!this.attached) {\n    this.members = newMembers;\n  } else {\n    // don't do anything if we're going from empty to empty\n    if (newMembers.length || oldMembers.length) {\n      // detach the old members and insert the new members\n      var nextNode = this.lastNode().nextSibling;\n      var parentElement = this.parentElement; // Use detach/attach, but don't fire attached/detached hooks\n\n      this.detach(true\n      /*_isReplace*/\n      );\n      this.members = newMembers;\n      this.attach(parentElement, nextNode, false, true\n      /*_isReplace*/\n      );\n    }\n  }\n};\n\nDOMRange.prototype.firstNode = function () {\n  if (!this.attached) throw new Error(\"Must be attached\");\n  if (!this.members.length) return this.emptyRangePlaceholder;\n  var m = this.members[0];\n  return m instanceof DOMRange ? m.firstNode() : m;\n};\n\nDOMRange.prototype.lastNode = function () {\n  if (!this.attached) throw new Error(\"Must be attached\");\n  if (!this.members.length) return this.emptyRangePlaceholder;\n  var m = this.members[this.members.length - 1];\n  return m instanceof DOMRange ? m.lastNode() : m;\n};\n\nDOMRange.prototype.detach = function (_isReplace) {\n  if (!this.attached) throw new Error(\"Must be attached\");\n  var oldParentElement = this.parentElement;\n  var members = this.members;\n\n  if (members.length) {\n    for (var i = 0; i < members.length; i++) {\n      DOMRange._remove(members[i]);\n    }\n  } else {\n    var placeholder = this.emptyRangePlaceholder;\n    this.parentElement.removeChild(placeholder);\n    this.emptyRangePlaceholder = null;\n  }\n\n  if (!_isReplace) {\n    this.attached = false;\n    this.parentElement = null;\n\n    for (var i = 0; i < this.attachedCallbacks.length; i++) {\n      var obj = this.attachedCallbacks[i];\n      obj.detached && obj.detached(this, oldParentElement);\n    }\n  }\n};\n\nDOMRange.prototype.addMember = function (newMember, atIndex, _isMove) {\n  var members = this.members;\n  if (!(atIndex >= 0 && atIndex <= members.length)) throw new Error(\"Bad index in range.addMember: \" + atIndex);\n  if (!_isMove) this._memberIn(newMember);\n\n  if (!this.attached) {\n    // currently detached; just updated members\n    members.splice(atIndex, 0, newMember);\n  } else if (members.length === 0) {\n    // empty; use the empty-to-nonempty handling of setMembers\n    this.setMembers([newMember]);\n  } else {\n    var nextNode;\n\n    if (atIndex === members.length) {\n      // insert at end\n      nextNode = this.lastNode().nextSibling;\n    } else {\n      var m = members[atIndex];\n      nextNode = m instanceof DOMRange ? m.firstNode() : m;\n    }\n\n    members.splice(atIndex, 0, newMember);\n\n    DOMRange._insert(newMember, this.parentElement, nextNode, _isMove);\n  }\n};\n\nDOMRange.prototype.removeMember = function (atIndex, _isMove) {\n  var members = this.members;\n  if (!(atIndex >= 0 && atIndex < members.length)) throw new Error(\"Bad index in range.removeMember: \" + atIndex);\n\n  if (_isMove) {\n    members.splice(atIndex, 1);\n  } else {\n    var oldMember = members[atIndex];\n\n    this._memberOut(oldMember);\n\n    if (members.length === 1) {\n      // becoming empty; use the logic in setMembers\n      this.setMembers(_emptyArray);\n    } else {\n      members.splice(atIndex, 1);\n      if (this.attached) DOMRange._remove(oldMember);\n    }\n  }\n};\n\nDOMRange.prototype.moveMember = function (oldIndex, newIndex) {\n  var member = this.members[oldIndex];\n  this.removeMember(oldIndex, true\n  /*_isMove*/\n  );\n  this.addMember(member, newIndex, true\n  /*_isMove*/\n  );\n};\n\nDOMRange.prototype.getMember = function (atIndex) {\n  var members = this.members;\n  if (!(atIndex >= 0 && atIndex < members.length)) throw new Error(\"Bad index in range.getMember: \" + atIndex);\n  return this.members[atIndex];\n};\n\nDOMRange.prototype._memberIn = function (m) {\n  if (m instanceof DOMRange) m.parentRange = this;else if (m.nodeType === 1) // DOM Element\n    m.$blaze_range = this;\n};\n\nDOMRange._destroy = function (m, _skipNodes) {\n  if (m instanceof DOMRange) {\n    if (m.view) Blaze._destroyView(m.view, _skipNodes);\n  } else if (!_skipNodes && m.nodeType === 1) {\n    // DOM Element\n    if (m.$blaze_range) {\n      Blaze._destroyNode(m);\n\n      m.$blaze_range = null;\n    }\n  }\n};\n\nDOMRange.prototype._memberOut = DOMRange._destroy; // Tear down, but don't remove, the members.  Used when chunks\n// of DOM are being torn down or replaced.\n\nDOMRange.prototype.destroyMembers = function (_skipNodes) {\n  var members = this.members;\n\n  for (var i = 0; i < members.length; i++) {\n    this._memberOut(members[i], _skipNodes);\n  }\n};\n\nDOMRange.prototype.destroy = function (_skipNodes) {\n  DOMRange._destroy(this, _skipNodes);\n};\n\nDOMRange.prototype.containsElement = function (elem) {\n  if (!this.attached) throw new Error(\"Must be attached\"); // An element is contained in this DOMRange if it's possible to\n  // reach it by walking parent pointers, first through the DOM and\n  // then parentRange pointers.  In other words, the element or some\n  // ancestor of it is at our level of the DOM (a child of our\n  // parentElement), and this element is one of our members or\n  // is a member of a descendant Range.\n  // First check that elem is a descendant of this.parentElement,\n  // according to the DOM.\n\n  if (!Blaze._elementContains(this.parentElement, elem)) return false; // If elem is not an immediate child of this.parentElement,\n  // walk up to its ancestor that is.\n\n  while (elem.parentNode !== this.parentElement) {\n    elem = elem.parentNode;\n  }\n\n  var range = elem.$blaze_range;\n\n  while (range && range !== this) {\n    range = range.parentRange;\n  }\n\n  return range === this;\n};\n\nDOMRange.prototype.containsRange = function (range) {\n  if (!this.attached) throw new Error(\"Must be attached\");\n  if (!range.attached) return false; // A DOMRange is contained in this DOMRange if it's possible\n  // to reach this range by following parent pointers.  If the\n  // DOMRange has the same parentElement, then it should be\n  // a member, or a member of a member etc.  Otherwise, we must\n  // contain its parentElement.\n\n  if (range.parentElement !== this.parentElement) return this.containsElement(range.parentElement);\n  if (range === this) return false; // don't contain self\n\n  while (range && range !== this) {\n    range = range.parentRange;\n  }\n\n  return range === this;\n};\n\nDOMRange.prototype.onAttached = function (attached) {\n  this.onAttachedDetached({\n    attached: attached\n  });\n}; // callbacks are `attached(range, element)` and\n// `detached(range, element)`, and they may\n// access the `callbacks` object in `this`.\n// The arguments to `detached` are the same\n// range and element that were passed to `attached`.\n\n\nDOMRange.prototype.onAttachedDetached = function (callbacks) {\n  if (this.attachedCallbacks === _emptyArray) this.attachedCallbacks = [];\n  this.attachedCallbacks.push(callbacks);\n};\n\nDOMRange.prototype.$ = function (selector) {\n  var self = this;\n  var parentNode = this.parentElement;\n  if (!parentNode) throw new Error(\"Can't select in removed DomRange\"); // Strategy: Find all selector matches under parentNode,\n  // then filter out the ones that aren't in this DomRange\n  // using `DOMRange#containsElement`.  This is\n  // asymptotically slow in the presence of O(N) sibling\n  // content that is under parentNode but not in our range,\n  // so if performance is an issue, the selector should be\n  // run on a child element.\n  // Since jQuery can't run selectors on a DocumentFragment,\n  // we don't expect findBySelector to work.\n\n  if (parentNode.nodeType === 11\n  /* DocumentFragment */\n  ) throw new Error(\"Can't use $ on an offscreen range\");\n\n  var results = Blaze._DOMBackend.findBySelector(selector, parentNode); // We don't assume `results` has jQuery API; a plain array\n  // should do just as well.  However, if we do have a jQuery\n  // array, we want to end up with one also, so we use\n  // `.filter`.\n  // Function that selects only elements that are actually\n  // in this DomRange, rather than simply descending from\n  // `parentNode`.\n\n\n  var filterFunc = function (elem) {\n    // handle jQuery's arguments to filter, where the node\n    // is in `this` and the index is the first argument.\n    if (typeof elem === 'number') elem = this;\n    return self.containsElement(elem);\n  };\n\n  if (!results.filter) {\n    // not a jQuery array, and not a browser with\n    // Array.prototype.filter (e.g. IE <9)\n    var newResults = [];\n\n    for (var i = 0; i < results.length; i++) {\n      var x = results[i];\n      if (filterFunc(x)) newResults.push(x);\n    }\n\n    results = newResults;\n  } else {\n    // `results.filter` is either jQuery's or ECMAScript's `filter`\n    results = results.filter(filterFunc);\n  }\n\n  return results;\n}; // Returns true if element a contains node b and is not node b.\n//\n// The restriction that `a` be an element (not a document fragment,\n// say) is based on what's easy to implement cross-browser.\n\n\nBlaze._elementContains = function (a, b) {\n  if (a.nodeType !== 1) // ELEMENT\n    return false;\n  if (a === b) return false;\n\n  if (a.compareDocumentPosition) {\n    return a.compareDocumentPosition(b) & 0x10;\n  } else {\n    // Should be only old IE and maybe other old browsers here.\n    // Modern Safari has both functions but seems to get contains() wrong.\n    // IE can't handle b being a text node.  We work around this\n    // by doing a direct parent test now.\n    b = b.parentNode;\n    if (!(b && b.nodeType === 1)) // ELEMENT\n      return false;\n    if (a === b) return true;\n    return a.contains(b);\n  }\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"events.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/events.js                                                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar has;\nmodule.link(\"lodash.has\", {\n  \"default\": function (v) {\n    has = v;\n  }\n}, 0);\nvar EventSupport = Blaze._EventSupport = {};\nvar DOMBackend = Blaze._DOMBackend; // List of events to always delegate, never capture.\n// Since jQuery fakes bubbling for certain events in\n// certain browsers (like `submit`), we don't want to\n// get in its way.\n//\n// We could list all known bubbling\n// events here to avoid creating speculative capturers\n// for them, but it would only be an optimization.\n\nvar eventsToDelegate = EventSupport.eventsToDelegate = {\n  blur: 1,\n  change: 1,\n  click: 1,\n  focus: 1,\n  focusin: 1,\n  focusout: 1,\n  reset: 1,\n  submit: 1\n};\nvar EVENT_MODE = EventSupport.EVENT_MODE = {\n  TBD: 0,\n  BUBBLING: 1,\n  CAPTURING: 2\n};\nvar NEXT_HANDLERREC_ID = 1;\n\nvar HandlerRec = function (elem, type, selector, handler, recipient) {\n  this.elem = elem;\n  this.type = type;\n  this.selector = selector;\n  this.handler = handler;\n  this.recipient = recipient;\n  this.id = NEXT_HANDLERREC_ID++;\n  this.mode = EVENT_MODE.TBD; // It's important that delegatedHandler be a different\n  // instance for each handlerRecord, because its identity\n  // is used to remove it.\n  //\n  // It's also important that the closure have access to\n  // `this` when it is not called with it set.\n\n  this.delegatedHandler = function (h) {\n    return function (evt) {\n      if (!h.selector && evt.currentTarget !== evt.target) // no selector means only fire on target\n        return;\n      return h.handler.apply(h.recipient, arguments);\n    };\n  }(this); // WHY CAPTURE AND DELEGATE: jQuery can't delegate\n  // non-bubbling events, because\n  // event capture doesn't work in IE 8.  However, there\n  // are all sorts of new-fangled non-bubbling events\n  // like \"play\" and \"touchenter\".  We delegate these\n  // events using capture in all browsers except IE 8.\n  // IE 8 doesn't support these events anyway.\n\n\n  var tryCapturing = elem.addEventListener && !has(eventsToDelegate, DOMBackend.Events.parseEventType(type));\n\n  if (tryCapturing) {\n    this.capturingHandler = function (h) {\n      return function (evt) {\n        if (h.mode === EVENT_MODE.TBD) {\n          // must be first time we're called.\n          if (evt.bubbles) {\n            // this type of event bubbles, so don't\n            // get called again.\n            h.mode = EVENT_MODE.BUBBLING;\n            DOMBackend.Events.unbindEventCapturer(h.elem, h.type, h.capturingHandler);\n            return;\n          } else {\n            // this type of event doesn't bubble,\n            // so unbind the delegation, preventing\n            // it from ever firing.\n            h.mode = EVENT_MODE.CAPTURING;\n            DOMBackend.Events.undelegateEvents(h.elem, h.type, h.delegatedHandler);\n          }\n        }\n\n        h.delegatedHandler(evt);\n      };\n    }(this);\n  } else {\n    this.mode = EVENT_MODE.BUBBLING;\n  }\n};\n\nEventSupport.HandlerRec = HandlerRec;\n\nHandlerRec.prototype.bind = function () {\n  // `this.mode` may be EVENT_MODE_TBD, in which case we bind both. in\n  // this case, 'capturingHandler' is in charge of detecting the\n  // correct mode and turning off one or the other handlers.\n  if (this.mode !== EVENT_MODE.BUBBLING) {\n    DOMBackend.Events.bindEventCapturer(this.elem, this.type, this.selector || '*', this.capturingHandler);\n  }\n\n  if (this.mode !== EVENT_MODE.CAPTURING) DOMBackend.Events.delegateEvents(this.elem, this.type, this.selector || '*', this.delegatedHandler);\n};\n\nHandlerRec.prototype.unbind = function () {\n  if (this.mode !== EVENT_MODE.BUBBLING) DOMBackend.Events.unbindEventCapturer(this.elem, this.type, this.capturingHandler);\n  if (this.mode !== EVENT_MODE.CAPTURING) DOMBackend.Events.undelegateEvents(this.elem, this.type, this.delegatedHandler);\n};\n\nEventSupport.listen = function (element, events, selector, handler, recipient, getParentRecipient) {\n  // Prevent this method from being JITed by Safari.  Due to a\n  // presumed JIT bug in Safari -- observed in Version 7.0.6\n  // (9537.78.2) -- this method may crash the Safari render process if\n  // it is JITed.\n  // Repro: https://github.com/dgreensp/public/tree/master/safari-crash\n  try {\n    element = element;\n  } finally {}\n\n  var eventTypes = [];\n  events.replace(/[^ /]+/g, function (e) {\n    eventTypes.push(e);\n  });\n  var newHandlerRecs = [];\n\n  for (var i = 0, N = eventTypes.length; i < N; i++) {\n    var type = eventTypes[i];\n    var eventDict = element.$blaze_events;\n    if (!eventDict) eventDict = element.$blaze_events = {};\n    var info = eventDict[type];\n\n    if (!info) {\n      info = eventDict[type] = {};\n      info.handlers = [];\n    }\n\n    var handlerList = info.handlers;\n    var handlerRec = new HandlerRec(element, type, selector, handler, recipient);\n    newHandlerRecs.push(handlerRec);\n    handlerRec.bind();\n    handlerList.push(handlerRec); // Move handlers of enclosing ranges to end, by unbinding and rebinding\n    // them.  In jQuery (or other DOMBackend) this causes them to fire\n    // later when the backend dispatches event handlers.\n\n    if (getParentRecipient) {\n      for (var r = getParentRecipient(recipient); r; r = getParentRecipient(r)) {\n        // r is an enclosing range (recipient)\n        for (var j = 0, Nj = handlerList.length; j < Nj; j++) {\n          var h = handlerList[j];\n\n          if (h.recipient === r) {\n            h.unbind();\n            h.bind();\n            handlerList.splice(j, 1); // remove handlerList[j]\n\n            handlerList.push(h);\n            j--; // account for removed handler\n\n            Nj--; // don't visit appended handlers\n          }\n        }\n      }\n    }\n  }\n\n  return {\n    // closes over just `element` and `newHandlerRecs`\n    stop: function () {\n      var eventDict = element.$blaze_events;\n      if (!eventDict) return; // newHandlerRecs has only one item unless you specify multiple\n      // event types.  If this code is slow, it's because we have to\n      // iterate over handlerList here.  Clearing a whole handlerList\n      // via stop() methods is O(N^2) in the number of handlers on\n      // an element.\n\n      for (var i = 0; i < newHandlerRecs.length; i++) {\n        var handlerToRemove = newHandlerRecs[i];\n        var info = eventDict[handlerToRemove.type];\n        if (!info) continue;\n        var handlerList = info.handlers;\n\n        for (var j = handlerList.length - 1; j >= 0; j--) {\n          if (handlerList[j] === handlerToRemove) {\n            handlerToRemove.unbind();\n            handlerList.splice(j, 1); // remove handlerList[j]\n          }\n        }\n      }\n\n      newHandlerRecs.length = 0;\n    }\n  };\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"attrs.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/attrs.js                                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar has;\nmodule.link(\"lodash.has\", {\n  \"default\": function (v) {\n    has = v;\n  }\n}, 0);\nvar jsUrlsAllowed = false;\n\nBlaze._allowJavascriptUrls = function () {\n  jsUrlsAllowed = true;\n};\n\nBlaze._javascriptUrlsAllowed = function () {\n  return jsUrlsAllowed;\n}; // An AttributeHandler object is responsible for updating a particular attribute\n// of a particular element.  AttributeHandler subclasses implement\n// browser-specific logic for dealing with particular attributes across\n// different browsers.\n//\n// To define a new type of AttributeHandler, use\n// `var FooHandler = AttributeHandler.extend({ update: function ... })`\n// where the `update` function takes arguments `(element, oldValue, value)`.\n// The `element` argument is always the same between calls to `update` on\n// the same instance.  `oldValue` and `value` are each either `null` or\n// a Unicode string of the type that might be passed to the value argument\n// of `setAttribute` (i.e. not an HTML string with character references).\n// When an AttributeHandler is installed, an initial call to `update` is\n// always made with `oldValue = null`.  The `update` method can access\n// `this.name` if the AttributeHandler class is a generic one that applies\n// to multiple attribute names.\n//\n// AttributeHandlers can store custom properties on `this`, as long as they\n// don't use the names `element`, `name`, `value`, and `oldValue`.\n//\n// AttributeHandlers can't influence how attributes appear in rendered HTML,\n// only how they are updated after materialization as DOM.\n\n\nAttributeHandler = function (name, value) {\n  this.name = name;\n  this.value = value;\n};\n\nBlaze._AttributeHandler = AttributeHandler;\n\nAttributeHandler.prototype.update = function (element, oldValue, value) {\n  if (value === null) {\n    if (oldValue !== null) element.removeAttribute(this.name);\n  } else {\n    element.setAttribute(this.name, value);\n  }\n};\n\nAttributeHandler.extend = function (options) {\n  var curType = this;\n\n  var subType = function () {\n    function AttributeHandlerSubtype() {\n      AttributeHandler.apply(this, arguments);\n    }\n\n    return AttributeHandlerSubtype;\n  }();\n\n  subType.prototype = new curType();\n  subType.extend = curType.extend;\n\n  if (options) {\n    Object.assign(subType.prototype, options);\n  }\n\n  return subType;\n}; /// Apply the diff between the attributes of \"oldValue\" and \"value\" to \"element.\"\n//\n// Each subclass must implement a parseValue method which takes a string\n// as an input and returns an ordered dict of attributes. The keys of the dict\n// are unique identifiers (ie. css properties in the case of styles), and the\n// values are the entire attribute which will be injected into the element.\n//\n// Extended below to support classes, SVG elements and styles.\n\n\nBlaze._DiffingAttributeHandler = AttributeHandler.extend({\n  update: function (element, oldValue, value) {\n    if (!this.getCurrentValue || !this.setValue || !this.parseValue || !this.joinValues) throw new Error(\"Missing methods in subclass of 'DiffingAttributeHandler'\");\n    var oldAttrsMap = oldValue ? this.parseValue(oldValue) : new OrderedDict();\n    var attrsMap = value ? this.parseValue(value) : new OrderedDict(); // the current attributes on the element, which we will mutate.\n\n    var currentAttrString = this.getCurrentValue(element);\n    var currentAttrsMap = currentAttrString ? this.parseValue(currentAttrString) : new OrderedDict(); // Any outside changes to attributes we add at the end.\n\n    currentAttrsMap.forEach(function (value, key, i) {\n      // If the key already exists, we do not use the current value, but the new value.\n      if (attrsMap.has(key)) {\n        return;\n      } // Key does not already exist, but it existed before. Which means it was explicitly\n      // removed, so we do not add it.\n\n\n      if (oldAttrsMap.has(key)) {\n        return;\n      }\n\n      attrsMap.append(key, value);\n    });\n    var values = [];\n    attrsMap.forEach(function (value, key, i) {\n      values.push(value);\n    });\n    this.setValue(element, this.joinValues(values));\n  }\n});\n\nvar ClassHandler = Blaze._DiffingAttributeHandler.extend({\n  // @param rawValue {String}\n  getCurrentValue: function (element) {\n    return element.className;\n  },\n  setValue: function (element, className) {\n    element.className = className;\n  },\n  parseValue: function (attrString) {\n    var tokens = new OrderedDict();\n    attrString.split(' ').forEach(function (token) {\n      if (token) {\n        // Ordered dict requires unique keys.\n        if (!tokens.has(token)) {\n          tokens.append(token, token);\n        }\n      }\n    });\n    return tokens;\n  },\n  joinValues: function (values) {\n    return values.join(' ');\n  }\n});\n\nvar SVGClassHandler = ClassHandler.extend({\n  getCurrentValue: function (element) {\n    return element.className.baseVal;\n  },\n  setValue: function (element, className) {\n    element.setAttribute('class', className);\n  }\n});\n\nvar StyleHandler = Blaze._DiffingAttributeHandler.extend({\n  getCurrentValue: function (element) {\n    return element.getAttribute('style');\n  },\n  setValue: function (element, style) {\n    if (style === '') {\n      element.removeAttribute('style');\n    } else {\n      element.setAttribute('style', style);\n    }\n  },\n  // Parse a string to produce a map from property to attribute string.\n  //\n  // Example:\n  // \"color:red; foo:12px\" produces a token {color: \"color:red\", foo:\"foo:12px\"}\n  parseValue: function (attrString) {\n    var tokens = new OrderedDict(); // Regex for parsing a css attribute declaration, taken from css-parse:\n    // https://github.com/reworkcss/css-parse/blob/7cef3658d0bba872cde05a85339034b187cb3397/index.js#L219\n\n    var regex = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*(?:\\'(?:\\\\\\'|.)*?\\'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+[;\\s]*/g;\n    var match = regex.exec(attrString);\n\n    while (match) {\n      // match[0] = entire matching string\n      // match[1] = css property\n      // Prefix the token to prevent conflicts with existing properties.\n      // We use the last value for the same key.\n      if (tokens.has(match[1])) {\n        tokens.remove(match[1]);\n      }\n\n      tokens.append(match[1], match[0].trim());\n      match = regex.exec(attrString);\n    }\n\n    return tokens;\n  },\n  joinValues: function (values) {\n    // TODO: Assure that there is always ; between values. But what is an example where it breaks?\n    return values.join(' ');\n  }\n});\n\nvar BooleanHandler = AttributeHandler.extend({\n  update: function (element, oldValue, value) {\n    var name = this.name;\n\n    if (value == null) {\n      if (oldValue != null) element[name] = false;\n    } else {\n      element[name] = true;\n    }\n  }\n});\nvar DOMPropertyHandler = AttributeHandler.extend({\n  update: function (element, oldValue, value) {\n    var name = this.name;\n    if (value !== element[name]) element[name] = value;\n  }\n}); // attributes of the type 'xlink:something' should be set using\n// the correct namespace in order to work\n\nvar XlinkHandler = AttributeHandler.extend({\n  update: function (element, oldValue, value) {\n    var NS = 'http://www.w3.org/1999/xlink';\n\n    if (value === null) {\n      if (oldValue !== null) element.removeAttributeNS(NS, this.name);\n    } else {\n      element.setAttributeNS(NS, this.name, this.value);\n    }\n  }\n}); // cross-browser version of `instanceof SVGElement`\n\nvar isSVGElement = function (elem) {\n  return 'ownerSVGElement' in elem;\n};\n\nvar isUrlAttribute = function (tagName, attrName) {\n  // Compiled from http://www.w3.org/TR/REC-html40/index/attributes.html\n  // and\n  // http://www.w3.org/html/wg/drafts/html/master/index.html#attributes-1\n  var urlAttrs = {\n    FORM: ['action'],\n    BODY: ['background'],\n    BLOCKQUOTE: ['cite'],\n    Q: ['cite'],\n    DEL: ['cite'],\n    INS: ['cite'],\n    OBJECT: ['classid', 'codebase', 'data', 'usemap'],\n    APPLET: ['codebase'],\n    A: ['href'],\n    AREA: ['href'],\n    LINK: ['href'],\n    BASE: ['href'],\n    IMG: ['longdesc', 'src', 'usemap'],\n    FRAME: ['longdesc', 'src'],\n    IFRAME: ['longdesc', 'src'],\n    HEAD: ['profile'],\n    SCRIPT: ['src'],\n    INPUT: ['src', 'usemap', 'formaction'],\n    BUTTON: ['formaction'],\n    BASE: ['href'],\n    MENUITEM: ['icon'],\n    HTML: ['manifest'],\n    VIDEO: ['poster']\n  };\n\n  if (attrName === 'itemid') {\n    return true;\n  }\n\n  var urlAttrNames = urlAttrs[tagName] || [];\n  return urlAttrNames.includes(attrName);\n}; // To get the protocol for a URL, we let the browser normalize it for\n// us, by setting it as the href for an anchor tag and then reading out\n// the 'protocol' property.\n\n\nif (Meteor.isClient) {\n  var anchorForNormalization = document.createElement('A');\n}\n\nvar getUrlProtocol = function (url) {\n  if (Meteor.isClient) {\n    anchorForNormalization.href = url;\n    return (anchorForNormalization.protocol || \"\").toLowerCase();\n  } else {\n    throw new Error('getUrlProtocol not implemented on the server');\n  }\n}; // UrlHandler is an attribute handler for all HTML attributes that take\n// URL values. It disallows javascript: URLs, unless\n// Blaze._allowJavascriptUrls() has been called. To detect javascript:\n// urls, we set the attribute on a dummy anchor element and then read\n// out the 'protocol' property of the attribute.\n\n\nvar origUpdate = AttributeHandler.prototype.update;\nvar UrlHandler = AttributeHandler.extend({\n  update: function (element, oldValue, value) {\n    var self = this;\n    var args = arguments;\n\n    if (Blaze._javascriptUrlsAllowed()) {\n      origUpdate.apply(self, args);\n    } else {\n      var isJavascriptProtocol = getUrlProtocol(value) === \"javascript:\";\n      var isVBScriptProtocol = getUrlProtocol(value) === \"vbscript:\";\n\n      if (isJavascriptProtocol || isVBScriptProtocol) {\n        Blaze._warn(\"URLs that use the 'javascript:' or 'vbscript:' protocol are not \" + \"allowed in URL attribute values. \" + \"Call Blaze._allowJavascriptUrls() \" + \"to enable them.\");\n\n        origUpdate.apply(self, [element, oldValue, null]);\n      } else {\n        origUpdate.apply(self, args);\n      }\n    }\n  }\n}); // XXX make it possible for users to register attribute handlers!\n\nBlaze._makeAttributeHandler = function (elem, name, value) {\n  // generally, use setAttribute but certain attributes need to be set\n  // by directly setting a JavaScript property on the DOM element.\n  if (name === 'class') {\n    if (isSVGElement(elem)) {\n      return new SVGClassHandler(name, value);\n    } else {\n      return new ClassHandler(name, value);\n    }\n  } else if (name === 'style') {\n    return new StyleHandler(name, value);\n  } else if (elem.tagName === 'OPTION' && name === 'selected' || elem.tagName === 'INPUT' && name === 'checked' || elem.tagName === 'VIDEO' && name === 'muted') {\n    return new BooleanHandler(name, value);\n  } else if ((elem.tagName === 'TEXTAREA' || elem.tagName === 'INPUT') && name === 'value') {\n    // internally, TEXTAREAs tracks their value in the 'value'\n    // attribute just like INPUTs.\n    return new DOMPropertyHandler(name, value);\n  } else if (name.substring(0, 6) === 'xlink:') {\n    return new XlinkHandler(name.substring(6), value);\n  } else if (isUrlAttribute(elem.tagName, name)) {\n    return new UrlHandler(name, value);\n  } else {\n    return new AttributeHandler(name, value);\n  } // XXX will need one for 'style' on IE, though modern browsers\n  // seem to handle setAttribute ok.\n\n};\n\nElementAttributesUpdater = function (elem) {\n  this.elem = elem;\n  this.handlers = {};\n}; // Update attributes on `elem` to the dictionary `attrs`, whose\n// values are strings.\n\n\nElementAttributesUpdater.prototype.update = function (newAttrs) {\n  var elem = this.elem;\n  var handlers = this.handlers;\n\n  for (var k in meteorBabelHelpers.sanitizeForInObject(handlers)) {\n    if (!has(newAttrs, k)) {\n      // remove attributes (and handlers) for attribute names\n      // that don't exist as keys of `newAttrs` and so won't\n      // be visited when traversing it.  (Attributes that\n      // exist in the `newAttrs` object but are `null`\n      // are handled later.)\n      var handler = handlers[k];\n      var oldValue = handler.value;\n      handler.value = null;\n      handler.update(elem, oldValue, null);\n      delete handlers[k];\n    }\n  }\n\n  for (var k in meteorBabelHelpers.sanitizeForInObject(newAttrs)) {\n    var handler = null;\n    var oldValue = null;\n    var value = newAttrs[k];\n\n    if (!has(handlers, k)) {\n      if (value !== null) {\n        // make new handler\n        handler = Blaze._makeAttributeHandler(elem, k, value);\n        handlers[k] = handler;\n      }\n    } else {\n      handler = handlers[k];\n      oldValue = handler.value;\n    }\n\n    if (oldValue !== value) {\n      handler.value = value;\n      handler.update(elem, oldValue, value);\n      if (value === null) delete handlers[k];\n    }\n  }\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"materializer.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/materializer.js                                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _typeof;\n\nmodule.link(\"@babel/runtime/helpers/typeof\", {\n  default: function (v) {\n    _typeof = v;\n  }\n}, 0);\n\n// Turns HTMLjs into DOM nodes and DOMRanges.\n//\n// - `htmljs`: the value to materialize, which may be any of the htmljs\n//   types (Tag, CharRef, Comment, Raw, array, string, boolean, number,\n//   null, or undefined) or a View or Template (which will be used to\n//   construct a View).\n// - `intoArray`: the array of DOM nodes and DOMRanges to push the output\n//   into (required)\n// - `parentView`: the View we are materializing content for (optional)\n// - `_existingWorkStack`: optional argument, only used for recursive\n//   calls when there is some other _materializeDOM on the call stack.\n//   If _materializeDOM called your function and passed in a workStack,\n//   pass it back when you call _materializeDOM (such as from a workStack\n//   task).\n//\n// Returns `intoArray`, which is especially useful if you pass in `[]`.\nBlaze._materializeDOM = function (htmljs, intoArray, parentView, _existingWorkStack) {\n  // In order to use fewer stack frames, materializeDOMInner can push\n  // tasks onto `workStack`, and they will be popped off\n  // and run, last first, after materializeDOMInner returns.  The\n  // reason we use a stack instead of a queue is so that we recurse\n  // depth-first, doing newer tasks first.\n  var workStack = _existingWorkStack || [];\n  materializeDOMInner(htmljs, intoArray, parentView, workStack);\n\n  if (!_existingWorkStack) {\n    // We created the work stack, so we are responsible for finishing\n    // the work.  Call each \"task\" function, starting with the top\n    // of the stack.\n    while (workStack.length) {\n      // Note that running task() may push new items onto workStack.\n      var task = workStack.pop();\n      task();\n    }\n  }\n\n  return intoArray;\n};\n\nvar materializeDOMInner = function (htmljs, intoArray, parentView, workStack) {\n  if (htmljs == null) {\n    // null or undefined\n    return;\n  }\n\n  switch (_typeof(htmljs)) {\n    case 'string':\n    case 'boolean':\n    case 'number':\n      intoArray.push(document.createTextNode(String(htmljs)));\n      return;\n\n    case 'object':\n      if (htmljs.htmljsType) {\n        switch (htmljs.htmljsType) {\n          case HTML.Tag.htmljsType:\n            intoArray.push(materializeTag(htmljs, parentView, workStack));\n            return;\n\n          case HTML.CharRef.htmljsType:\n            intoArray.push(document.createTextNode(htmljs.str));\n            return;\n\n          case HTML.Comment.htmljsType:\n            intoArray.push(document.createComment(htmljs.sanitizedValue));\n            return;\n\n          case HTML.Raw.htmljsType:\n            // Get an array of DOM nodes by using the browser's HTML parser\n            // (like innerHTML).\n            var nodes = Blaze._DOMBackend.parseHTML(htmljs.value);\n\n            for (var i = 0; i < nodes.length; i++) {\n              intoArray.push(nodes[i]);\n            }\n\n            return;\n        }\n      } else if (HTML.isArray(htmljs)) {\n        for (var i = htmljs.length - 1; i >= 0; i--) {\n          workStack.push(Blaze._bind(Blaze._materializeDOM, null, htmljs[i], intoArray, parentView, workStack));\n        }\n\n        return;\n      } else {\n        if (htmljs instanceof Blaze.Template) {\n          htmljs = htmljs.constructView(); // fall through to Blaze.View case below\n        }\n\n        if (htmljs instanceof Blaze.View) {\n          Blaze._materializeView(htmljs, parentView, workStack, intoArray);\n\n          return;\n        }\n      }\n\n  }\n\n  throw new Error(\"Unexpected object in htmljs: \" + htmljs);\n};\n\nvar materializeTag = function (tag, parentView, workStack) {\n  var tagName = tag.tagName;\n  var elem;\n\n  if ((HTML.isKnownSVGElement(tagName) || isSVGAnchor(tag)) && document.createElementNS) {\n    // inline SVG\n    elem = document.createElementNS('http://www.w3.org/2000/svg', tagName);\n  } else {\n    // normal elements\n    elem = document.createElement(tagName);\n  }\n\n  var rawAttrs = tag.attrs;\n  var children = tag.children;\n\n  if (tagName === 'textarea' && tag.children.length && !(rawAttrs && 'value' in rawAttrs)) {\n    // Provide very limited support for TEXTAREA tags with children\n    // rather than a \"value\" attribute.\n    // Reactivity in the form of Views nested in the tag's children\n    // won't work.  Compilers should compile textarea contents into\n    // the \"value\" attribute of the tag, wrapped in a function if there\n    // is reactivity.\n    if (typeof rawAttrs === 'function' || HTML.isArray(rawAttrs)) {\n      throw new Error(\"Can't have reactive children of TEXTAREA node; \" + \"use the 'value' attribute instead.\");\n    }\n\n    rawAttrs = Object.assign({}, rawAttrs || null);\n    rawAttrs.value = Blaze._expand(children, parentView);\n    children = [];\n  }\n\n  if (rawAttrs) {\n    var attrUpdater = new ElementAttributesUpdater(elem);\n\n    var updateAttributes = function () {\n      var expandedAttrs = Blaze._expandAttributes(rawAttrs, parentView);\n\n      var flattenedAttrs = HTML.flattenAttributes(expandedAttrs);\n      var stringAttrs = {};\n\n      for (var attrName in meteorBabelHelpers.sanitizeForInObject(flattenedAttrs)) {\n        // map `null`, `undefined`, and `false` to null, which is important\n        // so that attributes with nully values are considered absent.\n        // stringify anything else (e.g. strings, booleans, numbers including 0).\n        if (flattenedAttrs[attrName] == null || flattenedAttrs[attrName] === false) stringAttrs[attrName] = null;else stringAttrs[attrName] = Blaze._toText(flattenedAttrs[attrName], parentView, HTML.TEXTMODE.STRING);\n      }\n\n      attrUpdater.update(stringAttrs);\n    };\n\n    var updaterComputation;\n\n    if (parentView) {\n      updaterComputation = parentView.autorun(updateAttributes, undefined, 'updater');\n    } else {\n      updaterComputation = Tracker.nonreactive(function () {\n        return Tracker.autorun(function () {\n          Tracker._withCurrentView(parentView, updateAttributes);\n        });\n      });\n    }\n\n    Blaze._DOMBackend.Teardown.onElementTeardown(elem, function () {\n      function attrTeardown() {\n        updaterComputation.stop();\n      }\n\n      return attrTeardown;\n    }());\n  }\n\n  if (children.length) {\n    var childNodesAndRanges = []; // push this function first so that it's done last\n\n    workStack.push(function () {\n      for (var i = 0; i < childNodesAndRanges.length; i++) {\n        var x = childNodesAndRanges[i];\n        if (x instanceof Blaze._DOMRange) x.attach(elem);else elem.appendChild(x);\n      }\n    }); // now push the task that calculates childNodesAndRanges\n\n    workStack.push(Blaze._bind(Blaze._materializeDOM, null, children, childNodesAndRanges, parentView, workStack));\n  }\n\n  return elem;\n};\n\nvar isSVGAnchor = function (node) {\n  // We generally aren't able to detect SVG <a> elements because\n  // if \"A\" were in our list of known svg element names, then all\n  // <a> nodes would be created using\n  // `document.createElementNS`. But in the special case of <a\n  // xlink:href=\"...\">, we can at least detect that attribute and\n  // create an SVG <a> tag in that case.\n  //\n  // However, we still have a general problem of knowing when to\n  // use document.createElementNS and when to use\n  // document.createElement; for example, font tags will always\n  // be created as SVG elements which can cause other\n  // problems. #1977\n  return node.tagName === \"a\" && node.attrs && node.attrs[\"xlink:href\"] !== undefined;\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"exceptions.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/exceptions.js                                                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar debugFunc; // We call into user code in many places, and it's nice to catch exceptions\n// propagated from user code immediately so that the whole system doesn't just\n// break.  Catching exceptions is easy; reporting them is hard.  This helper\n// reports exceptions.\n//\n// Usage:\n//\n// ```\n// try {\n//   // ... someStuff ...\n// } catch (e) {\n//   reportUIException(e);\n// }\n// ```\n//\n// An optional second argument overrides the default message.\n// Set this to `true` to cause `reportException` to throw\n// the next exception rather than reporting it.  This is\n// useful in unit tests that test error messages.\n\nBlaze._throwNextException = false;\n\nBlaze._reportException = function (e, msg) {\n  if (Blaze._throwNextException) {\n    Blaze._throwNextException = false;\n    throw e;\n  }\n\n  if (!debugFunc) // adapted from Tracker\n    debugFunc = function () {\n      return typeof Meteor !== \"undefined\" ? Meteor._debug : typeof console !== \"undefined\" && console.log ? console.log : function () {};\n    }; // In Chrome, `e.stack` is a multiline string that starts with the message\n  // and contains a stack trace.  Furthermore, `console.log` makes it clickable.\n  // `console.log` supplies the space between the two arguments.\n\n  debugFunc()(msg || 'Exception caught in template:', e.stack || e.message || e);\n};\n\nBlaze._wrapCatchingExceptions = function (f, where) {\n  if (typeof f !== 'function') return f;\n  return function () {\n    try {\n      return f.apply(this, arguments);\n    } catch (e) {\n      Blaze._reportException(e, 'Exception in ' + where + ':');\n    }\n  };\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"view.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/view.js                                                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/// [new] Blaze.View([name], renderMethod)\n///\n/// Blaze.View is the building block of reactive DOM.  Views have\n/// the following features:\n///\n/// * lifecycle callbacks - Views are created, rendered, and destroyed,\n///   and callbacks can be registered to fire when these things happen.\n///\n/// * parent pointer - A View points to its parentView, which is the\n///   View that caused it to be rendered.  These pointers form a\n///   hierarchy or tree of Views.\n///\n/// * render() method - A View's render() method specifies the DOM\n///   (or HTML) content of the View.  If the method establishes\n///   reactive dependencies, it may be re-run.\n///\n/// * a DOMRange - If a View is rendered to DOM, its position and\n///   extent in the DOM are tracked using a DOMRange object.\n///\n/// When a View is constructed by calling Blaze.View, the View is\n/// not yet considered \"created.\"  It doesn't have a parentView yet,\n/// and no logic has been run to initialize the View.  All real\n/// work is deferred until at least creation time, when the onViewCreated\n/// callbacks are fired, which happens when the View is \"used\" in\n/// some way that requires it to be rendered.\n///\n/// ...more lifecycle stuff\n///\n/// `name` is an optional string tag identifying the View.  The only\n/// time it's used is when looking in the View tree for a View of a\n/// particular name; for example, data contexts are stored on Views\n/// of name \"with\".  Names are also useful when debugging, so in\n/// general it's good for functions that create Views to set the name.\n/// Views associated with templates have names of the form \"Template.foo\".\n\n/**\n * @class\n * @summary Constructor for a View, which represents a reactive region of DOM.\n * @locus Client\n * @param {String} [name] Optional.  A name for this type of View.  See [`view.name`](#view_name).\n * @param {Function} renderFunction A function that returns [*renderable content*](#Renderable-Content).  In this function, `this` is bound to the View.\n */\nBlaze.View = function (name, render) {\n  if (!(this instanceof Blaze.View)) // called without `new`\n    return new Blaze.View(name, render);\n\n  if (typeof name === 'function') {\n    // omitted \"name\" argument\n    render = name;\n    name = '';\n  }\n\n  this.name = name;\n  this._render = render;\n  this._callbacks = {\n    created: null,\n    rendered: null,\n    destroyed: null\n  }; // Setting all properties here is good for readability,\n  // and also may help Chrome optimize the code by keeping\n  // the View object from changing shape too much.\n\n  this.isCreated = false;\n  this._isCreatedForExpansion = false;\n  this.isRendered = false;\n  this._isAttached = false;\n  this.isDestroyed = false;\n  this._isInRender = false;\n  this.parentView = null;\n  this._domrange = null; // This flag is normally set to false except for the cases when view's parent\n  // was generated as part of expanding some syntactic sugar expressions or\n  // methods.\n  // Ex.: Blaze.renderWithData is an equivalent to creating a view with regular\n  // Blaze.render and wrapping it into {{#with data}}{{/with}} view. Since the\n  // users don't know anything about these generated parent views, Blaze needs\n  // this information to be available on views to make smarter decisions. For\n  // example: removing the generated parent view with the view on Blaze.remove.\n\n  this._hasGeneratedParent = false; // Bindings accessible to children views (via view.lookup('name')) within the\n  // closest template view.\n\n  this._scopeBindings = {};\n  this.renderCount = 0;\n};\n\nBlaze.View.prototype._render = function () {\n  return null;\n};\n\nBlaze.View.prototype.onViewCreated = function (cb) {\n  this._callbacks.created = this._callbacks.created || [];\n\n  this._callbacks.created.push(cb);\n};\n\nBlaze.View.prototype._onViewRendered = function (cb) {\n  this._callbacks.rendered = this._callbacks.rendered || [];\n\n  this._callbacks.rendered.push(cb);\n};\n\nBlaze.View.prototype.onViewReady = function (cb) {\n  var self = this;\n\n  var fire = function () {\n    Tracker.afterFlush(function () {\n      if (!self.isDestroyed) {\n        Blaze._withCurrentView(self, function () {\n          cb.call(self);\n        });\n      }\n    });\n  };\n\n  self._onViewRendered(function () {\n    function onViewRendered() {\n      if (self.isDestroyed) return;\n      if (!self._domrange.attached) self._domrange.onAttached(fire);else fire();\n    }\n\n    return onViewRendered;\n  }());\n};\n\nBlaze.View.prototype.onViewDestroyed = function (cb) {\n  this._callbacks.destroyed = this._callbacks.destroyed || [];\n\n  this._callbacks.destroyed.push(cb);\n};\n\nBlaze.View.prototype.removeViewDestroyedListener = function (cb) {\n  var destroyed = this._callbacks.destroyed;\n  if (!destroyed) return;\n  var index = destroyed.lastIndexOf(cb);\n\n  if (index !== -1) {\n    // XXX You'd think the right thing to do would be splice, but _fireCallbacks\n    // gets sad if you remove callbacks while iterating over the list.  Should\n    // change this to use callback-hook or EventEmitter or something else that\n    // properly supports removal.\n    destroyed[index] = null;\n  }\n}; /// View#autorun(func)\n///\n/// Sets up a Tracker autorun that is \"scoped\" to this View in two\n/// important ways: 1) Blaze.currentView is automatically set\n/// on every re-run, and 2) the autorun is stopped when the\n/// View is destroyed.  As with Tracker.autorun, the first run of\n/// the function is immediate, and a Computation object that can\n/// be used to stop the autorun is returned.\n///\n/// View#autorun is meant to be called from View callbacks like\n/// onViewCreated, or from outside the rendering process.  It may not\n/// be called before the onViewCreated callbacks are fired (too early),\n/// or from a render() method (too confusing).\n///\n/// Typically, autoruns that update the state\n/// of the View (as in Blaze.With) should be started from an onViewCreated\n/// callback.  Autoruns that update the DOM should be started\n/// from either onViewCreated (guarded against the absence of\n/// view._domrange), or onViewReady.\n\n\nBlaze.View.prototype.autorun = function (f, _inViewScope, displayName) {\n  var self = this; // The restrictions on when View#autorun can be called are in order\n  // to avoid bad patterns, like creating a Blaze.View and immediately\n  // calling autorun on it.  A freshly created View is not ready to\n  // have logic run on it; it doesn't have a parentView, for example.\n  // It's when the View is materialized or expanded that the onViewCreated\n  // handlers are fired and the View starts up.\n  //\n  // Letting the render() method call `this.autorun()` is problematic\n  // because of re-render.  The best we can do is to stop the old\n  // autorun and start a new one for each render, but that's a pattern\n  // we try to avoid internally because it leads to helpers being\n  // called extra times, in the case where the autorun causes the\n  // view to re-render (and thus the autorun to be torn down and a\n  // new one established).\n  //\n  // We could lift these restrictions in various ways.  One interesting\n  // idea is to allow you to call `view.autorun` after instantiating\n  // `view`, and automatically wrap it in `view.onViewCreated`, deferring\n  // the autorun so that it starts at an appropriate time.  However,\n  // then we can't return the Computation object to the caller, because\n  // it doesn't exist yet.\n\n  if (!self.isCreated) {\n    throw new Error(\"View#autorun must be called from the created callback at the earliest\");\n  }\n\n  if (this._isInRender) {\n    throw new Error(\"Can't call View#autorun from inside render(); try calling it from the created or rendered callback\");\n  }\n\n  var templateInstanceFunc = Blaze.Template._currentTemplateInstanceFunc;\n\n  var func = function () {\n    function viewAutorun(c) {\n      return Blaze._withCurrentView(_inViewScope || self, function () {\n        return Blaze.Template._withTemplateInstanceFunc(templateInstanceFunc, function () {\n          return f.call(self, c);\n        });\n      });\n    }\n\n    return viewAutorun;\n  }(); // Give the autorun function a better name for debugging and profiling.\n  // The `displayName` property is not part of the spec but browsers like Chrome\n  // and Firefox prefer it in debuggers over the name function was declared by.\n\n\n  func.displayName = (self.name || 'anonymous') + ':' + (displayName || 'anonymous');\n  var comp = Tracker.autorun(func);\n\n  var stopComputation = function () {\n    comp.stop();\n  };\n\n  self.onViewDestroyed(stopComputation);\n  comp.onStop(function () {\n    self.removeViewDestroyedListener(stopComputation);\n  });\n  return comp;\n};\n\nBlaze.View.prototype._errorIfShouldntCallSubscribe = function () {\n  var self = this;\n\n  if (!self.isCreated) {\n    throw new Error(\"View#subscribe must be called from the created callback at the earliest\");\n  }\n\n  if (self._isInRender) {\n    throw new Error(\"Can't call View#subscribe from inside render(); try calling it from the created or rendered callback\");\n  }\n\n  if (self.isDestroyed) {\n    throw new Error(\"Can't call View#subscribe from inside the destroyed callback, try calling it inside created or rendered.\");\n  }\n};\n/**\n * Just like Blaze.View#autorun, but with Meteor.subscribe instead of\n * Tracker.autorun. Stop the subscription when the view is destroyed.\n * @return {SubscriptionHandle} A handle to the subscription so that you can\n * see if it is ready, or stop it manually\n */\n\n\nBlaze.View.prototype.subscribe = function (args, options) {\n  var self = this;\n  options = options || {};\n\n  self._errorIfShouldntCallSubscribe();\n\n  var subHandle;\n\n  if (options.connection) {\n    subHandle = options.connection.subscribe.apply(options.connection, args);\n  } else {\n    subHandle = Meteor.subscribe.apply(Meteor, args);\n  }\n\n  self.onViewDestroyed(function () {\n    subHandle.stop();\n  });\n  return subHandle;\n};\n\nBlaze.View.prototype.firstNode = function () {\n  if (!this._isAttached) throw new Error(\"View must be attached before accessing its DOM\");\n  return this._domrange.firstNode();\n};\n\nBlaze.View.prototype.lastNode = function () {\n  if (!this._isAttached) throw new Error(\"View must be attached before accessing its DOM\");\n  return this._domrange.lastNode();\n};\n\nBlaze._fireCallbacks = function (view, which) {\n  Blaze._withCurrentView(view, function () {\n    Tracker.nonreactive(function () {\n      function fireCallbacks() {\n        var cbs = view._callbacks[which];\n\n        for (var i = 0, N = cbs && cbs.length; i < N; i++) {\n          cbs[i] && cbs[i].call(view);\n        }\n      }\n\n      return fireCallbacks;\n    }());\n  });\n};\n\nBlaze._createView = function (view, parentView, forExpansion) {\n  if (view.isCreated) throw new Error(\"Can't render the same View twice\");\n  view.parentView = parentView || null;\n  view.isCreated = true;\n  if (forExpansion) view._isCreatedForExpansion = true;\n\n  Blaze._fireCallbacks(view, 'created');\n};\n\nvar doFirstRender = function (view, initialContent) {\n  var domrange = new Blaze._DOMRange(initialContent);\n  view._domrange = domrange;\n  domrange.view = view;\n  view.isRendered = true;\n\n  Blaze._fireCallbacks(view, 'rendered');\n\n  var teardownHook = null;\n  domrange.onAttached(function () {\n    function attached(range, element) {\n      view._isAttached = true;\n      teardownHook = Blaze._DOMBackend.Teardown.onElementTeardown(element, function () {\n        function teardown() {\n          Blaze._destroyView(view, true\n          /* _skipNodes */\n          );\n        }\n\n        return teardown;\n      }());\n    }\n\n    return attached;\n  }()); // tear down the teardown hook\n\n  view.onViewDestroyed(function () {\n    teardownHook && teardownHook.stop();\n    teardownHook = null;\n  });\n  return domrange;\n}; // Take an uncreated View `view` and create and render it to DOM,\n// setting up the autorun that updates the View.  Returns a new\n// DOMRange, which has been associated with the View.\n//\n// The private arguments `_workStack` and `_intoArray` are passed in\n// by Blaze._materializeDOM and are only present for recursive calls\n// (when there is some other _materializeView on the stack).  If\n// provided, then we avoid the mutual recursion of calling back into\n// Blaze._materializeDOM so that deep View hierarchies don't blow the\n// stack.  Instead, we push tasks onto workStack for the initial\n// rendering and subsequent setup of the View, and they are done after\n// we return.  When there is a _workStack, we do not return the new\n// DOMRange, but instead push it into _intoArray from a _workStack\n// task.\n\n\nBlaze._materializeView = function (view, parentView, _workStack, _intoArray) {\n  Blaze._createView(view, parentView);\n\n  var domrange;\n  var lastHtmljs; // We don't expect to be called in a Computation, but just in case,\n  // wrap in Tracker.nonreactive.\n\n  Tracker.nonreactive(function () {\n    view.autorun(function () {\n      function doRender(c) {\n        // `view.autorun` sets the current view.\n        view.renderCount++;\n        view._isInRender = true; // Any dependencies that should invalidate this Computation come\n        // from this line:\n\n        var htmljs = view._render();\n\n        view._isInRender = false;\n\n        if (!c.firstRun && !Blaze._isContentEqual(lastHtmljs, htmljs)) {\n          Tracker.nonreactive(function () {\n            function doMaterialize() {\n              // re-render\n              var rangesAndNodes = Blaze._materializeDOM(htmljs, [], view);\n\n              domrange.setMembers(rangesAndNodes);\n\n              Blaze._fireCallbacks(view, 'rendered');\n            }\n\n            return doMaterialize;\n          }());\n        }\n\n        lastHtmljs = htmljs; // Causes any nested views to stop immediately, not when we call\n        // `setMembers` the next time around the autorun.  Otherwise,\n        // helpers in the DOM tree to be replaced might be scheduled\n        // to re-run before we have a chance to stop them.\n\n        Tracker.onInvalidate(function () {\n          if (domrange) {\n            domrange.destroyMembers();\n          }\n        });\n      }\n\n      return doRender;\n    }(), undefined, 'materialize'); // first render.  lastHtmljs is the first htmljs.\n\n    var initialContents;\n\n    if (!_workStack) {\n      initialContents = Blaze._materializeDOM(lastHtmljs, [], view);\n      domrange = doFirstRender(view, initialContents);\n      initialContents = null; // help GC because we close over this scope a lot\n    } else {\n      // We're being called from Blaze._materializeDOM, so to avoid\n      // recursion and save stack space, provide a description of the\n      // work to be done instead of doing it.  Tasks pushed onto\n      // _workStack will be done in LIFO order after we return.\n      // The work will still be done within a Tracker.nonreactive,\n      // because it will be done by some call to Blaze._materializeDOM\n      // (which is always called in a Tracker.nonreactive).\n      initialContents = []; // push this function first so that it happens last\n\n      _workStack.push(function () {\n        domrange = doFirstRender(view, initialContents);\n        initialContents = null; // help GC because of all the closures here\n\n        _intoArray.push(domrange);\n      }); // now push the task that calculates initialContents\n\n\n      _workStack.push(Blaze._bind(Blaze._materializeDOM, null, lastHtmljs, initialContents, view, _workStack));\n    }\n  });\n\n  if (!_workStack) {\n    return domrange;\n  } else {\n    return null;\n  }\n}; // Expands a View to HTMLjs, calling `render` recursively on all\n// Views and evaluating any dynamic attributes.  Calls the `created`\n// callback, but not the `materialized` or `rendered` callbacks.\n// Destroys the view immediately, unless called in a Tracker Computation,\n// in which case the view will be destroyed when the Computation is\n// invalidated.  If called in a Tracker Computation, the result is a\n// reactive string; that is, the Computation will be invalidated\n// if any changes are made to the view or subviews that might affect\n// the HTML.\n\n\nBlaze._expandView = function (view, parentView) {\n  Blaze._createView(view, parentView, true\n  /*forExpansion*/\n  );\n\n  view._isInRender = true;\n\n  var htmljs = Blaze._withCurrentView(view, function () {\n    return view._render();\n  });\n\n  view._isInRender = false;\n\n  var result = Blaze._expand(htmljs, view);\n\n  if (Tracker.active) {\n    Tracker.onInvalidate(function () {\n      Blaze._destroyView(view);\n    });\n  } else {\n    Blaze._destroyView(view);\n  }\n\n  return result;\n}; // Options: `parentView`\n\n\nBlaze._HTMLJSExpander = HTML.TransformingVisitor.extend();\n\nBlaze._HTMLJSExpander.def({\n  visitObject: function (x) {\n    if (x instanceof Blaze.Template) x = x.constructView();\n    if (x instanceof Blaze.View) return Blaze._expandView(x, this.parentView); // this will throw an error; other objects are not allowed!\n\n    return HTML.TransformingVisitor.prototype.visitObject.call(this, x);\n  },\n  visitAttributes: function (attrs) {\n    // expand dynamic attributes\n    if (typeof attrs === 'function') attrs = Blaze._withCurrentView(this.parentView, attrs); // call super (e.g. for case where `attrs` is an array)\n\n    return HTML.TransformingVisitor.prototype.visitAttributes.call(this, attrs);\n  },\n  visitAttribute: function (name, value, tag) {\n    // expand attribute values that are functions.  Any attribute value\n    // that contains Views must be wrapped in a function.\n    if (typeof value === 'function') value = Blaze._withCurrentView(this.parentView, value);\n    return HTML.TransformingVisitor.prototype.visitAttribute.call(this, name, value, tag);\n  }\n}); // Return Blaze.currentView, but only if it is being rendered\n// (i.e. we are in its render() method).\n\n\nvar currentViewIfRendering = function () {\n  var view = Blaze.currentView;\n  return view && view._isInRender ? view : null;\n};\n\nBlaze._expand = function (htmljs, parentView) {\n  parentView = parentView || currentViewIfRendering();\n  return new Blaze._HTMLJSExpander({\n    parentView: parentView\n  }).visit(htmljs);\n};\n\nBlaze._expandAttributes = function (attrs, parentView) {\n  parentView = parentView || currentViewIfRendering();\n  return new Blaze._HTMLJSExpander({\n    parentView: parentView\n  }).visitAttributes(attrs);\n};\n\nBlaze._destroyView = function (view, _skipNodes) {\n  if (view.isDestroyed) return;\n  view.isDestroyed = true;\n\n  Blaze._fireCallbacks(view, 'destroyed'); // Destroy views and elements recursively.  If _skipNodes,\n  // only recurse up to views, not elements, for the case where\n  // the backend (jQuery) is recursing over the elements already.\n\n\n  if (view._domrange) view._domrange.destroyMembers(_skipNodes);\n};\n\nBlaze._destroyNode = function (node) {\n  if (node.nodeType === 1) Blaze._DOMBackend.Teardown.tearDownElement(node);\n}; // Are the HTMLjs entities `a` and `b` the same?  We could be\n// more elaborate here but the point is to catch the most basic\n// cases.\n\n\nBlaze._isContentEqual = function (a, b) {\n  if (a instanceof HTML.Raw) {\n    return b instanceof HTML.Raw && a.value === b.value;\n  } else if (a == null) {\n    return b == null;\n  } else {\n    return a === b && (typeof a === 'number' || typeof a === 'boolean' || typeof a === 'string');\n  }\n};\n/**\n * @summary The View corresponding to the current template helper, event handler, callback, or autorun.  If there isn't one, `null`.\n * @locus Client\n * @type {Blaze.View}\n */\n\n\nBlaze.currentView = null;\n\nBlaze._withCurrentView = function (view, func) {\n  var oldView = Blaze.currentView;\n\n  try {\n    Blaze.currentView = view;\n    return func();\n  } finally {\n    Blaze.currentView = oldView;\n  }\n}; // Blaze.render publicly takes a View or a Template.\n// Privately, it takes any HTMLJS (extended with Views and Templates)\n// except null or undefined, or a function that returns any extended\n// HTMLJS.\n\n\nvar checkRenderContent = function (content) {\n  if (content === null) throw new Error(\"Can't render null\");\n  if (typeof content === 'undefined') throw new Error(\"Can't render undefined\");\n  if (content instanceof Blaze.View || content instanceof Blaze.Template || typeof content === 'function') return;\n\n  try {\n    // Throw if content doesn't look like HTMLJS at the top level\n    // (i.e. verify that this is an HTML.Tag, or an array,\n    // or a primitive, etc.)\n    new HTML.Visitor().visit(content);\n  } catch (e) {\n    // Make error message suitable for public API\n    throw new Error(\"Expected Template or View\");\n  }\n}; // For Blaze.render and Blaze.toHTML, take content and\n// wrap it in a View, unless it's a single View or\n// Template already.\n\n\nvar contentAsView = function (content) {\n  checkRenderContent(content);\n\n  if (content instanceof Blaze.Template) {\n    return content.constructView();\n  } else if (content instanceof Blaze.View) {\n    return content;\n  } else {\n    var func = content;\n\n    if (typeof func !== 'function') {\n      func = function () {\n        return content;\n      };\n    }\n\n    return Blaze.View('render', func);\n  }\n}; // For Blaze.renderWithData and Blaze.toHTMLWithData, wrap content\n// in a function, if necessary, so it can be a content arg to\n// a Blaze.With.\n\n\nvar contentAsFunc = function (content) {\n  checkRenderContent(content);\n\n  if (typeof content !== 'function') {\n    return function () {\n      return content;\n    };\n  } else {\n    return content;\n  }\n};\n\nBlaze.__rootViews = [];\n/**\n * @summary Renders a template or View to DOM nodes and inserts it into the DOM, returning a rendered [View](#Blaze-View) which can be passed to [`Blaze.remove`](#Blaze-remove).\n * @locus Client\n * @param {Template|Blaze.View} templateOrView The template (e.g. `Template.myTemplate`) or View object to render.  If a template, a View object is [constructed](#template_constructview).  If a View, it must be an unrendered View, which becomes a rendered View and is returned.\n * @param {DOMNode} parentNode The node that will be the parent of the rendered template.  It must be an Element node.\n * @param {DOMNode} [nextNode] Optional. If provided, must be a child of <em>parentNode</em>; the template will be inserted before this node. If not provided, the template will be inserted as the last child of parentNode.\n * @param {Blaze.View} [parentView] Optional. If provided, it will be set as the rendered View's [`parentView`](#view_parentview).\n */\n\nBlaze.render = function (content, parentElement, nextNode, parentView) {\n  if (!parentElement) {\n    Blaze._warn(\"Blaze.render without a parent element is deprecated. \" + \"You must specify where to insert the rendered content.\");\n  }\n\n  if (nextNode instanceof Blaze.View) {\n    // handle omitted nextNode\n    parentView = nextNode;\n    nextNode = null;\n  } // parentElement must be a DOM node. in particular, can't be the\n  // result of a call to `$`. Can't check if `parentElement instanceof\n  // Node` since 'Node' is undefined in IE8.\n\n\n  if (parentElement && typeof parentElement.nodeType !== 'number') throw new Error(\"'parentElement' must be a DOM node\");\n  if (nextNode && typeof nextNode.nodeType !== 'number') // 'nextNode' is optional\n    throw new Error(\"'nextNode' must be a DOM node\");\n  parentView = parentView || currentViewIfRendering();\n  var view = contentAsView(content); // TODO: this is only needed in development\n\n  if (!parentView) {\n    view.onViewCreated(function () {\n      Blaze.__rootViews.push(view);\n    });\n    view.onViewDestroyed(function () {\n      var index = Blaze.__rootViews.indexOf(view);\n\n      if (index > -1) {\n        Blaze.__rootViews.splice(index, 1);\n      }\n    });\n  }\n\n  Blaze._materializeView(view, parentView);\n\n  if (parentElement) {\n    view._domrange.attach(parentElement, nextNode);\n  }\n\n  return view;\n};\n\nBlaze.insert = function (view, parentElement, nextNode) {\n  Blaze._warn(\"Blaze.insert has been deprecated.  Specify where to insert the \" + \"rendered content in the call to Blaze.render.\");\n\n  if (!(view && view._domrange instanceof Blaze._DOMRange)) throw new Error(\"Expected template rendered with Blaze.render\");\n\n  view._domrange.attach(parentElement, nextNode);\n};\n/**\n * @summary Renders a template or View to DOM nodes with a data context.  Otherwise identical to `Blaze.render`.\n * @locus Client\n * @param {Template|Blaze.View} templateOrView The template (e.g. `Template.myTemplate`) or View object to render.\n * @param {Object|Function} data The data context to use, or a function returning a data context.  If a function is provided, it will be reactively re-run.\n * @param {DOMNode} parentNode The node that will be the parent of the rendered template.  It must be an Element node.\n * @param {DOMNode} [nextNode] Optional. If provided, must be a child of <em>parentNode</em>; the template will be inserted before this node. If not provided, the template will be inserted as the last child of parentNode.\n * @param {Blaze.View} [parentView] Optional. If provided, it will be set as the rendered View's [`parentView`](#view_parentview).\n */\n\n\nBlaze.renderWithData = function (content, data, parentElement, nextNode, parentView) {\n  // We defer the handling of optional arguments to Blaze.render.  At this point,\n  // `nextNode` may actually be `parentView`.\n  return Blaze.render(Blaze._TemplateWith(data, contentAsFunc(content)), parentElement, nextNode, parentView);\n};\n/**\n * @summary Removes a rendered View from the DOM, stopping all reactive updates and event listeners on it. Also destroys the Blaze.Template instance associated with the view.\n * @locus Client\n * @param {Blaze.View} renderedView The return value from `Blaze.render` or `Blaze.renderWithData`, or the `view` property of a Blaze.Template instance. Calling `Blaze.remove(Template.instance().view)` from within a template event handler will destroy the view as well as that template and trigger the template's `onDestroyed` handlers.\n */\n\n\nBlaze.remove = function (view) {\n  if (!(view && view._domrange instanceof Blaze._DOMRange)) throw new Error(\"Expected template rendered with Blaze.render\");\n\n  while (view) {\n    if (!view.isDestroyed) {\n      var range = view._domrange;\n      if (range.attached && !range.parentRange) range.detach();\n      range.destroy();\n    }\n\n    view = view._hasGeneratedParent && view.parentView;\n  }\n};\n/**\n * @summary Renders a template or View to a string of HTML.\n * @locus Client\n * @param {Template|Blaze.View} templateOrView The template (e.g. `Template.myTemplate`) or View object from which to generate HTML.\n */\n\n\nBlaze.toHTML = function (content, parentView) {\n  parentView = parentView || currentViewIfRendering();\n  return HTML.toHTML(Blaze._expandView(contentAsView(content), parentView));\n};\n/**\n * @summary Renders a template or View to HTML with a data context.  Otherwise identical to `Blaze.toHTML`.\n * @locus Client\n * @param {Template|Blaze.View} templateOrView The template (e.g. `Template.myTemplate`) or View object from which to generate HTML.\n * @param {Object|Function} data The data context to use, or a function returning a data context.\n */\n\n\nBlaze.toHTMLWithData = function (content, data, parentView) {\n  parentView = parentView || currentViewIfRendering();\n  return HTML.toHTML(Blaze._expandView(Blaze._TemplateWith(data, contentAsFunc(content)), parentView));\n};\n\nBlaze._toText = function (htmljs, parentView, textMode) {\n  if (typeof htmljs === 'function') throw new Error(\"Blaze._toText doesn't take a function, just HTMLjs\");\n\n  if (parentView != null && !(parentView instanceof Blaze.View)) {\n    // omitted parentView argument\n    textMode = parentView;\n    parentView = null;\n  }\n\n  parentView = parentView || currentViewIfRendering();\n  if (!textMode) throw new Error(\"textMode required\");\n  if (!(textMode === HTML.TEXTMODE.STRING || textMode === HTML.TEXTMODE.RCDATA || textMode === HTML.TEXTMODE.ATTRIBUTE)) throw new Error(\"Unknown textMode: \" + textMode);\n  return HTML.toText(Blaze._expand(htmljs, parentView), textMode);\n};\n/**\n * @summary Returns the current data context, or the data context that was used when rendering a particular DOM element or View from a Meteor template.\n * @locus Client\n * @param {DOMElement|Blaze.View} [elementOrView] Optional.  An element that was rendered by a Meteor, or a View.\n */\n\n\nBlaze.getData = function (elementOrView) {\n  var theWith;\n\n  if (!elementOrView) {\n    theWith = Blaze.getView('with');\n  } else if (elementOrView instanceof Blaze.View) {\n    var view = elementOrView;\n    theWith = view.name === 'with' ? view : Blaze.getView(view, 'with');\n  } else if (typeof elementOrView.nodeType === 'number') {\n    if (elementOrView.nodeType !== 1) throw new Error(\"Expected DOM element\");\n    theWith = Blaze.getView(elementOrView, 'with');\n  } else {\n    throw new Error(\"Expected DOM element or View\");\n  }\n\n  return theWith ? theWith.dataVar.get() : null;\n}; // For back-compat\n\n\nBlaze.getElementData = function (element) {\n  Blaze._warn(\"Blaze.getElementData has been deprecated.  Use \" + \"Blaze.getData(element) instead.\");\n\n  if (element.nodeType !== 1) throw new Error(\"Expected DOM element\");\n  return Blaze.getData(element);\n}; // Both arguments are optional.\n\n/**\n * @summary Gets either the current View, or the View enclosing the given DOM element.\n * @locus Client\n * @param {DOMElement} [element] Optional.  If specified, the View enclosing `element` is returned.\n */\n\n\nBlaze.getView = function (elementOrView, _viewName) {\n  var viewName = _viewName;\n\n  if (typeof elementOrView === 'string') {\n    // omitted elementOrView; viewName present\n    viewName = elementOrView;\n    elementOrView = null;\n  } // We could eventually shorten the code by folding the logic\n  // from the other methods into this method.\n\n\n  if (!elementOrView) {\n    return Blaze._getCurrentView(viewName);\n  } else if (elementOrView instanceof Blaze.View) {\n    return Blaze._getParentView(elementOrView, viewName);\n  } else if (typeof elementOrView.nodeType === 'number') {\n    return Blaze._getElementView(elementOrView, viewName);\n  } else {\n    throw new Error(\"Expected DOM element or View\");\n  }\n}; // Gets the current view or its nearest ancestor of name\n// `name`.\n\n\nBlaze._getCurrentView = function (name) {\n  var view = Blaze.currentView; // Better to fail in cases where it doesn't make sense\n  // to use Blaze._getCurrentView().  There will be a current\n  // view anywhere it does.  You can check Blaze.currentView\n  // if you want to know whether there is one or not.\n\n  if (!view) throw new Error(\"There is no current view\");\n\n  if (name) {\n    while (view && view.name !== name) {\n      view = view.parentView;\n    }\n\n    return view || null;\n  } else {\n    // Blaze._getCurrentView() with no arguments just returns\n    // Blaze.currentView.\n    return view;\n  }\n};\n\nBlaze._getParentView = function (view, name) {\n  var v = view.parentView;\n\n  if (name) {\n    while (v && v.name !== name) {\n      v = v.parentView;\n    }\n  }\n\n  return v || null;\n};\n\nBlaze._getElementView = function (elem, name) {\n  var range = Blaze._DOMRange.forElement(elem);\n\n  var view = null;\n\n  while (range && !view) {\n    view = range.view || null;\n\n    if (!view) {\n      if (range.parentRange) range = range.parentRange;else range = Blaze._DOMRange.forElement(range.parentElement);\n    }\n  }\n\n  if (name) {\n    while (view && view.name !== name) {\n      view = view.parentView;\n    }\n\n    return view || null;\n  } else {\n    return view;\n  }\n};\n\nBlaze._addEventMap = function (view, eventMap, thisInHandler) {\n  thisInHandler = thisInHandler || null;\n  var handles = [];\n  if (!view._domrange) throw new Error(\"View must have a DOMRange\");\n\n  view._domrange.onAttached(function () {\n    function attached_eventMaps(range, element) {\n      Object.keys(eventMap).forEach(function (spec) {\n        var handler = eventMap[spec];\n        var clauses = spec.split(/,\\s+/); // iterate over clauses of spec, e.g. ['click .foo', 'click .bar']\n\n        clauses.forEach(function (clause) {\n          var parts = clause.split(/\\s+/);\n          if (parts.length === 0) return;\n          var newEvents = parts.shift();\n          var selector = parts.join(' ');\n          handles.push(Blaze._EventSupport.listen(element, newEvents, selector, function (evt) {\n            if (!range.containsElement(evt.currentTarget)) return null;\n            var handlerThis = thisInHandler || this;\n            var handlerArgs = arguments;\n            return Blaze._withCurrentView(view, function () {\n              return handler.apply(handlerThis, handlerArgs);\n            });\n          }, range, function (r) {\n            return r.parentRange;\n          }));\n        });\n      });\n    }\n\n    return attached_eventMaps;\n  }());\n\n  view.onViewDestroyed(function () {\n    handles.forEach(function (h) {\n      h.stop();\n    });\n    handles.length = 0;\n  });\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"builtins.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/builtins.js                                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _slicedToArray;\n\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 0);\nvar has;\nmodule.link(\"lodash.has\", {\n  \"default\": function (v) {\n    has = v;\n  }\n}, 0);\nvar isObject;\nmodule.link(\"lodash.isobject\", {\n  \"default\": function (v) {\n    isObject = v;\n  }\n}, 1);\n\nBlaze._calculateCondition = function (cond) {\n  if (HTML.isArray(cond) && cond.length === 0) cond = false;\n  return !!cond;\n};\n/**\n * @summary Constructs a View that renders content with a data context.\n * @locus Client\n * @param {Object|Function} data An object to use as the data context, or a function returning such an object.  If a function is provided, it will be reactively re-run.\n * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n */\n\n\nBlaze.With = function (data, contentFunc) {\n  var view = Blaze.View('with', contentFunc);\n  view.dataVar = new ReactiveVar();\n  view.onViewCreated(function () {\n    if (typeof data === 'function') {\n      // `data` is a reactive function\n      view.autorun(function () {\n        view.dataVar.set(data());\n      }, view.parentView, 'setData');\n    } else {\n      view.dataVar.set(data);\n    }\n  });\n  return view;\n};\n/**\n * Attaches bindings to the instantiated view.\n * @param {Object} bindings A dictionary of bindings, each binding name\n * corresponds to a value or a function that will be reactively re-run.\n * @param {View} view The target.\n */\n\n\nBlaze._attachBindingsToView = function (bindings, view) {\n  view.onViewCreated(function () {\n    Object.entries(bindings).forEach(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          name = _ref2[0],\n          binding = _ref2[1];\n\n      view._scopeBindings[name] = new ReactiveVar();\n\n      if (typeof binding === 'function') {\n        view.autorun(function () {\n          view._scopeBindings[name].set(binding());\n        }, view.parentView);\n      } else {\n        view._scopeBindings[name].set(binding);\n      }\n    });\n  });\n};\n/**\n * @summary Constructs a View setting the local lexical scope in the block.\n * @param {Function} bindings Dictionary mapping names of bindings to\n * values or computations to reactively re-run.\n * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n */\n\n\nBlaze.Let = function (bindings, contentFunc) {\n  var view = Blaze.View('let', contentFunc);\n\n  Blaze._attachBindingsToView(bindings, view);\n\n  return view;\n};\n/**\n * @summary Constructs a View that renders content conditionally.\n * @locus Client\n * @param {Function} conditionFunc A function to reactively re-run.  Whether the result is truthy or falsy determines whether `contentFunc` or `elseFunc` is shown.  An empty array is considered falsy.\n * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n * @param {Function} [elseFunc] Optional.  A Function that returns [*renderable content*](#Renderable-Content).  If no `elseFunc` is supplied, no content is shown in the \"else\" case.\n */\n\n\nBlaze.If = function (conditionFunc, contentFunc, elseFunc, _not) {\n  var conditionVar = new ReactiveVar();\n  var view = Blaze.View(_not ? 'unless' : 'if', function () {\n    return conditionVar.get() ? contentFunc() : elseFunc ? elseFunc() : null;\n  });\n  view.__conditionVar = conditionVar;\n  view.onViewCreated(function () {\n    this.autorun(function () {\n      var cond = Blaze._calculateCondition(conditionFunc());\n\n      conditionVar.set(_not ? !cond : cond);\n    }, this.parentView, 'condition');\n  });\n  return view;\n};\n/**\n * @summary An inverted [`Blaze.If`](#Blaze-If).\n * @locus Client\n * @param {Function} conditionFunc A function to reactively re-run.  If the result is falsy, `contentFunc` is shown, otherwise `elseFunc` is shown.  An empty array is considered falsy.\n * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n * @param {Function} [elseFunc] Optional.  A Function that returns [*renderable content*](#Renderable-Content).  If no `elseFunc` is supplied, no content is shown in the \"else\" case.\n */\n\n\nBlaze.Unless = function (conditionFunc, contentFunc, elseFunc) {\n  return Blaze.If(conditionFunc, contentFunc, elseFunc, true\n  /*_not*/\n  );\n};\n/**\n * @summary Constructs a View that renders `contentFunc` for each item in a sequence.\n * @locus Client\n * @param {Function} argFunc A function to reactively re-run. The function can\n * return one of two options:\n *\n * 1. An object with two fields: '_variable' and '_sequence'. Each iterates over\n *   '_sequence', it may be a Cursor, an array, null, or undefined. Inside the\n *   Each body you will be able to get the current item from the sequence using\n *   the name specified in the '_variable' field.\n *\n * 2. Just a sequence (Cursor, array, null, or undefined) not wrapped into an\n *   object. Inside the Each body, the current item will be set as the data\n *   context.\n * @param {Function} contentFunc A Function that returns  [*renderable\n * content*](#Renderable-Content).\n * @param {Function} [elseFunc] A Function that returns [*renderable\n * content*](#Renderable-Content) to display in the case when there are no items\n * in the sequence.\n */\n\n\nBlaze.Each = function (argFunc, contentFunc, elseFunc) {\n  var eachView = Blaze.View('each', function () {\n    var subviews = this.initialSubviews;\n    this.initialSubviews = null;\n\n    if (this._isCreatedForExpansion) {\n      this.expandedValueDep = new Tracker.Dependency();\n      this.expandedValueDep.depend();\n    }\n\n    return subviews;\n  });\n  eachView.initialSubviews = [];\n  eachView.numItems = 0;\n  eachView.inElseMode = false;\n  eachView.stopHandle = null;\n  eachView.contentFunc = contentFunc;\n  eachView.elseFunc = elseFunc;\n  eachView.argVar = new ReactiveVar();\n  eachView.variableName = null; // update the @index value in the scope of all subviews in the range\n\n  var updateIndices = function (from, to) {\n    if (to === undefined) {\n      to = eachView.numItems - 1;\n    }\n\n    for (var i = from; i <= to; i++) {\n      var view = eachView._domrange.members[i].view;\n\n      view._scopeBindings['@index'].set(i);\n    }\n  };\n\n  eachView.onViewCreated(function () {\n    // We evaluate argFunc in an autorun to make sure\n    // Blaze.currentView is always set when it runs (rather than\n    // passing argFunc straight to ObserveSequence).\n    eachView.autorun(function () {\n      // argFunc can return either a sequence as is or a wrapper object with a\n      // _sequence and _variable fields set.\n      var arg = argFunc();\n\n      if (isObject(arg) && has(arg, '_sequence')) {\n        eachView.variableName = arg._variable || null;\n        arg = arg._sequence;\n      }\n\n      eachView.argVar.set(arg);\n    }, eachView.parentView, 'collection');\n    eachView.stopHandle = ObserveSequence.observe(function () {\n      return eachView.argVar.get();\n    }, {\n      addedAt: function (id, item, index) {\n        Tracker.nonreactive(function () {\n          var newItemView;\n\n          if (eachView.variableName) {\n            // new-style #each (as in {{#each item in items}})\n            // doesn't create a new data context\n            newItemView = Blaze.View('item', eachView.contentFunc);\n          } else {\n            newItemView = Blaze.With(item, eachView.contentFunc);\n          }\n\n          eachView.numItems++;\n          var bindings = {};\n          bindings['@index'] = index;\n\n          if (eachView.variableName) {\n            bindings[eachView.variableName] = item;\n          }\n\n          Blaze._attachBindingsToView(bindings, newItemView);\n\n          if (eachView.expandedValueDep) {\n            eachView.expandedValueDep.changed();\n          } else if (eachView._domrange) {\n            if (eachView.inElseMode) {\n              eachView._domrange.removeMember(0);\n\n              eachView.inElseMode = false;\n            }\n\n            var range = Blaze._materializeView(newItemView, eachView);\n\n            eachView._domrange.addMember(range, index);\n\n            updateIndices(index);\n          } else {\n            eachView.initialSubviews.splice(index, 0, newItemView);\n          }\n        });\n      },\n      removedAt: function (id, item, index) {\n        Tracker.nonreactive(function () {\n          eachView.numItems--;\n\n          if (eachView.expandedValueDep) {\n            eachView.expandedValueDep.changed();\n          } else if (eachView._domrange) {\n            eachView._domrange.removeMember(index);\n\n            updateIndices(index);\n\n            if (eachView.elseFunc && eachView.numItems === 0) {\n              eachView.inElseMode = true;\n\n              eachView._domrange.addMember(Blaze._materializeView(Blaze.View('each_else', eachView.elseFunc), eachView), 0);\n            }\n          } else {\n            eachView.initialSubviews.splice(index, 1);\n          }\n        });\n      },\n      changedAt: function (id, newItem, oldItem, index) {\n        Tracker.nonreactive(function () {\n          if (eachView.expandedValueDep) {\n            eachView.expandedValueDep.changed();\n          } else {\n            var itemView;\n\n            if (eachView._domrange) {\n              itemView = eachView._domrange.getMember(index).view;\n            } else {\n              itemView = eachView.initialSubviews[index];\n            }\n\n            if (eachView.variableName) {\n              itemView._scopeBindings[eachView.variableName].set(newItem);\n            } else {\n              itemView.dataVar.set(newItem);\n            }\n          }\n        });\n      },\n      movedTo: function (id, item, fromIndex, toIndex) {\n        Tracker.nonreactive(function () {\n          if (eachView.expandedValueDep) {\n            eachView.expandedValueDep.changed();\n          } else if (eachView._domrange) {\n            eachView._domrange.moveMember(fromIndex, toIndex);\n\n            updateIndices(Math.min(fromIndex, toIndex), Math.max(fromIndex, toIndex));\n          } else {\n            var subviews = eachView.initialSubviews;\n            var itemView = subviews[fromIndex];\n            subviews.splice(fromIndex, 1);\n            subviews.splice(toIndex, 0, itemView);\n          }\n        });\n      }\n    });\n\n    if (eachView.elseFunc && eachView.numItems === 0) {\n      eachView.inElseMode = true;\n      eachView.initialSubviews[0] = Blaze.View('each_else', eachView.elseFunc);\n    }\n  });\n  eachView.onViewDestroyed(function () {\n    if (eachView.stopHandle) eachView.stopHandle.stop();\n  });\n  return eachView;\n};\n\nBlaze._TemplateWith = function (arg, contentFunc) {\n  var w;\n  var argFunc = arg;\n\n  if (typeof arg !== 'function') {\n    argFunc = function () {\n      return arg;\n    };\n  } // This is a little messy.  When we compile `{{> Template.contentBlock}}`, we\n  // wrap it in Blaze._InOuterTemplateScope in order to skip the intermediate\n  // parent Views in the current template.  However, when there's an argument\n  // (`{{> Template.contentBlock arg}}`), the argument needs to be evaluated\n  // in the original scope.  There's no good order to nest\n  // Blaze._InOuterTemplateScope and Spacebars.TemplateWith to achieve this,\n  // so we wrap argFunc to run it in the \"original parentView\" of the\n  // Blaze._InOuterTemplateScope.\n  //\n  // To make this better, reconsider _InOuterTemplateScope as a primitive.\n  // Longer term, evaluate expressions in the proper lexical scope.\n\n\n  var wrappedArgFunc = function () {\n    var viewToEvaluateArg = null;\n\n    if (w.parentView && w.parentView.name === 'InOuterTemplateScope') {\n      viewToEvaluateArg = w.parentView.originalParentView;\n    }\n\n    if (viewToEvaluateArg) {\n      return Blaze._withCurrentView(viewToEvaluateArg, argFunc);\n    } else {\n      return argFunc();\n    }\n  };\n\n  var wrappedContentFunc = function () {\n    var content = contentFunc.call(this); // Since we are generating the Blaze._TemplateWith view for the\n    // user, set the flag on the child view.  If `content` is a template,\n    // construct the View so that we can set the flag.\n\n    if (content instanceof Blaze.Template) {\n      content = content.constructView();\n    }\n\n    if (content instanceof Blaze.View) {\n      content._hasGeneratedParent = true;\n    }\n\n    return content;\n  };\n\n  w = Blaze.With(wrappedArgFunc, wrappedContentFunc);\n  w.__isTemplateWith = true;\n  return w;\n};\n\nBlaze._InOuterTemplateScope = function (templateView, contentFunc) {\n  var view = Blaze.View('InOuterTemplateScope', contentFunc);\n  var parentView = templateView.parentView; // Hack so that if you call `{{> foo bar}}` and it expands into\n  // `{{#with bar}}{{> foo}}{{/with}}`, and then `foo` is a template\n  // that inserts `{{> Template.contentBlock}}`, the data context for\n  // `Template.contentBlock` is not `bar` but the one enclosing that.\n\n  if (parentView.__isTemplateWith) parentView = parentView.parentView;\n  view.onViewCreated(function () {\n    this.originalParentView = this.parentView;\n    this.parentView = parentView;\n    this.__childDoesntStartNewLexicalScope = true;\n  });\n  return view;\n}; // XXX COMPAT WITH 0.9.0\n\n\nBlaze.InOuterTemplateScope = Blaze._InOuterTemplateScope;\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"lookup.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/lookup.js                                                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar has;\nmodule.link(\"lodash.has\", {\n  \"default\": function (v) {\n    has = v;\n  }\n}, 0);\nBlaze._globalHelpers = {}; // Documented as Template.registerHelper.\n// This definition also provides back-compat for `UI.registerHelper`.\n\nBlaze.registerHelper = function (name, func) {\n  Blaze._globalHelpers[name] = func;\n}; // Also documented as Template.deregisterHelper\n\n\nBlaze.deregisterHelper = function (name) {\n  delete Blaze._globalHelpers[name];\n};\n\nvar bindIfIsFunction = function (x, target) {\n  if (typeof x !== 'function') return x;\n  return Blaze._bind(x, target);\n}; // If `x` is a function, binds the value of `this` for that function\n// to the current data context.\n\n\nvar bindDataContext = function (x) {\n  if (typeof x === 'function') {\n    return function () {\n      var data = Blaze.getData();\n      if (data == null) data = {};\n      return x.apply(data, arguments);\n    };\n  }\n\n  return x;\n};\n\nBlaze._OLDSTYLE_HELPER = {};\n\nBlaze._getTemplateHelper = function (template, name, tmplInstanceFunc) {\n  // XXX COMPAT WITH 0.9.3\n  var isKnownOldStyleHelper = false;\n\n  if (template.__helpers.has(name)) {\n    var helper = template.__helpers.get(name);\n\n    if (helper === Blaze._OLDSTYLE_HELPER) {\n      isKnownOldStyleHelper = true;\n    } else if (helper != null) {\n      return wrapHelper(bindDataContext(helper), tmplInstanceFunc);\n    } else {\n      return null;\n    }\n  } // old-style helper\n\n\n  if (name in template) {\n    // Only warn once per helper\n    if (!isKnownOldStyleHelper) {\n      template.__helpers.set(name, Blaze._OLDSTYLE_HELPER);\n\n      if (!template._NOWARN_OLDSTYLE_HELPERS) {\n        Blaze._warn('Assigning helper with `' + template.viewName + '.' + name + ' = ...` is deprecated.  Use `' + template.viewName + '.helpers(...)` instead.');\n      }\n    }\n\n    if (template[name] != null) {\n      return wrapHelper(bindDataContext(template[name]), tmplInstanceFunc);\n    }\n  }\n\n  return null;\n};\n\nvar wrapHelper = function (f, templateFunc) {\n  if (typeof f !== \"function\") {\n    return f;\n  }\n\n  return function () {\n    var self = this;\n    var args = arguments;\n    return Blaze.Template._withTemplateInstanceFunc(templateFunc, function () {\n      return Blaze._wrapCatchingExceptions(f, 'template helper').apply(self, args);\n    });\n  };\n};\n\nBlaze._lexicalBindingLookup = function (view, name) {\n  var currentView = view;\n  var blockHelpersStack = []; // walk up the views stopping at a Spacebars.include or Template view that\n  // doesn't have an InOuterTemplateScope view as a parent\n\n  do {\n    // skip block helpers views\n    // if we found the binding on the scope, return it\n    if (has(currentView._scopeBindings, name)) {\n      var bindingReactiveVar = currentView._scopeBindings[name];\n      return function () {\n        return bindingReactiveVar.get();\n      };\n    }\n  } while (!(currentView.__startsNewLexicalScope && !(currentView.parentView && currentView.parentView.__childDoesntStartNewLexicalScope)) && (currentView = currentView.parentView));\n\n  return null;\n}; // templateInstance argument is provided to be available for possible\n// alternative implementations of this function by 3rd party packages.\n\n\nBlaze._getTemplate = function (name, templateInstance) {\n  if (name in Blaze.Template && Blaze.Template[name] instanceof Blaze.Template) {\n    return Blaze.Template[name];\n  }\n\n  return null;\n};\n\nBlaze._getGlobalHelper = function (name, templateInstance) {\n  if (Blaze._globalHelpers[name] != null) {\n    return wrapHelper(bindDataContext(Blaze._globalHelpers[name]), templateInstance);\n  }\n\n  return null;\n}; // Looks up a name, like \"foo\" or \"..\", as a helper of the\n// current template; the name of a template; a global helper;\n// or a property of the data context.  Called on the View of\n// a template (i.e. a View with a `.template` property,\n// where the helpers are).  Used for the first name in a\n// \"path\" in a template tag, like \"foo\" in `{{foo.bar}}` or\n// \"..\" in `{{frobulate ../blah}}`.\n//\n// Returns a function, a non-function value, or null.  If\n// a function is found, it is bound appropriately.\n//\n// NOTE: This function must not establish any reactive\n// dependencies itself.  If there is any reactivity in the\n// value, lookup should return a function.\n\n\nBlaze.View.prototype.lookup = function (name, _options) {\n  var template = this.template;\n  var lookupTemplate = _options && _options.template;\n  var helper;\n  var binding;\n  var boundTmplInstance;\n  var foundTemplate;\n\n  if (this.templateInstance) {\n    boundTmplInstance = Blaze._bind(this.templateInstance, this);\n  } // 0. looking up the parent data context with the special \"../\" syntax\n\n\n  if (/^\\./.test(name)) {\n    // starts with a dot. must be a series of dots which maps to an\n    // ancestor of the appropriate height.\n    if (!/^(\\.)+$/.test(name)) throw new Error(\"id starting with dot must be a series of dots\");\n    return Blaze._parentData(name.length - 1, true\n    /*_functionWrapped*/\n    );\n  } // 1. look up a helper on the current template\n\n\n  if (template && (helper = Blaze._getTemplateHelper(template, name, boundTmplInstance)) != null) {\n    return helper;\n  } // 2. look up a binding by traversing the lexical view hierarchy inside the\n  // current template\n\n\n  if (template && (binding = Blaze._lexicalBindingLookup(Blaze.currentView, name)) != null) {\n    return binding;\n  } // 3. look up a template by name\n\n\n  if (lookupTemplate && (foundTemplate = Blaze._getTemplate(name, boundTmplInstance)) != null) {\n    return foundTemplate;\n  } // 4. look up a global helper\n\n\n  if ((helper = Blaze._getGlobalHelper(name, boundTmplInstance)) != null) {\n    return helper;\n  } // 5. look up in a data context\n\n\n  return function () {\n    var isCalledAsFunction = arguments.length > 0;\n    var data = Blaze.getData();\n    var x = data && data[name];\n\n    if (!x) {\n      if (lookupTemplate) {\n        throw new Error(\"No such template: \" + name);\n      } else if (isCalledAsFunction) {\n        throw new Error(\"No such function: \" + name);\n      } else if (name.charAt(0) === '@' && (x === null || x === undefined)) {\n        // Throw an error if the user tries to use a `@directive`\n        // that doesn't exist.  We don't implement all directives\n        // from Handlebars, so there's a potential for confusion\n        // if we fail silently.  On the other hand, we want to\n        // throw late in case some app or package wants to provide\n        // a missing directive.\n        throw new Error(\"Unsupported directive: \" + name);\n      }\n    }\n\n    if (!data) {\n      return null;\n    }\n\n    if (typeof x !== 'function') {\n      if (isCalledAsFunction) {\n        throw new Error(\"Can't call non-function: \" + x);\n      }\n\n      return x;\n    }\n\n    return x.apply(data, arguments);\n  };\n}; // Implement Spacebars' {{../..}}.\n// @param height {Number} The number of '..'s\n\n\nBlaze._parentData = function (height, _functionWrapped) {\n  // If height is null or undefined, we default to 1, the first parent.\n  if (height == null) {\n    height = 1;\n  }\n\n  var theWith = Blaze.getView('with');\n\n  for (var i = 0; i < height && theWith; i++) {\n    theWith = Blaze.getView(theWith, 'with');\n  }\n\n  if (!theWith) return null;\n  if (_functionWrapped) return function () {\n    return theWith.dataVar.get();\n  };\n  return theWith.dataVar.get();\n};\n\nBlaze.View.prototype.lookupTemplate = function (name) {\n  return this.lookup(name, {\n    template: true\n  });\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/template.js                                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _typeof;\n\nmodule.link(\"@babel/runtime/helpers/typeof\", {\n  default: function (v) {\n    _typeof = v;\n  }\n}, 0);\nvar isObject;\nmodule.link(\"lodash.isobject\", {\n  \"default\": function (v) {\n    isObject = v;\n  }\n}, 0);\nvar isFunction;\nmodule.link(\"lodash.isfunction\", {\n  \"default\": function (v) {\n    isFunction = v;\n  }\n}, 1);\nvar has;\nmodule.link(\"lodash.has\", {\n  \"default\": function (v) {\n    has = v;\n  }\n}, 2);\nvar isEmpty;\nmodule.link(\"lodash.isempty\", {\n  \"default\": function (v) {\n    isEmpty = v;\n  }\n}, 3);\n\n// [new] Blaze.Template([viewName], renderFunction)\n//\n// `Blaze.Template` is the class of templates, like `Template.foo` in\n// Meteor, which is `instanceof Template`.\n//\n// `viewKind` is a string that looks like \"Template.foo\" for templates\n// defined by the compiler.\n\n/**\n * @class\n * @summary Constructor for a Template, which is used to construct Views with particular name and content.\n * @locus Client\n * @param {String} [viewName] Optional.  A name for Views constructed by this Template.  See [`view.name`](#view_name).\n * @param {Function} renderFunction A function that returns [*renderable content*](#Renderable-Content).  This function is used as the `renderFunction` for Views constructed by this Template.\n */\nBlaze.Template = function (viewName, renderFunction) {\n  if (!(this instanceof Blaze.Template)) // called without `new`\n    return new Blaze.Template(viewName, renderFunction);\n\n  if (typeof viewName === 'function') {\n    // omitted \"viewName\" argument\n    renderFunction = viewName;\n    viewName = '';\n  }\n\n  if (typeof viewName !== 'string') throw new Error(\"viewName must be a String (or omitted)\");\n  if (typeof renderFunction !== 'function') throw new Error(\"renderFunction must be a function\");\n  this.viewName = viewName;\n  this.renderFunction = renderFunction;\n  this.__helpers = new HelperMap();\n  this.__eventMaps = [];\n  this._callbacks = {\n    created: [],\n    rendered: [],\n    destroyed: []\n  };\n};\n\nvar Template = Blaze.Template;\n\nvar HelperMap = function () {};\n\nHelperMap.prototype.get = function (name) {\n  return this[' ' + name];\n};\n\nHelperMap.prototype.set = function (name, helper) {\n  this[' ' + name] = helper;\n};\n\nHelperMap.prototype.has = function (name) {\n  return typeof this[' ' + name] !== 'undefined';\n};\n/**\n * @summary Returns true if `value` is a template object like `Template.myTemplate`.\n * @locus Client\n * @param {Any} value The value to test.\n */\n\n\nBlaze.isTemplate = function (t) {\n  return t instanceof Blaze.Template;\n};\n/**\n * @name  onCreated\n * @instance\n * @memberOf Template\n * @summary Register a function to be called when an instance of this template is created.\n * @param {Function} callback A function to be added as a callback.\n * @locus Client\n * @importFromPackage templating\n */\n\n\nTemplate.prototype.onCreated = function (cb) {\n  this._callbacks.created.push(cb);\n};\n/**\n * @name  onRendered\n * @instance\n * @memberOf Template\n * @summary Register a function to be called when an instance of this template is inserted into the DOM.\n * @param {Function} callback A function to be added as a callback.\n * @locus Client\n * @importFromPackage templating\n */\n\n\nTemplate.prototype.onRendered = function (cb) {\n  this._callbacks.rendered.push(cb);\n};\n/**\n * @name  onDestroyed\n * @instance\n * @memberOf Template\n * @summary Register a function to be called when an instance of this template is removed from the DOM and destroyed.\n * @param {Function} callback A function to be added as a callback.\n * @locus Client\n * @importFromPackage templating\n */\n\n\nTemplate.prototype.onDestroyed = function (cb) {\n  this._callbacks.destroyed.push(cb);\n};\n\nTemplate.prototype._getCallbacks = function (which) {\n  var self = this;\n  var callbacks = self[which] ? [self[which]] : []; // Fire all callbacks added with the new API (Template.onRendered())\n  // as well as the old-style callback (e.g. Template.rendered) for\n  // backwards-compatibility.\n\n  callbacks = callbacks.concat(self._callbacks[which]);\n  return callbacks;\n};\n\nvar fireCallbacks = function (callbacks, template) {\n  Template._withTemplateInstanceFunc(function () {\n    return template;\n  }, function () {\n    for (var i = 0, N = callbacks.length; i < N; i++) {\n      callbacks[i].call(template);\n    }\n  });\n};\n\nTemplate.prototype.constructView = function (contentFunc, elseFunc) {\n  var self = this;\n  var view = Blaze.View(self.viewName, self.renderFunction);\n  view.template = self;\n  view.templateContentBlock = contentFunc ? new Template('(contentBlock)', contentFunc) : null;\n  view.templateElseBlock = elseFunc ? new Template('(elseBlock)', elseFunc) : null;\n\n  if (self.__eventMaps || _typeof(self.events) === 'object') {\n    view._onViewRendered(function () {\n      if (view.renderCount !== 1) return;\n\n      if (!self.__eventMaps.length && _typeof(self.events) === \"object\") {\n        // Provide limited back-compat support for `.events = {...}`\n        // syntax.  Pass `template.events` to the original `.events(...)`\n        // function.  This code must run only once per template, in\n        // order to not bind the handlers more than once, which is\n        // ensured by the fact that we only do this when `__eventMaps`\n        // is falsy, and we cause it to be set now.\n        Template.prototype.events.call(self, self.events);\n      }\n\n      self.__eventMaps.forEach(function (m) {\n        Blaze._addEventMap(view, m, view);\n      });\n    });\n  }\n\n  view._templateInstance = new Blaze.TemplateInstance(view);\n\n  view.templateInstance = function () {\n    // Update data, firstNode, and lastNode, and return the TemplateInstance\n    // object.\n    var inst = view._templateInstance;\n    /**\n     * @instance\n     * @memberOf Blaze.TemplateInstance\n     * @name  data\n     * @summary The data context of this instance's latest invocation.\n     * @locus Client\n     */\n\n    inst.data = Blaze.getData(view);\n\n    if (view._domrange && !view.isDestroyed) {\n      inst.firstNode = view._domrange.firstNode();\n      inst.lastNode = view._domrange.lastNode();\n    } else {\n      // on 'created' or 'destroyed' callbacks we don't have a DomRange\n      inst.firstNode = null;\n      inst.lastNode = null;\n    }\n\n    return inst;\n  };\n  /**\n   * @name  created\n   * @instance\n   * @memberOf Template\n   * @summary Provide a callback when an instance of a template is created.\n   * @locus Client\n   * @deprecated in 1.1\n   */\n  // To avoid situations when new callbacks are added in between view\n  // instantiation and event being fired, decide on all callbacks to fire\n  // immediately and then fire them on the event.\n\n\n  var createdCallbacks = self._getCallbacks('created');\n\n  view.onViewCreated(function () {\n    fireCallbacks(createdCallbacks, view.templateInstance());\n  });\n  /**\n   * @name  rendered\n   * @instance\n   * @memberOf Template\n   * @summary Provide a callback when an instance of a template is rendered.\n   * @locus Client\n   * @deprecated in 1.1\n   */\n\n  var renderedCallbacks = self._getCallbacks('rendered');\n\n  view.onViewReady(function () {\n    fireCallbacks(renderedCallbacks, view.templateInstance());\n  });\n  /**\n   * @name  destroyed\n   * @instance\n   * @memberOf Template\n   * @summary Provide a callback when an instance of a template is destroyed.\n   * @locus Client\n   * @deprecated in 1.1\n   */\n\n  var destroyedCallbacks = self._getCallbacks('destroyed');\n\n  view.onViewDestroyed(function () {\n    fireCallbacks(destroyedCallbacks, view.templateInstance());\n  });\n  return view;\n};\n/**\n * @class\n * @summary The class for template instances\n * @param {Blaze.View} view\n * @instanceName template\n */\n\n\nBlaze.TemplateInstance = function (view) {\n  if (!(this instanceof Blaze.TemplateInstance)) // called without `new`\n    return new Blaze.TemplateInstance(view);\n  if (!(view instanceof Blaze.View)) throw new Error(\"View required\");\n  view._templateInstance = this;\n  /**\n   * @name view\n   * @memberOf Blaze.TemplateInstance\n   * @instance\n   * @summary The [View](../api/blaze.html#Blaze-View) object for this invocation of the template.\n   * @locus Client\n   * @type {Blaze.View}\n   */\n\n  this.view = view;\n  this.data = null;\n  /**\n   * @name firstNode\n   * @memberOf Blaze.TemplateInstance\n   * @instance\n   * @summary The first top-level DOM node in this template instance.\n   * @locus Client\n   * @type {DOMNode}\n   */\n\n  this.firstNode = null;\n  /**\n   * @name lastNode\n   * @memberOf Blaze.TemplateInstance\n   * @instance\n   * @summary The last top-level DOM node in this template instance.\n   * @locus Client\n   * @type {DOMNode}\n   */\n\n  this.lastNode = null; // This dependency is used to identify state transitions in\n  // _subscriptionHandles which could cause the result of\n  // TemplateInstance#subscriptionsReady to change. Basically this is triggered\n  // whenever a new subscription handle is added or when a subscription handle\n  // is removed and they are not ready.\n\n  this._allSubsReadyDep = new Tracker.Dependency();\n  this._allSubsReady = false;\n  this._subscriptionHandles = {};\n};\n/**\n * @summary Find all elements matching `selector` in this template instance, and return them as a JQuery object.\n * @locus Client\n * @param {String} selector The CSS selector to match, scoped to the template contents.\n * @returns {DOMNode[]}\n */\n\n\nBlaze.TemplateInstance.prototype.$ = function (selector) {\n  var view = this.view;\n  if (!view._domrange) throw new Error(\"Can't use $ on template instance with no DOM\");\n  return view._domrange.$(selector);\n};\n/**\n * @summary Find all elements matching `selector` in this template instance.\n * @locus Client\n * @param {String} selector The CSS selector to match, scoped to the template contents.\n * @returns {DOMElement[]}\n */\n\n\nBlaze.TemplateInstance.prototype.findAll = function (selector) {\n  return Array.prototype.slice.call(this.$(selector));\n};\n/**\n * @summary Find one element matching `selector` in this template instance.\n * @locus Client\n * @param {String} selector The CSS selector to match, scoped to the template contents.\n * @returns {DOMElement}\n */\n\n\nBlaze.TemplateInstance.prototype.find = function (selector) {\n  var result = this.$(selector);\n  return result[0] || null;\n};\n/**\n * @summary A version of [Tracker.autorun](https://docs.meteor.com/api/tracker.html#Tracker-autorun) that is stopped when the template is destroyed.\n * @locus Client\n * @param {Function} runFunc The function to run. It receives one argument: a Tracker.Computation object.\n */\n\n\nBlaze.TemplateInstance.prototype.autorun = function (f) {\n  return this.view.autorun(f);\n};\n/**\n * @summary A version of [Meteor.subscribe](https://docs.meteor.com/api/pubsub.html#Meteor-subscribe) that is stopped\n * when the template is destroyed.\n * @return {SubscriptionHandle} The subscription handle to the newly made\n * subscription. Call `handle.stop()` to manually stop the subscription, or\n * `handle.ready()` to find out if this particular subscription has loaded all\n * of its inital data.\n * @locus Client\n * @param {String} name Name of the subscription.  Matches the name of the\n * server's `publish()` call.\n * @param {Any} [arg1,arg2...] Optional arguments passed to publisher function\n * on server.\n * @param {Function|Object} [options] If a function is passed instead of an\n * object, it is interpreted as an `onReady` callback.\n * @param {Function} [options.onReady] Passed to [`Meteor.subscribe`](https://docs.meteor.com/api/pubsub.html#Meteor-subscribe).\n * @param {Function} [options.onStop] Passed to [`Meteor.subscribe`](https://docs.meteor.com/api/pubsub.html#Meteor-subscribe).\n * @param {DDP.Connection} [options.connection] The connection on which to make the\n * subscription.\n */\n\n\nBlaze.TemplateInstance.prototype.subscribe = function () {\n  var self = this;\n  var subHandles = self._subscriptionHandles; // Duplicate logic from Meteor.subscribe\n\n  var options = {};\n\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  if (args.length) {\n    var lastParam = args[args.length - 1]; // Match pattern to check if the last arg is an options argument\n\n    var lastParamOptionsPattern = {\n      onReady: Match.Optional(Function),\n      // XXX COMPAT WITH 1.0.3.1 onError used to exist, but now we use\n      // onStop with an error callback instead.\n      onError: Match.Optional(Function),\n      onStop: Match.Optional(Function),\n      connection: Match.Optional(Match.Any)\n    };\n\n    if (isFunction(lastParam)) {\n      options.onReady = args.pop();\n    } else if (lastParam && !isEmpty(lastParam) && Match.test(lastParam, lastParamOptionsPattern)) {\n      options = args.pop();\n    }\n  }\n\n  var subHandle;\n  var oldStopped = options.onStop;\n\n  options.onStop = function (error) {\n    // When the subscription is stopped, remove it from the set of tracked\n    // subscriptions to avoid this list growing without bound\n    delete subHandles[subHandle.subscriptionId]; // Removing a subscription can only change the result of subscriptionsReady\n    // if we are not ready (that subscription could be the one blocking us being\n    // ready).\n\n    if (!self._allSubsReady) {\n      self._allSubsReadyDep.changed();\n    }\n\n    if (oldStopped) {\n      oldStopped(error);\n    }\n  };\n\n  var connection = options.connection;\n  var _options = options,\n      onReady = _options.onReady,\n      onError = _options.onError,\n      onStop = _options.onStop;\n  var callbacks = {\n    onReady: onReady,\n    onError: onError,\n    onStop: onStop\n  }; // The callbacks are passed as the last item in the arguments array passed to\n  // View#subscribe\n\n  args.push(callbacks); // View#subscribe takes the connection as one of the options in the last\n  // argument\n\n  subHandle = self.view.subscribe.call(self.view, args, {\n    connection: connection\n  });\n\n  if (!has(subHandles, subHandle.subscriptionId)) {\n    subHandles[subHandle.subscriptionId] = subHandle; // Adding a new subscription will always cause us to transition from ready\n    // to not ready, but if we are already not ready then this can't make us\n    // ready.\n\n    if (self._allSubsReady) {\n      self._allSubsReadyDep.changed();\n    }\n  }\n\n  return subHandle;\n};\n/**\n * @summary A reactive function that returns true when all of the subscriptions\n * called with [this.subscribe](#TemplateInstance-subscribe) are ready.\n * @return {Boolean} True if all subscriptions on this template instance are\n * ready.\n */\n\n\nBlaze.TemplateInstance.prototype.subscriptionsReady = function () {\n  this._allSubsReadyDep.depend();\n\n  this._allSubsReady = Object.values(this._subscriptionHandles).every(function (handle) {\n    return handle.ready();\n  });\n  return this._allSubsReady;\n};\n/**\n * @summary Specify template helpers available to this template.\n * @locus Client\n * @param {Object} helpers Dictionary of helper functions by name.\n * @importFromPackage templating\n */\n\n\nTemplate.prototype.helpers = function (dict) {\n  if (!isObject(dict)) {\n    throw new Error(\"Helpers dictionary has to be an object\");\n  }\n\n  for (var k in meteorBabelHelpers.sanitizeForInObject(dict)) {\n    this.__helpers.set(k, dict[k]);\n  }\n};\n\nvar canUseGetters = function () {\n  if (Object.defineProperty) {\n    var obj = {};\n\n    try {\n      Object.defineProperty(obj, \"self\", {\n        get: function () {\n          return obj;\n        }\n      });\n    } catch (e) {\n      return false;\n    }\n\n    return obj.self === obj;\n  }\n\n  return false;\n}();\n\nif (canUseGetters) {\n  // Like Blaze.currentView but for the template instance. A function\n  // rather than a value so that not all helpers are implicitly dependent\n  // on the current template instance's `data` property, which would make\n  // them dependent on the data context of the template inclusion.\n  var currentTemplateInstanceFunc = null; // If getters are supported, define this property with a getter function\n  // to make it effectively read-only, and to work around this bizarre JSC\n  // bug: https://github.com/meteor/meteor/issues/9926\n\n  Object.defineProperty(Template, \"_currentTemplateInstanceFunc\", {\n    get: function () {\n      return currentTemplateInstanceFunc;\n    }\n  });\n\n  Template._withTemplateInstanceFunc = function (templateInstanceFunc, func) {\n    if (typeof func !== 'function') {\n      throw new Error(\"Expected function, got: \" + func);\n    }\n\n    var oldTmplInstanceFunc = currentTemplateInstanceFunc;\n\n    try {\n      currentTemplateInstanceFunc = templateInstanceFunc;\n      return func();\n    } finally {\n      currentTemplateInstanceFunc = oldTmplInstanceFunc;\n    }\n  };\n} else {\n  // If getters are not supported, just use a normal property.\n  Template._currentTemplateInstanceFunc = null;\n\n  Template._withTemplateInstanceFunc = function (templateInstanceFunc, func) {\n    if (typeof func !== 'function') {\n      throw new Error(\"Expected function, got: \" + func);\n    }\n\n    var oldTmplInstanceFunc = Template._currentTemplateInstanceFunc;\n\n    try {\n      Template._currentTemplateInstanceFunc = templateInstanceFunc;\n      return func();\n    } finally {\n      Template._currentTemplateInstanceFunc = oldTmplInstanceFunc;\n    }\n  };\n}\n/**\n * @summary Specify event handlers for this template.\n * @locus Client\n * @param {EventMap} eventMap Event handlers to associate with this template.\n * @importFromPackage templating\n */\n\n\nTemplate.prototype.events = function (eventMap) {\n  if (!isObject(eventMap)) {\n    throw new Error(\"Event map has to be an object\");\n  }\n\n  var template = this;\n  var eventMap2 = {};\n\n  for (var k in meteorBabelHelpers.sanitizeForInObject(eventMap)) {\n    eventMap2[k] = function (k, v) {\n      return function (event\n      /*, ...*/\n      ) {\n        var view = this; // passed by EventAugmenter\n\n        var data = Blaze.getData(event.currentTarget);\n        if (data == null) data = {};\n        var args = Array.prototype.slice.call(arguments);\n\n        var tmplInstanceFunc = Blaze._bind(view.templateInstance, view);\n\n        args.splice(1, 0, tmplInstanceFunc());\n        return Template._withTemplateInstanceFunc(tmplInstanceFunc, function () {\n          return v.apply(data, args);\n        });\n      };\n    }(k, eventMap[k]);\n  }\n\n  template.__eventMaps.push(eventMap2);\n};\n/**\n * @function\n * @name instance\n * @memberOf Template\n * @summary The [template instance](#Template-instances) corresponding to the current template helper, event handler, callback, or autorun.  If there isn't one, `null`.\n * @locus Client\n * @returns {Blaze.TemplateInstance}\n * @importFromPackage templating\n */\n\n\nTemplate.instance = function () {\n  return Template._currentTemplateInstanceFunc && Template._currentTemplateInstanceFunc();\n}; // Note: Template.currentData() is documented to take zero arguments,\n// while Blaze.getData takes up to one.\n\n/**\n * @summary\n *\n * - Inside an `onCreated`, `onRendered`, or `onDestroyed` callback, returns\n * the data context of the template.\n * - Inside an event handler, returns the data context of the template on which\n * this event handler was defined.\n * - Inside a helper, returns the data context of the DOM node where the helper\n * was used.\n *\n * Establishes a reactive dependency on the result.\n * @locus Client\n * @function\n * @importFromPackage templating\n */\n\n\nTemplate.currentData = Blaze.getData;\n/**\n * @summary Accesses other data contexts that enclose the current data context.\n * @locus Client\n * @function\n * @param {Integer} [numLevels] The number of levels beyond the current data context to look. Defaults to 1.\n * @importFromPackage templating\n */\n\nTemplate.parentData = Blaze._parentData;\n/**\n * @summary Defines a [helper function](#Template-helpers) which can be used from all templates.\n * @locus Client\n * @function\n * @param {String} name The name of the helper function you are defining.\n * @param {Function} function The helper function itself.\n * @importFromPackage templating\n */\n\nTemplate.registerHelper = Blaze.registerHelper;\n/**\n * @summary Removes a global [helper function](#Template-helpers).\n * @locus Client\n * @function\n * @param {String} name The name of the helper function you are defining.\n * @importFromPackage templating\n */\n\nTemplate.deregisterHelper = Blaze.deregisterHelper;\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"backcompat.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/backcompat.js                                                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nUI = Blaze;\nBlaze.ReactiveVar = ReactiveVar;\nUI._templateInstance = Blaze.Template.instance;\nHandlebars = {};\nHandlebars.registerHelper = Blaze.registerHelper;\nHandlebars._escape = Blaze._escape; // Return these from {{...}} helpers to achieve the same as returning\n// strings from {{{...}}} helpers\n\nHandlebars.SafeString = function (string) {\n  this.string = string;\n};\n\nHandlebars.SafeString.prototype.toString = function () {\n  return this.string.toString();\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"node_modules\":{\"lodash.has\":{\"package.json\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// node_modules/meteor/blaze/node_modules/lodash.has/package.json                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.exports = {\n  \"name\": \"lodash.has\",\n  \"version\": \"4.5.2\"\n};\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// node_modules/meteor/blaze/node_modules/lodash.has/index.js                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/,\n    reLeadingDot = /^\\./,\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.has` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHas(object, key) {\n  return object != null && hasOwnProperty.call(object, key);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var result,\n      index = -1,\n      length = path.length;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result) {\n    return result;\n  }\n  var length = object ? object.length : 0;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoize(function(string) {\n  string = toString(string);\n\n  var result = [];\n  if (reLeadingDot.test(string)) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Checks if `path` is a direct property of `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = { 'a': { 'b': 2 } };\n * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.has(object, 'a');\n * // => true\n *\n * _.has(object, 'a.b');\n * // => true\n *\n * _.has(object, ['a', 'b']);\n * // => true\n *\n * _.has(other, 'a');\n * // => false\n */\nfunction has(object, path) {\n  return object != null && hasPath(object, path, baseHas);\n}\n\nmodule.exports = has;\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"lodash.isobject\":{\"package.json\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// node_modules/meteor/blaze/node_modules/lodash.isobject/package.json                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.exports = {\n  \"name\": \"lodash.isobject\",\n  \"version\": \"3.0.2\"\n};\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// node_modules/meteor/blaze/node_modules/lodash.isobject/index.js                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/**\n * lodash 3.0.2 (Custom Build) <https://lodash.com/>\n * Build: `lodash modern modularize exports=\"npm\" -o ./`\n * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(1);\n * // => false\n */\nfunction isObject(value) {\n  // Avoid a V8 JIT bug in Chrome 19-20.\n  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"lodash.isfunction\":{\"package.json\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// node_modules/meteor/blaze/node_modules/lodash.isfunction/package.json                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.exports = {\n  \"name\": \"lodash.isfunction\",\n  \"version\": \"3.0.9\"\n};\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// node_modules/meteor/blaze/node_modules/lodash.isfunction/index.js                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    nullTag = '[object Null]',\n    proxyTag = '[object Proxy]',\n    undefinedTag = '[object Undefined]';\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isFunction;\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"lodash.isempty\":{\"package.json\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// node_modules/meteor/blaze/node_modules/lodash.isempty/package.json                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.exports = {\n  \"name\": \"lodash.isempty\",\n  \"version\": \"4.4.0\"\n};\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// node_modules/meteor/blaze/node_modules/lodash.isempty/index.js                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap');\n\n/** Detect if properties shadowing those on `Object.prototype` are non-enumerable. */\nvar nonEnumShadows = !propertyIsEnumerable.call({ 'valueOf': 1 }, 'valueOf');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' ||\n        typeof value.splice == 'function' || isBuffer(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (nonEnumShadows || isPrototype(value)) {\n    return !nativeKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEmpty;\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}}}}}},{\n  \"extensions\": [\n    \".js\",\n    \".json\"\n  ]\n});\n\nrequire(\"/node_modules/meteor/blaze/preamble.js\");\nrequire(\"/node_modules/meteor/blaze/dombackend.js\");\nrequire(\"/node_modules/meteor/blaze/domrange.js\");\nrequire(\"/node_modules/meteor/blaze/events.js\");\nrequire(\"/node_modules/meteor/blaze/attrs.js\");\nrequire(\"/node_modules/meteor/blaze/materializer.js\");\nrequire(\"/node_modules/meteor/blaze/exceptions.js\");\nrequire(\"/node_modules/meteor/blaze/view.js\");\nrequire(\"/node_modules/meteor/blaze/builtins.js\");\nrequire(\"/node_modules/meteor/blaze/lookup.js\");\nrequire(\"/node_modules/meteor/blaze/template.js\");\nrequire(\"/node_modules/meteor/blaze/backcompat.js\");\n\n/* Exports */\nPackage._define(\"blaze\", {\n  Blaze: Blaze,\n  UI: UI,\n  Handlebars: Handlebars\n});\n\n})();\n","servePath":"/packages/blaze.js","sourceMap":{"version":3,"sources":["packages/blaze/preamble.js","packages/blaze/dombackend.js","packages/blaze/domrange.js","packages/blaze/events.js","packages/blaze/attrs.js","packages/blaze/materializer.js","packages/blaze/exceptions.js","packages/blaze/view.js","packages/blaze/builtins.js","packages/blaze/lookup.js","packages/blaze/template.js","packages/blaze/backcompat.js"],"names":["Blaze","_escape","escape_map","escape_one","c","x","replace","_warn","msg","console","warn","nativeBind","Function","prototype","bind","_bind","func","obj","arguments","length","call","args","Array","i","apply","slice","objA","objB","DOMBackend","_DOMBackend","$jq","jQuery","Package","jquery","Error","_$jq","parseHTML","html","Events","delegateEvents","elem","type","selector","handler","on","undelegateEvents","off","bindEventCapturer","$elem","wrapper","event","fix","currentTarget","target","$target","is","find","_meteorui_wrapper","parseEventType","addEventListener","unbindEventCapturer","removeEventListener","dotLoc","indexOf","NOOP","TeardownCallback","next","prev","linkBefore","oldElt","unlink","go","stop","Teardown","_JQUERY_EVENT_NAME","_CB_PROP","onElementTeardown","elt","propName","tearDownElement","elems","nodeList","getElementsByTagName","push","cleanData","special","setup","teardown","callbacks","findBySelector","context","_emptyArray","Object","freeze","_DOMRange","nodeAndRangeArray","DOMRange","members","_memberIn","emptyRangePlaceholder","attached","parentElement","parentRange","attachedCallbacks","_USE_COMMENT_PLACEHOLDERS","result","textNode","document","createTextNode","someProp","e","_insert","rangeOrNode","nextNode","_isMove","m","attach","_moveNodeWithHooks","_insertNodeWithHooks","_remove","detach","_removeNodeWithHooks","n","parentNode","nodeType","_uihooks","removeElement","removeChild","parent","insertElement","insertBefore","moveElement","forElement","range","$blaze_range","_isReplace","placeholder","createComment","setMembers","newNodeAndRangeArray","newMembers","oldMembers","_memberOut","lastNode","nextSibling","firstNode","oldParentElement","detached","addMember","newMember","atIndex","splice","removeMember","oldMember","moveMember","oldIndex","newIndex","member","getMember","_destroy","_skipNodes","view","_destroyView","_destroyNode","destroyMembers","destroy","containsElement","_elementContains","containsRange","onAttached","onAttachedDetached","$","self","results","filterFunc","filter","newResults","a","b","compareDocumentPosition","contains","has","module","link","v","EventSupport","_EventSupport","eventsToDelegate","blur","change","click","focus","focusin","focusout","reset","submit","EVENT_MODE","TBD","BUBBLING","CAPTURING","NEXT_HANDLERREC_ID","HandlerRec","recipient","id","mode","delegatedHandler","h","evt","tryCapturing","capturingHandler","bubbles","unbind","listen","element","events","getParentRecipient","eventTypes","newHandlerRecs","N","eventDict","$blaze_events","info","handlers","handlerList","handlerRec","r","j","Nj","handlerToRemove","jsUrlsAllowed","_allowJavascriptUrls","_javascriptUrlsAllowed","AttributeHandler","name","value","_AttributeHandler","update","oldValue","removeAttribute","setAttribute","extend","options","curType","subType","AttributeHandlerSubtype","assign","_DiffingAttributeHandler","getCurrentValue","setValue","parseValue","joinValues","oldAttrsMap","OrderedDict","attrsMap","currentAttrString","currentAttrsMap","forEach","key","append","values","ClassHandler","className","attrString","tokens","split","token","join","SVGClassHandler","baseVal","StyleHandler","getAttribute","style","regex","match","exec","remove","trim","BooleanHandler","DOMPropertyHandler","XlinkHandler","NS","removeAttributeNS","setAttributeNS","isSVGElement","isUrlAttribute","tagName","attrName","urlAttrs","FORM","BODY","BLOCKQUOTE","Q","DEL","INS","OBJECT","APPLET","A","AREA","LINK","BASE","IMG","FRAME","IFRAME","HEAD","SCRIPT","INPUT","BUTTON","MENUITEM","HTML","VIDEO","urlAttrNames","includes","Meteor","isClient","anchorForNormalization","createElement","getUrlProtocol","url","href","protocol","toLowerCase","origUpdate","UrlHandler","isJavascriptProtocol","isVBScriptProtocol","_makeAttributeHandler","substring","ElementAttributesUpdater","newAttrs","k","_typeof","default","_materializeDOM","htmljs","intoArray","parentView","_existingWorkStack","workStack","materializeDOMInner","task","pop","String","htmljsType","Tag","materializeTag","CharRef","str","Comment","sanitizedValue","Raw","nodes","isArray","Template","constructView","View","_materializeView","tag","isKnownSVGElement","isSVGAnchor","createElementNS","rawAttrs","attrs","children","_expand","attrUpdater","updateAttributes","expandedAttrs","_expandAttributes","flattenedAttrs","flattenAttributes","stringAttrs","_toText","TEXTMODE","STRING","updaterComputation","autorun","undefined","Tracker","nonreactive","_withCurrentView","attrTeardown","childNodesAndRanges","appendChild","node","debugFunc","_throwNextException","_reportException","_debug","log","stack","message","_wrapCatchingExceptions","f","where","render","_render","_callbacks","created","rendered","destroyed","isCreated","_isCreatedForExpansion","isRendered","_isAttached","isDestroyed","_isInRender","_domrange","_hasGeneratedParent","_scopeBindings","renderCount","onViewCreated","cb","_onViewRendered","onViewReady","fire","afterFlush","onViewRendered","onViewDestroyed","removeViewDestroyedListener","index","lastIndexOf","_inViewScope","displayName","templateInstanceFunc","_currentTemplateInstanceFunc","viewAutorun","_withTemplateInstanceFunc","comp","stopComputation","onStop","_errorIfShouldntCallSubscribe","subscribe","subHandle","connection","_fireCallbacks","which","fireCallbacks","cbs","_createView","forExpansion","doFirstRender","initialContent","domrange","teardownHook","_workStack","_intoArray","lastHtmljs","doRender","firstRun","_isContentEqual","doMaterialize","rangesAndNodes","onInvalidate","initialContents","_expandView","active","_HTMLJSExpander","TransformingVisitor","def","visitObject","visitAttributes","visitAttribute","currentViewIfRendering","currentView","visit","oldView","checkRenderContent","content","Visitor","contentAsView","contentAsFunc","__rootViews","insert","renderWithData","data","_TemplateWith","toHTML","toHTMLWithData","textMode","RCDATA","ATTRIBUTE","toText","getData","elementOrView","theWith","getView","dataVar","get","getElementData","_viewName","viewName","_getCurrentView","_getParentView","_getElementView","_addEventMap","eventMap","thisInHandler","handles","attached_eventMaps","keys","spec","clauses","clause","parts","newEvents","shift","handlerThis","handlerArgs","_slicedToArray","isObject","_calculateCondition","cond","With","contentFunc","ReactiveVar","set","_attachBindingsToView","bindings","entries","binding","Let","If","conditionFunc","elseFunc","_not","conditionVar","__conditionVar","Unless","Each","argFunc","eachView","subviews","initialSubviews","expandedValueDep","Dependency","depend","numItems","inElseMode","stopHandle","argVar","variableName","updateIndices","from","to","arg","_variable","_sequence","ObserveSequence","observe","addedAt","item","newItemView","changed","removedAt","changedAt","newItem","oldItem","itemView","movedTo","fromIndex","toIndex","Math","min","max","w","wrappedArgFunc","viewToEvaluateArg","originalParentView","wrappedContentFunc","__isTemplateWith","_InOuterTemplateScope","templateView","__childDoesntStartNewLexicalScope","InOuterTemplateScope","_globalHelpers","registerHelper","deregisterHelper","bindIfIsFunction","bindDataContext","_OLDSTYLE_HELPER","_getTemplateHelper","template","tmplInstanceFunc","isKnownOldStyleHelper","__helpers","helper","wrapHelper","_NOWARN_OLDSTYLE_HELPERS","templateFunc","_lexicalBindingLookup","blockHelpersStack","bindingReactiveVar","__startsNewLexicalScope","_getTemplate","templateInstance","_getGlobalHelper","lookup","_options","lookupTemplate","boundTmplInstance","foundTemplate","test","_parentData","isCalledAsFunction","charAt","height","_functionWrapped","isFunction","isEmpty","renderFunction","HelperMap","__eventMaps","isTemplate","t","onCreated","onRendered","onDestroyed","_getCallbacks","concat","templateContentBlock","templateElseBlock","_templateInstance","TemplateInstance","inst","createdCallbacks","renderedCallbacks","destroyedCallbacks","_allSubsReadyDep","_allSubsReady","_subscriptionHandles","findAll","subHandles","lastParam","lastParamOptionsPattern","onReady","Match","Optional","onError","Any","oldStopped","error","subscriptionId","subscriptionsReady","every","handle","ready","helpers","dict","canUseGetters","defineProperty","currentTemplateInstanceFunc","oldTmplInstanceFunc","eventMap2","instance","currentData","parentData","UI","Handlebars","SafeString","string","toString"],"mappings":"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","file":"/packages/blaze.js","sourcesContent":["/**\n * @namespace Blaze\n * @summary The namespace for all Blaze-related methods and classes.\n */\nBlaze = {};\n\n// Utility to HTML-escape a string.  Included for legacy reasons.\n// TODO: Should be replaced with _.escape once underscore is upgraded to a newer\n//       version which escapes ` (backtick) as well. Underscore 1.5.2 does not.\nBlaze._escape = (function() {\n  var escape_map = {\n    \"<\": \"&lt;\",\n    \">\": \"&gt;\",\n    '\"': \"&quot;\",\n    \"'\": \"&#x27;\",\n    \"/\": \"&#x2F;\",\n    \"`\": \"&#x60;\", /* IE allows backtick-delimited attributes?? */\n    \"&\": \"&amp;\"\n  };\n  var escape_one = function(c) {\n    return escape_map[c];\n  };\n\n  return function (x) {\n    return x.replace(/[&<>\"'`]/g, escape_one);\n  };\n})();\n\nBlaze._warn = function (msg) {\n  msg = 'Warning: ' + msg;\n\n  if ((typeof console !== 'undefined') && console.warn) {\n    console.warn(msg);\n  }\n};\n\nvar nativeBind = Function.prototype.bind;\n\n// An implementation of _.bind which allows better optimization.\n// See: https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#3-managing-arguments\nif (nativeBind) {\n  Blaze._bind = function (func, obj) {\n    if (arguments.length === 2) {\n      return nativeBind.call(func, obj);\n    }\n\n    // Copy the arguments so this function can be optimized.\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    return nativeBind.apply(func, args.slice(1));\n  };\n}\nelse {\n  // A slower but backwards compatible version.\n  Blaze._bind = function(objA, objB) {\n    objA.bind(objB);\n  };\n}\n","var DOMBackend = {};\nBlaze._DOMBackend = DOMBackend;\n\nvar $jq = (typeof jQuery !== 'undefined' ? jQuery :\n           (typeof Package !== 'undefined' ?\n            Package.jquery && Package.jquery.jQuery : null));\nif (! $jq)\n  throw new Error(\"jQuery not found\");\n\nDOMBackend._$jq = $jq;\n\nDOMBackend.parseHTML = function (html) {\n  // Return an array of nodes.\n  //\n  // jQuery does fancy stuff like creating an appropriate\n  // container element and setting innerHTML on it, as well\n  // as working around various IE quirks.\n  return $jq.parseHTML(html) || [];\n};\n\nDOMBackend.Events = {\n  // `selector` is non-null.  `type` is one type (but\n  // may be in backend-specific form, e.g. have namespaces).\n  // Order fired must be order bound.\n  delegateEvents: function (elem, type, selector, handler) {\n    $jq(elem).on(type, selector, handler);\n  },\n\n  undelegateEvents: function (elem, type, handler) {\n    $jq(elem).off(type, '**', handler);\n  },\n\n  bindEventCapturer: function (elem, type, selector, handler) {\n    var $elem = $jq(elem);\n\n    var wrapper = function (event) {\n      event = $jq.event.fix(event);\n      event.currentTarget = event.target;\n\n      // Note: It might improve jQuery interop if we called into jQuery\n      // here somehow.  Since we don't use jQuery to dispatch the event,\n      // we don't fire any of jQuery's event hooks or anything.  However,\n      // since jQuery can't bind capturing handlers, it's not clear\n      // where we would hook in.  Internal jQuery functions like `dispatch`\n      // are too high-level.\n      var $target = $jq(event.currentTarget);\n      if ($target.is($elem.find(selector)))\n        handler.call(elem, event);\n    };\n\n    handler._meteorui_wrapper = wrapper;\n\n    type = DOMBackend.Events.parseEventType(type);\n    // add *capturing* event listener\n    elem.addEventListener(type, wrapper, true);\n  },\n\n  unbindEventCapturer: function (elem, type, handler) {\n    type = DOMBackend.Events.parseEventType(type);\n    elem.removeEventListener(type, handler._meteorui_wrapper, true);\n  },\n\n  parseEventType: function (type) {\n    // strip off namespaces\n    var dotLoc = type.indexOf('.');\n    if (dotLoc >= 0)\n      return type.slice(0, dotLoc);\n    return type;\n  }\n};\n\n\n///// Removal detection and interoperability.\n\n// For an explanation of this technique, see:\n// http://bugs.jquery.com/ticket/12213#comment:23 .\n//\n// In short, an element is considered \"removed\" when jQuery\n// cleans up its *private* userdata on the element,\n// which we can detect using a custom event with a teardown\n// hook.\n\nvar NOOP = function () {};\n\n// Circular doubly-linked list\nvar TeardownCallback = function (func) {\n  this.next = this;\n  this.prev = this;\n  this.func = func;\n};\n\n// Insert newElt before oldElt in the circular list\nTeardownCallback.prototype.linkBefore = function(oldElt) {\n  this.prev = oldElt.prev;\n  this.next = oldElt;\n  oldElt.prev.next = this;\n  oldElt.prev = this;\n};\n\nTeardownCallback.prototype.unlink = function () {\n  this.prev.next = this.next;\n  this.next.prev = this.prev;\n};\n\nTeardownCallback.prototype.go = function () {\n  var func = this.func;\n  func && func();\n};\n\nTeardownCallback.prototype.stop = TeardownCallback.prototype.unlink;\n\nDOMBackend.Teardown = {\n  _JQUERY_EVENT_NAME: 'blaze_teardown_watcher',\n  _CB_PROP: '$blaze_teardown_callbacks',\n  // Registers a callback function to be called when the given element or\n  // one of its ancestors is removed from the DOM via the backend library.\n  // The callback function is called at most once, and it receives the element\n  // in question as an argument.\n  onElementTeardown: function (elem, func) {\n    var elt = new TeardownCallback(func);\n\n    var propName = DOMBackend.Teardown._CB_PROP;\n    if (! elem[propName]) {\n      // create an empty node that is never unlinked\n      elem[propName] = new TeardownCallback;\n\n      // Set up the event, only the first time.\n      $jq(elem).on(DOMBackend.Teardown._JQUERY_EVENT_NAME, NOOP);\n    }\n\n    elt.linkBefore(elem[propName]);\n\n    return elt; // so caller can call stop()\n  },\n  // Recursively call all teardown hooks, in the backend and registered\n  // through DOMBackend.onElementTeardown.\n  tearDownElement: function (elem) {\n    var elems = [];\n    // Array.prototype.slice.call doesn't work when given a NodeList in\n    // IE8 (\"JScript object expected\").\n    var nodeList = elem.getElementsByTagName('*');\n    for (var i = 0; i < nodeList.length; i++) {\n      elems.push(nodeList[i]);\n    }\n    elems.push(elem);\n    $jq.cleanData(elems);\n  }\n};\n\n$jq.event.special[DOMBackend.Teardown._JQUERY_EVENT_NAME] = {\n  setup: function () {\n    // This \"setup\" callback is important even though it is empty!\n    // Without it, jQuery will call addEventListener, which is a\n    // performance hit, especially with Chrome's async stack trace\n    // feature enabled.\n  },\n  teardown: function() {\n    var elem = this;\n    var callbacks = elem[DOMBackend.Teardown._CB_PROP];\n    if (callbacks) {\n      var elt = callbacks.next;\n      while (elt !== callbacks) {\n        elt.go();\n        elt = elt.next;\n      }\n      callbacks.go();\n\n      elem[DOMBackend.Teardown._CB_PROP] = null;\n    }\n  }\n};\n\n\n// Must use jQuery semantics for `context`, not\n// querySelectorAll's.  In other words, all the parts\n// of `selector` must be found under `context`.\nDOMBackend.findBySelector = function (selector, context) {\n  return $jq(selector, context);\n};\n","\n// A constant empty array (frozen if the JS engine supports it).\nvar _emptyArray = Object.freeze ? Object.freeze([]) : [];\n\n// `[new] Blaze._DOMRange([nodeAndRangeArray])`\n//\n// A DOMRange consists of an array of consecutive nodes and DOMRanges,\n// which may be replaced at any time with a new array.  If the DOMRange\n// has been attached to the DOM at some location, then updating\n// the array will cause the DOM to be updated at that location.\nBlaze._DOMRange = function (nodeAndRangeArray) {\n  if (! (this instanceof DOMRange))\n    // called without `new`\n    return new DOMRange(nodeAndRangeArray);\n\n  var members = (nodeAndRangeArray || _emptyArray);\n  if (! (members && (typeof members.length) === 'number'))\n    throw new Error(\"Expected array\");\n\n  for (var i = 0; i < members.length; i++)\n    this._memberIn(members[i]);\n\n  this.members = members;\n  this.emptyRangePlaceholder = null;\n  this.attached = false;\n  this.parentElement = null;\n  this.parentRange = null;\n  this.attachedCallbacks = _emptyArray;\n};\nvar DOMRange = Blaze._DOMRange;\n\n// In IE 8, don't use empty text nodes as placeholders\n// in empty DOMRanges, use comment nodes instead.  Using\n// empty text nodes in modern browsers is great because\n// it doesn't clutter the web inspector.  In IE 8, however,\n// it seems to lead in some roundabout way to the OAuth\n// pop-up crashing the browser completely.  In the past,\n// we didn't use empty text nodes on IE 8 because they\n// don't accept JS properties, so just use the same logic\n// even though we don't need to set properties on the\n// placeholder anymore.\nDOMRange._USE_COMMENT_PLACEHOLDERS = (function () {\n  var result = false;\n  var textNode = document.createTextNode(\"\");\n  try {\n    textNode.someProp = true;\n  } catch (e) {\n    // IE 8\n    result = true;\n  }\n  return result;\n})();\n\n// static methods\nDOMRange._insert = function (rangeOrNode, parentElement, nextNode, _isMove) {\n  var m = rangeOrNode;\n  if (m instanceof DOMRange) {\n    m.attach(parentElement, nextNode, _isMove);\n  } else {\n    if (_isMove)\n      DOMRange._moveNodeWithHooks(m, parentElement, nextNode);\n    else\n      DOMRange._insertNodeWithHooks(m, parentElement, nextNode);\n  }\n};\n\nDOMRange._remove = function (rangeOrNode) {\n  var m = rangeOrNode;\n  if (m instanceof DOMRange) {\n    m.detach();\n  } else {\n    DOMRange._removeNodeWithHooks(m);\n  }\n};\n\nDOMRange._removeNodeWithHooks = function (n) {\n  if (! n.parentNode)\n    return;\n  if (n.nodeType === 1 &&\n      n.parentNode._uihooks && n.parentNode._uihooks.removeElement) {\n    n.parentNode._uihooks.removeElement(n);\n  } else {\n    n.parentNode.removeChild(n);\n  }\n};\n\nDOMRange._insertNodeWithHooks = function (n, parent, next) {\n  // `|| null` because IE throws an error if 'next' is undefined\n  next = next || null;\n  if (n.nodeType === 1 &&\n      parent._uihooks && parent._uihooks.insertElement) {\n    parent._uihooks.insertElement(n, next);\n  } else {\n    parent.insertBefore(n, next);\n  }\n};\n\nDOMRange._moveNodeWithHooks = function (n, parent, next) {\n  if (n.parentNode !== parent)\n    return;\n  // `|| null` because IE throws an error if 'next' is undefined\n  next = next || null;\n  if (n.nodeType === 1 &&\n      parent._uihooks && parent._uihooks.moveElement) {\n    parent._uihooks.moveElement(n, next);\n  } else {\n    parent.insertBefore(n, next);\n  }\n};\n\nDOMRange.forElement = function (elem) {\n  if (elem.nodeType !== 1)\n    throw new Error(\"Expected element, found: \" + elem);\n  var range = null;\n  while (elem && ! range) {\n    range = (elem.$blaze_range || null);\n    if (! range)\n      elem = elem.parentNode;\n  }\n  return range;\n};\n\nDOMRange.prototype.attach = function (parentElement, nextNode, _isMove, _isReplace) {\n  // This method is called to insert the DOMRange into the DOM for\n  // the first time, but it's also used internally when\n  // updating the DOM.\n  //\n  // If _isMove is true, move this attached range to a different\n  // location under the same parentElement.\n  if (_isMove || _isReplace) {\n    if (! (this.parentElement === parentElement &&\n           this.attached))\n      throw new Error(\"Can only move or replace an attached DOMRange, and only under the same parent element\");\n  }\n\n  var members = this.members;\n  if (members.length) {\n    this.emptyRangePlaceholder = null;\n    for (var i = 0; i < members.length; i++) {\n      DOMRange._insert(members[i], parentElement, nextNode, _isMove);\n    }\n  } else {\n    var placeholder = (\n      DOMRange._USE_COMMENT_PLACEHOLDERS ?\n        document.createComment(\"\") :\n        document.createTextNode(\"\"));\n    this.emptyRangePlaceholder = placeholder;\n    parentElement.insertBefore(placeholder, nextNode || null);\n  }\n  this.attached = true;\n  this.parentElement = parentElement;\n\n  if (! (_isMove || _isReplace)) {\n    for(var i = 0; i < this.attachedCallbacks.length; i++) {\n      var obj = this.attachedCallbacks[i];\n      obj.attached && obj.attached(this, parentElement);\n    }\n  }\n};\n\nDOMRange.prototype.setMembers = function (newNodeAndRangeArray) {\n  var newMembers = newNodeAndRangeArray;\n  if (! (newMembers && (typeof newMembers.length) === 'number'))\n    throw new Error(\"Expected array\");\n\n  var oldMembers = this.members;\n\n  for (var i = 0; i < oldMembers.length; i++)\n    this._memberOut(oldMembers[i]);\n  for (var i = 0; i < newMembers.length; i++)\n    this._memberIn(newMembers[i]);\n\n  if (! this.attached) {\n    this.members = newMembers;\n  } else {\n    // don't do anything if we're going from empty to empty\n    if (newMembers.length || oldMembers.length) {\n      // detach the old members and insert the new members\n      var nextNode = this.lastNode().nextSibling;\n      var parentElement = this.parentElement;\n      // Use detach/attach, but don't fire attached/detached hooks\n      this.detach(true /*_isReplace*/);\n      this.members = newMembers;\n      this.attach(parentElement, nextNode, false, true /*_isReplace*/);\n    }\n  }\n};\n\nDOMRange.prototype.firstNode = function () {\n  if (! this.attached)\n    throw new Error(\"Must be attached\");\n\n  if (! this.members.length)\n    return this.emptyRangePlaceholder;\n\n  var m = this.members[0];\n  return (m instanceof DOMRange) ? m.firstNode() : m;\n};\n\nDOMRange.prototype.lastNode = function () {\n  if (! this.attached)\n    throw new Error(\"Must be attached\");\n\n  if (! this.members.length)\n    return this.emptyRangePlaceholder;\n\n  var m = this.members[this.members.length - 1];\n  return (m instanceof DOMRange) ? m.lastNode() : m;\n};\n\nDOMRange.prototype.detach = function (_isReplace) {\n  if (! this.attached)\n    throw new Error(\"Must be attached\");\n\n  var oldParentElement = this.parentElement;\n  var members = this.members;\n  if (members.length) {\n    for (var i = 0; i < members.length; i++) {\n      DOMRange._remove(members[i]);\n    }\n  } else {\n    var placeholder = this.emptyRangePlaceholder;\n    this.parentElement.removeChild(placeholder);\n    this.emptyRangePlaceholder = null;\n  }\n\n  if (! _isReplace) {\n    this.attached = false;\n    this.parentElement = null;\n\n    for(var i = 0; i < this.attachedCallbacks.length; i++) {\n      var obj = this.attachedCallbacks[i];\n      obj.detached && obj.detached(this, oldParentElement);\n    }\n  }\n};\n\nDOMRange.prototype.addMember = function (newMember, atIndex, _isMove) {\n  var members = this.members;\n  if (! (atIndex >= 0 && atIndex <= members.length))\n    throw new Error(\"Bad index in range.addMember: \" + atIndex);\n\n  if (! _isMove)\n    this._memberIn(newMember);\n\n  if (! this.attached) {\n    // currently detached; just updated members\n    members.splice(atIndex, 0, newMember);\n  } else if (members.length === 0) {\n    // empty; use the empty-to-nonempty handling of setMembers\n    this.setMembers([newMember]);\n  } else {\n    var nextNode;\n    if (atIndex === members.length) {\n      // insert at end\n      nextNode = this.lastNode().nextSibling;\n    } else {\n      var m = members[atIndex];\n      nextNode = (m instanceof DOMRange) ? m.firstNode() : m;\n    }\n    members.splice(atIndex, 0, newMember);\n    DOMRange._insert(newMember, this.parentElement, nextNode, _isMove);\n  }\n};\n\nDOMRange.prototype.removeMember = function (atIndex, _isMove) {\n  var members = this.members;\n  if (! (atIndex >= 0 && atIndex < members.length))\n    throw new Error(\"Bad index in range.removeMember: \" + atIndex);\n\n  if (_isMove) {\n    members.splice(atIndex, 1);\n  } else {\n    var oldMember = members[atIndex];\n    this._memberOut(oldMember);\n\n    if (members.length === 1) {\n      // becoming empty; use the logic in setMembers\n      this.setMembers(_emptyArray);\n    } else {\n      members.splice(atIndex, 1);\n      if (this.attached)\n        DOMRange._remove(oldMember);\n    }\n  }\n};\n\nDOMRange.prototype.moveMember = function (oldIndex, newIndex) {\n  var member = this.members[oldIndex];\n  this.removeMember(oldIndex, true /*_isMove*/);\n  this.addMember(member, newIndex, true /*_isMove*/);\n};\n\nDOMRange.prototype.getMember = function (atIndex) {\n  var members = this.members;\n  if (! (atIndex >= 0 && atIndex < members.length))\n    throw new Error(\"Bad index in range.getMember: \" + atIndex);\n  return this.members[atIndex];\n};\n\nDOMRange.prototype._memberIn = function (m) {\n  if (m instanceof DOMRange)\n    m.parentRange = this;\n  else if (m.nodeType === 1) // DOM Element\n    m.$blaze_range = this;\n};\n\nDOMRange._destroy = function (m, _skipNodes) {\n  if (m instanceof DOMRange) {\n    if (m.view)\n      Blaze._destroyView(m.view, _skipNodes);\n  } else if ((! _skipNodes) && m.nodeType === 1) {\n    // DOM Element\n    if (m.$blaze_range) {\n      Blaze._destroyNode(m);\n      m.$blaze_range = null;\n    }\n  }\n};\n\nDOMRange.prototype._memberOut = DOMRange._destroy;\n\n// Tear down, but don't remove, the members.  Used when chunks\n// of DOM are being torn down or replaced.\nDOMRange.prototype.destroyMembers = function (_skipNodes) {\n  var members = this.members;\n  for (var i = 0; i < members.length; i++)\n    this._memberOut(members[i], _skipNodes);\n};\n\nDOMRange.prototype.destroy = function (_skipNodes) {\n  DOMRange._destroy(this, _skipNodes);\n};\n\nDOMRange.prototype.containsElement = function (elem) {\n  if (! this.attached)\n    throw new Error(\"Must be attached\");\n\n  // An element is contained in this DOMRange if it's possible to\n  // reach it by walking parent pointers, first through the DOM and\n  // then parentRange pointers.  In other words, the element or some\n  // ancestor of it is at our level of the DOM (a child of our\n  // parentElement), and this element is one of our members or\n  // is a member of a descendant Range.\n\n  // First check that elem is a descendant of this.parentElement,\n  // according to the DOM.\n  if (! Blaze._elementContains(this.parentElement, elem))\n    return false;\n\n  // If elem is not an immediate child of this.parentElement,\n  // walk up to its ancestor that is.\n  while (elem.parentNode !== this.parentElement)\n    elem = elem.parentNode;\n\n  var range = elem.$blaze_range;\n  while (range && range !== this)\n    range = range.parentRange;\n\n  return range === this;\n};\n\nDOMRange.prototype.containsRange = function (range) {\n  if (! this.attached)\n    throw new Error(\"Must be attached\");\n\n  if (! range.attached)\n    return false;\n\n  // A DOMRange is contained in this DOMRange if it's possible\n  // to reach this range by following parent pointers.  If the\n  // DOMRange has the same parentElement, then it should be\n  // a member, or a member of a member etc.  Otherwise, we must\n  // contain its parentElement.\n\n  if (range.parentElement !== this.parentElement)\n    return this.containsElement(range.parentElement);\n\n  if (range === this)\n    return false; // don't contain self\n\n  while (range && range !== this)\n    range = range.parentRange;\n\n  return range === this;\n};\n\nDOMRange.prototype.onAttached = function (attached) {\n  this.onAttachedDetached({ attached: attached });\n};\n\n// callbacks are `attached(range, element)` and\n// `detached(range, element)`, and they may\n// access the `callbacks` object in `this`.\n// The arguments to `detached` are the same\n// range and element that were passed to `attached`.\nDOMRange.prototype.onAttachedDetached = function (callbacks) {\n  if (this.attachedCallbacks === _emptyArray)\n    this.attachedCallbacks = [];\n  this.attachedCallbacks.push(callbacks);\n};\n\nDOMRange.prototype.$ = function (selector) {\n  var self = this;\n\n  var parentNode = this.parentElement;\n  if (! parentNode)\n    throw new Error(\"Can't select in removed DomRange\");\n\n  // Strategy: Find all selector matches under parentNode,\n  // then filter out the ones that aren't in this DomRange\n  // using `DOMRange#containsElement`.  This is\n  // asymptotically slow in the presence of O(N) sibling\n  // content that is under parentNode but not in our range,\n  // so if performance is an issue, the selector should be\n  // run on a child element.\n\n  // Since jQuery can't run selectors on a DocumentFragment,\n  // we don't expect findBySelector to work.\n  if (parentNode.nodeType === 11 /* DocumentFragment */)\n    throw new Error(\"Can't use $ on an offscreen range\");\n\n  var results = Blaze._DOMBackend.findBySelector(selector, parentNode);\n\n  // We don't assume `results` has jQuery API; a plain array\n  // should do just as well.  However, if we do have a jQuery\n  // array, we want to end up with one also, so we use\n  // `.filter`.\n\n  // Function that selects only elements that are actually\n  // in this DomRange, rather than simply descending from\n  // `parentNode`.\n  var filterFunc = function (elem) {\n    // handle jQuery's arguments to filter, where the node\n    // is in `this` and the index is the first argument.\n    if (typeof elem === 'number')\n      elem = this;\n\n    return self.containsElement(elem);\n  };\n\n  if (! results.filter) {\n    // not a jQuery array, and not a browser with\n    // Array.prototype.filter (e.g. IE <9)\n    var newResults = [];\n    for (var i = 0; i < results.length; i++) {\n      var x = results[i];\n      if (filterFunc(x))\n        newResults.push(x);\n    }\n    results = newResults;\n  } else {\n    // `results.filter` is either jQuery's or ECMAScript's `filter`\n    results = results.filter(filterFunc);\n  }\n\n  return results;\n};\n\n// Returns true if element a contains node b and is not node b.\n//\n// The restriction that `a` be an element (not a document fragment,\n// say) is based on what's easy to implement cross-browser.\nBlaze._elementContains = function (a, b) {\n  if (a.nodeType !== 1) // ELEMENT\n    return false;\n  if (a === b)\n    return false;\n\n  if (a.compareDocumentPosition) {\n    return a.compareDocumentPosition(b) & 0x10;\n  } else {\n    // Should be only old IE and maybe other old browsers here.\n    // Modern Safari has both functions but seems to get contains() wrong.\n    // IE can't handle b being a text node.  We work around this\n    // by doing a direct parent test now.\n    b = b.parentNode;\n    if (! (b && b.nodeType === 1)) // ELEMENT\n      return false;\n    if (a === b)\n      return true;\n\n    return a.contains(b);\n  }\n};\n","import has from 'lodash.has';\n\nvar EventSupport = Blaze._EventSupport = {};\n\nvar DOMBackend = Blaze._DOMBackend;\n\n// List of events to always delegate, never capture.\n// Since jQuery fakes bubbling for certain events in\n// certain browsers (like `submit`), we don't want to\n// get in its way.\n//\n// We could list all known bubbling\n// events here to avoid creating speculative capturers\n// for them, but it would only be an optimization.\nvar eventsToDelegate = EventSupport.eventsToDelegate = {\n  blur: 1, change: 1, click: 1, focus: 1, focusin: 1,\n  focusout: 1, reset: 1, submit: 1\n};\n\nvar EVENT_MODE = EventSupport.EVENT_MODE = {\n  TBD: 0,\n  BUBBLING: 1,\n  CAPTURING: 2\n};\n\nvar NEXT_HANDLERREC_ID = 1;\n\nvar HandlerRec = function (elem, type, selector, handler, recipient) {\n  this.elem = elem;\n  this.type = type;\n  this.selector = selector;\n  this.handler = handler;\n  this.recipient = recipient;\n  this.id = (NEXT_HANDLERREC_ID++);\n\n  this.mode = EVENT_MODE.TBD;\n\n  // It's important that delegatedHandler be a different\n  // instance for each handlerRecord, because its identity\n  // is used to remove it.\n  //\n  // It's also important that the closure have access to\n  // `this` when it is not called with it set.\n  this.delegatedHandler = (function (h) {\n    return function (evt) {\n      if ((! h.selector) && evt.currentTarget !== evt.target)\n        // no selector means only fire on target\n        return;\n      return h.handler.apply(h.recipient, arguments);\n    };\n  })(this);\n\n  // WHY CAPTURE AND DELEGATE: jQuery can't delegate\n  // non-bubbling events, because\n  // event capture doesn't work in IE 8.  However, there\n  // are all sorts of new-fangled non-bubbling events\n  // like \"play\" and \"touchenter\".  We delegate these\n  // events using capture in all browsers except IE 8.\n  // IE 8 doesn't support these events anyway.\n\n  var tryCapturing = elem.addEventListener &&\n        (!has(eventsToDelegate,\n                 DOMBackend.Events.parseEventType(type)));\n\n  if (tryCapturing) {\n    this.capturingHandler = (function (h) {\n      return function (evt) {\n        if (h.mode === EVENT_MODE.TBD) {\n          // must be first time we're called.\n          if (evt.bubbles) {\n            // this type of event bubbles, so don't\n            // get called again.\n            h.mode = EVENT_MODE.BUBBLING;\n            DOMBackend.Events.unbindEventCapturer(\n              h.elem, h.type, h.capturingHandler);\n            return;\n          } else {\n            // this type of event doesn't bubble,\n            // so unbind the delegation, preventing\n            // it from ever firing.\n            h.mode = EVENT_MODE.CAPTURING;\n            DOMBackend.Events.undelegateEvents(\n              h.elem, h.type, h.delegatedHandler);\n          }\n        }\n\n        h.delegatedHandler(evt);\n      };\n    })(this);\n\n  } else {\n    this.mode = EVENT_MODE.BUBBLING;\n  }\n};\nEventSupport.HandlerRec = HandlerRec;\n\nHandlerRec.prototype.bind = function () {\n  // `this.mode` may be EVENT_MODE_TBD, in which case we bind both. in\n  // this case, 'capturingHandler' is in charge of detecting the\n  // correct mode and turning off one or the other handlers.\n  if (this.mode !== EVENT_MODE.BUBBLING) {\n    DOMBackend.Events.bindEventCapturer(\n      this.elem, this.type, this.selector || '*',\n      this.capturingHandler);\n  }\n\n  if (this.mode !== EVENT_MODE.CAPTURING)\n    DOMBackend.Events.delegateEvents(\n      this.elem, this.type,\n      this.selector || '*', this.delegatedHandler);\n};\n\nHandlerRec.prototype.unbind = function () {\n  if (this.mode !== EVENT_MODE.BUBBLING)\n    DOMBackend.Events.unbindEventCapturer(this.elem, this.type,\n                                          this.capturingHandler);\n\n  if (this.mode !== EVENT_MODE.CAPTURING)\n    DOMBackend.Events.undelegateEvents(this.elem, this.type,\n                                       this.delegatedHandler);\n};\n\nEventSupport.listen = function (element, events, selector, handler, recipient, getParentRecipient) {\n\n  // Prevent this method from being JITed by Safari.  Due to a\n  // presumed JIT bug in Safari -- observed in Version 7.0.6\n  // (9537.78.2) -- this method may crash the Safari render process if\n  // it is JITed.\n  // Repro: https://github.com/dgreensp/public/tree/master/safari-crash\n  try { element = element; } finally {}\n\n  var eventTypes = [];\n  events.replace(/[^ /]+/g, function (e) {\n    eventTypes.push(e);\n  });\n\n  var newHandlerRecs = [];\n  for (var i = 0, N = eventTypes.length; i < N; i++) {\n    var type = eventTypes[i];\n\n    var eventDict = element.$blaze_events;\n    if (! eventDict)\n      eventDict = (element.$blaze_events = {});\n\n    var info = eventDict[type];\n    if (! info) {\n      info = eventDict[type] = {};\n      info.handlers = [];\n    }\n    var handlerList = info.handlers;\n    var handlerRec = new HandlerRec(\n      element, type, selector, handler, recipient);\n    newHandlerRecs.push(handlerRec);\n    handlerRec.bind();\n    handlerList.push(handlerRec);\n    // Move handlers of enclosing ranges to end, by unbinding and rebinding\n    // them.  In jQuery (or other DOMBackend) this causes them to fire\n    // later when the backend dispatches event handlers.\n    if (getParentRecipient) {\n      for (var r = getParentRecipient(recipient); r;\n           r = getParentRecipient(r)) {\n        // r is an enclosing range (recipient)\n        for (var j = 0, Nj = handlerList.length;\n             j < Nj; j++) {\n          var h = handlerList[j];\n          if (h.recipient === r) {\n            h.unbind();\n            h.bind();\n            handlerList.splice(j, 1); // remove handlerList[j]\n            handlerList.push(h);\n            j--; // account for removed handler\n            Nj--; // don't visit appended handlers\n          }\n        }\n      }\n    }\n  }\n\n  return {\n    // closes over just `element` and `newHandlerRecs`\n    stop: function () {\n      var eventDict = element.$blaze_events;\n      if (! eventDict)\n        return;\n      // newHandlerRecs has only one item unless you specify multiple\n      // event types.  If this code is slow, it's because we have to\n      // iterate over handlerList here.  Clearing a whole handlerList\n      // via stop() methods is O(N^2) in the number of handlers on\n      // an element.\n      for (var i = 0; i < newHandlerRecs.length; i++) {\n        var handlerToRemove = newHandlerRecs[i];\n        var info = eventDict[handlerToRemove.type];\n        if (! info)\n          continue;\n        var handlerList = info.handlers;\n        for (var j = handlerList.length - 1; j >= 0; j--) {\n          if (handlerList[j] === handlerToRemove) {\n            handlerToRemove.unbind();\n            handlerList.splice(j, 1); // remove handlerList[j]\n          }\n        }\n      }\n      newHandlerRecs.length = 0;\n    }\n  };\n};\n","import has from 'lodash.has';\n\nvar jsUrlsAllowed = false;\nBlaze._allowJavascriptUrls = function () {\n  jsUrlsAllowed = true;\n};\nBlaze._javascriptUrlsAllowed = function () {\n  return jsUrlsAllowed;\n};\n\n// An AttributeHandler object is responsible for updating a particular attribute\n// of a particular element.  AttributeHandler subclasses implement\n// browser-specific logic for dealing with particular attributes across\n// different browsers.\n//\n// To define a new type of AttributeHandler, use\n// `var FooHandler = AttributeHandler.extend({ update: function ... })`\n// where the `update` function takes arguments `(element, oldValue, value)`.\n// The `element` argument is always the same between calls to `update` on\n// the same instance.  `oldValue` and `value` are each either `null` or\n// a Unicode string of the type that might be passed to the value argument\n// of `setAttribute` (i.e. not an HTML string with character references).\n// When an AttributeHandler is installed, an initial call to `update` is\n// always made with `oldValue = null`.  The `update` method can access\n// `this.name` if the AttributeHandler class is a generic one that applies\n// to multiple attribute names.\n//\n// AttributeHandlers can store custom properties on `this`, as long as they\n// don't use the names `element`, `name`, `value`, and `oldValue`.\n//\n// AttributeHandlers can't influence how attributes appear in rendered HTML,\n// only how they are updated after materialization as DOM.\n\nAttributeHandler = function (name, value) {\n  this.name = name;\n  this.value = value;\n};\nBlaze._AttributeHandler = AttributeHandler;\n\nAttributeHandler.prototype.update = function (element, oldValue, value) {\n  if (value === null) {\n    if (oldValue !== null)\n      element.removeAttribute(this.name);\n  } else {\n    element.setAttribute(this.name, value);\n  }\n};\n\nAttributeHandler.extend = function (options) {\n  var curType = this;\n  var subType = function AttributeHandlerSubtype(/*arguments*/) {\n    AttributeHandler.apply(this, arguments);\n  };\n  subType.prototype = new curType;\n  subType.extend = curType.extend;\n  if (options) {\n    Object.assign(subType.prototype, options);\n  }\n  return subType;\n};\n\n/// Apply the diff between the attributes of \"oldValue\" and \"value\" to \"element.\"\n//\n// Each subclass must implement a parseValue method which takes a string\n// as an input and returns an ordered dict of attributes. The keys of the dict\n// are unique identifiers (ie. css properties in the case of styles), and the\n// values are the entire attribute which will be injected into the element.\n//\n// Extended below to support classes, SVG elements and styles.\n\nBlaze._DiffingAttributeHandler = AttributeHandler.extend({\n  update: function (element, oldValue, value) {\n    if (!this.getCurrentValue || !this.setValue || !this.parseValue || !this.joinValues)\n      throw new Error(\"Missing methods in subclass of 'DiffingAttributeHandler'\");\n\n    var oldAttrsMap = oldValue ? this.parseValue(oldValue) : new OrderedDict();\n    var attrsMap = value ? this.parseValue(value) : new OrderedDict();\n\n    // the current attributes on the element, which we will mutate.\n\n    var currentAttrString = this.getCurrentValue(element);\n    var currentAttrsMap = currentAttrString ? this.parseValue(currentAttrString) : new OrderedDict();\n\n    // Any outside changes to attributes we add at the end.\n    currentAttrsMap.forEach(function (value, key, i) {\n      // If the key already exists, we do not use the current value, but the new value.\n      if (attrsMap.has(key)) {\n        return;\n      }\n\n      // Key does not already exist, but it existed before. Which means it was explicitly\n      // removed, so we do not add it.\n      if (oldAttrsMap.has(key)) {\n        return;\n      }\n\n      attrsMap.append(key, value);\n    });\n\n    var values = [];\n    attrsMap.forEach(function (value, key, i) {\n      values.push(value);\n    });\n\n    this.setValue(element, this.joinValues(values));\n  }\n});\n\nvar ClassHandler = Blaze._DiffingAttributeHandler.extend({\n  // @param rawValue {String}\n  getCurrentValue: function (element) {\n    return element.className;\n  },\n  setValue: function (element, className) {\n    element.className = className;\n  },\n  parseValue: function (attrString) {\n    var tokens = new OrderedDict();\n\n    attrString.split(' ').forEach(function (token) {\n      if (token) {\n        // Ordered dict requires unique keys.\n        if (! tokens.has(token)) {\n          tokens.append(token, token);\n        }\n      }\n    });\n    return tokens;\n  },\n  joinValues: function (values) {\n    return values.join(' ');\n  }\n});\n\nvar SVGClassHandler = ClassHandler.extend({\n  getCurrentValue: function (element) {\n    return element.className.baseVal;\n  },\n  setValue: function (element, className) {\n    element.setAttribute('class', className);\n  }\n});\n\nvar StyleHandler = Blaze._DiffingAttributeHandler.extend({\n  getCurrentValue: function (element) {\n    return element.getAttribute('style');\n  },\n  setValue: function (element, style) {\n    if (style === '') {\n      element.removeAttribute('style');\n    } else {\n      element.setAttribute('style', style);\n    }\n  },\n\n  // Parse a string to produce a map from property to attribute string.\n  //\n  // Example:\n  // \"color:red; foo:12px\" produces a token {color: \"color:red\", foo:\"foo:12px\"}\n  parseValue: function (attrString) {\n    var tokens = new OrderedDict();\n\n    // Regex for parsing a css attribute declaration, taken from css-parse:\n    // https://github.com/reworkcss/css-parse/blob/7cef3658d0bba872cde05a85339034b187cb3397/index.js#L219\n    var regex = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*(?:\\'(?:\\\\\\'|.)*?\\'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+[;\\s]*/g;\n    var match = regex.exec(attrString);\n    while (match) {\n      // match[0] = entire matching string\n      // match[1] = css property\n      // Prefix the token to prevent conflicts with existing properties.\n\n      // We use the last value for the same key.\n      if (tokens.has(match[1])) {\n        tokens.remove(match[1]);\n      }\n\n      tokens.append(match[1], match[0].trim());\n\n      match = regex.exec(attrString);\n    }\n\n    return tokens;\n  },\n\n  joinValues: function (values) {\n    // TODO: Assure that there is always ; between values. But what is an example where it breaks?\n    return values.join(' ');\n  }\n});\n\nvar BooleanHandler = AttributeHandler.extend({\n  update: function (element, oldValue, value) {\n    var name = this.name;\n    if (value == null) {\n      if (oldValue != null)\n        element[name] = false;\n    } else {\n      element[name] = true;\n    }\n  }\n});\n\nvar DOMPropertyHandler = AttributeHandler.extend({\n  update: function (element, oldValue, value) {\n    var name = this.name;\n    if (value !== element[name])\n      element[name] = value;\n  }\n});\n\n// attributes of the type 'xlink:something' should be set using\n// the correct namespace in order to work\nvar XlinkHandler = AttributeHandler.extend({\n  update: function(element, oldValue, value) {\n    var NS = 'http://www.w3.org/1999/xlink';\n    if (value === null) {\n      if (oldValue !== null)\n        element.removeAttributeNS(NS, this.name);\n    } else {\n      element.setAttributeNS(NS, this.name, this.value);\n    }\n  }\n});\n\n// cross-browser version of `instanceof SVGElement`\nvar isSVGElement = function (elem) {\n  return 'ownerSVGElement' in elem;\n};\n\nvar isUrlAttribute = function (tagName, attrName) {\n  // Compiled from http://www.w3.org/TR/REC-html40/index/attributes.html\n  // and\n  // http://www.w3.org/html/wg/drafts/html/master/index.html#attributes-1\n  var urlAttrs = {\n    FORM: ['action'],\n    BODY: ['background'],\n    BLOCKQUOTE: ['cite'],\n    Q: ['cite'],\n    DEL: ['cite'],\n    INS: ['cite'],\n    OBJECT: ['classid', 'codebase', 'data', 'usemap'],\n    APPLET: ['codebase'],\n    A: ['href'],\n    AREA: ['href'],\n    LINK: ['href'],\n    BASE: ['href'],\n    IMG: ['longdesc', 'src', 'usemap'],\n    FRAME: ['longdesc', 'src'],\n    IFRAME: ['longdesc', 'src'],\n    HEAD: ['profile'],\n    SCRIPT: ['src'],\n    INPUT: ['src', 'usemap', 'formaction'],\n    BUTTON: ['formaction'],\n    BASE: ['href'],\n    MENUITEM: ['icon'],\n    HTML: ['manifest'],\n    VIDEO: ['poster']\n  };\n\n  if (attrName === 'itemid') {\n    return true;\n  }\n\n  var urlAttrNames = urlAttrs[tagName] || [];\n  return urlAttrNames.includes(attrName);\n};\n\n// To get the protocol for a URL, we let the browser normalize it for\n// us, by setting it as the href for an anchor tag and then reading out\n// the 'protocol' property.\nif (Meteor.isClient) {\n  var anchorForNormalization = document.createElement('A');\n}\n\nvar getUrlProtocol = function (url) {\n  if (Meteor.isClient) {\n    anchorForNormalization.href = url;\n    return (anchorForNormalization.protocol || \"\").toLowerCase();\n  } else {\n    throw new Error('getUrlProtocol not implemented on the server');\n  }\n};\n\n// UrlHandler is an attribute handler for all HTML attributes that take\n// URL values. It disallows javascript: URLs, unless\n// Blaze._allowJavascriptUrls() has been called. To detect javascript:\n// urls, we set the attribute on a dummy anchor element and then read\n// out the 'protocol' property of the attribute.\nvar origUpdate = AttributeHandler.prototype.update;\nvar UrlHandler = AttributeHandler.extend({\n  update: function (element, oldValue, value) {\n    var self = this;\n    var args = arguments;\n\n    if (Blaze._javascriptUrlsAllowed()) {\n      origUpdate.apply(self, args);\n    } else {\n      var isJavascriptProtocol = (getUrlProtocol(value) === \"javascript:\");\n      var isVBScriptProtocol   = (getUrlProtocol(value) === \"vbscript:\");\n      if (isJavascriptProtocol || isVBScriptProtocol) {\n        Blaze._warn(\"URLs that use the 'javascript:' or 'vbscript:' protocol are not \" +\n        \"allowed in URL attribute values. \" +\n        \"Call Blaze._allowJavascriptUrls() \" +\n        \"to enable them.\");\n        origUpdate.apply(self, [element, oldValue, null]);\n      } else {\n        origUpdate.apply(self, args);\n      }\n    }\n  }\n});\n\n// XXX make it possible for users to register attribute handlers!\nBlaze._makeAttributeHandler = function (elem, name, value) {\n  // generally, use setAttribute but certain attributes need to be set\n  // by directly setting a JavaScript property on the DOM element.\n  if (name === 'class') {\n    if (isSVGElement(elem)) {\n      return new SVGClassHandler(name, value);\n    } else {\n      return new ClassHandler(name, value);\n    }\n  } else if (name === 'style') {\n    return new StyleHandler(name, value);\n  } else if ((elem.tagName === 'OPTION' && name === 'selected') ||\n  (elem.tagName === 'INPUT' && name === 'checked') ||\n  (elem.tagName === 'VIDEO' && name === 'muted')) {\n    return new BooleanHandler(name, value);\n  } else if ((elem.tagName === 'TEXTAREA' || elem.tagName === 'INPUT')\n  && name === 'value') {\n    // internally, TEXTAREAs tracks their value in the 'value'\n    // attribute just like INPUTs.\n    return new DOMPropertyHandler(name, value);\n  } else if (name.substring(0,6) === 'xlink:') {\n    return new XlinkHandler(name.substring(6), value);\n  } else if (isUrlAttribute(elem.tagName, name)) {\n    return new UrlHandler(name, value);\n  } else {\n    return new AttributeHandler(name, value);\n  }\n\n  // XXX will need one for 'style' on IE, though modern browsers\n  // seem to handle setAttribute ok.\n};\n\nElementAttributesUpdater = function (elem) {\n  this.elem = elem;\n  this.handlers = {};\n};\n\n// Update attributes on `elem` to the dictionary `attrs`, whose\n// values are strings.\nElementAttributesUpdater.prototype.update = function(newAttrs) {\n  var elem = this.elem;\n  var handlers = this.handlers;\n\n  for (var k in handlers) {\n    if (!has(newAttrs, k)) {\n      // remove attributes (and handlers) for attribute names\n      // that don't exist as keys of `newAttrs` and so won't\n      // be visited when traversing it.  (Attributes that\n      // exist in the `newAttrs` object but are `null`\n      // are handled later.)\n      var handler = handlers[k];\n      var oldValue = handler.value;\n      handler.value = null;\n      handler.update(elem, oldValue, null);\n      delete handlers[k];\n    }\n  }\n\n  for (var k in newAttrs) {\n    var handler = null;\n    var oldValue = null;\n    var value = newAttrs[k];\n    if (!has(handlers, k)) {\n      if (value !== null) {\n        // make new handler\n        handler = Blaze._makeAttributeHandler(elem, k, value);\n        handlers[k] = handler;\n      }\n    } else {\n      handler = handlers[k];\n      oldValue = handler.value;\n    }\n    if (oldValue !== value) {\n      handler.value = value;\n      handler.update(elem, oldValue, value);\n      if (value === null)\n        delete handlers[k];\n    }\n  }\n};\n","// Turns HTMLjs into DOM nodes and DOMRanges.\n//\n// - `htmljs`: the value to materialize, which may be any of the htmljs\n//   types (Tag, CharRef, Comment, Raw, array, string, boolean, number,\n//   null, or undefined) or a View or Template (which will be used to\n//   construct a View).\n// - `intoArray`: the array of DOM nodes and DOMRanges to push the output\n//   into (required)\n// - `parentView`: the View we are materializing content for (optional)\n// - `_existingWorkStack`: optional argument, only used for recursive\n//   calls when there is some other _materializeDOM on the call stack.\n//   If _materializeDOM called your function and passed in a workStack,\n//   pass it back when you call _materializeDOM (such as from a workStack\n//   task).\n//\n// Returns `intoArray`, which is especially useful if you pass in `[]`.\nBlaze._materializeDOM = function (htmljs, intoArray, parentView,\n                                  _existingWorkStack) {\n  // In order to use fewer stack frames, materializeDOMInner can push\n  // tasks onto `workStack`, and they will be popped off\n  // and run, last first, after materializeDOMInner returns.  The\n  // reason we use a stack instead of a queue is so that we recurse\n  // depth-first, doing newer tasks first.\n  var workStack = (_existingWorkStack || []);\n  materializeDOMInner(htmljs, intoArray, parentView, workStack);\n\n  if (! _existingWorkStack) {\n    // We created the work stack, so we are responsible for finishing\n    // the work.  Call each \"task\" function, starting with the top\n    // of the stack.\n    while (workStack.length) {\n      // Note that running task() may push new items onto workStack.\n      var task = workStack.pop();\n      task();\n    }\n  }\n\n  return intoArray;\n};\n\nvar materializeDOMInner = function (htmljs, intoArray, parentView, workStack) {\n  if (htmljs == null) {\n    // null or undefined\n    return;\n  }\n\n  switch (typeof htmljs) {\n  case 'string': case 'boolean': case 'number':\n    intoArray.push(document.createTextNode(String(htmljs)));\n    return;\n  case 'object':\n    if (htmljs.htmljsType) {\n      switch (htmljs.htmljsType) {\n      case HTML.Tag.htmljsType:\n        intoArray.push(materializeTag(htmljs, parentView, workStack));\n        return;\n      case HTML.CharRef.htmljsType:\n        intoArray.push(document.createTextNode(htmljs.str));\n        return;\n      case HTML.Comment.htmljsType:\n        intoArray.push(document.createComment(htmljs.sanitizedValue));\n        return;\n      case HTML.Raw.htmljsType:\n        // Get an array of DOM nodes by using the browser's HTML parser\n        // (like innerHTML).\n        var nodes = Blaze._DOMBackend.parseHTML(htmljs.value);\n        for (var i = 0; i < nodes.length; i++)\n          intoArray.push(nodes[i]);\n        return;\n      }\n    } else if (HTML.isArray(htmljs)) {\n      for (var i = htmljs.length-1; i >= 0; i--) {\n        workStack.push(Blaze._bind(Blaze._materializeDOM, null,\n                              htmljs[i], intoArray, parentView, workStack));\n      }\n      return;\n    } else {\n      if (htmljs instanceof Blaze.Template) {\n        htmljs = htmljs.constructView();\n        // fall through to Blaze.View case below\n      }\n      if (htmljs instanceof Blaze.View) {\n        Blaze._materializeView(htmljs, parentView, workStack, intoArray);\n        return;\n      }\n    }\n  }\n\n  throw new Error(\"Unexpected object in htmljs: \" + htmljs);\n};\n\nvar materializeTag = function (tag, parentView, workStack) {\n  var tagName = tag.tagName;\n  var elem;\n  if ((HTML.isKnownSVGElement(tagName) || isSVGAnchor(tag))\n      && document.createElementNS) {\n    // inline SVG\n    elem = document.createElementNS('http://www.w3.org/2000/svg', tagName);\n  } else {\n    // normal elements\n    elem = document.createElement(tagName);\n  }\n\n  var rawAttrs = tag.attrs;\n  var children = tag.children;\n  if (tagName === 'textarea' && tag.children.length &&\n      ! (rawAttrs && ('value' in rawAttrs))) {\n    // Provide very limited support for TEXTAREA tags with children\n    // rather than a \"value\" attribute.\n    // Reactivity in the form of Views nested in the tag's children\n    // won't work.  Compilers should compile textarea contents into\n    // the \"value\" attribute of the tag, wrapped in a function if there\n    // is reactivity.\n    if (typeof rawAttrs === 'function' ||\n        HTML.isArray(rawAttrs)) {\n      throw new Error(\"Can't have reactive children of TEXTAREA node; \" +\n                      \"use the 'value' attribute instead.\");\n    }\n    rawAttrs = Object.assign({}, rawAttrs || null);\n    rawAttrs.value = Blaze._expand(children, parentView);\n    children = [];\n  }\n\n  if (rawAttrs) {\n    var attrUpdater = new ElementAttributesUpdater(elem);\n    var updateAttributes = function () {\n      var expandedAttrs = Blaze._expandAttributes(rawAttrs, parentView);\n      var flattenedAttrs = HTML.flattenAttributes(expandedAttrs);\n      var stringAttrs = {};\n      for (var attrName in flattenedAttrs) {\n        // map `null`, `undefined`, and `false` to null, which is important\n        // so that attributes with nully values are considered absent.\n        // stringify anything else (e.g. strings, booleans, numbers including 0).\n        if (flattenedAttrs[attrName] == null || flattenedAttrs[attrName] === false)\n          stringAttrs[attrName] = null;\n        else\n          stringAttrs[attrName] = Blaze._toText(flattenedAttrs[attrName],\n                                                parentView,\n                                                HTML.TEXTMODE.STRING);\n      }\n      attrUpdater.update(stringAttrs);\n    };\n    var updaterComputation;\n    if (parentView) {\n      updaterComputation =\n        parentView.autorun(updateAttributes, undefined, 'updater');\n    } else {\n      updaterComputation = Tracker.nonreactive(function () {\n        return Tracker.autorun(function () {\n          Tracker._withCurrentView(parentView, updateAttributes);\n        });\n      });\n    }\n    Blaze._DOMBackend.Teardown.onElementTeardown(elem, function attrTeardown() {\n      updaterComputation.stop();\n    });\n  }\n\n  if (children.length) {\n    var childNodesAndRanges = [];\n    // push this function first so that it's done last\n    workStack.push(function () {\n      for (var i = 0; i < childNodesAndRanges.length; i++) {\n        var x = childNodesAndRanges[i];\n        if (x instanceof Blaze._DOMRange)\n          x.attach(elem);\n        else\n          elem.appendChild(x);\n      }\n    });\n    // now push the task that calculates childNodesAndRanges\n    workStack.push(Blaze._bind(Blaze._materializeDOM, null,\n                          children, childNodesAndRanges, parentView,\n                          workStack));\n  }\n\n  return elem;\n};\n\n\nvar isSVGAnchor = function (node) {\n  // We generally aren't able to detect SVG <a> elements because\n  // if \"A\" were in our list of known svg element names, then all\n  // <a> nodes would be created using\n  // `document.createElementNS`. But in the special case of <a\n  // xlink:href=\"...\">, we can at least detect that attribute and\n  // create an SVG <a> tag in that case.\n  //\n  // However, we still have a general problem of knowing when to\n  // use document.createElementNS and when to use\n  // document.createElement; for example, font tags will always\n  // be created as SVG elements which can cause other\n  // problems. #1977\n  return (node.tagName === \"a\" &&\n          node.attrs &&\n          node.attrs[\"xlink:href\"] !== undefined);\n};\n","var debugFunc;\n\n// We call into user code in many places, and it's nice to catch exceptions\n// propagated from user code immediately so that the whole system doesn't just\n// break.  Catching exceptions is easy; reporting them is hard.  This helper\n// reports exceptions.\n//\n// Usage:\n//\n// ```\n// try {\n//   // ... someStuff ...\n// } catch (e) {\n//   reportUIException(e);\n// }\n// ```\n//\n// An optional second argument overrides the default message.\n\n// Set this to `true` to cause `reportException` to throw\n// the next exception rather than reporting it.  This is\n// useful in unit tests that test error messages.\nBlaze._throwNextException = false;\n\nBlaze._reportException = function (e, msg) {\n  if (Blaze._throwNextException) {\n    Blaze._throwNextException = false;\n    throw e;\n  }\n\n  if (! debugFunc)\n    // adapted from Tracker\n    debugFunc = function () {\n      return (typeof Meteor !== \"undefined\" ? Meteor._debug :\n              ((typeof console !== \"undefined\") && console.log ? console.log :\n               function () {}));\n    };\n\n  // In Chrome, `e.stack` is a multiline string that starts with the message\n  // and contains a stack trace.  Furthermore, `console.log` makes it clickable.\n  // `console.log` supplies the space between the two arguments.\n  debugFunc()(msg || 'Exception caught in template:', e.stack || e.message || e);\n};\n\nBlaze._wrapCatchingExceptions = function (f, where) {\n  if (typeof f !== 'function')\n    return f;\n\n  return function () {\n    try {\n      return f.apply(this, arguments);\n    } catch (e) {\n      Blaze._reportException(e, 'Exception in ' + where + ':');\n    }\n  };\n};\n","/// [new] Blaze.View([name], renderMethod)\n///\n/// Blaze.View is the building block of reactive DOM.  Views have\n/// the following features:\n///\n/// * lifecycle callbacks - Views are created, rendered, and destroyed,\n///   and callbacks can be registered to fire when these things happen.\n///\n/// * parent pointer - A View points to its parentView, which is the\n///   View that caused it to be rendered.  These pointers form a\n///   hierarchy or tree of Views.\n///\n/// * render() method - A View's render() method specifies the DOM\n///   (or HTML) content of the View.  If the method establishes\n///   reactive dependencies, it may be re-run.\n///\n/// * a DOMRange - If a View is rendered to DOM, its position and\n///   extent in the DOM are tracked using a DOMRange object.\n///\n/// When a View is constructed by calling Blaze.View, the View is\n/// not yet considered \"created.\"  It doesn't have a parentView yet,\n/// and no logic has been run to initialize the View.  All real\n/// work is deferred until at least creation time, when the onViewCreated\n/// callbacks are fired, which happens when the View is \"used\" in\n/// some way that requires it to be rendered.\n///\n/// ...more lifecycle stuff\n///\n/// `name` is an optional string tag identifying the View.  The only\n/// time it's used is when looking in the View tree for a View of a\n/// particular name; for example, data contexts are stored on Views\n/// of name \"with\".  Names are also useful when debugging, so in\n/// general it's good for functions that create Views to set the name.\n/// Views associated with templates have names of the form \"Template.foo\".\n\n/**\n * @class\n * @summary Constructor for a View, which represents a reactive region of DOM.\n * @locus Client\n * @param {String} [name] Optional.  A name for this type of View.  See [`view.name`](#view_name).\n * @param {Function} renderFunction A function that returns [*renderable content*](#Renderable-Content).  In this function, `this` is bound to the View.\n */\nBlaze.View = function (name, render) {\n  if (! (this instanceof Blaze.View))\n    // called without `new`\n    return new Blaze.View(name, render);\n\n  if (typeof name === 'function') {\n    // omitted \"name\" argument\n    render = name;\n    name = '';\n  }\n  this.name = name;\n  this._render = render;\n\n  this._callbacks = {\n    created: null,\n    rendered: null,\n    destroyed: null\n  };\n\n  // Setting all properties here is good for readability,\n  // and also may help Chrome optimize the code by keeping\n  // the View object from changing shape too much.\n  this.isCreated = false;\n  this._isCreatedForExpansion = false;\n  this.isRendered = false;\n  this._isAttached = false;\n  this.isDestroyed = false;\n  this._isInRender = false;\n  this.parentView = null;\n  this._domrange = null;\n  // This flag is normally set to false except for the cases when view's parent\n  // was generated as part of expanding some syntactic sugar expressions or\n  // methods.\n  // Ex.: Blaze.renderWithData is an equivalent to creating a view with regular\n  // Blaze.render and wrapping it into {{#with data}}{{/with}} view. Since the\n  // users don't know anything about these generated parent views, Blaze needs\n  // this information to be available on views to make smarter decisions. For\n  // example: removing the generated parent view with the view on Blaze.remove.\n  this._hasGeneratedParent = false;\n  // Bindings accessible to children views (via view.lookup('name')) within the\n  // closest template view.\n  this._scopeBindings = {};\n\n  this.renderCount = 0;\n};\n\nBlaze.View.prototype._render = function () { return null; };\n\nBlaze.View.prototype.onViewCreated = function (cb) {\n  this._callbacks.created = this._callbacks.created || [];\n  this._callbacks.created.push(cb);\n};\n\nBlaze.View.prototype._onViewRendered = function (cb) {\n  this._callbacks.rendered = this._callbacks.rendered || [];\n  this._callbacks.rendered.push(cb);\n};\n\nBlaze.View.prototype.onViewReady = function (cb) {\n  var self = this;\n  var fire = function () {\n    Tracker.afterFlush(function () {\n      if (! self.isDestroyed) {\n        Blaze._withCurrentView(self, function () {\n          cb.call(self);\n        });\n      }\n    });\n  };\n  self._onViewRendered(function onViewRendered() {\n    if (self.isDestroyed)\n      return;\n    if (! self._domrange.attached)\n      self._domrange.onAttached(fire);\n    else\n      fire();\n  });\n};\n\nBlaze.View.prototype.onViewDestroyed = function (cb) {\n  this._callbacks.destroyed = this._callbacks.destroyed || [];\n  this._callbacks.destroyed.push(cb);\n};\nBlaze.View.prototype.removeViewDestroyedListener = function (cb) {\n  var destroyed = this._callbacks.destroyed;\n  if (! destroyed)\n    return;\n  var index = destroyed.lastIndexOf(cb);\n  if (index !== -1) {\n    // XXX You'd think the right thing to do would be splice, but _fireCallbacks\n    // gets sad if you remove callbacks while iterating over the list.  Should\n    // change this to use callback-hook or EventEmitter or something else that\n    // properly supports removal.\n    destroyed[index] = null;\n  }\n};\n\n/// View#autorun(func)\n///\n/// Sets up a Tracker autorun that is \"scoped\" to this View in two\n/// important ways: 1) Blaze.currentView is automatically set\n/// on every re-run, and 2) the autorun is stopped when the\n/// View is destroyed.  As with Tracker.autorun, the first run of\n/// the function is immediate, and a Computation object that can\n/// be used to stop the autorun is returned.\n///\n/// View#autorun is meant to be called from View callbacks like\n/// onViewCreated, or from outside the rendering process.  It may not\n/// be called before the onViewCreated callbacks are fired (too early),\n/// or from a render() method (too confusing).\n///\n/// Typically, autoruns that update the state\n/// of the View (as in Blaze.With) should be started from an onViewCreated\n/// callback.  Autoruns that update the DOM should be started\n/// from either onViewCreated (guarded against the absence of\n/// view._domrange), or onViewReady.\nBlaze.View.prototype.autorun = function (f, _inViewScope, displayName) {\n  var self = this;\n\n  // The restrictions on when View#autorun can be called are in order\n  // to avoid bad patterns, like creating a Blaze.View and immediately\n  // calling autorun on it.  A freshly created View is not ready to\n  // have logic run on it; it doesn't have a parentView, for example.\n  // It's when the View is materialized or expanded that the onViewCreated\n  // handlers are fired and the View starts up.\n  //\n  // Letting the render() method call `this.autorun()` is problematic\n  // because of re-render.  The best we can do is to stop the old\n  // autorun and start a new one for each render, but that's a pattern\n  // we try to avoid internally because it leads to helpers being\n  // called extra times, in the case where the autorun causes the\n  // view to re-render (and thus the autorun to be torn down and a\n  // new one established).\n  //\n  // We could lift these restrictions in various ways.  One interesting\n  // idea is to allow you to call `view.autorun` after instantiating\n  // `view`, and automatically wrap it in `view.onViewCreated`, deferring\n  // the autorun so that it starts at an appropriate time.  However,\n  // then we can't return the Computation object to the caller, because\n  // it doesn't exist yet.\n  if (! self.isCreated) {\n    throw new Error(\"View#autorun must be called from the created callback at the earliest\");\n  }\n  if (this._isInRender) {\n    throw new Error(\"Can't call View#autorun from inside render(); try calling it from the created or rendered callback\");\n  }\n\n  var templateInstanceFunc = Blaze.Template._currentTemplateInstanceFunc;\n\n  var func = function viewAutorun(c) {\n    return Blaze._withCurrentView(_inViewScope || self, function () {\n      return Blaze.Template._withTemplateInstanceFunc(\n        templateInstanceFunc, function () {\n          return f.call(self, c);\n        });\n    });\n  };\n\n  // Give the autorun function a better name for debugging and profiling.\n  // The `displayName` property is not part of the spec but browsers like Chrome\n  // and Firefox prefer it in debuggers over the name function was declared by.\n  func.displayName =\n    (self.name || 'anonymous') + ':' + (displayName || 'anonymous');\n  var comp = Tracker.autorun(func);\n\n  var stopComputation = function () { comp.stop(); };\n  self.onViewDestroyed(stopComputation);\n  comp.onStop(function () {\n    self.removeViewDestroyedListener(stopComputation);\n  });\n\n  return comp;\n};\n\nBlaze.View.prototype._errorIfShouldntCallSubscribe = function () {\n  var self = this;\n\n  if (! self.isCreated) {\n    throw new Error(\"View#subscribe must be called from the created callback at the earliest\");\n  }\n  if (self._isInRender) {\n    throw new Error(\"Can't call View#subscribe from inside render(); try calling it from the created or rendered callback\");\n  }\n  if (self.isDestroyed) {\n    throw new Error(\"Can't call View#subscribe from inside the destroyed callback, try calling it inside created or rendered.\");\n  }\n};\n\n/**\n * Just like Blaze.View#autorun, but with Meteor.subscribe instead of\n * Tracker.autorun. Stop the subscription when the view is destroyed.\n * @return {SubscriptionHandle} A handle to the subscription so that you can\n * see if it is ready, or stop it manually\n */\nBlaze.View.prototype.subscribe = function (args, options) {\n  var self = this;\n  options = options || {};\n\n  self._errorIfShouldntCallSubscribe();\n\n  var subHandle;\n  if (options.connection) {\n    subHandle = options.connection.subscribe.apply(options.connection, args);\n  } else {\n    subHandle = Meteor.subscribe.apply(Meteor, args);\n  }\n\n  self.onViewDestroyed(function () {\n    subHandle.stop();\n  });\n\n  return subHandle;\n};\n\nBlaze.View.prototype.firstNode = function () {\n  if (! this._isAttached)\n    throw new Error(\"View must be attached before accessing its DOM\");\n\n  return this._domrange.firstNode();\n};\n\nBlaze.View.prototype.lastNode = function () {\n  if (! this._isAttached)\n    throw new Error(\"View must be attached before accessing its DOM\");\n\n  return this._domrange.lastNode();\n};\n\nBlaze._fireCallbacks = function (view, which) {\n  Blaze._withCurrentView(view, function () {\n    Tracker.nonreactive(function fireCallbacks() {\n      var cbs = view._callbacks[which];\n      for (var i = 0, N = (cbs && cbs.length); i < N; i++)\n        cbs[i] && cbs[i].call(view);\n    });\n  });\n};\n\nBlaze._createView = function (view, parentView, forExpansion) {\n  if (view.isCreated)\n    throw new Error(\"Can't render the same View twice\");\n\n  view.parentView = (parentView || null);\n  view.isCreated = true;\n  if (forExpansion)\n    view._isCreatedForExpansion = true;\n\n  Blaze._fireCallbacks(view, 'created');\n};\n\nvar doFirstRender = function (view, initialContent) {\n  var domrange = new Blaze._DOMRange(initialContent);\n  view._domrange = domrange;\n  domrange.view = view;\n  view.isRendered = true;\n  Blaze._fireCallbacks(view, 'rendered');\n\n  var teardownHook = null;\n\n  domrange.onAttached(function attached(range, element) {\n    view._isAttached = true;\n\n    teardownHook = Blaze._DOMBackend.Teardown.onElementTeardown(\n      element, function teardown() {\n        Blaze._destroyView(view, true /* _skipNodes */);\n      });\n  });\n\n  // tear down the teardown hook\n  view.onViewDestroyed(function () {\n    teardownHook && teardownHook.stop();\n    teardownHook = null;\n  });\n\n  return domrange;\n};\n\n// Take an uncreated View `view` and create and render it to DOM,\n// setting up the autorun that updates the View.  Returns a new\n// DOMRange, which has been associated with the View.\n//\n// The private arguments `_workStack` and `_intoArray` are passed in\n// by Blaze._materializeDOM and are only present for recursive calls\n// (when there is some other _materializeView on the stack).  If\n// provided, then we avoid the mutual recursion of calling back into\n// Blaze._materializeDOM so that deep View hierarchies don't blow the\n// stack.  Instead, we push tasks onto workStack for the initial\n// rendering and subsequent setup of the View, and they are done after\n// we return.  When there is a _workStack, we do not return the new\n// DOMRange, but instead push it into _intoArray from a _workStack\n// task.\nBlaze._materializeView = function (view, parentView, _workStack, _intoArray) {\n  Blaze._createView(view, parentView);\n\n  var domrange;\n  var lastHtmljs;\n  // We don't expect to be called in a Computation, but just in case,\n  // wrap in Tracker.nonreactive.\n  Tracker.nonreactive(function () {\n    view.autorun(function doRender(c) {\n      // `view.autorun` sets the current view.\n      view.renderCount++;\n      view._isInRender = true;\n      // Any dependencies that should invalidate this Computation come\n      // from this line:\n      var htmljs = view._render();\n      view._isInRender = false;\n\n      if (! c.firstRun && ! Blaze._isContentEqual(lastHtmljs, htmljs)) {\n        Tracker.nonreactive(function doMaterialize() {\n          // re-render\n          var rangesAndNodes = Blaze._materializeDOM(htmljs, [], view);\n          domrange.setMembers(rangesAndNodes);\n          Blaze._fireCallbacks(view, 'rendered');\n        });\n      }\n      lastHtmljs = htmljs;\n\n      // Causes any nested views to stop immediately, not when we call\n      // `setMembers` the next time around the autorun.  Otherwise,\n      // helpers in the DOM tree to be replaced might be scheduled\n      // to re-run before we have a chance to stop them.\n      Tracker.onInvalidate(function () {\n        if (domrange) {\n          domrange.destroyMembers();\n        }\n      });\n    }, undefined, 'materialize');\n\n    // first render.  lastHtmljs is the first htmljs.\n    var initialContents;\n    if (! _workStack) {\n      initialContents = Blaze._materializeDOM(lastHtmljs, [], view);\n      domrange = doFirstRender(view, initialContents);\n      initialContents = null; // help GC because we close over this scope a lot\n    } else {\n      // We're being called from Blaze._materializeDOM, so to avoid\n      // recursion and save stack space, provide a description of the\n      // work to be done instead of doing it.  Tasks pushed onto\n      // _workStack will be done in LIFO order after we return.\n      // The work will still be done within a Tracker.nonreactive,\n      // because it will be done by some call to Blaze._materializeDOM\n      // (which is always called in a Tracker.nonreactive).\n      initialContents = [];\n      // push this function first so that it happens last\n      _workStack.push(function () {\n        domrange = doFirstRender(view, initialContents);\n        initialContents = null; // help GC because of all the closures here\n        _intoArray.push(domrange);\n      });\n      // now push the task that calculates initialContents\n      _workStack.push(Blaze._bind(Blaze._materializeDOM, null,\n                             lastHtmljs, initialContents, view, _workStack));\n    }\n  });\n\n  if (! _workStack) {\n    return domrange;\n  } else {\n    return null;\n  }\n};\n\n// Expands a View to HTMLjs, calling `render` recursively on all\n// Views and evaluating any dynamic attributes.  Calls the `created`\n// callback, but not the `materialized` or `rendered` callbacks.\n// Destroys the view immediately, unless called in a Tracker Computation,\n// in which case the view will be destroyed when the Computation is\n// invalidated.  If called in a Tracker Computation, the result is a\n// reactive string; that is, the Computation will be invalidated\n// if any changes are made to the view or subviews that might affect\n// the HTML.\nBlaze._expandView = function (view, parentView) {\n  Blaze._createView(view, parentView, true /*forExpansion*/);\n\n  view._isInRender = true;\n  var htmljs = Blaze._withCurrentView(view, function () {\n    return view._render();\n  });\n  view._isInRender = false;\n\n  var result = Blaze._expand(htmljs, view);\n\n  if (Tracker.active) {\n    Tracker.onInvalidate(function () {\n      Blaze._destroyView(view);\n    });\n  } else {\n    Blaze._destroyView(view);\n  }\n\n  return result;\n};\n\n// Options: `parentView`\nBlaze._HTMLJSExpander = HTML.TransformingVisitor.extend();\nBlaze._HTMLJSExpander.def({\n  visitObject: function (x) {\n    if (x instanceof Blaze.Template)\n      x = x.constructView();\n    if (x instanceof Blaze.View)\n      return Blaze._expandView(x, this.parentView);\n\n    // this will throw an error; other objects are not allowed!\n    return HTML.TransformingVisitor.prototype.visitObject.call(this, x);\n  },\n  visitAttributes: function (attrs) {\n    // expand dynamic attributes\n    if (typeof attrs === 'function')\n      attrs = Blaze._withCurrentView(this.parentView, attrs);\n\n    // call super (e.g. for case where `attrs` is an array)\n    return HTML.TransformingVisitor.prototype.visitAttributes.call(this, attrs);\n  },\n  visitAttribute: function (name, value, tag) {\n    // expand attribute values that are functions.  Any attribute value\n    // that contains Views must be wrapped in a function.\n    if (typeof value === 'function')\n      value = Blaze._withCurrentView(this.parentView, value);\n\n    return HTML.TransformingVisitor.prototype.visitAttribute.call(\n      this, name, value, tag);\n  }\n});\n\n// Return Blaze.currentView, but only if it is being rendered\n// (i.e. we are in its render() method).\nvar currentViewIfRendering = function () {\n  var view = Blaze.currentView;\n  return (view && view._isInRender) ? view : null;\n};\n\nBlaze._expand = function (htmljs, parentView) {\n  parentView = parentView || currentViewIfRendering();\n  return (new Blaze._HTMLJSExpander(\n    {parentView: parentView})).visit(htmljs);\n};\n\nBlaze._expandAttributes = function (attrs, parentView) {\n  parentView = parentView || currentViewIfRendering();\n  return (new Blaze._HTMLJSExpander(\n    {parentView: parentView})).visitAttributes(attrs);\n};\n\nBlaze._destroyView = function (view, _skipNodes) {\n  if (view.isDestroyed)\n    return;\n  view.isDestroyed = true;\n\n  Blaze._fireCallbacks(view, 'destroyed');\n\n  // Destroy views and elements recursively.  If _skipNodes,\n  // only recurse up to views, not elements, for the case where\n  // the backend (jQuery) is recursing over the elements already.\n\n  if (view._domrange)\n    view._domrange.destroyMembers(_skipNodes);\n};\n\nBlaze._destroyNode = function (node) {\n  if (node.nodeType === 1)\n    Blaze._DOMBackend.Teardown.tearDownElement(node);\n};\n\n// Are the HTMLjs entities `a` and `b` the same?  We could be\n// more elaborate here but the point is to catch the most basic\n// cases.\nBlaze._isContentEqual = function (a, b) {\n  if (a instanceof HTML.Raw) {\n    return (b instanceof HTML.Raw) && (a.value === b.value);\n  } else if (a == null) {\n    return (b == null);\n  } else {\n    return (a === b) &&\n      ((typeof a === 'number') || (typeof a === 'boolean') ||\n       (typeof a === 'string'));\n  }\n};\n\n/**\n * @summary The View corresponding to the current template helper, event handler, callback, or autorun.  If there isn't one, `null`.\n * @locus Client\n * @type {Blaze.View}\n */\nBlaze.currentView = null;\n\nBlaze._withCurrentView = function (view, func) {\n  var oldView = Blaze.currentView;\n  try {\n    Blaze.currentView = view;\n    return func();\n  } finally {\n    Blaze.currentView = oldView;\n  }\n};\n\n// Blaze.render publicly takes a View or a Template.\n// Privately, it takes any HTMLJS (extended with Views and Templates)\n// except null or undefined, or a function that returns any extended\n// HTMLJS.\nvar checkRenderContent = function (content) {\n  if (content === null)\n    throw new Error(\"Can't render null\");\n  if (typeof content === 'undefined')\n    throw new Error(\"Can't render undefined\");\n\n  if ((content instanceof Blaze.View) ||\n      (content instanceof Blaze.Template) ||\n      (typeof content === 'function'))\n    return;\n\n  try {\n    // Throw if content doesn't look like HTMLJS at the top level\n    // (i.e. verify that this is an HTML.Tag, or an array,\n    // or a primitive, etc.)\n    (new HTML.Visitor).visit(content);\n  } catch (e) {\n    // Make error message suitable for public API\n    throw new Error(\"Expected Template or View\");\n  }\n};\n\n// For Blaze.render and Blaze.toHTML, take content and\n// wrap it in a View, unless it's a single View or\n// Template already.\nvar contentAsView = function (content) {\n  checkRenderContent(content);\n\n  if (content instanceof Blaze.Template) {\n    return content.constructView();\n  } else if (content instanceof Blaze.View) {\n    return content;\n  } else {\n    var func = content;\n    if (typeof func !== 'function') {\n      func = function () {\n        return content;\n      };\n    }\n    return Blaze.View('render', func);\n  }\n};\n\n// For Blaze.renderWithData and Blaze.toHTMLWithData, wrap content\n// in a function, if necessary, so it can be a content arg to\n// a Blaze.With.\nvar contentAsFunc = function (content) {\n  checkRenderContent(content);\n\n  if (typeof content !== 'function') {\n    return function () {\n      return content;\n    };\n  } else {\n    return content;\n  }\n};\n\nBlaze.__rootViews = [];\n\n/**\n * @summary Renders a template or View to DOM nodes and inserts it into the DOM, returning a rendered [View](#Blaze-View) which can be passed to [`Blaze.remove`](#Blaze-remove).\n * @locus Client\n * @param {Template|Blaze.View} templateOrView The template (e.g. `Template.myTemplate`) or View object to render.  If a template, a View object is [constructed](#template_constructview).  If a View, it must be an unrendered View, which becomes a rendered View and is returned.\n * @param {DOMNode} parentNode The node that will be the parent of the rendered template.  It must be an Element node.\n * @param {DOMNode} [nextNode] Optional. If provided, must be a child of <em>parentNode</em>; the template will be inserted before this node. If not provided, the template will be inserted as the last child of parentNode.\n * @param {Blaze.View} [parentView] Optional. If provided, it will be set as the rendered View's [`parentView`](#view_parentview).\n */\nBlaze.render = function (content, parentElement, nextNode, parentView) {\n  if (! parentElement) {\n    Blaze._warn(\"Blaze.render without a parent element is deprecated. \" +\n                \"You must specify where to insert the rendered content.\");\n  }\n\n  if (nextNode instanceof Blaze.View) {\n    // handle omitted nextNode\n    parentView = nextNode;\n    nextNode = null;\n  }\n\n  // parentElement must be a DOM node. in particular, can't be the\n  // result of a call to `$`. Can't check if `parentElement instanceof\n  // Node` since 'Node' is undefined in IE8.\n  if (parentElement && typeof parentElement.nodeType !== 'number')\n    throw new Error(\"'parentElement' must be a DOM node\");\n  if (nextNode && typeof nextNode.nodeType !== 'number') // 'nextNode' is optional\n    throw new Error(\"'nextNode' must be a DOM node\");\n\n  parentView = parentView || currentViewIfRendering();\n\n  var view = contentAsView(content);\n\n  // TODO: this is only needed in development\n  if (!parentView) {\n    view.onViewCreated(function () {\n      Blaze.__rootViews.push(view);\n    });\n\n    view.onViewDestroyed(function () {\n      var index = Blaze.__rootViews.indexOf(view);\n      if (index > -1) {\n        Blaze.__rootViews.splice(index, 1);\n      }\n    });\n  }\n\n  Blaze._materializeView(view, parentView);\n  if (parentElement) {\n    view._domrange.attach(parentElement, nextNode);\n  }\n\n  return view;\n};\n\nBlaze.insert = function (view, parentElement, nextNode) {\n  Blaze._warn(\"Blaze.insert has been deprecated.  Specify where to insert the \" +\n              \"rendered content in the call to Blaze.render.\");\n\n  if (! (view && (view._domrange instanceof Blaze._DOMRange)))\n    throw new Error(\"Expected template rendered with Blaze.render\");\n\n  view._domrange.attach(parentElement, nextNode);\n};\n\n/**\n * @summary Renders a template or View to DOM nodes with a data context.  Otherwise identical to `Blaze.render`.\n * @locus Client\n * @param {Template|Blaze.View} templateOrView The template (e.g. `Template.myTemplate`) or View object to render.\n * @param {Object|Function} data The data context to use, or a function returning a data context.  If a function is provided, it will be reactively re-run.\n * @param {DOMNode} parentNode The node that will be the parent of the rendered template.  It must be an Element node.\n * @param {DOMNode} [nextNode] Optional. If provided, must be a child of <em>parentNode</em>; the template will be inserted before this node. If not provided, the template will be inserted as the last child of parentNode.\n * @param {Blaze.View} [parentView] Optional. If provided, it will be set as the rendered View's [`parentView`](#view_parentview).\n */\nBlaze.renderWithData = function (content, data, parentElement, nextNode, parentView) {\n  // We defer the handling of optional arguments to Blaze.render.  At this point,\n  // `nextNode` may actually be `parentView`.\n  return Blaze.render(Blaze._TemplateWith(data, contentAsFunc(content)),\n                          parentElement, nextNode, parentView);\n};\n\n/**\n * @summary Removes a rendered View from the DOM, stopping all reactive updates and event listeners on it. Also destroys the Blaze.Template instance associated with the view.\n * @locus Client\n * @param {Blaze.View} renderedView The return value from `Blaze.render` or `Blaze.renderWithData`, or the `view` property of a Blaze.Template instance. Calling `Blaze.remove(Template.instance().view)` from within a template event handler will destroy the view as well as that template and trigger the template's `onDestroyed` handlers.\n */\nBlaze.remove = function (view) {\n  if (! (view && (view._domrange instanceof Blaze._DOMRange)))\n    throw new Error(\"Expected template rendered with Blaze.render\");\n\n  while (view) {\n    if (! view.isDestroyed) {\n      var range = view._domrange;\n      if (range.attached && ! range.parentRange)\n        range.detach();\n      range.destroy();\n    }\n\n    view = view._hasGeneratedParent && view.parentView;\n  }\n};\n\n/**\n * @summary Renders a template or View to a string of HTML.\n * @locus Client\n * @param {Template|Blaze.View} templateOrView The template (e.g. `Template.myTemplate`) or View object from which to generate HTML.\n */\nBlaze.toHTML = function (content, parentView) {\n  parentView = parentView || currentViewIfRendering();\n\n  return HTML.toHTML(Blaze._expandView(contentAsView(content), parentView));\n};\n\n/**\n * @summary Renders a template or View to HTML with a data context.  Otherwise identical to `Blaze.toHTML`.\n * @locus Client\n * @param {Template|Blaze.View} templateOrView The template (e.g. `Template.myTemplate`) or View object from which to generate HTML.\n * @param {Object|Function} data The data context to use, or a function returning a data context.\n */\nBlaze.toHTMLWithData = function (content, data, parentView) {\n  parentView = parentView || currentViewIfRendering();\n\n  return HTML.toHTML(Blaze._expandView(Blaze._TemplateWith(\n    data, contentAsFunc(content)), parentView));\n};\n\nBlaze._toText = function (htmljs, parentView, textMode) {\n  if (typeof htmljs === 'function')\n    throw new Error(\"Blaze._toText doesn't take a function, just HTMLjs\");\n\n  if ((parentView != null) && ! (parentView instanceof Blaze.View)) {\n    // omitted parentView argument\n    textMode = parentView;\n    parentView = null;\n  }\n  parentView = parentView || currentViewIfRendering();\n\n  if (! textMode)\n    throw new Error(\"textMode required\");\n  if (! (textMode === HTML.TEXTMODE.STRING ||\n         textMode === HTML.TEXTMODE.RCDATA ||\n         textMode === HTML.TEXTMODE.ATTRIBUTE))\n    throw new Error(\"Unknown textMode: \" + textMode);\n\n  return HTML.toText(Blaze._expand(htmljs, parentView), textMode);\n};\n\n/**\n * @summary Returns the current data context, or the data context that was used when rendering a particular DOM element or View from a Meteor template.\n * @locus Client\n * @param {DOMElement|Blaze.View} [elementOrView] Optional.  An element that was rendered by a Meteor, or a View.\n */\nBlaze.getData = function (elementOrView) {\n  var theWith;\n\n  if (! elementOrView) {\n    theWith = Blaze.getView('with');\n  } else if (elementOrView instanceof Blaze.View) {\n    var view = elementOrView;\n    theWith = (view.name === 'with' ? view :\n               Blaze.getView(view, 'with'));\n  } else if (typeof elementOrView.nodeType === 'number') {\n    if (elementOrView.nodeType !== 1)\n      throw new Error(\"Expected DOM element\");\n    theWith = Blaze.getView(elementOrView, 'with');\n  } else {\n    throw new Error(\"Expected DOM element or View\");\n  }\n\n  return theWith ? theWith.dataVar.get() : null;\n};\n\n// For back-compat\nBlaze.getElementData = function (element) {\n  Blaze._warn(\"Blaze.getElementData has been deprecated.  Use \" +\n              \"Blaze.getData(element) instead.\");\n\n  if (element.nodeType !== 1)\n    throw new Error(\"Expected DOM element\");\n\n  return Blaze.getData(element);\n};\n\n// Both arguments are optional.\n\n/**\n * @summary Gets either the current View, or the View enclosing the given DOM element.\n * @locus Client\n * @param {DOMElement} [element] Optional.  If specified, the View enclosing `element` is returned.\n */\nBlaze.getView = function (elementOrView, _viewName) {\n  var viewName = _viewName;\n\n  if ((typeof elementOrView) === 'string') {\n    // omitted elementOrView; viewName present\n    viewName = elementOrView;\n    elementOrView = null;\n  }\n\n  // We could eventually shorten the code by folding the logic\n  // from the other methods into this method.\n  if (! elementOrView) {\n    return Blaze._getCurrentView(viewName);\n  } else if (elementOrView instanceof Blaze.View) {\n    return Blaze._getParentView(elementOrView, viewName);\n  } else if (typeof elementOrView.nodeType === 'number') {\n    return Blaze._getElementView(elementOrView, viewName);\n  } else {\n    throw new Error(\"Expected DOM element or View\");\n  }\n};\n\n// Gets the current view or its nearest ancestor of name\n// `name`.\nBlaze._getCurrentView = function (name) {\n  var view = Blaze.currentView;\n  // Better to fail in cases where it doesn't make sense\n  // to use Blaze._getCurrentView().  There will be a current\n  // view anywhere it does.  You can check Blaze.currentView\n  // if you want to know whether there is one or not.\n  if (! view)\n    throw new Error(\"There is no current view\");\n\n  if (name) {\n    while (view && view.name !== name)\n      view = view.parentView;\n    return view || null;\n  } else {\n    // Blaze._getCurrentView() with no arguments just returns\n    // Blaze.currentView.\n    return view;\n  }\n};\n\nBlaze._getParentView = function (view, name) {\n  var v = view.parentView;\n\n  if (name) {\n    while (v && v.name !== name)\n      v = v.parentView;\n  }\n\n  return v || null;\n};\n\nBlaze._getElementView = function (elem, name) {\n  var range = Blaze._DOMRange.forElement(elem);\n  var view = null;\n  while (range && ! view) {\n    view = (range.view || null);\n    if (! view) {\n      if (range.parentRange)\n        range = range.parentRange;\n      else\n        range = Blaze._DOMRange.forElement(range.parentElement);\n    }\n  }\n\n  if (name) {\n    while (view && view.name !== name)\n      view = view.parentView;\n    return view || null;\n  } else {\n    return view;\n  }\n};\n\nBlaze._addEventMap = function (view, eventMap, thisInHandler) {\n  thisInHandler = (thisInHandler || null);\n  var handles = [];\n\n  if (! view._domrange)\n    throw new Error(\"View must have a DOMRange\");\n\n  view._domrange.onAttached(function attached_eventMaps(range, element) {\n    Object.keys(eventMap).forEach(function (spec) {\n      let handler = eventMap[spec];\n      var clauses = spec.split(/,\\s+/);\n      // iterate over clauses of spec, e.g. ['click .foo', 'click .bar']\n      clauses.forEach(function (clause) {\n        var parts = clause.split(/\\s+/);\n        if (parts.length === 0)\n          return;\n\n        var newEvents = parts.shift();\n        var selector = parts.join(' ');\n        handles.push(Blaze._EventSupport.listen(\n          element, newEvents, selector,\n          function (evt) {\n            if (! range.containsElement(evt.currentTarget))\n              return null;\n            var handlerThis = thisInHandler || this;\n            var handlerArgs = arguments;\n            return Blaze._withCurrentView(view, function () {\n              return handler.apply(handlerThis, handlerArgs);\n            });\n          },\n          range, function (r) {\n            return r.parentRange;\n          }));\n      });\n    });\n  });\n\n  view.onViewDestroyed(function () {\n    handles.forEach(function (h) {\n      h.stop();\n    });\n    handles.length = 0;\n  });\n};\n","import has from 'lodash.has';\nimport isObject from 'lodash.isobject';\n\nBlaze._calculateCondition = function (cond) {\n  if (HTML.isArray(cond) && cond.length === 0)\n    cond = false;\n  return !! cond;\n};\n\n/**\n * @summary Constructs a View that renders content with a data context.\n * @locus Client\n * @param {Object|Function} data An object to use as the data context, or a function returning such an object.  If a function is provided, it will be reactively re-run.\n * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n */\nBlaze.With = function (data, contentFunc) {\n  var view = Blaze.View('with', contentFunc);\n\n  view.dataVar = new ReactiveVar;\n\n  view.onViewCreated(function () {\n    if (typeof data === 'function') {\n      // `data` is a reactive function\n      view.autorun(function () {\n        view.dataVar.set(data());\n      }, view.parentView, 'setData');\n    } else {\n      view.dataVar.set(data);\n    }\n  });\n\n  return view;\n};\n\n/**\n * Attaches bindings to the instantiated view.\n * @param {Object} bindings A dictionary of bindings, each binding name\n * corresponds to a value or a function that will be reactively re-run.\n * @param {View} view The target.\n */\nBlaze._attachBindingsToView = function (bindings, view) {\n  view.onViewCreated(function () {\n    Object.entries(bindings).forEach(function ([name, binding]) {\n      view._scopeBindings[name] = new ReactiveVar();\n      if (typeof binding === 'function') {\n        view.autorun(function () {\n          view._scopeBindings[name].set(binding());\n        }, view.parentView);\n      } else {\n        view._scopeBindings[name].set(binding);\n      }\n    });\n  });\n};\n\n/**\n * @summary Constructs a View setting the local lexical scope in the block.\n * @param {Function} bindings Dictionary mapping names of bindings to\n * values or computations to reactively re-run.\n * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n */\nBlaze.Let = function (bindings, contentFunc) {\n  var view = Blaze.View('let', contentFunc);\n  Blaze._attachBindingsToView(bindings, view);\n\n  return view;\n};\n\n/**\n * @summary Constructs a View that renders content conditionally.\n * @locus Client\n * @param {Function} conditionFunc A function to reactively re-run.  Whether the result is truthy or falsy determines whether `contentFunc` or `elseFunc` is shown.  An empty array is considered falsy.\n * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n * @param {Function} [elseFunc] Optional.  A Function that returns [*renderable content*](#Renderable-Content).  If no `elseFunc` is supplied, no content is shown in the \"else\" case.\n */\nBlaze.If = function (conditionFunc, contentFunc, elseFunc, _not) {\n  var conditionVar = new ReactiveVar;\n\n  var view = Blaze.View(_not ? 'unless' : 'if', function () {\n    return conditionVar.get() ? contentFunc() :\n      (elseFunc ? elseFunc() : null);\n  });\n  view.__conditionVar = conditionVar;\n  view.onViewCreated(function () {\n    this.autorun(function () {\n      var cond = Blaze._calculateCondition(conditionFunc());\n      conditionVar.set(_not ? (! cond) : cond);\n    }, this.parentView, 'condition');\n  });\n\n  return view;\n};\n\n/**\n * @summary An inverted [`Blaze.If`](#Blaze-If).\n * @locus Client\n * @param {Function} conditionFunc A function to reactively re-run.  If the result is falsy, `contentFunc` is shown, otherwise `elseFunc` is shown.  An empty array is considered falsy.\n * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n * @param {Function} [elseFunc] Optional.  A Function that returns [*renderable content*](#Renderable-Content).  If no `elseFunc` is supplied, no content is shown in the \"else\" case.\n */\nBlaze.Unless = function (conditionFunc, contentFunc, elseFunc) {\n  return Blaze.If(conditionFunc, contentFunc, elseFunc, true /*_not*/);\n};\n\n/**\n * @summary Constructs a View that renders `contentFunc` for each item in a sequence.\n * @locus Client\n * @param {Function} argFunc A function to reactively re-run. The function can\n * return one of two options:\n *\n * 1. An object with two fields: '_variable' and '_sequence'. Each iterates over\n *   '_sequence', it may be a Cursor, an array, null, or undefined. Inside the\n *   Each body you will be able to get the current item from the sequence using\n *   the name specified in the '_variable' field.\n *\n * 2. Just a sequence (Cursor, array, null, or undefined) not wrapped into an\n *   object. Inside the Each body, the current item will be set as the data\n *   context.\n * @param {Function} contentFunc A Function that returns  [*renderable\n * content*](#Renderable-Content).\n * @param {Function} [elseFunc] A Function that returns [*renderable\n * content*](#Renderable-Content) to display in the case when there are no items\n * in the sequence.\n */\nBlaze.Each = function (argFunc, contentFunc, elseFunc) {\n  var eachView = Blaze.View('each', function () {\n    var subviews = this.initialSubviews;\n    this.initialSubviews = null;\n    if (this._isCreatedForExpansion) {\n      this.expandedValueDep = new Tracker.Dependency;\n      this.expandedValueDep.depend();\n    }\n    return subviews;\n  });\n  eachView.initialSubviews = [];\n  eachView.numItems = 0;\n  eachView.inElseMode = false;\n  eachView.stopHandle = null;\n  eachView.contentFunc = contentFunc;\n  eachView.elseFunc = elseFunc;\n  eachView.argVar = new ReactiveVar;\n  eachView.variableName = null;\n\n  // update the @index value in the scope of all subviews in the range\n  var updateIndices = function (from, to) {\n    if (to === undefined) {\n      to = eachView.numItems - 1;\n    }\n\n    for (var i = from; i <= to; i++) {\n      var view = eachView._domrange.members[i].view;\n      view._scopeBindings['@index'].set(i);\n    }\n  };\n\n  eachView.onViewCreated(function () {\n    // We evaluate argFunc in an autorun to make sure\n    // Blaze.currentView is always set when it runs (rather than\n    // passing argFunc straight to ObserveSequence).\n    eachView.autorun(function () {\n      // argFunc can return either a sequence as is or a wrapper object with a\n      // _sequence and _variable fields set.\n      var arg = argFunc();\n      if (isObject(arg) && has(arg, '_sequence')) {\n        eachView.variableName = arg._variable || null;\n        arg = arg._sequence;\n      }\n\n      eachView.argVar.set(arg);\n    }, eachView.parentView, 'collection');\n\n    eachView.stopHandle = ObserveSequence.observe(function () {\n      return eachView.argVar.get();\n    }, {\n      addedAt: function (id, item, index) {\n        Tracker.nonreactive(function () {\n          var newItemView;\n          if (eachView.variableName) {\n            // new-style #each (as in {{#each item in items}})\n            // doesn't create a new data context\n            newItemView = Blaze.View('item', eachView.contentFunc);\n          } else {\n            newItemView = Blaze.With(item, eachView.contentFunc);\n          }\n\n          eachView.numItems++;\n\n          var bindings = {};\n          bindings['@index'] = index;\n          if (eachView.variableName) {\n            bindings[eachView.variableName] = item;\n          }\n          Blaze._attachBindingsToView(bindings, newItemView);\n\n          if (eachView.expandedValueDep) {\n            eachView.expandedValueDep.changed();\n          } else if (eachView._domrange) {\n            if (eachView.inElseMode) {\n              eachView._domrange.removeMember(0);\n              eachView.inElseMode = false;\n            }\n\n            var range = Blaze._materializeView(newItemView, eachView);\n            eachView._domrange.addMember(range, index);\n            updateIndices(index);\n          } else {\n            eachView.initialSubviews.splice(index, 0, newItemView);\n          }\n        });\n      },\n      removedAt: function (id, item, index) {\n        Tracker.nonreactive(function () {\n          eachView.numItems--;\n          if (eachView.expandedValueDep) {\n            eachView.expandedValueDep.changed();\n          } else if (eachView._domrange) {\n            eachView._domrange.removeMember(index);\n            updateIndices(index);\n            if (eachView.elseFunc && eachView.numItems === 0) {\n              eachView.inElseMode = true;\n              eachView._domrange.addMember(\n                Blaze._materializeView(\n                  Blaze.View('each_else',eachView.elseFunc),\n                  eachView), 0);\n            }\n          } else {\n            eachView.initialSubviews.splice(index, 1);\n          }\n        });\n      },\n      changedAt: function (id, newItem, oldItem, index) {\n        Tracker.nonreactive(function () {\n          if (eachView.expandedValueDep) {\n            eachView.expandedValueDep.changed();\n          } else {\n            var itemView;\n            if (eachView._domrange) {\n              itemView = eachView._domrange.getMember(index).view;\n            } else {\n              itemView = eachView.initialSubviews[index];\n            }\n            if (eachView.variableName) {\n              itemView._scopeBindings[eachView.variableName].set(newItem);\n            } else {\n              itemView.dataVar.set(newItem);\n            }\n          }\n        });\n      },\n      movedTo: function (id, item, fromIndex, toIndex) {\n        Tracker.nonreactive(function () {\n          if (eachView.expandedValueDep) {\n            eachView.expandedValueDep.changed();\n          } else if (eachView._domrange) {\n            eachView._domrange.moveMember(fromIndex, toIndex);\n            updateIndices(\n              Math.min(fromIndex, toIndex), Math.max(fromIndex, toIndex));\n          } else {\n            var subviews = eachView.initialSubviews;\n            var itemView = subviews[fromIndex];\n            subviews.splice(fromIndex, 1);\n            subviews.splice(toIndex, 0, itemView);\n          }\n        });\n      }\n    });\n\n    if (eachView.elseFunc && eachView.numItems === 0) {\n      eachView.inElseMode = true;\n      eachView.initialSubviews[0] =\n        Blaze.View('each_else', eachView.elseFunc);\n    }\n  });\n\n  eachView.onViewDestroyed(function () {\n    if (eachView.stopHandle)\n      eachView.stopHandle.stop();\n  });\n\n  return eachView;\n};\n\nBlaze._TemplateWith = function (arg, contentFunc) {\n  var w;\n\n  var argFunc = arg;\n  if (typeof arg !== 'function') {\n    argFunc = function () {\n      return arg;\n    };\n  }\n\n  // This is a little messy.  When we compile `{{> Template.contentBlock}}`, we\n  // wrap it in Blaze._InOuterTemplateScope in order to skip the intermediate\n  // parent Views in the current template.  However, when there's an argument\n  // (`{{> Template.contentBlock arg}}`), the argument needs to be evaluated\n  // in the original scope.  There's no good order to nest\n  // Blaze._InOuterTemplateScope and Spacebars.TemplateWith to achieve this,\n  // so we wrap argFunc to run it in the \"original parentView\" of the\n  // Blaze._InOuterTemplateScope.\n  //\n  // To make this better, reconsider _InOuterTemplateScope as a primitive.\n  // Longer term, evaluate expressions in the proper lexical scope.\n  var wrappedArgFunc = function () {\n    var viewToEvaluateArg = null;\n    if (w.parentView && w.parentView.name === 'InOuterTemplateScope') {\n      viewToEvaluateArg = w.parentView.originalParentView;\n    }\n    if (viewToEvaluateArg) {\n      return Blaze._withCurrentView(viewToEvaluateArg, argFunc);\n    } else {\n      return argFunc();\n    }\n  };\n\n  var wrappedContentFunc = function () {\n    var content = contentFunc.call(this);\n\n    // Since we are generating the Blaze._TemplateWith view for the\n    // user, set the flag on the child view.  If `content` is a template,\n    // construct the View so that we can set the flag.\n    if (content instanceof Blaze.Template) {\n      content = content.constructView();\n    }\n    if (content instanceof Blaze.View) {\n      content._hasGeneratedParent = true;\n    }\n\n    return content;\n  };\n\n  w = Blaze.With(wrappedArgFunc, wrappedContentFunc);\n  w.__isTemplateWith = true;\n  return w;\n};\n\nBlaze._InOuterTemplateScope = function (templateView, contentFunc) {\n  var view = Blaze.View('InOuterTemplateScope', contentFunc);\n  var parentView = templateView.parentView;\n\n  // Hack so that if you call `{{> foo bar}}` and it expands into\n  // `{{#with bar}}{{> foo}}{{/with}}`, and then `foo` is a template\n  // that inserts `{{> Template.contentBlock}}`, the data context for\n  // `Template.contentBlock` is not `bar` but the one enclosing that.\n  if (parentView.__isTemplateWith)\n    parentView = parentView.parentView;\n\n  view.onViewCreated(function () {\n    this.originalParentView = this.parentView;\n    this.parentView = parentView;\n    this.__childDoesntStartNewLexicalScope = true;\n  });\n  return view;\n};\n\n// XXX COMPAT WITH 0.9.0\nBlaze.InOuterTemplateScope = Blaze._InOuterTemplateScope;\n","import has from 'lodash.has';\n\nBlaze._globalHelpers = {};\n\n// Documented as Template.registerHelper.\n// This definition also provides back-compat for `UI.registerHelper`.\nBlaze.registerHelper = function (name, func) {\n  Blaze._globalHelpers[name] = func;\n};\n\n// Also documented as Template.deregisterHelper\nBlaze.deregisterHelper = function(name) {\n  delete Blaze._globalHelpers[name];\n};\n\nvar bindIfIsFunction = function (x, target) {\n  if (typeof x !== 'function')\n    return x;\n  return Blaze._bind(x, target);\n};\n\n// If `x` is a function, binds the value of `this` for that function\n// to the current data context.\nvar bindDataContext = function (x) {\n  if (typeof x === 'function') {\n    return function () {\n      var data = Blaze.getData();\n      if (data == null)\n        data = {};\n      return x.apply(data, arguments);\n    };\n  }\n  return x;\n};\n\nBlaze._OLDSTYLE_HELPER = {};\n\nBlaze._getTemplateHelper = function (template, name, tmplInstanceFunc) {\n  // XXX COMPAT WITH 0.9.3\n  var isKnownOldStyleHelper = false;\n\n  if (template.__helpers.has(name)) {\n    var helper = template.__helpers.get(name);\n    if (helper === Blaze._OLDSTYLE_HELPER) {\n      isKnownOldStyleHelper = true;\n    } else if (helper != null) {\n      return wrapHelper(bindDataContext(helper), tmplInstanceFunc);\n    } else {\n      return null;\n    }\n  }\n\n  // old-style helper\n  if (name in template) {\n    // Only warn once per helper\n    if (! isKnownOldStyleHelper) {\n      template.__helpers.set(name, Blaze._OLDSTYLE_HELPER);\n      if (! template._NOWARN_OLDSTYLE_HELPERS) {\n        Blaze._warn('Assigning helper with `' + template.viewName + '.' +\n                    name + ' = ...` is deprecated.  Use `' + template.viewName +\n                    '.helpers(...)` instead.');\n      }\n    }\n    if (template[name] != null) {\n      return wrapHelper(bindDataContext(template[name]), tmplInstanceFunc);\n    }\n  }\n\n  return null;\n};\n\nvar wrapHelper = function (f, templateFunc) {\n  if (typeof f !== \"function\") {\n    return f;\n  }\n\n  return function () {\n    var self = this;\n    var args = arguments;\n\n    return Blaze.Template._withTemplateInstanceFunc(templateFunc, function () {\n      return Blaze._wrapCatchingExceptions(f, 'template helper').apply(self, args);\n    });\n  };\n};\n\nBlaze._lexicalBindingLookup = function (view, name) {\n  var currentView = view;\n  var blockHelpersStack = [];\n\n  // walk up the views stopping at a Spacebars.include or Template view that\n  // doesn't have an InOuterTemplateScope view as a parent\n  do {\n    // skip block helpers views\n    // if we found the binding on the scope, return it\n    if (has(currentView._scopeBindings, name)) {\n      var bindingReactiveVar = currentView._scopeBindings[name];\n      return function () {\n        return bindingReactiveVar.get();\n      };\n    }\n  } while (! (currentView.__startsNewLexicalScope &&\n              ! (currentView.parentView &&\n                 currentView.parentView.__childDoesntStartNewLexicalScope))\n           && (currentView = currentView.parentView));\n\n  return null;\n};\n\n// templateInstance argument is provided to be available for possible\n// alternative implementations of this function by 3rd party packages.\nBlaze._getTemplate = function (name, templateInstance) {\n  if ((name in Blaze.Template) && (Blaze.Template[name] instanceof Blaze.Template)) {\n    return Blaze.Template[name];\n  }\n  return null;\n};\n\nBlaze._getGlobalHelper = function (name, templateInstance) {\n  if (Blaze._globalHelpers[name] != null) {\n    return wrapHelper(bindDataContext(Blaze._globalHelpers[name]), templateInstance);\n  }\n  return null;\n};\n\n// Looks up a name, like \"foo\" or \"..\", as a helper of the\n// current template; the name of a template; a global helper;\n// or a property of the data context.  Called on the View of\n// a template (i.e. a View with a `.template` property,\n// where the helpers are).  Used for the first name in a\n// \"path\" in a template tag, like \"foo\" in `{{foo.bar}}` or\n// \"..\" in `{{frobulate ../blah}}`.\n//\n// Returns a function, a non-function value, or null.  If\n// a function is found, it is bound appropriately.\n//\n// NOTE: This function must not establish any reactive\n// dependencies itself.  If there is any reactivity in the\n// value, lookup should return a function.\nBlaze.View.prototype.lookup = function (name, _options) {\n  var template = this.template;\n  var lookupTemplate = _options && _options.template;\n  var helper;\n  var binding;\n  var boundTmplInstance;\n  var foundTemplate;\n\n  if (this.templateInstance) {\n    boundTmplInstance = Blaze._bind(this.templateInstance, this);\n  }\n\n  // 0. looking up the parent data context with the special \"../\" syntax\n  if (/^\\./.test(name)) {\n    // starts with a dot. must be a series of dots which maps to an\n    // ancestor of the appropriate height.\n    if (!/^(\\.)+$/.test(name))\n      throw new Error(\"id starting with dot must be a series of dots\");\n\n    return Blaze._parentData(name.length - 1, true /*_functionWrapped*/);\n\n  }\n\n  // 1. look up a helper on the current template\n  if (template && ((helper = Blaze._getTemplateHelper(template, name, boundTmplInstance)) != null)) {\n    return helper;\n  }\n\n  // 2. look up a binding by traversing the lexical view hierarchy inside the\n  // current template\n  if (template && (binding = Blaze._lexicalBindingLookup(Blaze.currentView, name)) != null) {\n    return binding;\n  }\n\n  // 3. look up a template by name\n  if (lookupTemplate && ((foundTemplate = Blaze._getTemplate(name, boundTmplInstance)) != null)) {\n    return foundTemplate;\n  }\n\n  // 4. look up a global helper\n  if ((helper = Blaze._getGlobalHelper(name, boundTmplInstance)) != null) {\n    return helper;\n  }\n\n  // 5. look up in a data context\n  return function () {\n    var isCalledAsFunction = (arguments.length > 0);\n    var data = Blaze.getData();\n    var x = data && data[name];\n    if (! x) {\n      if (lookupTemplate) {\n        throw new Error(\"No such template: \" + name);\n      } else if (isCalledAsFunction) {\n        throw new Error(\"No such function: \" + name);\n      } else if (name.charAt(0) === '@' && ((x === null) ||\n                                            (x === undefined))) {\n        // Throw an error if the user tries to use a `@directive`\n        // that doesn't exist.  We don't implement all directives\n        // from Handlebars, so there's a potential for confusion\n        // if we fail silently.  On the other hand, we want to\n        // throw late in case some app or package wants to provide\n        // a missing directive.\n        throw new Error(\"Unsupported directive: \" + name);\n      }\n    }\n    if (! data) {\n      return null;\n    }\n    if (typeof x !== 'function') {\n      if (isCalledAsFunction) {\n        throw new Error(\"Can't call non-function: \" + x);\n      }\n      return x;\n    }\n    return x.apply(data, arguments);\n  };\n};\n\n// Implement Spacebars' {{../..}}.\n// @param height {Number} The number of '..'s\nBlaze._parentData = function (height, _functionWrapped) {\n  // If height is null or undefined, we default to 1, the first parent.\n  if (height == null) {\n    height = 1;\n  }\n  var theWith = Blaze.getView('with');\n  for (var i = 0; (i < height) && theWith; i++) {\n    theWith = Blaze.getView(theWith, 'with');\n  }\n\n  if (! theWith)\n    return null;\n  if (_functionWrapped)\n    return function () { return theWith.dataVar.get(); };\n  return theWith.dataVar.get();\n};\n\n\nBlaze.View.prototype.lookupTemplate = function (name) {\n  return this.lookup(name, {template:true});\n};\n","import isObject from 'lodash.isobject';\nimport isFunction from 'lodash.isfunction';\nimport has from 'lodash.has';\nimport isEmpty from 'lodash.isempty';\n\n// [new] Blaze.Template([viewName], renderFunction)\n//\n// `Blaze.Template` is the class of templates, like `Template.foo` in\n// Meteor, which is `instanceof Template`.\n//\n// `viewKind` is a string that looks like \"Template.foo\" for templates\n// defined by the compiler.\n\n/**\n * @class\n * @summary Constructor for a Template, which is used to construct Views with particular name and content.\n * @locus Client\n * @param {String} [viewName] Optional.  A name for Views constructed by this Template.  See [`view.name`](#view_name).\n * @param {Function} renderFunction A function that returns [*renderable content*](#Renderable-Content).  This function is used as the `renderFunction` for Views constructed by this Template.\n */\nBlaze.Template = function (viewName, renderFunction) {\n  if (! (this instanceof Blaze.Template))\n    // called without `new`\n    return new Blaze.Template(viewName, renderFunction);\n\n  if (typeof viewName === 'function') {\n    // omitted \"viewName\" argument\n    renderFunction = viewName;\n    viewName = '';\n  }\n  if (typeof viewName !== 'string')\n    throw new Error(\"viewName must be a String (or omitted)\");\n  if (typeof renderFunction !== 'function')\n    throw new Error(\"renderFunction must be a function\");\n\n  this.viewName = viewName;\n  this.renderFunction = renderFunction;\n\n  this.__helpers = new HelperMap;\n  this.__eventMaps = [];\n\n  this._callbacks = {\n    created: [],\n    rendered: [],\n    destroyed: []\n  };\n};\nvar Template = Blaze.Template;\n\nvar HelperMap = function () {};\nHelperMap.prototype.get = function (name) {\n  return this[' '+name];\n};\nHelperMap.prototype.set = function (name, helper) {\n  this[' '+name] = helper;\n};\nHelperMap.prototype.has = function (name) {\n  return (typeof this[' '+name] !== 'undefined');\n};\n\n/**\n * @summary Returns true if `value` is a template object like `Template.myTemplate`.\n * @locus Client\n * @param {Any} value The value to test.\n */\nBlaze.isTemplate = function (t) {\n  return (t instanceof Blaze.Template);\n};\n\n/**\n * @name  onCreated\n * @instance\n * @memberOf Template\n * @summary Register a function to be called when an instance of this template is created.\n * @param {Function} callback A function to be added as a callback.\n * @locus Client\n * @importFromPackage templating\n */\nTemplate.prototype.onCreated = function (cb) {\n  this._callbacks.created.push(cb);\n};\n\n/**\n * @name  onRendered\n * @instance\n * @memberOf Template\n * @summary Register a function to be called when an instance of this template is inserted into the DOM.\n * @param {Function} callback A function to be added as a callback.\n * @locus Client\n * @importFromPackage templating\n */\nTemplate.prototype.onRendered = function (cb) {\n  this._callbacks.rendered.push(cb);\n};\n\n/**\n * @name  onDestroyed\n * @instance\n * @memberOf Template\n * @summary Register a function to be called when an instance of this template is removed from the DOM and destroyed.\n * @param {Function} callback A function to be added as a callback.\n * @locus Client\n * @importFromPackage templating\n */\nTemplate.prototype.onDestroyed = function (cb) {\n  this._callbacks.destroyed.push(cb);\n};\n\nTemplate.prototype._getCallbacks = function (which) {\n  var self = this;\n  var callbacks = self[which] ? [self[which]] : [];\n  // Fire all callbacks added with the new API (Template.onRendered())\n  // as well as the old-style callback (e.g. Template.rendered) for\n  // backwards-compatibility.\n  callbacks = callbacks.concat(self._callbacks[which]);\n  return callbacks;\n};\n\nvar fireCallbacks = function (callbacks, template) {\n  Template._withTemplateInstanceFunc(\n    function () { return template; },\n    function () {\n      for (var i = 0, N = callbacks.length; i < N; i++) {\n        callbacks[i].call(template);\n      }\n    });\n};\n\nTemplate.prototype.constructView = function (contentFunc, elseFunc) {\n  var self = this;\n  var view = Blaze.View(self.viewName, self.renderFunction);\n  view.template = self;\n\n  view.templateContentBlock = (\n    contentFunc ? new Template('(contentBlock)', contentFunc) : null);\n  view.templateElseBlock = (\n    elseFunc ? new Template('(elseBlock)', elseFunc) : null);\n\n  if (self.__eventMaps || typeof self.events === 'object') {\n    view._onViewRendered(function () {\n      if (view.renderCount !== 1)\n        return;\n\n      if (! self.__eventMaps.length && typeof self.events === \"object\") {\n        // Provide limited back-compat support for `.events = {...}`\n        // syntax.  Pass `template.events` to the original `.events(...)`\n        // function.  This code must run only once per template, in\n        // order to not bind the handlers more than once, which is\n        // ensured by the fact that we only do this when `__eventMaps`\n        // is falsy, and we cause it to be set now.\n        Template.prototype.events.call(self, self.events);\n      }\n\n      self.__eventMaps.forEach(function (m) {\n        Blaze._addEventMap(view, m, view);\n      });\n    });\n  }\n\n  view._templateInstance = new Blaze.TemplateInstance(view);\n  view.templateInstance = function () {\n    // Update data, firstNode, and lastNode, and return the TemplateInstance\n    // object.\n    var inst = view._templateInstance;\n\n    /**\n     * @instance\n     * @memberOf Blaze.TemplateInstance\n     * @name  data\n     * @summary The data context of this instance's latest invocation.\n     * @locus Client\n     */\n    inst.data = Blaze.getData(view);\n\n    if (view._domrange && !view.isDestroyed) {\n      inst.firstNode = view._domrange.firstNode();\n      inst.lastNode = view._domrange.lastNode();\n    } else {\n      // on 'created' or 'destroyed' callbacks we don't have a DomRange\n      inst.firstNode = null;\n      inst.lastNode = null;\n    }\n\n    return inst;\n  };\n\n  /**\n   * @name  created\n   * @instance\n   * @memberOf Template\n   * @summary Provide a callback when an instance of a template is created.\n   * @locus Client\n   * @deprecated in 1.1\n   */\n  // To avoid situations when new callbacks are added in between view\n  // instantiation and event being fired, decide on all callbacks to fire\n  // immediately and then fire them on the event.\n  var createdCallbacks = self._getCallbacks('created');\n  view.onViewCreated(function () {\n    fireCallbacks(createdCallbacks, view.templateInstance());\n  });\n\n  /**\n   * @name  rendered\n   * @instance\n   * @memberOf Template\n   * @summary Provide a callback when an instance of a template is rendered.\n   * @locus Client\n   * @deprecated in 1.1\n   */\n  var renderedCallbacks = self._getCallbacks('rendered');\n  view.onViewReady(function () {\n    fireCallbacks(renderedCallbacks, view.templateInstance());\n  });\n\n  /**\n   * @name  destroyed\n   * @instance\n   * @memberOf Template\n   * @summary Provide a callback when an instance of a template is destroyed.\n   * @locus Client\n   * @deprecated in 1.1\n   */\n  var destroyedCallbacks = self._getCallbacks('destroyed');\n  view.onViewDestroyed(function () {\n    fireCallbacks(destroyedCallbacks, view.templateInstance());\n  });\n\n  return view;\n};\n\n/**\n * @class\n * @summary The class for template instances\n * @param {Blaze.View} view\n * @instanceName template\n */\nBlaze.TemplateInstance = function (view) {\n  if (! (this instanceof Blaze.TemplateInstance))\n    // called without `new`\n    return new Blaze.TemplateInstance(view);\n\n  if (! (view instanceof Blaze.View))\n    throw new Error(\"View required\");\n\n  view._templateInstance = this;\n\n  /**\n   * @name view\n   * @memberOf Blaze.TemplateInstance\n   * @instance\n   * @summary The [View](../api/blaze.html#Blaze-View) object for this invocation of the template.\n   * @locus Client\n   * @type {Blaze.View}\n   */\n  this.view = view;\n  this.data = null;\n\n  /**\n   * @name firstNode\n   * @memberOf Blaze.TemplateInstance\n   * @instance\n   * @summary The first top-level DOM node in this template instance.\n   * @locus Client\n   * @type {DOMNode}\n   */\n  this.firstNode = null;\n\n  /**\n   * @name lastNode\n   * @memberOf Blaze.TemplateInstance\n   * @instance\n   * @summary The last top-level DOM node in this template instance.\n   * @locus Client\n   * @type {DOMNode}\n   */\n  this.lastNode = null;\n\n  // This dependency is used to identify state transitions in\n  // _subscriptionHandles which could cause the result of\n  // TemplateInstance#subscriptionsReady to change. Basically this is triggered\n  // whenever a new subscription handle is added or when a subscription handle\n  // is removed and they are not ready.\n  this._allSubsReadyDep = new Tracker.Dependency();\n  this._allSubsReady = false;\n\n  this._subscriptionHandles = {};\n};\n\n/**\n * @summary Find all elements matching `selector` in this template instance, and return them as a JQuery object.\n * @locus Client\n * @param {String} selector The CSS selector to match, scoped to the template contents.\n * @returns {DOMNode[]}\n */\nBlaze.TemplateInstance.prototype.$ = function (selector) {\n  var view = this.view;\n  if (! view._domrange)\n    throw new Error(\"Can't use $ on template instance with no DOM\");\n  return view._domrange.$(selector);\n};\n\n/**\n * @summary Find all elements matching `selector` in this template instance.\n * @locus Client\n * @param {String} selector The CSS selector to match, scoped to the template contents.\n * @returns {DOMElement[]}\n */\nBlaze.TemplateInstance.prototype.findAll = function (selector) {\n  return Array.prototype.slice.call(this.$(selector));\n};\n\n/**\n * @summary Find one element matching `selector` in this template instance.\n * @locus Client\n * @param {String} selector The CSS selector to match, scoped to the template contents.\n * @returns {DOMElement}\n */\nBlaze.TemplateInstance.prototype.find = function (selector) {\n  var result = this.$(selector);\n  return result[0] || null;\n};\n\n/**\n * @summary A version of [Tracker.autorun](https://docs.meteor.com/api/tracker.html#Tracker-autorun) that is stopped when the template is destroyed.\n * @locus Client\n * @param {Function} runFunc The function to run. It receives one argument: a Tracker.Computation object.\n */\nBlaze.TemplateInstance.prototype.autorun = function (f) {\n  return this.view.autorun(f);\n};\n\n/**\n * @summary A version of [Meteor.subscribe](https://docs.meteor.com/api/pubsub.html#Meteor-subscribe) that is stopped\n * when the template is destroyed.\n * @return {SubscriptionHandle} The subscription handle to the newly made\n * subscription. Call `handle.stop()` to manually stop the subscription, or\n * `handle.ready()` to find out if this particular subscription has loaded all\n * of its inital data.\n * @locus Client\n * @param {String} name Name of the subscription.  Matches the name of the\n * server's `publish()` call.\n * @param {Any} [arg1,arg2...] Optional arguments passed to publisher function\n * on server.\n * @param {Function|Object} [options] If a function is passed instead of an\n * object, it is interpreted as an `onReady` callback.\n * @param {Function} [options.onReady] Passed to [`Meteor.subscribe`](https://docs.meteor.com/api/pubsub.html#Meteor-subscribe).\n * @param {Function} [options.onStop] Passed to [`Meteor.subscribe`](https://docs.meteor.com/api/pubsub.html#Meteor-subscribe).\n * @param {DDP.Connection} [options.connection] The connection on which to make the\n * subscription.\n */\nBlaze.TemplateInstance.prototype.subscribe = function (...args) {\n  var self = this;\n\n  var subHandles = self._subscriptionHandles;\n\n  // Duplicate logic from Meteor.subscribe\n  var options = {};\n  if (args.length) {\n    var lastParam = args[args.length - 1];\n\n    // Match pattern to check if the last arg is an options argument\n    var lastParamOptionsPattern = {\n      onReady: Match.Optional(Function),\n      // XXX COMPAT WITH 1.0.3.1 onError used to exist, but now we use\n      // onStop with an error callback instead.\n      onError: Match.Optional(Function),\n      onStop: Match.Optional(Function),\n      connection: Match.Optional(Match.Any)\n    };\n\n    if (isFunction(lastParam)) {\n      options.onReady = args.pop();\n    } else if (lastParam && ! isEmpty(lastParam) && Match.test(lastParam, lastParamOptionsPattern)) {\n      options = args.pop();\n    }\n  }\n\n  var subHandle;\n  var oldStopped = options.onStop;\n  options.onStop = function (error) {\n    // When the subscription is stopped, remove it from the set of tracked\n    // subscriptions to avoid this list growing without bound\n    delete subHandles[subHandle.subscriptionId];\n\n    // Removing a subscription can only change the result of subscriptionsReady\n    // if we are not ready (that subscription could be the one blocking us being\n    // ready).\n    if (! self._allSubsReady) {\n      self._allSubsReadyDep.changed();\n    }\n\n    if (oldStopped) {\n      oldStopped(error);\n    }\n  };\n\n  var connection = options.connection;\n  const { onReady, onError, onStop } = options;\n  var callbacks = { onReady, onError, onStop };\n\n  // The callbacks are passed as the last item in the arguments array passed to\n  // View#subscribe\n  args.push(callbacks);\n\n  // View#subscribe takes the connection as one of the options in the last\n  // argument\n  subHandle = self.view.subscribe.call(self.view, args, {\n    connection: connection\n  });\n\n  if (!has(subHandles, subHandle.subscriptionId)) {\n    subHandles[subHandle.subscriptionId] = subHandle;\n\n    // Adding a new subscription will always cause us to transition from ready\n    // to not ready, but if we are already not ready then this can't make us\n    // ready.\n    if (self._allSubsReady) {\n      self._allSubsReadyDep.changed();\n    }\n  }\n\n  return subHandle;\n};\n\n/**\n * @summary A reactive function that returns true when all of the subscriptions\n * called with [this.subscribe](#TemplateInstance-subscribe) are ready.\n * @return {Boolean} True if all subscriptions on this template instance are\n * ready.\n */\nBlaze.TemplateInstance.prototype.subscriptionsReady = function () {\n  this._allSubsReadyDep.depend();\n  this._allSubsReady = Object.values(this._subscriptionHandles).every((handle) => {  \n    return handle.ready();\n  });\n\n  return this._allSubsReady;\n};\n\n/**\n * @summary Specify template helpers available to this template.\n * @locus Client\n * @param {Object} helpers Dictionary of helper functions by name.\n * @importFromPackage templating\n */\nTemplate.prototype.helpers = function (dict) {\n  if (!isObject(dict)) {\n    throw new Error(\"Helpers dictionary has to be an object\");\n  }\n\n  for (var k in dict) this.__helpers.set(k, dict[k]);\n};\n\nvar canUseGetters = (function () {\n  if (Object.defineProperty) {\n    var obj = {};\n    try {\n      Object.defineProperty(obj, \"self\", {\n        get: function () { return obj; }\n      });\n    } catch (e) {\n      return false;\n    }\n    return obj.self === obj;\n  }\n  return false;\n})();\n\nif (canUseGetters) {\n  // Like Blaze.currentView but for the template instance. A function\n  // rather than a value so that not all helpers are implicitly dependent\n  // on the current template instance's `data` property, which would make\n  // them dependent on the data context of the template inclusion.\n  var currentTemplateInstanceFunc = null;\n\n  // If getters are supported, define this property with a getter function\n  // to make it effectively read-only, and to work around this bizarre JSC\n  // bug: https://github.com/meteor/meteor/issues/9926\n  Object.defineProperty(Template, \"_currentTemplateInstanceFunc\", {\n    get: function () {\n      return currentTemplateInstanceFunc;\n    }\n  });\n\n  Template._withTemplateInstanceFunc = function (templateInstanceFunc, func) {\n    if (typeof func !== 'function') {\n      throw new Error(\"Expected function, got: \" + func);\n    }\n    var oldTmplInstanceFunc = currentTemplateInstanceFunc;\n    try {\n      currentTemplateInstanceFunc = templateInstanceFunc;\n      return func();\n    } finally {\n      currentTemplateInstanceFunc = oldTmplInstanceFunc;\n    }\n  };\n} else {\n  // If getters are not supported, just use a normal property.\n  Template._currentTemplateInstanceFunc = null;\n\n  Template._withTemplateInstanceFunc = function (templateInstanceFunc, func) {\n    if (typeof func !== 'function') {\n      throw new Error(\"Expected function, got: \" + func);\n    }\n    var oldTmplInstanceFunc = Template._currentTemplateInstanceFunc;\n    try {\n      Template._currentTemplateInstanceFunc = templateInstanceFunc;\n      return func();\n    } finally {\n      Template._currentTemplateInstanceFunc = oldTmplInstanceFunc;\n    }\n  };\n}\n\n/**\n * @summary Specify event handlers for this template.\n * @locus Client\n * @param {EventMap} eventMap Event handlers to associate with this template.\n * @importFromPackage templating\n */\nTemplate.prototype.events = function (eventMap) {\n  if (!isObject(eventMap)) {\n    throw new Error(\"Event map has to be an object\");\n  }\n\n  var template = this;\n  var eventMap2 = {};\n  for (var k in eventMap) {\n    eventMap2[k] = (function (k, v) {\n      return function (event /*, ...*/) {\n        var view = this; // passed by EventAugmenter\n        var data = Blaze.getData(event.currentTarget);\n        if (data == null) data = {};\n        var args = Array.prototype.slice.call(arguments);\n        var tmplInstanceFunc = Blaze._bind(view.templateInstance, view);\n        args.splice(1, 0, tmplInstanceFunc());\n\n        return Template._withTemplateInstanceFunc(tmplInstanceFunc, function () {\n          return v.apply(data, args);\n        });\n      };\n    })(k, eventMap[k]);\n  }\n\n  template.__eventMaps.push(eventMap2);\n};\n\n/**\n * @function\n * @name instance\n * @memberOf Template\n * @summary The [template instance](#Template-instances) corresponding to the current template helper, event handler, callback, or autorun.  If there isn't one, `null`.\n * @locus Client\n * @returns {Blaze.TemplateInstance}\n * @importFromPackage templating\n */\nTemplate.instance = function () {\n  return Template._currentTemplateInstanceFunc\n    && Template._currentTemplateInstanceFunc();\n};\n\n// Note: Template.currentData() is documented to take zero arguments,\n// while Blaze.getData takes up to one.\n\n/**\n * @summary\n *\n * - Inside an `onCreated`, `onRendered`, or `onDestroyed` callback, returns\n * the data context of the template.\n * - Inside an event handler, returns the data context of the template on which\n * this event handler was defined.\n * - Inside a helper, returns the data context of the DOM node where the helper\n * was used.\n *\n * Establishes a reactive dependency on the result.\n * @locus Client\n * @function\n * @importFromPackage templating\n */\nTemplate.currentData = Blaze.getData;\n\n/**\n * @summary Accesses other data contexts that enclose the current data context.\n * @locus Client\n * @function\n * @param {Integer} [numLevels] The number of levels beyond the current data context to look. Defaults to 1.\n * @importFromPackage templating\n */\nTemplate.parentData = Blaze._parentData;\n\n/**\n * @summary Defines a [helper function](#Template-helpers) which can be used from all templates.\n * @locus Client\n * @function\n * @param {String} name The name of the helper function you are defining.\n * @param {Function} function The helper function itself.\n * @importFromPackage templating\n */\nTemplate.registerHelper = Blaze.registerHelper;\n\n/**\n * @summary Removes a global [helper function](#Template-helpers).\n * @locus Client\n * @function\n * @param {String} name The name of the helper function you are defining.\n * @importFromPackage templating\n */\nTemplate.deregisterHelper = Blaze.deregisterHelper;\n","UI = Blaze;\n\nBlaze.ReactiveVar = ReactiveVar;\nUI._templateInstance = Blaze.Template.instance;\n\nHandlebars = {};\nHandlebars.registerHelper = Blaze.registerHelper;\n\nHandlebars._escape = Blaze._escape;\n\n// Return these from {{...}} helpers to achieve the same as returning\n// strings from {{{...}}} helpers\nHandlebars.SafeString = function(string) {\n  this.string = string;\n};\nHandlebars.SafeString.prototype.toString = function() {\n  return this.string.toString();\n};\n"]}}]