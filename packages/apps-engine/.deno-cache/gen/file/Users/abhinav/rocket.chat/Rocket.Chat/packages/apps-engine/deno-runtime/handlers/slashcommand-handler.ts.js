import { JsonRpcError } from 'jsonrpc-lite';
import { AppObjectRegistry } from '../AppObjectRegistry.ts';
import { AppAccessorsInstance } from '../lib/accessors/mod.ts';
import { require } from '../lib/require.ts';
import createRoom from '../lib/roomFactory.ts';
// For some reason Deno couldn't understand the typecast to the original interfaces and said it wasn't a constructor type
const { SlashCommandContext } = require('@rocket.chat/apps-engine/definition/slashcommands/SlashCommandContext.js');
export default async function slashCommandHandler(call, params) {
  const [, commandName, method] = call.split(':');
  const command = AppObjectRegistry.get(`slashcommand:${commandName}`);
  if (!command) {
    return new JsonRpcError(`Slashcommand ${commandName} not found`, -32000);
  }
  let result;
  // If the command is registered, we're pretty safe to assume the app is not undefined
  const app = AppObjectRegistry.get('app');
  app.getLogger().debug(`${commandName}'s ${method} is being executed...`, params);
  try {
    if (method === 'executor' || method === 'previewer') {
      result = await handleExecutor({
        AppAccessorsInstance
      }, command, method, params);
    } else if (method === 'executePreviewItem') {
      result = await handlePreviewItem({
        AppAccessorsInstance
      }, command, params);
    } else {
      return new JsonRpcError(`Method ${method} not found on slashcommand ${commandName}`, -32000);
    }
    app.getLogger().debug(`${commandName}'s ${method} was successfully executed.`);
  } catch (error) {
    app.getLogger().debug(`${commandName}'s ${method} was unsuccessful.`);
    return new JsonRpcError(error.message, -32000);
  }
  return result;
}
/**
 * @param deps Dependencies that need to be injected into the slashcommand
 * @param command The slashcommand that is being executed
 * @param method The method that is being executed
 * @param params The parameters that are being passed to the method
 */ export function handleExecutor(deps, command, method, params) {
  const executor = command[method];
  if (typeof executor !== 'function') {
    throw new Error(`Method ${method} not found on slashcommand ${command.command}`);
  }
  if (!Array.isArray(params) || typeof params[0] !== 'object' || !params[0]) {
    throw new Error(`First parameter must be an object`);
  }
  const { sender, room, params: args, threadId, triggerId } = params[0];
  const context = new SlashCommandContext(sender, createRoom(room, deps.AppAccessorsInstance.getSenderFn()), args, threadId, triggerId);
  return executor.apply(command, [
    context,
    deps.AppAccessorsInstance.getReader(),
    deps.AppAccessorsInstance.getModifier(),
    deps.AppAccessorsInstance.getHttp(),
    deps.AppAccessorsInstance.getPersistence()
  ]);
}
/**
 * @param deps Dependencies that need to be injected into the slashcommand
 * @param command The slashcommand that is being executed
 * @param params The parameters that are being passed to the method
 */ export function handlePreviewItem(deps, command, params) {
  if (typeof command.executePreviewItem !== 'function') {
    throw new Error(`Method  not found on slashcommand ${command.command}`);
  }
  if (!Array.isArray(params) || typeof params[0] !== 'object' || !params[0]) {
    throw new Error(`First parameter must be an object`);
  }
  const [previewItem, { sender, room, params: args, threadId, triggerId }] = params;
  const context = new SlashCommandContext(sender, createRoom(room, deps.AppAccessorsInstance.getSenderFn()), args, threadId, triggerId);
  return command.executePreviewItem(previewItem, context, deps.AppAccessorsInstance.getReader(), deps.AppAccessorsInstance.getModifier(), deps.AppAccessorsInstance.getHttp(), deps.AppAccessorsInstance.getPersistence());
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vVXNlcnMvYWJoaW5hdi9yb2NrZXQuY2hhdC9Sb2NrZXQuQ2hhdC9wYWNrYWdlcy9hcHBzLWVuZ2luZS9kZW5vLXJ1bnRpbWUvaGFuZGxlcnMvc2xhc2hjb21tYW5kLWhhbmRsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVmaW5lZCwgSnNvblJwY0Vycm9yIH0gZnJvbSAnanNvbnJwYy1saXRlJztcblxuaW1wb3J0IHR5cGUgeyBBcHAgfSBmcm9tIFwiQHJvY2tldC5jaGF0L2FwcHMtZW5naW5lL2RlZmluaXRpb24vQXBwLnRzXCI7XG5pbXBvcnQgdHlwZSB7IElSb29tIH0gZnJvbSAnQHJvY2tldC5jaGF0L2FwcHMtZW5naW5lL2RlZmluaXRpb24vcm9vbXMvSVJvb20udHMnO1xuaW1wb3J0IHR5cGUgeyBJU2xhc2hDb21tYW5kIH0gZnJvbSAnQHJvY2tldC5jaGF0L2FwcHMtZW5naW5lL2RlZmluaXRpb24vc2xhc2hjb21tYW5kcy9JU2xhc2hDb21tYW5kLnRzJztcbmltcG9ydCB0eXBlIHsgU2xhc2hDb21tYW5kQ29udGV4dCBhcyBfU2xhc2hDb21tYW5kQ29udGV4dCB9IGZyb20gJ0Byb2NrZXQuY2hhdC9hcHBzLWVuZ2luZS9kZWZpbml0aW9uL3NsYXNoY29tbWFuZHMvU2xhc2hDb21tYW5kQ29udGV4dC50cyc7XG5pbXBvcnQgdHlwZSB7IFJvb20gYXMgX1Jvb20gfSBmcm9tICdAcm9ja2V0LmNoYXQvYXBwcy1lbmdpbmUvc2VydmVyL3Jvb21zL1Jvb20udHMnO1xuXG5pbXBvcnQgeyBBcHBPYmplY3RSZWdpc3RyeSB9IGZyb20gJy4uL0FwcE9iamVjdFJlZ2lzdHJ5LnRzJztcbmltcG9ydCB7IEFwcEFjY2Vzc29ycywgQXBwQWNjZXNzb3JzSW5zdGFuY2UgfSBmcm9tICcuLi9saWIvYWNjZXNzb3JzL21vZC50cyc7XG5pbXBvcnQgeyByZXF1aXJlIH0gZnJvbSAnLi4vbGliL3JlcXVpcmUudHMnO1xuaW1wb3J0IGNyZWF0ZVJvb20gZnJvbSAnLi4vbGliL3Jvb21GYWN0b3J5LnRzJztcblxuLy8gRm9yIHNvbWUgcmVhc29uIERlbm8gY291bGRuJ3QgdW5kZXJzdGFuZCB0aGUgdHlwZWNhc3QgdG8gdGhlIG9yaWdpbmFsIGludGVyZmFjZXMgYW5kIHNhaWQgaXQgd2Fzbid0IGEgY29uc3RydWN0b3IgdHlwZVxuY29uc3QgeyBTbGFzaENvbW1hbmRDb250ZXh0IH0gPSByZXF1aXJlKCdAcm9ja2V0LmNoYXQvYXBwcy1lbmdpbmUvZGVmaW5pdGlvbi9zbGFzaGNvbW1hbmRzL1NsYXNoQ29tbWFuZENvbnRleHQuanMnKSBhcyB7XG4gICAgU2xhc2hDb21tYW5kQ29udGV4dDogdHlwZW9mIF9TbGFzaENvbW1hbmRDb250ZXh0O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gc2xhc2hDb21tYW5kSGFuZGxlcihjYWxsOiBzdHJpbmcsIHBhcmFtczogdW5rbm93bik6IFByb21pc2U8SnNvblJwY0Vycm9yIHwgRGVmaW5lZD4ge1xuICAgIGNvbnN0IFssIGNvbW1hbmROYW1lLCBtZXRob2RdID0gY2FsbC5zcGxpdCgnOicpO1xuXG4gICAgY29uc3QgY29tbWFuZCA9IEFwcE9iamVjdFJlZ2lzdHJ5LmdldDxJU2xhc2hDb21tYW5kPihgc2xhc2hjb21tYW5kOiR7Y29tbWFuZE5hbWV9YCk7XG5cbiAgICBpZiAoIWNvbW1hbmQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBKc29uUnBjRXJyb3IoYFNsYXNoY29tbWFuZCAke2NvbW1hbmROYW1lfSBub3QgZm91bmRgLCAtMzIwMDApO1xuICAgIH1cblxuICAgIGxldCByZXN1bHQ6IEF3YWl0ZWQ8UmV0dXJuVHlwZTx0eXBlb2YgaGFuZGxlRXhlY3V0b3I+PiB8IEF3YWl0ZWQ8UmV0dXJuVHlwZTx0eXBlb2YgaGFuZGxlUHJldmlld0l0ZW0+PjtcblxuICAgIC8vIElmIHRoZSBjb21tYW5kIGlzIHJlZ2lzdGVyZWQsIHdlJ3JlIHByZXR0eSBzYWZlIHRvIGFzc3VtZSB0aGUgYXBwIGlzIG5vdCB1bmRlZmluZWRcbiAgICBjb25zdCBhcHAgPSBBcHBPYmplY3RSZWdpc3RyeS5nZXQ8QXBwPignYXBwJykhO1xuXG4gICAgYXBwLmdldExvZ2dlcigpLmRlYnVnKGAke2NvbW1hbmROYW1lfSdzICR7bWV0aG9kfSBpcyBiZWluZyBleGVjdXRlZC4uLmAsIHBhcmFtcyk7XG5cbiAgICB0cnkge1xuICAgICAgICBpZiAobWV0aG9kID09PSAnZXhlY3V0b3InIHx8IG1ldGhvZCA9PT0gJ3ByZXZpZXdlcicpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGhhbmRsZUV4ZWN1dG9yKHsgQXBwQWNjZXNzb3JzSW5zdGFuY2UgfSwgY29tbWFuZCwgbWV0aG9kLCBwYXJhbXMpO1xuICAgICAgICB9IGVsc2UgaWYgKG1ldGhvZCA9PT0gJ2V4ZWN1dGVQcmV2aWV3SXRlbScpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGhhbmRsZVByZXZpZXdJdGVtKHsgQXBwQWNjZXNzb3JzSW5zdGFuY2UgfSwgY29tbWFuZCwgcGFyYW1zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSnNvblJwY0Vycm9yKGBNZXRob2QgJHttZXRob2R9IG5vdCBmb3VuZCBvbiBzbGFzaGNvbW1hbmQgJHtjb21tYW5kTmFtZX1gLCAtMzIwMDApO1xuICAgICAgICB9XG5cbiAgICAgICAgYXBwLmdldExvZ2dlcigpLmRlYnVnKGAke2NvbW1hbmROYW1lfSdzICR7bWV0aG9kfSB3YXMgc3VjY2Vzc2Z1bGx5IGV4ZWN1dGVkLmApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGFwcC5nZXRMb2dnZXIoKS5kZWJ1ZyhgJHtjb21tYW5kTmFtZX0ncyAke21ldGhvZH0gd2FzIHVuc3VjY2Vzc2Z1bC5gKTtcblxuICAgICAgICByZXR1cm4gbmV3IEpzb25ScGNFcnJvcihlcnJvci5tZXNzYWdlLCAtMzIwMDApO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQHBhcmFtIGRlcHMgRGVwZW5kZW5jaWVzIHRoYXQgbmVlZCB0byBiZSBpbmplY3RlZCBpbnRvIHRoZSBzbGFzaGNvbW1hbmRcbiAqIEBwYXJhbSBjb21tYW5kIFRoZSBzbGFzaGNvbW1hbmQgdGhhdCBpcyBiZWluZyBleGVjdXRlZFxuICogQHBhcmFtIG1ldGhvZCBUaGUgbWV0aG9kIHRoYXQgaXMgYmVpbmcgZXhlY3V0ZWRcbiAqIEBwYXJhbSBwYXJhbXMgVGhlIHBhcmFtZXRlcnMgdGhhdCBhcmUgYmVpbmcgcGFzc2VkIHRvIHRoZSBtZXRob2RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUV4ZWN1dG9yKGRlcHM6IHsgQXBwQWNjZXNzb3JzSW5zdGFuY2U6IEFwcEFjY2Vzc29ycyB9LCBjb21tYW5kOiBJU2xhc2hDb21tYW5kLCBtZXRob2Q6ICdleGVjdXRvcicgfCAncHJldmlld2VyJywgcGFyYW1zOiB1bmtub3duKSB7XG4gICAgY29uc3QgZXhlY3V0b3IgPSBjb21tYW5kW21ldGhvZF07XG5cbiAgICBpZiAodHlwZW9mIGV4ZWN1dG9yICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTWV0aG9kICR7bWV0aG9kfSBub3QgZm91bmQgb24gc2xhc2hjb21tYW5kICR7Y29tbWFuZC5jb21tYW5kfWApO1xuICAgIH1cblxuICAgIGlmICghQXJyYXkuaXNBcnJheShwYXJhbXMpIHx8IHR5cGVvZiBwYXJhbXNbMF0gIT09ICdvYmplY3QnIHx8ICFwYXJhbXNbMF0pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGaXJzdCBwYXJhbWV0ZXIgbXVzdCBiZSBhbiBvYmplY3RgKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHNlbmRlciwgcm9vbSwgcGFyYW1zOiBhcmdzLCB0aHJlYWRJZCwgdHJpZ2dlcklkIH0gPSBwYXJhbXNbMF0gYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG5cbiAgICBjb25zdCBjb250ZXh0ID0gbmV3IFNsYXNoQ29tbWFuZENvbnRleHQoXG4gICAgICAgIHNlbmRlciBhcyBfU2xhc2hDb21tYW5kQ29udGV4dFsnc2VuZGVyJ10sXG4gICAgICAgIGNyZWF0ZVJvb20ocm9vbSBhcyBJUm9vbSwgZGVwcy5BcHBBY2Nlc3NvcnNJbnN0YW5jZS5nZXRTZW5kZXJGbigpKSxcbiAgICAgICAgYXJncyBhcyBfU2xhc2hDb21tYW5kQ29udGV4dFsncGFyYW1zJ10sXG4gICAgICAgIHRocmVhZElkIGFzIF9TbGFzaENvbW1hbmRDb250ZXh0Wyd0aHJlYWRJZCddLFxuICAgICAgICB0cmlnZ2VySWQgYXMgX1NsYXNoQ29tbWFuZENvbnRleHRbJ3RyaWdnZXJJZCddLFxuICAgICk7XG5cbiAgICByZXR1cm4gZXhlY3V0b3IuYXBwbHkoY29tbWFuZCwgW1xuICAgICAgICBjb250ZXh0LFxuICAgICAgICBkZXBzLkFwcEFjY2Vzc29yc0luc3RhbmNlLmdldFJlYWRlcigpLFxuICAgICAgICBkZXBzLkFwcEFjY2Vzc29yc0luc3RhbmNlLmdldE1vZGlmaWVyKCksXG4gICAgICAgIGRlcHMuQXBwQWNjZXNzb3JzSW5zdGFuY2UuZ2V0SHR0cCgpLFxuICAgICAgICBkZXBzLkFwcEFjY2Vzc29yc0luc3RhbmNlLmdldFBlcnNpc3RlbmNlKCksXG4gICAgXSk7XG59XG5cbi8qKlxuICogQHBhcmFtIGRlcHMgRGVwZW5kZW5jaWVzIHRoYXQgbmVlZCB0byBiZSBpbmplY3RlZCBpbnRvIHRoZSBzbGFzaGNvbW1hbmRcbiAqIEBwYXJhbSBjb21tYW5kIFRoZSBzbGFzaGNvbW1hbmQgdGhhdCBpcyBiZWluZyBleGVjdXRlZFxuICogQHBhcmFtIHBhcmFtcyBUaGUgcGFyYW1ldGVycyB0aGF0IGFyZSBiZWluZyBwYXNzZWQgdG8gdGhlIG1ldGhvZFxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlUHJldmlld0l0ZW0oZGVwczogeyBBcHBBY2Nlc3NvcnNJbnN0YW5jZTogQXBwQWNjZXNzb3JzIH0sIGNvbW1hbmQ6IElTbGFzaENvbW1hbmQsIHBhcmFtczogdW5rbm93bikge1xuICAgIGlmICh0eXBlb2YgY29tbWFuZC5leGVjdXRlUHJldmlld0l0ZW0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNZXRob2QgIG5vdCBmb3VuZCBvbiBzbGFzaGNvbW1hbmQgJHtjb21tYW5kLmNvbW1hbmR9YCk7XG4gICAgfVxuXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHBhcmFtcykgfHwgdHlwZW9mIHBhcmFtc1swXSAhPT0gJ29iamVjdCcgfHwgIXBhcmFtc1swXSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZpcnN0IHBhcmFtZXRlciBtdXN0IGJlIGFuIG9iamVjdGApO1xuICAgIH1cblxuICAgIGNvbnN0IFtwcmV2aWV3SXRlbSwgeyBzZW5kZXIsIHJvb20sIHBhcmFtczogYXJncywgdGhyZWFkSWQsIHRyaWdnZXJJZCB9XSA9IHBhcmFtcyBhcyBbUmVjb3JkPHN0cmluZywgdW5rbm93bj4sIFJlY29yZDxzdHJpbmcsIHVua25vd24+XTtcblxuICAgIGNvbnN0IGNvbnRleHQgPSBuZXcgU2xhc2hDb21tYW5kQ29udGV4dChcbiAgICAgICAgc2VuZGVyIGFzIF9TbGFzaENvbW1hbmRDb250ZXh0WydzZW5kZXInXSxcbiAgICAgICAgY3JlYXRlUm9vbShyb29tIGFzIElSb29tLCBkZXBzLkFwcEFjY2Vzc29yc0luc3RhbmNlLmdldFNlbmRlckZuKCkpLFxuICAgICAgICBhcmdzIGFzIF9TbGFzaENvbW1hbmRDb250ZXh0WydwYXJhbXMnXSxcbiAgICAgICAgdGhyZWFkSWQgYXMgX1NsYXNoQ29tbWFuZENvbnRleHRbJ3RocmVhZElkJ10sXG4gICAgICAgIHRyaWdnZXJJZCBhcyBfU2xhc2hDb21tYW5kQ29udGV4dFsndHJpZ2dlcklkJ10sXG4gICAgKTtcblxuICAgIHJldHVybiBjb21tYW5kLmV4ZWN1dGVQcmV2aWV3SXRlbShcbiAgICAgICAgcHJldmlld0l0ZW0sXG4gICAgICAgIGNvbnRleHQsXG4gICAgICAgIGRlcHMuQXBwQWNjZXNzb3JzSW5zdGFuY2UuZ2V0UmVhZGVyKCksXG4gICAgICAgIGRlcHMuQXBwQWNjZXNzb3JzSW5zdGFuY2UuZ2V0TW9kaWZpZXIoKSxcbiAgICAgICAgZGVwcy5BcHBBY2Nlc3NvcnNJbnN0YW5jZS5nZXRIdHRwKCksXG4gICAgICAgIGRlcHMuQXBwQWNjZXNzb3JzSW5zdGFuY2UuZ2V0UGVyc2lzdGVuY2UoKSxcbiAgICApO1xufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFNBQWtCLFlBQVksUUFBUSxlQUFlO0FBUXJELFNBQVMsaUJBQWlCLFFBQVEsMEJBQTBCO0FBQzVELFNBQXVCLG9CQUFvQixRQUFRLDBCQUEwQjtBQUM3RSxTQUFTLE9BQU8sUUFBUSxvQkFBb0I7QUFDNUMsT0FBTyxnQkFBZ0Isd0JBQXdCO0FBRS9DLHlIQUF5SDtBQUN6SCxNQUFNLEVBQUUsbUJBQW1CLEVBQUUsR0FBRyxRQUFRO0FBSXhDLGVBQWUsZUFBZSxvQkFBb0IsSUFBWSxFQUFFLE1BQWU7RUFDM0UsTUFBTSxHQUFHLGFBQWEsT0FBTyxHQUFHLEtBQUssS0FBSyxDQUFDO0VBRTNDLE1BQU0sVUFBVSxrQkFBa0IsR0FBRyxDQUFnQixDQUFDLGFBQWEsRUFBRSxZQUFZLENBQUM7RUFFbEYsSUFBSSxDQUFDLFNBQVM7SUFDVixPQUFPLElBQUksYUFBYSxDQUFDLGFBQWEsRUFBRSxZQUFZLFVBQVUsQ0FBQyxFQUFFLENBQUM7RUFDdEU7RUFFQSxJQUFJO0VBRUoscUZBQXFGO0VBQ3JGLE1BQU0sTUFBTSxrQkFBa0IsR0FBRyxDQUFNO0VBRXZDLElBQUksU0FBUyxHQUFHLEtBQUssQ0FBQyxDQUFDLEVBQUUsWUFBWSxHQUFHLEVBQUUsT0FBTyxxQkFBcUIsQ0FBQyxFQUFFO0VBRXpFLElBQUk7SUFDQSxJQUFJLFdBQVcsY0FBYyxXQUFXLGFBQWE7TUFDakQsU0FBUyxNQUFNLGVBQWU7UUFBRTtNQUFxQixHQUFHLFNBQVMsUUFBUTtJQUM3RSxPQUFPLElBQUksV0FBVyxz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