import { AppObjectRegistry } from '../../AppObjectRegistry.ts';
import { require } from '../../lib/require.ts';
const { AppStatus } = require('@rocket.chat/apps-engine/definition/AppStatus.js');
export default async function handleSetStatus(params) {
  if (!Array.isArray(params) || !Object.values(AppStatus).includes(params[0])) {
    throw new Error('Invalid params', {
      cause: 'invalid_param_type'
    });
  }
  const [status] = params;
  const app = AppObjectRegistry.get('app');
  if (!app || typeof app['setStatus'] !== 'function') {
    throw new Error('App must contain a setStatus function', {
      cause: 'invalid_app'
    });
  }
  await app['setStatus'](status);
  return null;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vVXNlcnMvYWJoaW5hdi9yb2NrZXQuY2hhdC9Sb2NrZXQuQ2hhdC9wYWNrYWdlcy9hcHBzLWVuZ2luZS9kZW5vLXJ1bnRpbWUvaGFuZGxlcnMvYXBwL2hhbmRsZVNldFN0YXR1cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEFwcCB9IGZyb20gJ0Byb2NrZXQuY2hhdC9hcHBzLWVuZ2luZS9kZWZpbml0aW9uL0FwcC50cyc7XG5pbXBvcnQgdHlwZSB7IEFwcFN0YXR1cyBhcyBfQXBwU3RhdHVzIH0gZnJvbSAnQHJvY2tldC5jaGF0L2FwcHMtZW5naW5lL2RlZmluaXRpb24vQXBwU3RhdHVzLnRzJztcblxuaW1wb3J0IHsgQXBwT2JqZWN0UmVnaXN0cnkgfSBmcm9tICcuLi8uLi9BcHBPYmplY3RSZWdpc3RyeS50cyc7XG5pbXBvcnQgeyByZXF1aXJlIH0gZnJvbSAnLi4vLi4vbGliL3JlcXVpcmUudHMnO1xuXG5jb25zdCB7IEFwcFN0YXR1cyB9ID0gcmVxdWlyZSgnQHJvY2tldC5jaGF0L2FwcHMtZW5naW5lL2RlZmluaXRpb24vQXBwU3RhdHVzLmpzJykgYXMge1xuICAgIEFwcFN0YXR1czogdHlwZW9mIF9BcHBTdGF0dXM7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVTZXRTdGF0dXMocGFyYW1zOiB1bmtub3duKTogUHJvbWlzZTxudWxsPiB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHBhcmFtcykgfHwgIU9iamVjdC52YWx1ZXMoQXBwU3RhdHVzKS5pbmNsdWRlcyhwYXJhbXNbMF0pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwYXJhbXMnLCB7IGNhdXNlOiAnaW52YWxpZF9wYXJhbV90eXBlJyB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBbc3RhdHVzXSA9IHBhcmFtcyBhcyBbdHlwZW9mIEFwcFN0YXR1c107XG5cbiAgICBjb25zdCBhcHAgPSBBcHBPYmplY3RSZWdpc3RyeS5nZXQ8QXBwPignYXBwJyk7XG5cbiAgICBpZiAoIWFwcCB8fCB0eXBlb2YgYXBwWydzZXRTdGF0dXMnXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FwcCBtdXN0IGNvbnRhaW4gYSBzZXRTdGF0dXMgZnVuY3Rpb24nLCB7XG4gICAgICAgICAgICBjYXVzZTogJ2ludmFsaWRfYXBwJyxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXdhaXQgYXBwWydzZXRTdGF0dXMnXShzdGF0dXMpO1xuXG4gICAgcmV0dXJuIG51bGw7XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0EsU0FBUyxpQkFBaUIsUUFBUSw2QkFBNkI7QUFDL0QsU0FBUyxPQUFPLFFBQVEsdUJBQXVCO0FBRS9DLE1BQU0sRUFBRSxTQUFTLEVBQUUsR0FBRyxRQUFRO0FBSTlCLGVBQWUsZUFBZSxnQkFBZ0IsTUFBZTtFQUN6RCxJQUFJLENBQUMsTUFBTSxPQUFPLENBQUMsV0FBVyxDQUFDLE9BQU8sTUFBTSxDQUFDLFdBQVcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEdBQUc7SUFDekUsTUFBTSxJQUFJLE1BQU0sa0JBQWtCO01BQUUsT0FBTztJQUFxQjtFQUNwRTtFQUVBLE1BQU0sQ0FBQyxPQUFPLEdBQUc7RUFFakIsTUFBTSxNQUFNLGtCQUFrQixHQUFHLENBQU07RUFFdkMsSUFBSSxDQUFDLE9BQU8sT0FBTyxHQUFHLENBQUMsWUFBWSxLQUFLLFlBQVk7SUFDaEQsTUFBTSxJQUFJLE1BQU0seUNBQXlDO01BQ3JELE9BQU87SUFDWDtFQUNKO0VBRUEsTUFBTSxHQUFHLENBQUMsWUFBWSxDQUFDO0VBRXZCLE9BQU87QUFDWCJ9