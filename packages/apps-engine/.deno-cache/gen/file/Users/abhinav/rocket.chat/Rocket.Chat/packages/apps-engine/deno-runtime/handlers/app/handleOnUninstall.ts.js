import { AppObjectRegistry } from '../../AppObjectRegistry.ts';
import { AppAccessorsInstance } from '../../lib/accessors/mod.ts';
export default async function handleOnUninstall(params) {
  const app = AppObjectRegistry.get('app');
  if (typeof app?.onUninstall !== 'function') {
    throw new Error('App must contain an onUninstall function', {
      cause: 'invalid_app'
    });
  }
  if (!Array.isArray(params)) {
    throw new Error('Invalid params', {
      cause: 'invalid_param_type'
    });
  }
  const [context] = params;
  await app.onUninstall(context, AppAccessorsInstance.getReader(), AppAccessorsInstance.getHttp(), AppAccessorsInstance.getPersistence(), AppAccessorsInstance.getModifier());
  return true;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vVXNlcnMvYWJoaW5hdi9yb2NrZXQuY2hhdC9Sb2NrZXQuQ2hhdC9wYWNrYWdlcy9hcHBzLWVuZ2luZS9kZW5vLXJ1bnRpbWUvaGFuZGxlcnMvYXBwL2hhbmRsZU9uVW5pbnN0YWxsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQXBwIH0gZnJvbSAnQHJvY2tldC5jaGF0L2FwcHMtZW5naW5lL2RlZmluaXRpb24vQXBwLnRzJztcblxuaW1wb3J0IHsgQXBwT2JqZWN0UmVnaXN0cnkgfSBmcm9tICcuLi8uLi9BcHBPYmplY3RSZWdpc3RyeS50cyc7XG5pbXBvcnQgeyBBcHBBY2Nlc3NvcnNJbnN0YW5jZSB9IGZyb20gJy4uLy4uL2xpYi9hY2Nlc3NvcnMvbW9kLnRzJztcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlT25Vbmluc3RhbGwocGFyYW1zOiB1bmtub3duKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgYXBwID0gQXBwT2JqZWN0UmVnaXN0cnkuZ2V0PEFwcD4oJ2FwcCcpO1xuXG4gICAgaWYgKHR5cGVvZiBhcHA/Lm9uVW5pbnN0YWxsICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQXBwIG11c3QgY29udGFpbiBhbiBvblVuaW5zdGFsbCBmdW5jdGlvbicsIHtcbiAgICAgICAgICAgIGNhdXNlOiAnaW52YWxpZF9hcHAnLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkocGFyYW1zKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcGFyYW1zJywgeyBjYXVzZTogJ2ludmFsaWRfcGFyYW1fdHlwZScgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgW2NvbnRleHRdID0gcGFyYW1zIGFzIFtSZWNvcmQ8c3RyaW5nLCB1bmtub3duPl07XG5cbiAgICBhd2FpdCBhcHAub25Vbmluc3RhbGwoXG4gICAgICAgIGNvbnRleHQsXG4gICAgICAgIEFwcEFjY2Vzc29yc0luc3RhbmNlLmdldFJlYWRlcigpLFxuICAgICAgICBBcHBBY2Nlc3NvcnNJbnN0YW5jZS5nZXRIdHRwKCksXG4gICAgICAgIEFwcEFjY2Vzc29yc0luc3RhbmNlLmdldFBlcnNpc3RlbmNlKCksXG4gICAgICAgIEFwcEFjY2Vzc29yc0luc3RhbmNlLmdldE1vZGlmaWVyKCksXG4gICAgKTtcblxuICAgIHJldHVybiB0cnVlO1xufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLFNBQVMsaUJBQWlCLFFBQVEsNkJBQTZCO0FBQy9ELFNBQVMsb0JBQW9CLFFBQVEsNkJBQTZCO0FBRWxFLGVBQWUsZUFBZSxrQkFBa0IsTUFBZTtFQUMzRCxNQUFNLE1BQU0sa0JBQWtCLEdBQUcsQ0FBTTtFQUV2QyxJQUFJLE9BQU8sS0FBSyxnQkFBZ0IsWUFBWTtJQUN4QyxNQUFNLElBQUksTUFBTSw0Q0FBNEM7TUFDeEQsT0FBTztJQUNYO0VBQ0o7RUFFQSxJQUFJLENBQUMsTUFBTSxPQUFPLENBQUMsU0FBUztJQUN4QixNQUFNLElBQUksTUFBTSxrQkFBa0I7TUFBRSxPQUFPO0lBQXFCO0VBQ3BFO0VBRUEsTUFBTSxDQUFDLFFBQVEsR0FBRztFQUVsQixNQUFNLElBQUksV0FBVyxDQUNqQixTQUNBLHFCQUFxQixTQUFTLElBQzlCLHFCQUFxQixPQUFPLElBQzVCLHFCQUFxQixjQUFjLElBQ25DLHFCQUFxQixXQUFXO0VBR3BDLE9BQU87QUFDWCJ9