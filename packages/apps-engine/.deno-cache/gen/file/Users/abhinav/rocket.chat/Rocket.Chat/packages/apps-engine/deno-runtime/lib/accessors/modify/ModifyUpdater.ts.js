import { MessageBuilder } from '../builders/MessageBuilder.ts';
import { RoomBuilder } from '../builders/RoomBuilder.ts';
import { AppObjectRegistry } from '../../../AppObjectRegistry.ts';
import { require } from '../../../lib/require.ts';
const { UIHelper } = require('@rocket.chat/apps-engine/server/misc/UIHelper.js');
const { RoomType } = require('@rocket.chat/apps-engine/definition/rooms/RoomType.js');
const { RocketChatAssociationModel } = require('@rocket.chat/apps-engine/definition/metadata/RocketChatAssociations.js');
export class ModifyUpdater {
  senderFn;
  constructor(senderFn){
    this.senderFn = senderFn;
  }
  getLivechatUpdater() {
    return new Proxy({
      __kind: 'getLivechatUpdater'
    }, {
      get: (_target, prop)=>(...params)=>prop === 'toJSON' ? {} : this.senderFn({
            method: `accessor:getModifier:getUpdater:getLivechatUpdater:${prop}`,
            params
          }).then((response)=>response.result).catch((err)=>{
            throw new Error(err.error);
          })
    });
  }
  getUserUpdater() {
    return new Proxy({
      __kind: 'getUserUpdater'
    }, {
      get: (_target, prop)=>(...params)=>prop === 'toJSON' ? {} : this.senderFn({
            method: `accessor:getModifier:getUpdater:getUserUpdater:${prop}`,
            params
          }).then((response)=>response.result).catch((err)=>{
            throw new Error(err.error);
          })
    });
  }
  async message(messageId, _updater) {
    const response = await this.senderFn({
      method: 'bridges:getMessageBridge:doGetById',
      params: [
        messageId,
        AppObjectRegistry.get('id')
      ]
    });
    return new MessageBuilder(response.result);
  }
  async room(roomId, _updater) {
    const response = await this.senderFn({
      method: 'bridges:getRoomBridge:doGetById',
      params: [
        roomId,
        AppObjectRegistry.get('id')
      ]
    });
    return new RoomBuilder(response.result);
  }
  finish(builder) {
    switch(builder.kind){
      case RocketChatAssociationModel.MESSAGE:
        return this._finishMessage(builder);
      case RocketChatAssociationModel.ROOM:
        return this._finishRoom(builder);
      default:
        throw new Error('Invalid builder passed to the ModifyUpdater.finish function.');
    }
  }
  async _finishMessage(builder) {
    const result = builder.getMessage();
    if (!result.id) {
      throw new Error("Invalid message, can't update a message without an id.");
    }
    if (!result.sender?.id) {
      throw new Error('Invalid sender assigned to the message.');
    }
    if (result.blocks?.length) {
      result.blocks = UIHelper.assignIds(result.blocks, AppObjectRegistry.get('id') || '');
    }
    await this.senderFn({
      method: 'bridges:getMessageBridge:doUpdate',
      params: [
        result,
        AppObjectRegistry.get('id')
      ]
    });
  }
  async _finishRoom(builder) {
    const result = builder.getRoom();
    if (!result.id) {
      throw new Error("Invalid room, can't update a room without an id.");
    }
    if (!result.type) {
      throw new Error('Invalid type assigned to the room.');
    }
    if (result.type !== RoomType.LIVE_CHAT) {
      if (!result.creator || !result.creator.id) {
        throw new Error('Invalid creator assigned to the room.');
      }
      if (!result.slugifiedName || !result.slugifiedName.trim()) {
        throw new Error('Invalid slugifiedName assigned to the room.');
      }
    }
    if (!result.displayName || !result.displayName.trim()) {
      throw new Error('Invalid displayName assigned to the room.');
    }
    await this.senderFn({
      method: 'bridges:getRoomBridge:doUpdate',
      params: [
        result,
        builder.getMembersToBeAddedUsernames(),
        AppObjectRegistry.get('id')
      ]
    });
  }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vVXNlcnMvYWJoaW5hdi9yb2NrZXQuY2hhdC9Sb2NrZXQuQ2hhdC9wYWNrYWdlcy9hcHBzLWVuZ2luZS9kZW5vLXJ1bnRpbWUvbGliL2FjY2Vzc29ycy9tb2RpZnkvTW9kaWZ5VXBkYXRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IElNb2RpZnlVcGRhdGVyIH0gZnJvbSAnQHJvY2tldC5jaGF0L2FwcHMtZW5naW5lL2RlZmluaXRpb24vYWNjZXNzb3JzL0lNb2RpZnlVcGRhdGVyLnRzJztcbmltcG9ydCB0eXBlIHsgSUxpdmVjaGF0VXBkYXRlciB9IGZyb20gJ0Byb2NrZXQuY2hhdC9hcHBzLWVuZ2luZS9kZWZpbml0aW9uL2FjY2Vzc29ycy9JTGl2ZWNoYXRVcGRhdGVyLnRzJztcbmltcG9ydCB0eXBlIHsgSVVzZXJVcGRhdGVyIH0gZnJvbSAnQHJvY2tldC5jaGF0L2FwcHMtZW5naW5lL2RlZmluaXRpb24vYWNjZXNzb3JzL0lVc2VyVXBkYXRlci50cyc7XG5pbXBvcnQgdHlwZSB7IElNZXNzYWdlQnVpbGRlciB9IGZyb20gJ0Byb2NrZXQuY2hhdC9hcHBzLWVuZ2luZS9kZWZpbml0aW9uL2FjY2Vzc29ycy9JTWVzc2FnZUJ1aWxkZXIudHMnO1xuaW1wb3J0IHR5cGUgeyBJUm9vbUJ1aWxkZXIgfSBmcm9tICdAcm9ja2V0LmNoYXQvYXBwcy1lbmdpbmUvZGVmaW5pdGlvbi9hY2Nlc3NvcnMvSVJvb21CdWlsZGVyLnRzJztcbmltcG9ydCB0eXBlIHsgSVVzZXIgfSBmcm9tICdAcm9ja2V0LmNoYXQvYXBwcy1lbmdpbmUvZGVmaW5pdGlvbi91c2Vycy9JVXNlci50cyc7XG5pbXBvcnQgdHlwZSB7IElNZXNzYWdlIH0gZnJvbSAnQHJvY2tldC5jaGF0L2FwcHMtZW5naW5lL2RlZmluaXRpb24vbWVzc2FnZXMvSU1lc3NhZ2UudHMnO1xuaW1wb3J0IHR5cGUgeyBJUm9vbSB9IGZyb20gJ0Byb2NrZXQuY2hhdC9hcHBzLWVuZ2luZS9kZWZpbml0aW9uL3Jvb21zL0lSb29tLnRzJztcblxuaW1wb3J0IHR5cGUgeyBVSUhlbHBlciBhcyBfVUlIZWxwZXIgfSBmcm9tICdAcm9ja2V0LmNoYXQvYXBwcy1lbmdpbmUvc2VydmVyL21pc2MvVUlIZWxwZXIudHMnO1xuaW1wb3J0IHR5cGUgeyBSb29tVHlwZSBhcyBfUm9vbVR5cGUgfSBmcm9tICdAcm9ja2V0LmNoYXQvYXBwcy1lbmdpbmUvZGVmaW5pdGlvbi9yb29tcy9Sb29tVHlwZS50cyc7XG5pbXBvcnQgdHlwZSB7IFJvY2tldENoYXRBc3NvY2lhdGlvbk1vZGVsIGFzIF9Sb2NrZXRDaGF0QXNzb2NpYXRpb25Nb2RlbCB9IGZyb20gJ0Byb2NrZXQuY2hhdC9hcHBzLWVuZ2luZS9kZWZpbml0aW9uL21ldGFkYXRhL1JvY2tldENoYXRBc3NvY2lhdGlvbnMudHMnO1xuXG5pbXBvcnQgKiBhcyBNZXNzZW5nZXIgZnJvbSAnLi4vLi4vbWVzc2VuZ2VyLnRzJztcblxuaW1wb3J0IHsgTWVzc2FnZUJ1aWxkZXIgfSBmcm9tICcuLi9idWlsZGVycy9NZXNzYWdlQnVpbGRlci50cyc7XG5pbXBvcnQgeyBSb29tQnVpbGRlciB9IGZyb20gJy4uL2J1aWxkZXJzL1Jvb21CdWlsZGVyLnRzJztcbmltcG9ydCB7IEFwcE9iamVjdFJlZ2lzdHJ5IH0gZnJvbSAnLi4vLi4vLi4vQXBwT2JqZWN0UmVnaXN0cnkudHMnO1xuXG5pbXBvcnQgeyByZXF1aXJlIH0gZnJvbSAnLi4vLi4vLi4vbGliL3JlcXVpcmUudHMnO1xuXG5jb25zdCB7IFVJSGVscGVyIH0gPSByZXF1aXJlKCdAcm9ja2V0LmNoYXQvYXBwcy1lbmdpbmUvc2VydmVyL21pc2MvVUlIZWxwZXIuanMnKSBhcyB7IFVJSGVscGVyOiB0eXBlb2YgX1VJSGVscGVyIH07XG5jb25zdCB7IFJvb21UeXBlIH0gPSByZXF1aXJlKCdAcm9ja2V0LmNoYXQvYXBwcy1lbmdpbmUvZGVmaW5pdGlvbi9yb29tcy9Sb29tVHlwZS5qcycpIGFzIHsgUm9vbVR5cGU6IHR5cGVvZiBfUm9vbVR5cGUgfTtcbmNvbnN0IHsgUm9ja2V0Q2hhdEFzc29jaWF0aW9uTW9kZWwgfSA9IHJlcXVpcmUoJ0Byb2NrZXQuY2hhdC9hcHBzLWVuZ2luZS9kZWZpbml0aW9uL21ldGFkYXRhL1JvY2tldENoYXRBc3NvY2lhdGlvbnMuanMnKSBhcyB7XG4gICAgUm9ja2V0Q2hhdEFzc29jaWF0aW9uTW9kZWw6IHR5cGVvZiBfUm9ja2V0Q2hhdEFzc29jaWF0aW9uTW9kZWw7XG59O1xuXG5leHBvcnQgY2xhc3MgTW9kaWZ5VXBkYXRlciBpbXBsZW1lbnRzIElNb2RpZnlVcGRhdGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IHNlbmRlckZuOiB0eXBlb2YgTWVzc2VuZ2VyLnNlbmRSZXF1ZXN0KSB7IH1cblxuICAgIHB1YmxpYyBnZXRMaXZlY2hhdFVwZGF0ZXIoKTogSUxpdmVjaGF0VXBkYXRlciB7XG4gICAgICAgIHJldHVybiBuZXcgUHJveHkoXG4gICAgICAgICAgICB7IF9fa2luZDogJ2dldExpdmVjaGF0VXBkYXRlcicgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBnZXQ6XG4gICAgICAgICAgICAgICAgICAgIChfdGFyZ2V0OiB1bmtub3duLCBwcm9wOiBzdHJpbmcpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAoLi4ucGFyYW1zOiB1bmtub3duW10pID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcCA9PT0gJ3RvSlNPTidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuc2VuZGVyRm4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgYWNjZXNzb3I6Z2V0TW9kaWZpZXI6Z2V0VXBkYXRlcjpnZXRMaXZlY2hhdFVwZGF0ZXI6JHtwcm9wfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLnJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVyci5lcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICkgYXMgSUxpdmVjaGF0VXBkYXRlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VXNlclVwZGF0ZXIoKTogSVVzZXJVcGRhdGVyIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eShcbiAgICAgICAgICAgIHsgX19raW5kOiAnZ2V0VXNlclVwZGF0ZXInIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZ2V0OlxuICAgICAgICAgICAgICAgICAgICAoX3RhcmdldDogdW5rbm93biwgcHJvcDogc3RyaW5nKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgKC4uLnBhcmFtczogdW5rbm93bltdKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3AgPT09ICd0b0pTT04nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8ge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnNlbmRlckZuKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogYGFjY2Vzc29yOmdldE1vZGlmaWVyOmdldFVwZGF0ZXI6Z2V0VXNlclVwZGF0ZXI6JHtwcm9wfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLnJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVyci5lcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICkgYXMgSVVzZXJVcGRhdGVyO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBtZXNzYWdlKG1lc3NhZ2VJZDogc3RyaW5nLCBfdXBkYXRlcjogSVVzZXIpOiBQcm9taXNlPElNZXNzYWdlQnVpbGRlcj4ge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZGVyRm4oe1xuICAgICAgICAgICAgbWV0aG9kOiAnYnJpZGdlczpnZXRNZXNzYWdlQnJpZGdlOmRvR2V0QnlJZCcsXG4gICAgICAgICAgICBwYXJhbXM6IFttZXNzYWdlSWQsIEFwcE9iamVjdFJlZ2lzdHJ5LmdldCgnaWQnKV0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBuZXcgTWVzc2FnZUJ1aWxkZXIocmVzcG9uc2UucmVzdWx0IGFzIElNZXNzYWdlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgcm9vbShyb29tSWQ6IHN0cmluZywgX3VwZGF0ZXI6IElVc2VyKTogUHJvbWlzZTxJUm9vbUJ1aWxkZXI+IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRlckZuKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ2JyaWRnZXM6Z2V0Um9vbUJyaWRnZTpkb0dldEJ5SWQnLFxuICAgICAgICAgICAgcGFyYW1zOiBbcm9vbUlkLCBBcHBPYmplY3RSZWdpc3RyeS5nZXQoJ2lkJyldLFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gbmV3IFJvb21CdWlsZGVyKHJlc3BvbnNlLnJlc3VsdCBhcyBJUm9vbSk7XG4gICAgfVxuXG4gICAgcHVibGljIGZpbmlzaChidWlsZGVyOiBJTWVzc2FnZUJ1aWxkZXIgfCBJUm9vbUJ1aWxkZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgc3dpdGNoIChidWlsZGVyLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgUm9ja2V0Q2hhdEFzc29jaWF0aW9uTW9kZWwuTUVTU0FHRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZmluaXNoTWVzc2FnZShidWlsZGVyIGFzIElNZXNzYWdlQnVpbGRlcik7XG4gICAgICAgICAgICBjYXNlIFJvY2tldENoYXRBc3NvY2lhdGlvbk1vZGVsLlJPT006XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbmlzaFJvb20oYnVpbGRlciBhcyBJUm9vbUJ1aWxkZXIpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYnVpbGRlciBwYXNzZWQgdG8gdGhlIE1vZGlmeVVwZGF0ZXIuZmluaXNoIGZ1bmN0aW9uLicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfZmluaXNoTWVzc2FnZShidWlsZGVyOiBJTWVzc2FnZUJ1aWxkZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYnVpbGRlci5nZXRNZXNzYWdlKCk7XG5cbiAgICAgICAgaWYgKCFyZXN1bHQuaWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgbWVzc2FnZSwgY2FuJ3QgdXBkYXRlIGEgbWVzc2FnZSB3aXRob3V0IGFuIGlkLlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcmVzdWx0LnNlbmRlcj8uaWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzZW5kZXIgYXNzaWduZWQgdG8gdGhlIG1lc3NhZ2UuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzdWx0LmJsb2Nrcz8ubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXN1bHQuYmxvY2tzID0gVUlIZWxwZXIuYXNzaWduSWRzKHJlc3VsdC5ibG9ja3MsIEFwcE9iamVjdFJlZ2lzdHJ5LmdldCgnaWQnKSB8fCAnJyk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnNlbmRlckZuKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ2JyaWRnZXM6Z2V0TWVzc2FnZUJyaWRnZTpkb1VwZGF0ZScsXG4gICAgICAgICAgICBwYXJhbXM6IFtyZXN1bHQsIEFwcE9iamVjdFJlZ2lzdHJ5LmdldCgnaWQnKV0sXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX2ZpbmlzaFJvb20oYnVpbGRlcjogSVJvb21CdWlsZGVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGJ1aWxkZXIuZ2V0Um9vbSgpO1xuXG4gICAgICAgIGlmICghcmVzdWx0LmlkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHJvb20sIGNhbid0IHVwZGF0ZSBhIHJvb20gd2l0aG91dCBhbiBpZC5cIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXJlc3VsdC50eXBlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdHlwZSBhc3NpZ25lZCB0byB0aGUgcm9vbS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXN1bHQudHlwZSAhPT0gUm9vbVR5cGUuTElWRV9DSEFUKSB7XG4gICAgICAgICAgICBpZiAoIXJlc3VsdC5jcmVhdG9yIHx8ICFyZXN1bHQuY3JlYXRvci5pZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjcmVhdG9yIGFzc2lnbmVkIHRvIHRoZSByb29tLicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXJlc3VsdC5zbHVnaWZpZWROYW1lIHx8ICFyZXN1bHQuc2x1Z2lmaWVkTmFtZS50cmltKCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc2x1Z2lmaWVkTmFtZSBhc3NpZ25lZCB0byB0aGUgcm9vbS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcmVzdWx0LmRpc3BsYXlOYW1lIHx8ICFyZXN1bHQuZGlzcGxheU5hbWUudHJpbSgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZGlzcGxheU5hbWUgYXNzaWduZWQgdG8gdGhlIHJvb20uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnNlbmRlckZuKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ2JyaWRnZXM6Z2V0Um9vbUJyaWRnZTpkb1VwZGF0ZScsXG4gICAgICAgICAgICBwYXJhbXM6IFtyZXN1bHQsIGJ1aWxkZXIuZ2V0TWVtYmVyc1RvQmVBZGRlZFVzZXJuYW1lcygpLCBBcHBPYmplY3RSZWdpc3RyeS5nZXQoJ2lkJyldLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBZUEsU0FBUyxjQUFjLFFBQVEsZ0NBQWdDO0FBQy9ELFNBQVMsV0FBVyxRQUFRLDZCQUE2QjtBQUN6RCxTQUFTLGlCQUFpQixRQUFRLGdDQUFnQztBQUVsRSxTQUFTLE9BQU8sUUFBUSwwQkFBMEI7QUFFbEQsTUFBTSxFQUFFLFFBQVEsRUFBRSxHQUFHLFFBQVE7QUFDN0IsTUFBTSxFQUFFLFFBQVEsRUFBRSxHQUFHLFFBQVE7QUFDN0IsTUFBTSxFQUFFLDBCQUEwQixFQUFFLEdBQUcsUUFBUTtBQUkvQyxPQUFPLE1BQU07O0VBQ1QsWUFBWSxBQUFpQixRQUFzQyxDQUFFO1NBQXhDLFdB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