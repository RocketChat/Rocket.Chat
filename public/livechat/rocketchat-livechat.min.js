!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="livechat/",n(n.s=0)}([function(t,e,n){"use strict";n.r(e),n.d(e,"validCallbacks",(function(){return g}));function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var c=function(){};window.RocketChat=window.RocketChat||{_:[]};var r,u,s,l,d,f={},m=[],p=!1,h=!1,g=["chat-maximized","chat-minimized","chat-started","chat-ended","pre-chat-form-submit","offline-form-submit","show-widget","hide-widget","assign-agent","agent-status-change","queue-position-change","no-agent-online"],y={all:d=d||new Map,on:function(t,e){var n=d.get(t);n&&n.push(e)||d.set(t,[e])},off:function(t,e){var n=d.get(t);n&&n.splice(n.indexOf(e)>>>0,1)},emit:function(t,e){(d.get(t)||[]).slice().map((function(t){t(e)})),(d.get("*")||[]).slice().map((function(n){n(t,e)}))}};function w(t,e){return-1!==g.indexOf(t)&&y.on(t,e)}function v(t,e){void 0!==e?y.emit(t,e):y.emit(t)}function b(t,e){if(!p)return m.push([t,e]);var n={src:"rocketchat",fn:t,args:e};u.contentWindow.postMessage(n,"*")}var k=function(t){h&&t?(s=document.documentElement.scrollTop,document.body.classList.add("rc-livechat-mobile-full-screen")):(document.body.classList.remove("rc-livechat-mobile-full-screen"),h&&(document.documentElement.scrollTop=s)),t?(r.style.left=h?"0":"auto",r.style.height=h?"100%":"".concat(16+l+16+54,"px"),r.style.width=h?"100%":"".concat(397,"px")):(r.style.left="auto",r.style.width="".concat(86,"px"),r.style.height="".concat(86,"px"))},C=function(){"opened"!==r.dataset.state&&(l=525,k(!0),r.dataset.state="opened",u.focus(),v("chat-maximized"))};function x(){"closed"!==r.dataset.state&&(k(!1),r.dataset.state="closed",v("chat-minimized"))}var S={popup:null,ready:function(){p=!0,m.length>0&&(m.forEach((function(t){b.apply(this,t)})),m=[])},minimizeWindow:function(){x()},restoreWindow:function(){S.popup&&!0!==S.popup.closed&&(S.popup.close(),S.popup=null),C()},openPopout:function(){x(),S.popup=window.open("".concat(f.url).concat(f.url.lastIndexOf("?")>-1?"&":"?","mode=popout"),"livechat-popout","width=".concat(365,", height=").concat(l,", toolbars=no")),S.popup.focus()},openWidget:function(){C()},resizeWidget:function(t){!function(t){l=t,k(!0),r.dataset.state="triggered"}(t)},removeWidget:function(){document.body.removeChild(r)},callback:function(t,e){v(t,e)},showWidget:function(){u.style.display="initial",v("show-widget")},hideWidget:function(){u.style.display="none",v("hide-widget")},resetDocumentStyle:function(){document.body.classList.remove("rc-livechat-mobile-full-screen")},setFullScreenDocumentMobile:function(){h&&document.body.classList.add("rc-livechat-mobile-full-screen")}};function W(t){b("pageVisited",{change:t,location:JSON.parse(JSON.stringify(document.location)),title:document.title})}function O(t,e,n){void 0===n&&(n=!0),b("setCustomField",[t,e,n])}function z(t){b("setTheme",t)}function E(t){b("setDepartment",t)}function A(t){b("setBusinessUnit",t)}function R(t){b("setGuestToken",t)}function j(t){b("setGuestName",t)}function M(t){b("setGuestEmail",t)}function T(t){b("registerGuest",t)}function P(t){b("setAgent",t)}function _(t){b("setLanguage",t)}var G={href:null,title:null},L=function(t){t&&(f.url=t,function(t){(r=document.createElement("div")).className="rocketchat-widget",r.style.position="fixed",r.style.width="".concat(86,"px"),r.style.height="".concat(86,"px"),r.style.maxHeight="100vh",r.style.bottom="0",r.style.right="0",r.style.zIndex="12345",r.dataset.state="closed";var e=document.createElement("div");e.className="rocketchat-container",e.style.width="100%",e.style.height="100%",(u=document.createElement("iframe")).id="rocketchat-iframe",u.allowTransparency="true",u.src=t,u.style.width="100%",u.style.height="100%",u.style.border="none",u.style.backgroundColor="transparent",e.appendChild(u),r.appendChild(e),document.body.appendChild(r);var n=function(t){var e=t.matches;r&&(h=e,k("opened"===r.dataset.state),b("setExpanded",h))},o=window.matchMedia("screen and (max-device-width: 480px)");o.addListener(n),n(o)}(t),window.addEventListener("message",(function(t){if("object"===a(t.data)&&void 0!==t.data.src&&"rocketchat"===t.data.src&&void 0!==S[t.data.fn]&&"function"==typeof S[t.data.fn]){var e=[].concat(t.data.args||[]);c.apply(void 0,["api.".concat(t.data.fn)].concat(o(e))),S[t.data.fn].apply(null,e)}}),!1),setInterval((function(){document.location.href!==G.href&&(W("url"),G.href=document.location.href),document.title!==G.title&&(W("title"),G.title=document.title)}),800))};void 0!==window.initRocket&&(console.warn("initRocket is now deprecated. Please update the livechat code."),L(window.initRocket[0])),void 0!==window.RocketChat.url&&L(window.RocketChat.url);var F=window.RocketChat._;window.RocketChat._.push=function(t){t.call(window.RocketChat.livechat)},window.RocketChat=window.RocketChat._.push,window.RocketChat.livechat={pageVisited:W,setCustomField:O,initialize:function(t){for(var e in t)if(t.hasOwnProperty(e))switch(e){case"customField":var n=t[e];O(n.key,n.value,n.overwrite);continue;case"setCustomFields":if(!Array.isArray(t[e])){console.log("Error: Invalid parameters. Value must be an array of objects");continue}t[e].forEach((function(t){O(t.key,t.value,t.overwrite)}));continue;case"theme":z(t[e]);continue;case"department":E(t[e]);continue;case"businessUnit":A(t[e]);continue;case"guestToken":R(t[e]);continue;case"guestName":j(t[e]);continue;case"guestEmail":M(t[e]);continue;case"registerGuest":T(t[e]);continue;case"language":_(t[e]);continue;case"agent":P(t[e]);continue;default:continue}},setTheme:z,setDepartment:E,clearDepartment:function(){b("clearDepartment")},setGuestToken:R,setGuestName:j,setGuestEmail:M,setAgent:P,registerGuest:T,setLanguage:_,showWidget:function(){b("showWidget")},hideWidget:function(){b("hideWidget")},maximizeWidget:function(){b("maximizeWidget")},minimizeWidget:function(){b("minimizeWidget")},setBusinessUnit:A,clearBusinessUnit:function(){b("clearBusinessUnit")},onChatMaximized:function(t){w("chat-maximized",t)},onChatMinimized:function(t){w("chat-minimized",t)},onChatStarted:function(t){w("chat-started",t)},onChatEnded:function(t){w("chat-ended",t)},onPrechatFormSubmit:function(t){w("pre-chat-form-submit",t)},onOfflineFormSubmit:function(t){w("offline-form-submit",t)},onWidgetShown:function(t){w("show-widget",t)},onWidgetHidden:function(t){w("hide-widget",t)},onAssignAgent:function(t){w("assign-agent",t)},onAgentStatusChange:function(t){w("agent-status-change",t)},onQueuePositionChange:function(t){w("queue-position-change",t)},onServiceOffline:function(t){w("no-agent-online",t)}},F.forEach((function(t){t.call(window.RocketChat.livechat)}))}]);
//# sourceMappingURL=rocketchat-livechat.min.js.map